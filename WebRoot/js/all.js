function Sanitize(){var e,n;for(n=arguments[0]||{},this.config={},this.config.elements=n.elements?n.elements:[],this.config.attributes=n.attributes?n.attributes:{},this.config.attributes[Sanitize.ALL]=this.config.attributes[Sanitize.ALL]?this.config.attributes[Sanitize.ALL]:[],this.config.allow_comments=n.allow_comments?n.allow_comments:!1,this.allowed_elements={},this.config.protocols=n.protocols?n.protocols:{},this.config.add_attributes=n.add_attributes?n.add_attributes:{},this.dom=n.dom?n.dom:document,e=0;this.config.elements.length>e;e++)this.allowed_elements[this.config.elements[e]]=!0;if(this.config.remove_element_contents={},this.config.remove_all_contents=!1,n.remove_contents)if(n.remove_contents instanceof Array)for(e=0;n.remove_contents.length>e;e++)this.config.remove_element_contents[n.remove_contents[e]]=!0;else this.config.remove_all_contents=!0;this.transformers=n.transformers?n.transformers:[]}if(function(){var e=this,t=e._,n={},i=Array.prototype,a=Object.prototype,s=Function.prototype,o=i.push,r=i.slice,l=i.concat,c=a.toString,d=a.hasOwnProperty,u=i.forEach,p=i.map,f=i.reduce,h=i.reduceRight,m=i.filter,_=i.every,g=i.some,v=i.indexOf,b=i.lastIndexOf,y=Array.isArray,w=Object.keys,k=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var j=x.each=x.forEach=function(e,t,i){if(null==e)return e;if(u&&e.forEach===u)e.forEach(t,i);else if(e.length===+e.length){for(var a=0,s=e.length;s>a;a++)if(t.call(i,e[a],a,e)===n)return}else for(var o=x.keys(e),a=0,s=o.length;s>a;a++)if(t.call(i,e[o[a]],o[a],e)===n)return;return e};x.map=x.collect=function(e,t,n){var i=[];return null==e?i:p&&e.map===p?e.map(t,n):(j(e,function(e,a,s){i.push(t.call(n,e,a,s))}),i)};var $="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,i){var a=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return i&&(t=x.bind(t,i)),a?e.reduce(t,n):e.reduce(t);if(j(e,function(e,s,o){a?n=t.call(i,n,e,s,o):(n=e,a=!0)}),!a)throw new TypeError($);return n},x.reduceRight=x.foldr=function(e,t,n,i){var a=arguments.length>2;if(null==e&&(e=[]),h&&e.reduceRight===h)return i&&(t=x.bind(t,i)),a?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(j(e,function(r,l,c){l=o?o[--s]:--s,a?n=t.call(i,n,e[l],l,c):(n=e[l],a=!0)}),!a)throw new TypeError($);return n},x.find=x.detect=function(e,t,n){var i;return C(e,function(e,a,s){return t.call(n,e,a,s)?(i=e,!0):void 0}),i},x.filter=x.select=function(e,t,n){var i=[];return null==e?i:m&&e.filter===m?e.filter(t,n):(j(e,function(e,a,s){t.call(n,e,a,s)&&i.push(e)}),i)},x.reject=function(e,t,n){return x.filter(e,function(e,i,a){return!t.call(n,e,i,a)},n)},x.every=x.all=function(e,t,i){t||(t=x.identity);var a=!0;return null==e?a:_&&e.every===_?e.every(t,i):(j(e,function(e,s,o){return(a=a&&t.call(i,e,s,o))?void 0:n}),!!a)};var C=x.some=x.any=function(e,t,i){t||(t=x.identity);var a=!1;return null==e?a:g&&e.some===g?e.some(t,i):(j(e,function(e,s,o){return a||(a=t.call(i,e,s,o))?n:void 0}),!!a)};x.contains=x.include=function(e,t){return null==e?!1:v&&e.indexOf===v?-1!=e.indexOf(t):C(e,function(e){return e===t})},x.invoke=function(e,t){var n=r.call(arguments,2),i=x.isFunction(t);return x.map(e,function(e){return(i?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);var i=-1/0,a=-1/0;return j(e,function(e,s,o){var r=t?t.call(n,e,s,o):e;r>a&&(i=e,a=r)}),i},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);var i=1/0,a=1/0;return j(e,function(e,s,o){var r=t?t.call(n,e,s,o):e;a>r&&(i=e,a=r)}),i},x.shuffle=function(e){var t,n=0,i=[];return j(e,function(e){t=x.random(n++),i[n-1]=i[t],i[t]=e}),i},x.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var S=function(e){return null==e?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=S(t),x.pluck(x.map(e,function(e,i,a){return{value:e,index:i,criteria:t.call(n,e,i,a)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var D=function(e){return function(t,n,i){var a={};return n=S(n),j(t,function(s,o){var r=n.call(i,s,o,t);e(a,r,s)}),a}};x.groupBy=D(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=D(function(e,t,n){e[t]=n}),x.countBy=D(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,i){n=S(n);for(var a=n.call(i,t),s=0,o=e.length;o>s;){var r=s+o>>>1;a>n.call(i,e[r])?s=r+1:o=r}return s},x.toArray=function(e){return e?x.isArray(e)?r.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:r.call(e,0,t)},x.initial=function(e,t,n){return r.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:r.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return r.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var E=function(e,t,n){return t&&x.every(e,x.isArray)?l.apply(n,e):(j(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):E(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return E(e,t,[])},x.without=function(e){return x.difference(e,r.call(arguments,1))},x.partition=function(e,t,n){t=S(t);var i=[],a=[];return j(e,function(e){(t.call(n,e)?i:a).push(e)}),[i,a]},x.uniq=x.unique=function(e,t,n,i){x.isFunction(t)&&(i=n,n=t,t=!1);var a=n?x.map(e,n,i):e,s=[],o=[];return j(a,function(n,i){(t?i&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[i]))}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=r.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=l.apply(i,r.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(null==e)return{};for(var n={},i=0,a=e.length;a>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var i=0,a=e.length;if(n){if("number"!=typeof n)return i=x.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,a+n):n}if(v&&e.indexOf===v)return e.indexOf(t,n);for(;a>i;i++)if(e[i]===t)return i;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(b&&e.lastIndexOf===b)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var a=i?n:e.length;a--;)if(e[a]===t)return a;return-1},x.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),a=0,s=new Array(i);i>a;)s[a++]=e,e+=n;return s};var T=function(){};x.bind=function(e,t){var n,i;if(k&&e.bind===k)return k.apply(e,r.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=r.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(r.call(arguments)));T.prototype=e.prototype;var a=new T;T.prototype=null;var s=e.apply(a,n.concat(r.call(arguments)));return Object(s)===s?s:a}},x.partial=function(e){var t=r.call(arguments,1);return function(){for(var n=0,i=t.slice(),a=0,s=i.length;s>a;a++)i[a]===x&&(i[a]=arguments[n++]);for(;arguments.length>n;)i.push(arguments[n++]);return e.apply(this,i)}},x.bindAll=function(e){var t=r.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return j(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var i=t.apply(this,arguments);return x.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},x.delay=function(e,t){var n=r.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(r.call(arguments,1)))},x.throttle=function(e,t,n){var i,a,s,o=null,r=0;n||(n={});var l=function(){r=n.leading===!1?0:x.now(),o=null,s=e.apply(i,a),i=a=null};return function(){var c=x.now();r||n.leading!==!1||(r=c);var d=t-(c-r);return i=this,a=arguments,0>=d?(clearTimeout(o),o=null,r=c,s=e.apply(i,a),i=a=null):o||n.trailing===!1||(o=setTimeout(l,d)),s}},x.debounce=function(e,t,n){var i,a,s,o,r,l=function(){var c=x.now()-o;t>c?i=setTimeout(l,t-c):(i=null,n||(r=e.apply(s,a),s=a=null))};return function(){s=this,a=arguments,o=x.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(r=e.apply(s,a),s=a=null),r}},x.once=function(e){var n,t=!1;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){return 1>--e?t.apply(this,arguments):void 0}},x.keys=function(e){if(!x.isObject(e))return[];if(w)return w(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){for(var t=x.keys(e),n=t.length,i=new Array(n),a=0;n>a;a++)i[a]=e[t[a]];return i},x.pairs=function(e){for(var t=x.keys(e),n=t.length,i=new Array(n),a=0;n>a;a++)i[a]=[t[a],e[t[a]]];return i},x.invert=function(e){for(var t={},n=x.keys(e),i=0,a=n.length;a>i;i++)t[e[n[i]]]=n[i];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return j(r.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=l.apply(i,r.call(arguments,1));return j(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=l.apply(i,r.call(arguments,1));for(var a in e)x.contains(n,a)||(t[a]=e[a]);return t},x.defaults=function(e){return j(r.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var z=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var a=c.call(e);if(a!=c.call(t))return!1;switch(a){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return i[s]==t;var o=e.constructor,r=t.constructor;if(o!==r&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(r)&&r instanceof r)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),i.push(t);var l=0,d=!0;if("[object Array]"==a){if(l=e.length,d=l==t.length)for(;l--&&(d=z(e[l],t[l],n,i)););}else{for(var u in e)if(x.has(e,u)&&(l++,!(d=x.has(t,u)&&z(e[u],t[u],n,i))))break;if(d){for(u in t)if(x.has(t,u)&&!l--)break;d=!l}}return n.pop(),i.pop(),d};x.isEqual=function(e,t){return z(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!(!e||1!==e.nodeType)},x.isArray=y||function(e){return"[object Array]"==c.call(e)},x.isObject=function(e){return e===Object(e)},j(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!(!e||!x.has(e,"callee"))}),x.isFunction=function(e){return"function"==typeof e},x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return d.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){for(var i=Array(Math.max(0,e)),a=0;e>a;a++)i[a]=t.call(n,a);return i},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};M.unescape=x.invert(M.escape);var P={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(P[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(null==e)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){j(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),N.call(this,n.apply(x,e))}})};var A=0;x.uniqueId=function(e){var t=++A+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var i;n=x.defaults({},n,x.templateSettings);var a=new RegExp([(n.escape||O).source,(n.interpolate||O).source,(n.evaluate||O).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(a,function(t,n,i,a,r){return o+=e.slice(s,r).replace(F,function(e){return"\\"+I[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),a&&(o+="';\n"+a+"\n__p+='"),s=r+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(n.variable||"obj","_",o)}catch(r){throw r.source=o,r}if(t)return i(t,x);var l=function(e){return i.call(this,e,x)};return l.source="function("+(n.variable||"obj")+"){\n"+o+"}",l},x.chain=function(e){return x(e).chain()};var N=function(e){return this._chain?x(e).chain():e};x.mixin(x),j(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],N.call(this,n)}}),j(["concat","join","slice"],function(e){var t=i[e];x.prototype[e]=function(){return N.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}.call(this),function(e,t){function A(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function I(e){var t=O[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}function H(e,n,i,a){if(b.acceptData(e)){var s,o,r=b.expando,l="string"==typeof n,c=e.nodeType,u=c?b.cache:e,p=c?e[r]:e[r]&&r;if(p&&u[p]&&(a||u[p].data)||!l||i!==t)return p||(c?e[r]=p=d.pop()||b.guid++:p=r),u[p]||(u[p]={},c||(u[p].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(a?u[p]=b.extend(u[p],n):u[p].data=b.extend(u[p].data,n)),s=u[p],a||(s.data||(s.data={}),s=s.data),i!==t&&(s[b.camelCase(n)]=i),l?(o=s[n],null==o&&(o=s[b.camelCase(n)])):o=s,o}}function L(e,t,n){if(b.acceptData(e)){var i,a,s,o=e.nodeType,r=o?b.cache:e,l=o?e[b.expando]:b.expando;if(r[l]){if(t&&(s=n?r[l]:r[l].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in s?t=[t]:(t=b.camelCase(t),t=t in s?[t]:t.split(" "));for(i=0,a=t.length;a>i;i++)delete s[t[i]];if(!(n?q:b.isEmptyObject)(s))return}(n||(delete r[l].data,q(r[l])))&&(o?b.cleanData([e],!0):b.support.deleteExpando||r!=r.window?delete r[l]:r[l]=null)}}}function R(e,n,i){if(i===t&&1===e.nodeType){var a="data-"+n.replace(N,"-$1").toLowerCase();if(i=e.getAttribute(a),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:F.test(i)?b.parseJSON(i):i}catch(s){}b.data(e,n,i)}else i=t}return i}function q(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function at(){return!0}function st(){return!1}function ut(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function pt(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,i){var a=!!t.call(e,i,e);return a===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=b.grep(e,function(e){return 1===e.nodeType});if(lt.test(t))return b.filter(t,i,!n);t=b.filter(t,i)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function ft(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function zt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Mt(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Pt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function At(e,t){for(var n,i=0;null!=(n=e[i]);i++)b._data(n,"globalEval",!t||b._data(t[i],"globalEval"))}function Ot(e,t){if(1===t.nodeType&&b.hasData(e)){var n,i,a,s=b._data(e),o=b._data(t,s),r=s.events;if(r){delete o.handle,o.events={};for(n in r)for(i=0,a=r[n].length;a>i;i++)b.event.add(t,n,r[n][i])}o.data&&(o.data=b.extend({},o.data))}}function It(e,t){var n,i,a;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){a=b._data(t);for(i in a.events)b.removeEvent(t,i,a.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Mt(t).text=e.text,Pt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&xt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function Ft(e,n){var i,s,o=0,r=typeof e.getElementsByTagName!==a?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==a?e.querySelectorAll(n||"*"):t;if(!r)for(r=[],i=e.childNodes||e;null!=(s=i[o]);o++)!n||b.nodeName(s,n)?r.push(s):b.merge(r,Ft(s,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],r):r}function Nt(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,a=en.length;a--;)if(t=en[a]+n,t in e)return t;return i}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function an(e,t){for(var n,i,a,s=[],o=0,r=e.length;r>o;o++)i=e[o],i.style&&(s[o]=b._data(i,"olddisplay"),n=i.style.display,t?(s[o]||"none"!==n||(i.style.display=""),""===i.style.display&&nn(i)&&(s[o]=b._data(i,"olddisplay",ln(i.nodeName)))):s[o]||(a=nn(i),(n&&"none"!==n||!a)&&b._data(i,"olddisplay",a?n:b.css(i,"display"))));for(o=0;r>o;o++)i=e[o],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[o]||"":"none"));return e}function sn(e,t,n){var i=Vt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function on(e,t,n,i,a){for(var s=n===(i?"border":"content")?4:"width"===t?1:0,o=0;4>s;s+=2)"margin"===n&&(o+=b.css(e,n+Jt[s],!0,a)),i?("content"===n&&(o-=b.css(e,"padding"+Jt[s],!0,a)),"margin"!==n&&(o-=b.css(e,"border"+Jt[s]+"Width",!0,a))):(o+=b.css(e,"padding"+Jt[s],!0,a),"padding"!==n&&(o+=b.css(e,"border"+Jt[s]+"Width",!0,a)));return o}function rn(e,t,n){var i=!0,a="width"===t?e.offsetWidth:e.offsetHeight,s=Lt(e),o=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,s);if(0>=a||null==a){if(a=Rt(e,t,s),(0>a||null==a)&&(a=e.style[t]),Xt.test(a))return a;i=o&&(b.support.boxSizingReliable||a===e.style[t]),a=parseFloat(a)||0}return a+on(e,t,n||(o?"border":"content"),i,s)+"px"}function ln(e){var t=s,n=Kt[e];return n||(n=cn(e,t),"none"!==n&&n||(Ht=(Ht||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Ht[0].contentWindow||Ht[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=cn(e,t),Ht.detach()),Kt[e]=n),n}function cn(e,t){var n=b(t.createElement(e)).appendTo(t.body),i=b.css(n[0],"display");return n.remove(),i}function mn(e,t,n,i){var a;if(b.isArray(t))b.each(t,function(t,a){n||un.test(e)?i(e,a):mn(e+"["+("object"==typeof a?t:"")+"]",a,n,i)});else if(n||"object"!==b.type(t))i(e,t);else for(a in t)mn(e+"["+a+"]",t[a],n,i)}function Mn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,a=0,s=t.toLowerCase().match(w)||[];if(b.isFunction(n))for(;i=s[a++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Pn(e,t,n,i){function o(r){var l;return a[r]=!0,b.each(e[r]||[],function(e,r){var c=r(t,n,i);return"string"!=typeof c||s||a[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}var a={},s=e===En;return o(t.dataTypes[0])||!a["*"]&&o("*")}function An(e,n){var i,a,s=b.ajaxSettings.flatOptions||{};for(a in n)n[a]!==t&&((s[a]?e:i||(i={}))[a]=n[a]);return i&&b.extend(!0,e,i),e}function On(e,n,i){var a,s,o,r,l=e.contents,c=e.dataTypes,d=e.responseFields;for(r in d)r in i&&(n[d[r]]=i[r]);for(;"*"===c[0];)c.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(r in l)if(l[r]&&l[r].test(s)){c.unshift(r);break}if(c[0]in i)o=c[0];else{for(r in i){if(!c[0]||e.converters[r+" "+c[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==c[0]&&c.unshift(o),i[o]):void 0}function In(e,t){var n,i,a,s,o={},r=0,l=e.dataTypes.slice(),c=l[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l[1])for(a in e.converters)o[a.toLowerCase()]=e.converters[a];for(;i=l[++r];)if("*"!==i){if("*"!==c&&c!==i){if(a=o[c+" "+i]||o["* "+i],!a)for(n in o)if(s=n.split(" "),s[1]===i&&(a=o[c+" "+s[0]]||o["* "+s[0]])){a===!0?a=o[n]:o[n]!==!0&&(i=s[0],l.splice(r--,0,i));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+c+" to "+i}}}c=i}return{state:"success",data:t}}function Wn(){try{return new e.XMLHttpRequest}catch(t){}}function Yn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Zn(){return setTimeout(function(){Un=t}),Un=b.now()}function Jn(e,t){b.each(t,function(t,n){for(var i=(Qn[t]||[]).concat(Qn["*"]),a=0,s=i.length;s>a;a++)if(i[a].call(e,t,n))return})}function ei(e,t,n){var i,a,s=0,o=Kn.length,r=b.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=Un||Zn(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,s=1-i,o=0,l=c.tweens.length;l>o;o++)c.tweens[o].run(s);return r.notifyWith(e,[c,s,n]),1>s&&l?n:(r.resolveWith(e,[c]),!1)},c=r.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Un||Zn(),duration:n.duration,tweens:[],createTween:function(t,n){var i=b.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(a)return this;for(a=!0;i>n;n++)c.tweens[n].run(1);return t?r.resolveWith(e,[c,t]):r.rejectWith(e,[c,t]),this}}),d=c.props;for(ti(d,c.opts.specialEasing);o>s;s++)if(i=Kn[s].call(c,e,d,c.opts))return i;return Jn(c,d),b.isFunction(c.opts.start)&&c.opts.start.call(e,c),b.fx.timer(b.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function ti(e,t){var n,i,a,s,o;for(a in e)if(i=b.camelCase(a),s=t[i],n=e[a],b.isArray(n)&&(s=n[1],n=e[a]=n[0]),a!==i&&(e[i]=n,delete e[a]),o=b.cssHooks[i],o&&"expand"in o){n=o.expand(n),delete e[i];for(a in n)a in e||(e[a]=n[a],t[a]=s)}else t[i]=s}function ni(e,t,n){var i,a,s,o,r,l,c,d,u,p=this,f=e.style,h={},m=[],_=e.nodeType&&nn(e);n.queue||(d=b._queueHooks(e,"fx"),null==d.unqueued&&(d.unqueued=0,u=d.empty.fire,d.empty.fire=function(){d.unqueued||u()}),d.unqueued++,p.always(function(){p.always(function(){d.unqueued--,b.queue(e,"fx").length||d.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==ln(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",b.support.shrinkWrapBlocks||p.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(a in t)if(o=t[a],Vn.exec(o)){if(delete t[a],l=l||"toggle"===o,o===(_?"hide":"show"))continue;m.push(a)}if(s=m.length){r=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in r&&(_=r.hidden),l&&(r.hidden=!_),_?b(e).show():p.done(function(){b(e).hide()}),p.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(a=0;s>a;a++)i=m[a],c=p.createTween(i,_?r[i]:0),h[i]=r[i]||b.style(e,i),i in r||(r[i]=c.start,_&&(c.end=c.start,c.start="width"===i||"height"===i?1:0))}}function ii(e,t,n,i,a){return new ii.prototype.init(e,t,n,i,a)}function ai(e,t){var n,i={height:e},a=0;for(t=t?1:0;4>a;a+=2-t)n=Jt[a],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function si(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,i,a=typeof t,s=e.document,o=e.location,r=e.jQuery,l=e.$,c={},d=[],u="1.9.1",p=d.concat,f=d.push,h=d.slice,m=d.indexOf,_=c.toString,g=c.hasOwnProperty,v=u.trim,b=function(e,t){return new b.fn.init(e,t,i)},y=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,k=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,j=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,$=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,D=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,E=/^-ms-/,T=/-([\da-z])/gi,z=function(e,t){return t.toUpperCase()},M=function(e){(s.addEventListener||"load"===e.type||"complete"===s.readyState)&&(P(),b.ready())},P=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",M,!1),e.removeEventListener("load",M,!1)):(s.detachEvent("onreadystatechange",M),e.detachEvent("onload",M))};b.fn=b.prototype={jquery:u,constructor:b,init:function(e,n,i){var a,o;if(!e)return this;if("string"==typeof e){if(a="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:x.exec(e),!a||!a[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(a[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(a[1],n&&n.nodeType?n.ownerDocument||n:s,!0)),j.test(a[1])&&b.isPlainObject(n))for(a in n)b.isFunction(this[a])?this[a](n[a]):this.attr(a,n[a]);return this}if(o=s.getElementById(a[2]),o&&o.parentNode){if(o.id!==a[2])return i.find(e);this.length=1,this[0]=o}return this.context=s,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,i,a,s,o,r=arguments[0]||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof r&&(d=r,r=arguments[1]||{},l=2),"object"==typeof r||b.isFunction(r)||(r={}),c===l&&(r=this,--l);c>l;l++)if(null!=(s=arguments[l]))for(a in s)e=r[a],i=s[a],r!==i&&(d&&i&&(b.isPlainObject(i)||(n=b.isArray(i)))?(n?(n=!1,o=e&&b.isArray(e)?e:[]):o=e&&b.isPlainObject(e)?e:{},r[a]=b.extend(d,o,i)):i!==t&&(r[a]=i));return r},b.extend({noConflict:function(t){return e.$===b&&(e.$=l),t&&e.jQuery===b&&(e.jQuery=r),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!s.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?c[_.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||g.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||s;var i=j.exec(e),a=!n&&[];return i?[t.createElement(i[1])]:(i=b.buildFragment([e],t,a),a&&b(a).remove(),b.merge([],i.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=b.trim(t),t&&$.test(t.replace(S,"@").replace(D,"]").replace(C,"")))?new Function("return "+t)():(b.error("Invalid JSON: "+t),void 0)},parseXML:function(n){var i,a;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(a=new DOMParser,i=a.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(s){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(E,"ms-").replace(T,z)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i,a=0,s=e.length,o=A(e);if(n){if(o)for(;s>a&&(i=t.apply(e[a],n),i!==!1);a++);else for(a in e)if(i=t.apply(e[a],n),i===!1)break}else if(o)for(;s>a&&(i=t.call(e[a],a,e[a]),i!==!1);a++);else for(a in e)if(i=t.call(e[a],a,e[a]),i===!1)break;return e},trim:v&&!v.call("ï»¿Â?")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(k,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(A(Object(e))?b.merge(n,"string"==typeof e?[e]:e):f.call(n,e)),n},inArray:function(e,t,n){var i;if(t){if(m)return m.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,a=e.length,s=0;if("number"==typeof i)for(;i>s;s++)e[a++]=n[s];else for(;n[s]!==t;)e[a++]=n[s++];return e.length=a,e},grep:function(e,t,n){var i,a=[],s=0,o=e.length;for(n=!!n;o>s;s++)i=!!t(e[s],s),n!==i&&a.push(e[s]);return a},map:function(e,t,n){var i,a=0,s=e.length,o=A(e),r=[];if(o)for(;s>a;a++)i=t(e[a],a,n),null!=i&&(r[r.length]=i);
else for(a in e)i=t(e[a],a,n),null!=i&&(r[r.length]=i);return p.apply([],r)},guid:1,proxy:function(e,n){var i,a,s;return"string"==typeof n&&(s=e[n],n=e,e=s),b.isFunction(e)?(i=h.call(arguments,2),a=function(){return e.apply(n||this,i.concat(h.call(arguments)))},a.guid=e.guid=e.guid||b.guid++,a):t},access:function(e,n,i,a,s,o,r){var l=0,c=e.length,d=null==i;if("object"===b.type(i)){s=!0;for(l in i)b.access(e,n,l,i[l],!0,o,r)}else if(a!==t&&(s=!0,b.isFunction(a)||(r=!0),d&&(r?(n.call(e,a),n=null):(d=n,n=function(e,t,n){return d.call(b(e),n)})),n))for(;c>l;l++)n(e[l],i,r?a:a.call(e[l],l,n(e[l],i)));return s?e:d?n.call(e):c?n(e[0],i):o},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===s.readyState)setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",M,!1),e.addEventListener("load",M,!1);else{s.attachEvent("onreadystatechange",M),e.attachEvent("onload",M);var i=!1;try{i=null==e.frameElement&&s.documentElement}catch(a){}i&&i.doScroll&&function o(){if(!b.isReady){try{i.doScroll("left")}catch(e){return setTimeout(o,50)}P(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()}),i=b(s);var O={};b.Callbacks=function(e){e="string"==typeof e?O[e]||I(e):b.extend({},e);var n,i,a,s,o,r,l=[],c=!e.once&&[],d=function(t){for(i=e.memory&&t,a=!0,o=r||0,r=0,s=l.length,n=!0;l&&s>o;o++)if(l[o].apply(t[0],t[1])===!1&&e.stopOnFalse){i=!1;break}n=!1,l&&(c?c.length&&d(c.shift()):i?l=[]:u.disable())},u={add:function(){if(l){var t=l.length;(function a(t){b.each(t,function(t,n){var i=b.type(n);"function"===i?e.unique&&u.has(n)||l.push(n):n&&n.length&&"string"!==i&&a(n)})})(arguments),n?s=l.length:i&&(r=t,d(i))}return this},remove:function(){return l&&b.each(arguments,function(e,t){for(var i;(i=b.inArray(t,l,i))>-1;)l.splice(i,1),n&&(s>=i&&s--,o>=i&&o--)}),this},has:function(e){return e?b.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],this},disable:function(){return l=c=i=t,this},disabled:function(){return!l},lock:function(){return c=t,i||u.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!l||a&&!c||(n?c.push(t):d(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!a}};return u},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,s){var o=s[0],r=b.isFunction(e[t])&&e[t];a[s[1]](function(){var e=r&&r.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===i?n.promise():this,r?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,i):i}},a={};return i.pipe=i.then,b.each(t,function(e,s){var o=s[2],r=s[3];i[s[1]]=o.add,r&&o.add(function(){n=r},t[1^e][2].disable,t[2][2].lock),a[s[0]]=function(){return a[s[0]+"With"](this===a?i:this,arguments),this},a[s[0]+"With"]=o.fireWith}),i.promise(a),e&&e.call(a,a),a},when:function(e){var r,l,c,t=0,n=h.call(arguments),i=n.length,a=1!==i||e&&b.isFunction(e.promise)?i:0,s=1===a?e:b.Deferred(),o=function(e,t,n){return function(i){t[e]=this,n[e]=arguments.length>1?h.call(arguments):i,n===r?s.notifyWith(t,n):--a||s.resolveWith(t,n)}};if(i>1)for(r=new Array(i),l=new Array(i),c=new Array(i);i>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(o(t,c,n)).fail(s.reject).progress(o(t,l,r)):--a;return a||s.resolveWith(c,n),s.promise()}}),b.support=function(){var t,n,i,o,r,l,c,d,u,p,f=s.createElement("div");if(f.setAttribute("className","t"),f.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=f.getElementsByTagName("*"),i=f.getElementsByTagName("a")[0],!n||!i||!n.length)return{};r=s.createElement("select"),c=r.appendChild(s.createElement("option")),o=f.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==f.className,leadingWhitespace:3===f.firstChild.nodeType,tbody:!f.getElementsByTagName("tbody").length,htmlSerialize:!!f.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:!!o.value,optSelected:c.selected,enctype:!!s.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==s.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===s.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!c.disabled;try{delete f.test}catch(h){t.deleteExpando=!1}o=s.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),l=s.createDocumentFragment(),l.appendChild(o),t.appendChecked=o.checked,t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,f.attachEvent&&(f.attachEvent("onclick",function(){t.noCloneEvent=!1}),f.cloneNode(!0).click());for(p in{submit:!0,change:!0,focusin:!0})f.setAttribute(d="on"+p,"t"),t[p+"Bubbles"]=d in e||f.attributes[d].expando===!1;return f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===f.style.backgroundClip,b(function(){var n,i,o,r="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=s.getElementsByTagName("body")[0];l&&(n=s.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(n).appendChild(f),f.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=f.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=u&&0===o[0].offsetHeight,f.innerHTML="",f.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===f.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==l.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(f,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(f,null)||{width:"4px"}).width,i=f.appendChild(s.createElement("div")),i.style.cssText=f.style.cssText=r,i.style.marginRight=i.style.width="0",f.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),typeof f.style.zoom!==a&&(f.innerHTML="",f.style.cssText=r+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===f.offsetWidth,f.style.display="block",f.innerHTML="<div></div>",f.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==f.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(n),n=f=o=i=null)}),n=r=l=c=i=o=null,t}();var F=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,N=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(u+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!q(e)},data:function(e,t,n){return H(e,t,n)},removeData:function(e,t){return L(e,t)},_data:function(e,t,n){return H(e,t,n,!0)},_removeData:function(e,t){return L(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var i,a,s=this[0],o=0,r=null;if(e===t){if(this.length&&(r=b.data(s),1===s.nodeType&&!b._data(s,"parsedAttrs"))){for(i=s.attributes;i.length>o;o++)a=i[o].name,a.indexOf("data-")||(a=b.camelCase(a.slice(5)),R(s,a,r[a]));b._data(s,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?s?R(s,e,b.data(s,e)):null:(this.each(function(){b.data(this,e,n)}),void 0)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=b._data(e,t),n&&(!i||b.isArray(n)?i=b._data(e,t,b.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),i=n.length,a=n.shift(),s=b._queueHooks(e,t),o=function(){b.dequeue(e,t)};"inprogress"===a&&(a=n.shift(),i--),s.cur=a,a&&("fx"===t&&n.unshift("inprogress"),delete s.stop,a.call(e,o,s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),i>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,a=1,s=b.Deferred(),o=this,r=this.length,l=function(){--a||s.resolveWith(o,[o])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";r--;)i=b._data(o[r],e+"queueHooks"),i&&i.empty&&(a++,i.empty.add(l));return l(),s.promise(n)}});var W,Y,U=/[\t\r\n]/g,B=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,X=/^(?:a|area)$/i,G=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,K=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,Z=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,a,s,o=0,r=this.length,l="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(w)||[];r>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):" ")){for(s=0;a=t[s++];)0>i.indexOf(" "+a+" ")&&(i+=a+" ");n.className=b.trim(i)}return this},removeClass:function(e){var t,n,i,a,s,o=0,r=this.length,l=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(w)||[];r>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):"")){for(s=0;a=t[s++];)for(;i.indexOf(" "+a+" ")>=0;)i=i.replace(" "+a+" "," ");n.className=e?b.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var s,o=0,r=b(this),l=t,c=e.match(w)||[];s=c[o++];)l=i?l:!r.hasClass(s),r[l?"addClass":"removeClass"](s);else(n===a||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(U," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,a,s=this[0];{if(arguments.length)return a=b.isFunction(e),this.each(function(n){var s,o=b(this);1===this.nodeType&&(s=a?e.call(this,n,o.val()):e,null==s?s="":"number"==typeof s?s+="":b.isArray(s)&&(s=b.map(s,function(e){return null==e?"":e+""})),i=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,s,"value")!==t||(this.value=s))});if(s)return i=b.valHooks[s.type]||b.valHooks[s.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace(B,""):null==n?"":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,i=e.options,a=e.selectedIndex,s="select-one"===e.type||0>a,o=s?null:[],r=s?a+1:i.length,l=0>a?r:s?a:0;r>l;l++)if(n=i[l],!(!n.selected&&l!==a||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,i){var s,o,r,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return typeof e.getAttribute===a?b.prop(e,n,i):(o=1!==l||!b.isXMLDoc(e),o&&(n=n.toLowerCase(),s=b.attrHooks[n]||(G.test(n)?Y:W)),i===t?s&&o&&"get"in s&&null!==(r=s.get(e,n))?r:(typeof e.getAttribute!==a&&(r=e.getAttribute(n)),null==r?t:r):null!==i?s&&o&&"set"in s&&(r=s.set(e,i,n))!==t?r:(e.setAttribute(n,i+""),i):(b.removeAttr(e,n),void 0))},removeAttr:function(e,t){var n,i,a=0,s=t&&t.match(w);if(s&&1===e.nodeType)for(;n=s[a++];)i=b.propFix[n]||n,G.test(n)?!Q&&K.test(n)?e[b.camelCase("default-"+n)]=e[i]=!1:e[i]=!1:b.attr(e,n,""),e.removeAttribute(Q?n:i)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var a,s,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return o=1!==r||!b.isXMLDoc(e),o&&(n=b.propFix[n]||n,s=b.propHooks[n]),i!==t?s&&"set"in s&&(a=s.set(e,i,n))!==t?a:e[n]=i:s&&"get"in s&&null!==(a=s.get(e,n))?a:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||X.test(e.nodeName)&&e.href?0:t}}}}),Y={get:function(e,n){var i=b.prop(e,n),a="boolean"==typeof i&&e.getAttribute(n),s="boolean"==typeof i?Z&&Q?null!=a:K.test(n)?e[b.camelCase("default-"+n)]:!!a:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):Z&&Q||!K.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},Z&&Q||(b.attrHooks.value={get:function(e,n){var i=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:i&&i.specified?i.value:t},set:function(e,t,n){return b.nodeName(e,"input")?(e.defaultValue=t,void 0):W&&W.set(e,t,n)}}),Q||(W=b.valHooks.button={get:function(e,n){var i=e.getAttributeNode(n);return i&&("id"===n||"name"===n||"coords"===n?""!==i.value:i.specified)?i.value:t},set:function(e,n,i){var a=e.getAttributeNode(i);return a||e.setAttributeNode(a=e.ownerDocument.createAttribute(i)),a.value=n+="","value"===i||n===e.getAttribute(i)?n:t}},b.attrHooks.contenteditable={get:W.get,set:function(e,t,n){W.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,t){b.attrHooks[t]=b.extend(b.attrHooks[t],{set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return null==i?t:i}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,t){return b.isArray(t)?e.checked=b.inArray(b(e).val(),t)>=0:void 0}})});var J=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,it=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,i,s,o){var r,l,c,d,u,p,f,h,m,_,g,v=b._data(e);if(v){for(i.handler&&(d=i,i=d.handler,o=d.selector),i.guid||(i.guid=b.guid++),(l=v.events)||(l=v.events={}),(p=v.handle)||(p=v.handle=function(e){return typeof b===a||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(p.elem,arguments)},p.elem=e),n=(n||"").match(w)||[""],c=n.length;c--;)r=it.exec(n[c])||[],m=g=r[1],_=(r[2]||"").split(".").sort(),u=b.event.special[m]||{},m=(o?u.delegateType:u.bindType)||m,u=b.event.special[m]||{},f=b.extend({type:m,origType:g,data:s,handler:i,guid:i.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:_.join(".")},d),(h=l[m])||(h=l[m]=[],h.delegateCount=0,u.setup&&u.setup.call(e,s,_,p)!==!1||(e.addEventListener?e.addEventListener(m,p,!1):e.attachEvent&&e.attachEvent("on"+m,p))),u.add&&(u.add.call(e,f),f.handler.guid||(f.handler.guid=i.guid)),o?h.splice(h.delegateCount++,0,f):h.push(f),b.event.global[m]=!0;e=null}},remove:function(e,t,n,i,a){var s,o,r,l,c,d,u,p,f,h,m,_=b.hasData(e)&&b._data(e);if(_&&(d=_.events)){for(t=(t||"").match(w)||[""],c=t.length;c--;)if(r=it.exec(t[c])||[],f=m=r[1],h=(r[2]||"").split(".").sort(),f){for(u=b.event.special[f]||{},f=(i?u.delegateType:u.bindType)||f,p=d[f]||[],r=r[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=p.length;s--;)o=p[s],!a&&m!==o.origType||n&&n.guid!==o.guid||r&&!r.test(o.namespace)||i&&i!==o.selector&&("**"!==i||!o.selector)||(p.splice(s,1),o.selector&&p.delegateCount--,u.remove&&u.remove.call(e,o));l&&!p.length&&(u.teardown&&u.teardown.call(e,h,_.handle)!==!1||b.removeEvent(e,f,_.handle),delete d[f])}else for(f in d)b.event.remove(e,f+t[c],n,i,!0);b.isEmptyObject(d)&&(delete _.handle,b._removeData(e,"events"))}},trigger:function(n,i,a,o){var r,l,c,d,u,p,f,h=[a||s],m=g.call(n,"type")?n.type:n,_=g.call(n,"namespace")?n.namespace.split("."):[];if(c=p=a=a||s,3!==a.nodeType&&8!==a.nodeType&&!nt.test(m+b.event.triggered)&&(m.indexOf(".")>=0&&(_=m.split("."),m=_.shift(),_.sort()),l=0>m.indexOf(":")&&"on"+m,n=n[b.expando]?n:new b.Event(m,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=_.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=a),i=null==i?[n]:b.makeArray(i,[n]),u=b.event.special[m]||{},o||!u.trigger||u.trigger.apply(a,i)!==!1)){if(!o&&!u.noBubble&&!b.isWindow(a)){for(d=u.delegateType||m,nt.test(d+m)||(c=c.parentNode);c;c=c.parentNode)h.push(c),p=c;p===(a.ownerDocument||s)&&h.push(p.defaultView||p.parentWindow||e)}for(f=0;(c=h[f++])&&!n.isPropagationStopped();)n.type=f>1?d:u.bindType||m,r=(b._data(c,"events")||{})[n.type]&&b._data(c,"handle"),r&&r.apply(c,i),r=l&&c[l],r&&b.acceptData(c)&&r.apply&&r.apply(c,i)===!1&&n.preventDefault();if(n.type=m,!(o||n.isDefaultPrevented()||u._default&&u._default.apply(a.ownerDocument,i)!==!1||"click"===m&&b.nodeName(a,"a")||!b.acceptData(a)||!l||!a[m]||b.isWindow(a))){p=a[l],p&&(a[l]=null),b.event.triggered=m;try{a[m]()}catch(v){}b.event.triggered=t,p&&(a[l]=p)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,i,a,s,o,r=[],l=h.call(arguments),c=(b._data(this,"events")||{})[e.type]||[],d=b.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!d.preDispatch||d.preDispatch.call(this,e)!==!1){for(r=b.event.handlers.call(this,e,c),n=0;(s=r[n++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,o=0;(a=s.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,i=((b.event.special[a.origType]||{}).handle||a.handler).apply(s.elem,l),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,a,s,o,r=[],l=n.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(s=[],o=0;l>o;o++)a=n[o],i=a.selector+" ",s[i]===t&&(s[i]=a.needsContext?b(i,this).index(c)>=0:b.find(i,this,null,[c]).length),s[i]&&s.push(a);s.length&&r.push({elem:c,handlers:s})}return n.length>l&&r.push({elem:this,handlers:n.slice(l)}),r},fix:function(e){if(e[b.expando])return e;var t,n,i,a=e.type,o=e,r=this.fixHooks[a];for(r||(this.fixHooks[a]=r=tt.test(a)?this.mouseHooks:et.test(a)?this.keyHooks:{}),i=r.props?this.props.concat(r.props):this.props,e=new b.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=o.srcElement||s),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,a,o,r=n.button,l=n.fromElement;return null==e.pageX&&null!=n.clientX&&(a=e.target.ownerDocument||s,o=a.documentElement,i=a.body,e.pageX=n.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?n.toElement:l),e.which||r===t||(e.which=1&r?1:2&r?3:4&r?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===s.activeElement&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var a=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?b.event.trigger(a,null,t):b.event.dispatch.call(t,a),a.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=s.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===a&&(e[i]=null),e.detachEvent(i,n))},b.Event=function(e,t){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?at:st):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,void 0):new b.Event(e,t)},b.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=at,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=at,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=at,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,a=e.relatedTarget,s=e.handleObj;return(!a||a!==i&&!b.contains(i,a))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;i&&!b._data(i,"submitBubbles")&&(b.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),b._data(i,"submitBubbles",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),void 0)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return J.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;J.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return b.event.remove(this,"._change"),!J.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&s.addEventListener(e,i,!0)},teardown:function(){0===--n&&s.removeEventListener(e,i,!0)}}}),b.fn.extend({on:function(e,n,i,a,s){var o,r;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(o in e)this.on(o,n,i,e[o],s);return this}if(null==i&&null==a?(a=n,i=n=t):null==a&&("string"==typeof n?(a=i,i=t):(a=i,i=n,n=t)),a===!1)a=st;else if(!a)return this;return 1===s&&(r=a,a=function(e){return b().off(e),r.apply(this,arguments)},a.guid=r.guid||(r.guid=b.guid++)),this.each(function(){b.event.add(this,e,a,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var a,s;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,b(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=st),this.each(function(){b.event.remove(this,e,i,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?b.event.trigger(e,t,n,!0):void 0}}),function(e,t){function it(e){return X.test(e+"")}function at(){var e,t=[];return e=function(n,i){return t.push(n+=" ")>a.cacheLength&&delete e[t.shift()],e[n]=i}}function st(e){return e[y]=!0,e}function ot(e){var t=u.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function rt(e,t,n,i){var a,s,o,r,l,c,p,m,_,v;if((t?t.ownerDocument||t:w)!==u&&d(t),t=t||u,n=n||[],!e||"string"!=typeof e)return n;if(1!==(r=t.nodeType)&&9!==r)return[];if(!f&&!i){if(a=G.exec(e))if(o=a[1]){if(9===r){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(a[2])return M.apply(n,P.call(t.getElementsByTagName(e),0)),n;if((o=a[3])&&k.getByClassName&&t.getElementsByClassName)return M.apply(n,P.call(t.getElementsByClassName(o),0)),n}if(k.qsa&&!h.test(e)){if(p=!0,m=y,_=t,v=9===r&&e,1===r&&"object"!==t.nodeName.toLowerCase()){for(c=pt(e),(p=t.getAttribute("id"))?m=p.replace(Z,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",l=c.length;l--;)c[l]=m+ft(c[l]);_=V.test(e)&&t.parentNode||t,v=c.join(",")}if(v)try{return M.apply(n,P.call(_.querySelectorAll(v),0)),n}catch(b){}finally{p||t.removeAttribute("id")}}}return wt(e.replace(R,"$1"),t,n,i)}function lt(e,t){var n=t&&e,i=n&&(~t.sourceIndex||E)-(~e.sourceIndex||E);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function dt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ut(e){return st(function(t){return t=+t,st(function(n,i){for(var a,s=e([],n.length,t),o=s.length;o--;)n[a=s[o]]&&(n[a]=!(i[a]=n[a]))})})}function pt(e,t){var n,i,s,o,r,l,c,d=C[e+" "];if(d)return t?0:d.slice(0);for(r=e,l=[],c=a.preFilter;r;){(!n||(i=q.exec(r)))&&(i&&(r=r.slice(i[0].length)||r),l.push(s=[])),n=!1,(i=W.exec(r))&&(n=i.shift(),s.push({value:n,type:i[0].replace(R," ")}),r=r.slice(n.length));for(o in a.filter)!(i=B[o].exec(r))||c[o]&&!(i=c[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),r=r.slice(n.length));if(!n)break}return t?r.length:r?rt.error(e):C(e,l).slice(0)}function ft(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function ht(e,t,n){var a=t.dir,s=n&&"parentNode"===a,o=j++;return t.first?function(t,n,i){for(;t=t[a];)if(1===t.nodeType||s)return e(t,n,i)}:function(t,n,r){var l,c,d,u=x+" "+o;if(r){for(;t=t[a];)if((1===t.nodeType||s)&&e(t,n,r))return!0}else for(;t=t[a];)if(1===t.nodeType||s)if(d=t[y]||(t[y]={}),(c=d[a])&&c[0]===u){if((l=c[1])===!0||l===i)return l===!0}else if(c=d[a]=[u],c[1]=e(t,n,r)||i,c[1]===!0)return!0}}function mt(e){return e.length>1?function(t,n,i){for(var a=e.length;a--;)if(!e[a](t,n,i))return!1;return!0}:e[0]}function _t(e,t,n,i,a){for(var s,o=[],r=0,l=e.length,c=null!=t;l>r;r++)(s=e[r])&&(!n||n(s,i,a))&&(o.push(s),c&&t.push(r));return o}function gt(e,t,n,i,a,s){return i&&!i[y]&&(i=gt(i)),a&&!a[y]&&(a=gt(a,s)),st(function(s,o,r,l){var c,d,u,p=[],f=[],h=o.length,m=s||yt(t||"*",r.nodeType?[r]:r,[]),_=!e||!s&&t?m:_t(m,p,e,r,l),g=n?a||(s?e:h||i)?[]:o:_;if(n&&n(_,g,r,l),i)for(c=_t(g,f),i(c,[],r,l),d=c.length;d--;)(u=c[d])&&(g[f[d]]=!(_[f[d]]=u));if(s){if(a||e){if(a){for(c=[],d=g.length;d--;)(u=g[d])&&c.push(_[d]=u);a(null,g=[],c,l)}for(d=g.length;d--;)(u=g[d])&&(c=a?A.call(s,u):p[d])>-1&&(s[c]=!(o[c]=u))}}else g=_t(g===o?g.splice(h,g.length):g),a?a(null,o,g,l):M.apply(o,g)})}function vt(e){for(var t,n,i,s=e.length,o=a.relative[e[0].type],r=o||a.relative[" "],l=o?1:0,d=ht(function(e){return e===t},r,!0),u=ht(function(e){return A.call(t,e)>-1},r,!0),p=[function(e,n,i){return!o&&(i||n!==c)||((t=n).nodeType?d(e,n,i):u(e,n,i))}];s>l;l++)if(n=a.relative[e[l].type])p=[ht(mt(p),n)];else{if(n=a.filter[e[l].type].apply(null,e[l].matches),n[y]){for(i=++l;s>i&&!a.relative[e[i].type];i++);return gt(l>1&&mt(p),l>1&&ft(e.slice(0,l-1)).replace(R,"$1"),n,i>l&&vt(e.slice(l,i)),s>i&&vt(e=e.slice(i)),s>i&&ft(e))}p.push(n)}return mt(p)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,r=function(r,l,d,p,f){var h,m,_,g=[],v=0,b="0",y=r&&[],w=null!=f,k=c,j=r||o&&a.find.TAG("*",f&&l.parentNode||l),$=x+=null==k?1:Math.random()||.1;for(w&&(c=l!==u&&l,i=n);null!=(h=j[b]);b++){if(o&&h){for(m=0;_=e[m++];)if(_(h,l,d)){p.push(h);
break}w&&(x=$,i=++n)}s&&((h=!_&&h)&&v--,r&&y.push(h))}if(v+=b,s&&b!==v){for(m=0;_=t[m++];)_(y,g,l,d);if(r){if(v>0)for(;b--;)y[b]||g[b]||(g[b]=z.call(p));g=_t(g)}M.apply(p,g),w&&!r&&g.length>0&&v+t.length>1&&rt.uniqueSort(p)}return w&&(x=$,c=k),y};return s?st(r):r}function yt(e,t,n){for(var i=0,a=t.length;a>i;i++)rt(e,t[i],n);return n}function wt(e,t,n,i){var s,o,l,c,d,u=pt(e);if(!i&&1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(l=o[0]).type&&9===t.nodeType&&!f&&a.relative[o[1].type]){if(t=a.find.ID(l.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(o.shift().value.length)}for(s=B.needsContext.test(e)?0:o.length;s--&&(l=o[s],!a.relative[c=l.type]);)if((d=a.find[c])&&(i=d(l.matches[0].replace(et,tt),V.test(o[0].type)&&t.parentNode||t))){if(o.splice(s,1),e=i.length&&ft(o),!e)return M.apply(n,P.call(i,0)),n;break}}return r(e,u)(i,t,f,n,V.test(e)),n}function kt(){}var n,i,a,s,o,r,l,c,d,u,p,f,h,m,_,g,v,y="sizzle"+-new Date,w=e.document,k={},x=0,j=0,$=at(),C=at(),S=at(),D=typeof t,E=1<<31,T=[],z=T.pop,M=T.push,P=T.slice,A=T.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},O="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",F=I.replace("w","w#"),N="([*^$|!~]?=)",H="\\["+O+"*("+I+")"+O+"*(?:"+N+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+F+")|)|)"+O+"*\\]",L=":("+I+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+H.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),q=new RegExp("^"+O+"*,"+O+"*"),W=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),Y=new RegExp(L),U=new RegExp("^"+F+"$"),B={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),NAME:new RegExp("^\\[name=['\"]?("+I+")['\"]?\\]"),TAG:new RegExp("^("+I.replace("w","w*")+")"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+L),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,X=/^[^{]+\{\s*\[native code/,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,Z=/'|\\/g,J=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{P.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){P=function(e){for(var t,n=[];t=this[e++];)n.push(t);return n}}o=rt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},d=rt.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==u&&9===n.nodeType&&n.documentElement?(u=n,p=n.documentElement,f=o(n),k.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),k.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),k.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),k.getByName=ot(function(e){e.id=y+0,e.innerHTML="<a name='"+y+"'></a><div name='"+y+"'></div>",p.insertBefore(e,p.firstChild);var t=n.getElementsByName&&n.getElementsByName(y).length===2+n.getElementsByName(y+0).length;return k.getIdNotName=!n.getElementById(y),p.removeChild(e),t}),a.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==D&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},k.getIdNotName?(a.find.ID=function(e,t){if(typeof t.getElementById!==D&&!f){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},a.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(a.find.ID=function(e,n){if(typeof n.getElementById!==D&&!f){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==D&&i.getAttributeNode("id").value===e?[i]:t:[]}},a.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==D&&e.getAttributeNode("id");return n&&n.value===t}}),a.find.TAG=k.tagNameNoComments?function(e,t){return typeof t.getElementsByTagName!==D?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],a=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[a++];)1===n.nodeType&&i.push(n);return i}return s},a.find.NAME=k.getByName&&function(e,t){return typeof t.getElementsByName!==D?t.getElementsByName(name):void 0},a.find.CLASS=k.getByClassName&&function(e,t){return typeof t.getElementsByClassName===D||f?void 0:t.getElementsByClassName(e)},m=[],h=[":focus"],(k.qsa=it(n.querySelectorAll))&&(ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+O+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(k.matchesSelector=it(_=p.matchesSelector||p.mozMatchesSelector||p.webkitMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ot(function(e){k.disconnectedMatch=_.call(e,"div"),_.call(e,"[s!='']:x"),m.push("!=",L)}),h=new RegExp(h.join("|")),m=new RegExp(m.join("|")),g=it(p.contains)||p.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},v=p.compareDocumentPosition?function(e,t){var i;return e===t?(l=!0,0):(i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&i||e.parentNode&&11===e.parentNode.nodeType?e===n||g(w,e)?-1:t===n||g(w,t)?1:0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var i,a=0,s=e.parentNode,o=t.parentNode,r=[e],c=[t];if(e===t)return l=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return lt(e,t);for(i=e;i=i.parentNode;)r.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;r[a]===c[a];)a++;return a?lt(r[a],c[a]):r[a]===w?-1:c[a]===w?1:0},l=!1,[0,0].sort(v),k.detectDuplicates=l,u):u},rt.matches=function(e,t){return rt(e,null,null,t)},rt.matchesSelector=function(e,t){if((e.ownerDocument||e)!==u&&d(e),t=t.replace(J,"='$1']"),!(!k.matchesSelector||f||m&&m.test(t)||h.test(t)))try{var n=_.call(e,t);if(n||k.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return rt(t,u,null,[e]).length>0},rt.contains=function(e,t){return(e.ownerDocument||e)!==u&&d(e),g(e,t)},rt.attr=function(e,t){var n;return(e.ownerDocument||e)!==u&&d(e),f||(t=t.toLowerCase()),(n=a.attrHandle[t])?n(e):f||k.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},rt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},rt.uniqueSort=function(e){var t,n=[],i=1,a=0;if(l=!k.detectDuplicates,e.sort(v),l){for(;t=e[i];i++)t===e[i-1]&&(a=n.push(i));for(;a--;)e.splice(n[a],1)}return e},s=rt.getText=function(e){var t,n="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i];i++)n+=s(t);return n},a=rt.selectors={cacheLength:50,createPseudo:st,match:B,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||rt.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&rt.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return B.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&Y.test(n)&&(t=pt(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=$[e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&$(e,function(e){return t.test(e.className||typeof e.getAttribute!==D&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var a=rt.attr(i,e);return null==a?"!="===t:t?(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a+" ").indexOf(n)>-1:"|="===t?a===n||a.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,i,a){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),r="of-type"===t;return 1===i&&0===a?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,p,f,h,m=s!==o?"nextSibling":"previousSibling",_=t.parentNode,g=r&&t.nodeName.toLowerCase(),v=!l&&!r;if(_){if(s){for(;m;){for(u=t;u=u[m];)if(r?u.nodeName.toLowerCase()===g:1===u.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[o?_.firstChild:_.lastChild],o&&v){for(d=_[y]||(_[y]={}),c=d[e]||[],f=c[0]===x&&c[1],p=c[0]===x&&c[2],u=f&&_.childNodes[f];u=++f&&u&&u[m]||(p=f=0)||h.pop();)if(1===u.nodeType&&++p&&u===t){d[e]=[x,f,p];break}}else if(v&&(c=(t[y]||(t[y]={}))[e])&&c[0]===x)p=c[1];else for(;(u=++f&&u&&u[m]||(p=f=0)||h.pop())&&((r?u.nodeName.toLowerCase()!==g:1!==u.nodeType)||!++p||(v&&((u[y]||(u[y]={}))[e]=[x,p]),u!==t)););return p-=a,p===i||0===p%i&&p/i>=0}}},PSEUDO:function(e,t){var n,i=a.pseudos[e]||a.setFilters[e.toLowerCase()]||rt.error("unsupported pseudo: "+e);return i[y]?i(t):i.length>1?(n=[e,e,"",t],a.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){for(var a,s=i(e,t),o=s.length;o--;)a=A.call(e,s[o]),e[a]=!(n[a]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:st(function(e){var t=[],n=[],i=r(e.replace(R,"$1"));return i[y]?st(function(e,t,n,a){for(var s,o=i(e,null,a,[]),r=e.length;r--;)(s=o[r])&&(e[r]=!(t[r]=s))}):function(e,a,s){return t[0]=e,i(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return rt(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return U.test(e||"")||rt.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=f?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===u.activeElement&&(!u.hasFocus||u.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!a.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ut(function(){return[0]}),last:ut(function(e,t){return[t-1]}),eq:ut(function(e,t,n){return[0>n?n+t:n]}),even:ut(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:ut(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:ut(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:ut(function(e,t,n){for(var i=0>n?n+t:n;t>++i;)e.push(i);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})a.pseudos[n]=ct(n);for(n in{submit:!0,reset:!0})a.pseudos[n]=dt(n);r=rt.compile=function(e,t){var n,i=[],a=[],s=S[e+" "];if(!s){for(t||(t=pt(e)),n=t.length;n--;)s=vt(t[n]),s[y]?i.push(s):a.push(s);s=S(e,bt(a,i))}return s},a.pseudos.nth=a.pseudos.eq,a.filters=kt.prototype=a.pseudos,a.setFilters=new kt,d(),rt.attr=b.attr,b.find=rt,b.expr=rt.selectors,b.expr[":"]=b.expr.pseudos,b.unique=rt.uniqueSort,b.text=rt.getText,b.isXMLDoc=rt.isXML,b.contains=rt.contains}(e);var ot=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,lt=/^.[^:#\[\.,]*$/,ct=b.expr.match.needsContext,dt={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,i,a=this.length;if("string"!=typeof e)return i=this,this.pushStack(b(e).filter(function(){for(t=0;a>t;t++)if(b.contains(i[t],this))return!0}));for(n=[],t=0;a>t;t++)b.find(e,this[t],n);return n=this.pushStack(a>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(pt(this,e,!1))},filter:function(e){return this.pushStack(pt(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?ct.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,i=0,a=this.length,s=[],o=ct.test(e)||"string"!=typeof e?b(e,t||this.context):0;a>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(o?o.index(n)>-1:b.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}return this.pushStack(s.length>1?b.unique(s):s)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),i=b.merge(this.get(),n);return this.pushStack(b.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return ut(e,"nextSibling")},prev:function(e){return ut(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,i){var a=b.map(this,t,n);return ot.test(e)||(i=n),i&&"string"==typeof i&&(a=b.filter(i,a)),a=this.length>1&&!dt[e]?b.unique(a):a,this.length>1&&rt.test(e)&&(a=a.reverse()),this.pushStack(a)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,i){for(var a=[],s=e[n];s&&9!==s.nodeType&&(i===t||1!==s.nodeType||!b(s).is(i));)1===s.nodeType&&a.push(s),s=s[n];return a},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",mt=/ jQuery\d+="(?:null|\d+)"/g,_t=new RegExp("<(?:"+ht+")[\\s/>]","i"),gt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,yt=/<tbody/i,wt=/<|&#?\w+;/,kt=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,jt=/checked\s*(?:[^=]|=\s*.checked.)/i,$t=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Dt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Et=ft(s),Tt=Et.appendChild(s.createElement("div"));Dt.optgroup=Dt.option,Dt.tbody=Dt.tfoot=Dt.colgroup=Dt.caption=Dt.thead,Dt.th=Dt.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ft(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&At(Ft(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&b.cleanData(Ft(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},i=0,a=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(mt,""):t;if(!("string"!=typeof e||kt.test(e)||!b.support.htmlSerialize&&_t.test(e)||!b.support.leadingWhitespace&&gt.test(e)||Dt[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;a>i;i++)n=this[i]||{},1===n.nodeType&&(b.cleanData(Ft(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){e=p.apply([],e);var a,s,o,r,l,c,d=0,u=this.length,f=this,h=u-1,m=e[0],_=b.isFunction(m);if(_||!(1>=u||"string"!=typeof m||b.support.checkClone)&&jt.test(m))return this.each(function(a){var s=f.eq(a);_&&(e[0]=m.call(this,a,n?s.html():t)),s.domManip(e,n,i)});if(u&&(c=b.buildFragment(e,this[0].ownerDocument,!1,this),a=c.firstChild,1===c.childNodes.length&&(c=a),a)){for(n=n&&b.nodeName(a,"tr"),r=b.map(Ft(c,"script"),Mt),o=r.length;u>d;d++)s=c,d!==h&&(s=b.clone(s,!0,!0),o&&b.merge(r,Ft(s,"script"))),i.call(n&&b.nodeName(this[d],"table")?zt(this[d],"tbody"):this[d],s,d);if(o)for(l=r[r.length-1].ownerDocument,b.map(r,Pt),d=0;o>d;d++)s=r[d],$t.test(s.type||"")&&!b._data(s,"globalEval")&&b.contains(l,s)&&(s.src?b.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((s.text||s.textContent||s.innerHTML||"").replace(St,"")));c=a=null}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){for(var n,i=0,a=[],s=b(e),o=s.length-1;o>=i;i++)n=i===o?this:this.clone(!0),b(s[i])[t](n),f.apply(a,n.get());return this.pushStack(a)}}),b.extend({clone:function(e,t,n){var i,a,s,o,r,l=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!_t.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Tt.innerHTML=e.outerHTML,Tt.removeChild(s=Tt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(i=Ft(s),r=Ft(e),o=0;null!=(a=r[o]);++o)i[o]&&It(a,i[o]);if(t)if(n)for(r=r||Ft(e),i=i||Ft(s),o=0;null!=(a=r[o]);o++)Ot(a,i[o]);else Ot(e,s);return i=Ft(s,"script"),i.length>0&&At(i,!l&&Ft(e,"script")),i=r=a=null,s},buildFragment:function(e,t,n,i){for(var a,s,o,r,l,c,d,u=e.length,p=ft(t),f=[],h=0;u>h;h++)if(s=e[h],s||0===s)if("object"===b.type(s))b.merge(f,s.nodeType?[s]:s);else if(wt.test(s)){for(r=r||p.appendChild(t.createElement("div")),l=(bt.exec(s)||["",""])[1].toLowerCase(),d=Dt[l]||Dt._default,r.innerHTML=d[1]+s.replace(vt,"<$1></$2>")+d[2],a=d[0];a--;)r=r.lastChild;if(!b.support.leadingWhitespace&&gt.test(s)&&f.push(t.createTextNode(gt.exec(s)[0])),!b.support.tbody)for(s="table"!==l||yt.test(s)?"<table>"!==d[1]||yt.test(s)?0:r:r.firstChild,a=s&&s.childNodes.length;a--;)b.nodeName(c=s.childNodes[a],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(b.merge(f,r.childNodes),r.textContent="";r.firstChild;)r.removeChild(r.firstChild);r=p.lastChild}else f.push(t.createTextNode(s));for(r&&p.removeChild(r),b.support.appendChecked||b.grep(Ft(f,"input"),Nt),h=0;s=f[h++];)if((!i||-1===b.inArray(s,i))&&(o=b.contains(s.ownerDocument,s),r=Ft(p.appendChild(s),"script"),o&&At(r),n))for(a=0;s=r[a++];)$t.test(s.type||"")&&n.push(s);return r=null,p},cleanData:function(e,t){for(var n,i,s,o,r=0,l=b.expando,c=b.cache,u=b.support.deleteExpando,p=b.event.special;null!=(n=e[r]);r++)if((t||b.acceptData(n))&&(s=n[l],o=s&&c[s])){if(o.events)for(i in o.events)p[i]?b.event.remove(n,i):b.removeEvent(n,i,o.handle);c[s]&&(delete c[s],u?delete n[l]:typeof n.removeAttribute!==a?n.removeAttribute(l):n[l]=null,d.push(s))}}});var Ht,Lt,Rt,qt=/alpha\([^)]*\)/i,Wt=/opacity\s*=\s*([^)]*)/,Yt=/^(top|right|bottom|left)$/,Ut=/^(none|table(?!-c[ea]).+)/,Bt=/^margin/,Vt=new RegExp("^("+y+")(.*)$","i"),Xt=new RegExp("^("+y+")(?!px)[a-z%]+$","i"),Gt=new RegExp("^([+-])=("+y+")","i"),Kt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:0,fontWeight:400},Jt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,n){return b.access(this,function(e,n,i){var a,s,o={},r=0;if(b.isArray(n)){for(s=Lt(e),a=n.length;a>r;r++)o[n[r]]=b.css(e,n[r],!1,s);return o}return i!==t?b.style(e,n,i):b.css(e,n)},e,n,arguments.length>1)},show:function(){return an(this,!0)},hide:function(){return an(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,r,l=b.camelCase(n),c=e.style;if(n=b.cssProps[l]||(b.cssProps[l]=tn(c,l)),r=b.cssHooks[n]||b.cssHooks[l],i===t)return r&&"get"in r&&(s=r.get(e,!1,a))!==t?s:c[n];if(o=typeof i,"string"===o&&(s=Gt.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(b.css(e,n)),o="number"),!(null==i||"number"===o&&isNaN(i)||("number"!==o||b.cssNumber[l]||(i+="px"),b.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(c[n]="inherit"),r&&"set"in r&&(i=r.set(e,i,a))===t)))try{c[n]=i}catch(d){}}},css:function(e,n,i,a){var s,o,r,l=b.camelCase(n);return n=b.cssProps[l]||(b.cssProps[l]=tn(e.style,l)),r=b.cssHooks[n]||b.cssHooks[l],r&&"get"in r&&(o=r.get(e,!0,i)),o===t&&(o=Rt(e,n,a)),"normal"===o&&n in Zt&&(o=Zt[n]),""===i||i?(s=parseFloat(o),i===!0||b.isNumeric(s)?s||0:o):o},swap:function(e,t,n,i){var a,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];a=n.apply(e,i||[]);for(s in t)e.style[s]=o[s];return a}}),e.getComputedStyle?(Lt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,i){var a,s,o,r=i||Lt(e),l=r?r.getPropertyValue(n)||r[n]:t,c=e.style;return r&&(""!==l||b.contains(e.ownerDocument,e)||(l=b.style(e,n)),Xt.test(l)&&Bt.test(n)&&(a=c.width,s=c.minWidth,o=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=r.width,c.width=a,c.minWidth=s,c.maxWidth=o)),l}):s.documentElement.currentStyle&&(Lt=function(e){return e.currentStyle},Rt=function(e,n,i){var a,s,o,r=i||Lt(e),l=r?r[n]:t,c=e.style;return null==l&&c&&c[n]&&(l=c[n]),Xt.test(l)&&!Yt.test(n)&&(a=c.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),c.left="fontSize"===n?"1em":l,l=c.pixelLeft+"px",c.left=a,o&&(s.left=o)),""===l?"auto":l}),b.each(["height","width"],function(e,t){b.cssHooks[t]={get:function(e,n,i){return n?0===e.offsetWidth&&Ut.test(b.css(e,"display"))?b.swap(e,Qt,function(){return rn(e,t,i)}):rn(e,t,i):void 0},set:function(e,n,i){var a=i&&Lt(e);return sn(e,n,i?on(e,t,i,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,a),a):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return Wt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,a=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(s.replace(qt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=qt.test(s)?s.replace(qt,a):s+" "+a)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,t){return t?b.swap(e,{display:"inline-block"},Rt,[e,"marginRight"]):void 0}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,t){b.cssHooks[t]={get:function(e,n){return n?(n=Rt(e,t),Xt.test(n)?b(e).position()[t]+"px":n):void 0}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){for(var i=0,a={},s="string"==typeof n?n.split(" "):[n];4>i;i++)a[e+Jt[i]+t]=s[i]||s[i-2]||s[0];return a}},Bt.test(e)||(b.cssHooks[e+t].set=sn)});var dn=/%20/g,un=/\[\]$/,pn=/\r?\n/g,fn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&hn.test(this.nodeName)&&!fn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(pn,"\r\n")}}):{name:t.name,value:n.replace(pn,"\r\n")}}).get()}}),b.param=function(e,n){var i,a=[],s=function(e,t){t=b.isFunction(t)?t():null==t?"":t,a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){s(this.name,this.value)});else for(i in e)mn(i,e[i],n,s);return a.join("&").replace(dn,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var _n,gn,vn=b.now(),bn=/\?/,yn=/#.*$/,wn=/([?&])_=[^&]*/,kn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jn=/^(?:GET|HEAD)$/,$n=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=b.fn.load,Dn={},En={},Tn="*/".concat("*");try{gn=o.href}catch(zn){gn=s.createElement("a"),gn.href="",gn=gn.href}_n=Cn.exec(gn.toLowerCase())||[],b.fn.load=function(e,n,i){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var a,s,o,r=this,l=e.indexOf(" ");return l>=0&&(a=e.slice(l,e.length),e=e.slice(0,l)),b.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(o="POST"),r.length>0&&b.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,r.html(a?b("<div>").append(b.parseHTML(e)).find(a):e)}).complete(i&&function(e,t){r.each(i,s||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,i,a,s){return b.isFunction(i)&&(s=s||a,a=i,i=t),b.ajax({url:e,type:n,dataType:s,data:i,success:a})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(_n[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Tn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?An(An(e,b.ajaxSettings),t):An(b.ajaxSettings,e)},ajaxPrefilter:Mn(Dn),ajaxTransport:Mn(En),ajax:function(e,n){function $(e,n,i,a){var d,g,v,w,k,j=n;2!==y&&(y=2,r&&clearTimeout(r),c=t,o=a||"",x.readyState=e>0?4:0,i&&(w=On(u,x,i)),e>=200&&300>e||304===e?(u.ifModified&&(k=x.getResponseHeader("Last-Modified"),k&&(b.lastModified[s]=k),k=x.getResponseHeader("etag"),k&&(b.etag[s]=k)),204===e?(d=!0,j="nocontent"):304===e?(d=!0,j="notmodified"):(d=In(u,w),j=d.state,g=d.data,v=d.error,d=!v)):(v=j,(e||!j)&&(j="error",0>e&&(e=0))),x.status=e,x.statusText=(n||j)+"",d?h.resolveWith(p,[g,j,x]):h.rejectWith(p,[x,j,v]),x.statusCode(_),_=t,l&&f.trigger(d?"ajaxSuccess":"ajaxError",[x,u,d?g:v]),m.fireWith(p,[x,j]),l&&(f.trigger("ajaxComplete",[x,u]),--b.active||b.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var i,a,s,o,r,l,c,d,u=b.ajaxSetup({},n),p=u.context||u,f=u.context&&(p.nodeType||p.jquery)?b(p):b.event,h=b.Deferred(),m=b.Callbacks("once memory"),_=u.statusCode||{},g={},v={},y=0,k="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!d)for(d={};t=kn.exec(o);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=v[n]=v[n]||e,g[e]=t),this},overrideMimeType:function(e){return y||(u.mimeType=e),this
},statusCode:function(e){var t;if(e)if(2>y)for(t in e)_[t]=[_[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||k;return c&&c.abort(t),$(0,t),this}};if(h.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,u.url=((e||u.url||gn)+"").replace(yn,"").replace($n,_n[1]+"//"),u.type=n.method||n.type||u.method||u.type,u.dataTypes=b.trim(u.dataType||"*").toLowerCase().match(w)||[""],null==u.crossDomain&&(i=Cn.exec(u.url.toLowerCase()),u.crossDomain=!(!i||i[1]===_n[1]&&i[2]===_n[2]&&(i[3]||("http:"===i[1]?80:443))==(_n[3]||("http:"===_n[1]?80:443)))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=b.param(u.data,u.traditional)),Pn(Dn,u,n,x),2===y)return x;l=u.global,l&&0===b.active++&&b.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!jn.test(u.type),s=u.url,u.hasContent||(u.data&&(s=u.url+=(bn.test(s)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=wn.test(s)?s.replace(wn,"$1_="+vn++):s+(bn.test(s)?"&":"?")+"_="+vn++)),u.ifModified&&(b.lastModified[s]&&x.setRequestHeader("If-Modified-Since",b.lastModified[s]),b.etag[s]&&x.setRequestHeader("If-None-Match",b.etag[s])),(u.data&&u.hasContent&&u.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",u.contentType),x.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Tn+"; q=0.01":""):u.accepts["*"]);for(a in u.headers)x.setRequestHeader(a,u.headers[a]);if(u.beforeSend&&(u.beforeSend.call(p,x,u)===!1||2===y))return x.abort();k="abort";for(a in{success:1,error:1,complete:1})x[a](u[a]);if(c=Pn(En,u,n,x)){x.readyState=1,l&&f.trigger("ajaxSend",[x,u]),u.async&&u.timeout>0&&(r=setTimeout(function(){x.abort("timeout")},u.timeout));try{y=1,c.send(g,$)}catch(j){if(!(2>y))throw j;$(-1,j)}}else $(-1,"No Transport");return x},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=s.head||b("head")[0]||s.documentElement;return{send:function(t,a){n=s.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||a(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Fn=[],Nn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fn.pop()||b.expando+"_"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,i,a){var s,o,r,l=n.jsonp!==!1&&(Nn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Nn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Nn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return r||b.error(s+" was not called"),r[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){r=arguments},a.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=i.jsonpCallback,Fn.push(s)),r&&b.isFunction(o)&&o(r[0]),r=o=t}),"script"):void 0});var Hn,Ln,Rn=0,qn=e.ActiveXObject&&function(){var e;for(e in Hn)Hn[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Wn()||Yn()}:Wn,Ln=b.ajaxSettings.xhr(),b.support.cors=!!Ln&&"withCredentials"in Ln,Ln=b.support.ajax=!!Ln,Ln&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var i;return{send:function(a,s){var o,r,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(r in n.xhrFields)l[r]=n.xhrFields[r];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");try{for(r in a)l.setRequestHeader(r,a[r])}catch(c){}l.send(n.hasContent&&n.data||null),i=function(e,a){var r,c,d,u;try{if(i&&(a||4===l.readyState))if(i=t,o&&(l.onreadystatechange=b.noop,qn&&delete Hn[o]),a)4!==l.readyState&&l.abort();else{u={},r=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(u.text=l.responseText);try{d=l.statusText}catch(p){d=""}r||!n.isLocal||n.crossDomain?1223===r&&(r=204):r=u.text?200:404}}catch(f){a||s(-1,f)}u&&s(r,d,u,c)},n.async?4===l.readyState?setTimeout(i):(o=++Rn,qn&&(Hn||(Hn={},b(e).unload(qn)),Hn[o]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(t,!0)}}}});var Un,Bn,Vn=/^(?:toggle|show|hide)$/,Xn=new RegExp("^(?:([+-])=|)("+y+")([a-z%]*)$","i"),Gn=/queueHooks$/,Kn=[ni],Qn={"*":[function(e,t){var n,i,a=this.createTween(e,t),s=Xn.exec(t),o=a.cur(),r=+o||0,l=1,c=20;if(s){if(n=+s[2],i=s[3]||(b.cssNumber[e]?"":"px"),"px"!==i&&r){r=b.css(a.elem,e,!0)||n||1;do l=l||".5",r/=l,b.style(a.elem,e,r+i);while(l!==(l=a.cur()/o)&&1!==l&&--c)}a.unit=i,a.start=r,a.end=s[1]?r+(s[1]+1)*n:n}return a}]};b.Animation=b.extend(ei,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,a=e.length;a>i;i++)n=e[i],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Kn.unshift(e):Kn.push(e)}}),b.Tween=ii,ii.prototype={constructor:ii,init:function(e,t,n,i,a,s){this.elem=e,this.prop=n,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(b.cssNumber[n]?"":"px")},cur:function(){var e=ii.propHooks[this.prop];return e&&e.get?e.get(this):ii.propHooks._default.get(this)},run:function(e){var t,n=ii.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ii.propHooks._default.set(this),this}},ii.prototype.init.prototype=ii.prototype,ii.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},ii.propHooks.scrollTop=ii.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,i,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ai(t,!0),e,i,a)}}),b.fn.extend({fadeTo:function(e,t,n,i){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var a=b.isEmptyObject(e),s=b.speed(t,n,i),o=function(){var t=ei(this,b.extend({},e),s);o.finish=function(){t.stop(!0)},(a||b._data(this,"finish"))&&t.stop(!0)};return o.finish=o,a||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,i){var a=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=b.timers,o=b._data(this);if(n)o[n]&&o[n].stop&&a(o[n]);else for(n in o)o[n]&&o[n].stop&&Gn.test(n)&&a(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(i),t=!1,s.splice(n,1));(t||!i)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),i=n[e+"queue"],a=n[e+"queueHooks"],s=b.timers,o=i?i.length:0;for(n.finish=!0,b.queue(this,e,[]),a&&a.cur&&a.cur.finish&&a.cur.finish.call(this),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),b.each({slideDown:ai("show"),slideUp:ai("hide"),slideToggle:ai("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),b.speed=function(e,t,n){var i=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return i.duration=b.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in b.fx.speeds?b.fx.speeds[i.duration]:b.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){b.isFunction(i.old)&&i.old.call(this),i.queue&&b.dequeue(this,i.queue)},i},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=ii.prototype.init,b.fx.tick=function(){var e,n=b.timers,i=0;for(Un=b.now();n.length>i;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);n.length||b.fx.stop(),Un=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Bn||(Bn=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Bn),Bn=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,i,s={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return n=r.documentElement,b.contains(n,o)?(typeof o.getBoundingClientRect!==a&&(s=o.getBoundingClientRect()),i=si(r),{top:s.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},b.offset={setOffset:function(e,t,n){var i=b.css(e,"position");"static"===i&&(e.style.position="relative");var u,p,a=b(e),s=a.offset(),o=b.css(e,"top"),r=b.css(e,"left"),l=("absolute"===i||"fixed"===i)&&b.inArray("auto",[o,r])>-1,c={},d={};l?(d=a.position(),u=d.top,p=d.left):(u=parseFloat(o)||0,p=parseFloat(r)||0),b.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(c.top=t.top-s.top+u),null!=t.left&&(c.left=t.left-s.left+p),"using"in t?t.using.call(e,c):a.css(c)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===b.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(i,"marginTop",!0),left:t.left-n.left-b.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||s.documentElement;e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position");)e=e.offsetParent;return e||s.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);b.fn[e]=function(a){return b.access(this,function(e,a,s){var o=si(e);return s===t?o?n in o?o[n]:o.document.documentElement[a]:e[a]:(o?o.scrollTo(i?b(o).scrollLeft():s,i?s:b(o).scrollTop()):e[a]=s,void 0)},e,a,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,a){b.fn[a]=function(a,s){var o=arguments.length&&(i||"boolean"!=typeof a),r=i||(a===!0||s===!0?"margin":"border");return b.access(this,function(n,i,a){var s;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):a===t?b.css(n,i,r):b.style(n,i,a,r)},n,o?a:t,o,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})}(window),function(e,t){function a(t,n){var i,a,o,r=t.nodeName.toLowerCase();return"area"===r?(i=t.parentNode,a=i.name,t.href&&a&&"map"===i.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&s(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var n=0,i=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each(function(){var i=this;setTimeout(function(){e(i).focus(),n&&n.call(i)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var a,s,i=e(this[0]);i.length&&i[0]!==document;){if(a=i.css("position"),("absolute"===a||"relative"===a||"fixed"===a)&&(s=parseInt(i.css("zIndex"),10),!isNaN(s)&&0!==s))return s;i=i.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){i.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return a(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),i=isNaN(n);return(i||n>=0)&&a(t,!i)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===n.offsetHeight,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function r(t,n,i,s){return e.each(a,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var a="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?o["inner"+i].call(this):this.each(function(){e(this).css(s,r(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(s,r(this,t,!0,n)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var a,s=e.ui[t].prototype;for(a in i)s.plugins[a]=s.plugins[a]||[],s.plugins[a].push([n,i[a]])},call:function(e,t,n){var i,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;a.length>i;i++)e.options[a[i][0]]&&a[i][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",a=!1;return t[i]>0?!0:(t[i]=1,a=t[i]>0,t[i]=0,a)},isOverAxis:function(e,t,n){return e>t&&t+n>e},isOver:function(t,n,i,a,s,o){return e.ui.isOverAxis(t,i,s)&&e.ui.isOverAxis(n,a,o)}}))}(jQuery),function(e,t){var n=0,i=Array.prototype.slice,a=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(s){}a(t)},e.widget=function(t,n,i){var a,s,o,r,l=t.split(".")[0];t=t.split(".")[1],a=l+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[l]=e[l]||{},s=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,s,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),r=new n,r.options=e.widget.extend({},r.options),e.each(i,function(t,a){e.isFunction(a)&&(i[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var s,t=this._super,n=this._superApply;return this._super=e,this._superApply=i,s=a.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(r,{widgetEventPrefix:s?r.widgetEventPrefix:t},i,{constructor:o,namespace:l,widgetName:t,widgetBaseClass:a,widgetFullName:a}),s?(e.each(s._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){for(var r,l,a=i.call(arguments,1),s=0,o=a.length;o>s;s++)for(r in a[s])l=a[s][r],a[s].hasOwnProperty(r)&&l!==t&&(n[r]=e.isPlainObject(l)?e.isPlainObject(n[r])?e.widget.extend({},n[r],l):e.widget.extend({},l):l);return n},e.widget.bridge=function(n,a){var s=a.prototype.widgetFullName||n;e.fn[n]=function(o){var r="string"==typeof o,l=i.call(arguments,1),c=this;return o=!r&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,r?this.each(function(){var i,a=e.data(this,s);return a?e.isFunction(a[o])&&"_"!==o.charAt(0)?(i=a[o].apply(a,l),i!==a&&i!==t?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+o+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new a(o,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetName,this),e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var s,o,r,a=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(a={},s=n.split("."),n=s.shift(),s.length){for(o=a[n]=e.widget.extend({},this.options[n]),r=0;s.length-1>r;r++)o[s[r]]=o[s[r]]||{},o=o[s[r]];if(n=s.pop(),i===t)return o[n]===t?null:o[n];o[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var a,s=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=a=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,a=this.widget()),e.each(i,function(i,o){function r(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,d=l[2];d?a.delegate(d,c,r):n.bind(c,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var a,s,o=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(a in s)a in n||(n[a]=s[a]);return this.element.trigger(n,i),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,a,s){"string"==typeof a&&(a={effect:a});var o,r=a?a===!0||"number"==typeof a?n:a.effect||n:t;a=a||{},"number"==typeof a&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=s,a.delay&&i.delay(a.delay),o&&e.effects&&(e.effects.effect[r]||e.uiBackCompat!==!1&&e.effects[r])?i[t](a):r!==t&&i[r]?i[r](a.duration,a.easing,s):i.queue(function(n){e(this)[t](),s&&s.call(i[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,a=1===t.which,s="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return a&&!s&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0)):!0}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);for(var i=this.element[0],a=!1;i&&(i=i.parentNode);)i==document&&(a=!0);if(!a&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!n||"valid"==this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"==n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"==n.appendTo?this.element[0].parentNode:n.appendTo),i[0]==this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);
else{var n=e(t.containment),i=n[0];if(!i)return;n.offset();var s="hidden"!=e(i).css("overflow");this.containment=[(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0),(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0),(s?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"==t?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*i}},_generatePosition:function(t){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(i[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var r;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();r=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else r=this.containment;r[0]>t.pageX-this.offset.click.left&&(s=r[0]+this.offset.click.left),r[1]>t.pageY-this.offset.click.top&&(o=r[1]+this.offset.click.top),t.pageX-this.offset.click.left>r[2]&&(s=r[2]+this.offset.click.left),t.pageY-this.offset.click.top>r[3]&&(o=r[3]+this.offset.click.top)}if(n.grid){var c=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=r?r[1]>c-this.offset.click.top||c-this.offset.click.top>r[3]?r[1]>c-this.offset.click.top?c+n.grid[1]:c-n.grid[1]:c:c;var d=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=r?r[0]>d-this.offset.click.left||d-this.offset.click.left>r[2]?r[0]>d-this.offset.click.left?d+n.grid[0]:d-n.grid[0]:d:d}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:i.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:i.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var i=e(this).data("draggable"),a=i.options,s=e.extend({},n,{item:i.element});i.sortables=[],e(a.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var i=e(this).data("draggable"),a=e.extend({},n,{item:i.element});e.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,a))})},drag:function(t,n){var i=e(this).data("draggable"),a=this;e.each(i.sortables,function(){var o=!1,r=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!=r&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(r.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(a).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var i=e("body"),a=e(this).data("draggable").options;i.css("cursor")&&(a._cursor=i.css("cursor")),i.css("cursor",a.cursor)},stop:function(){var i=e(this).data("draggable").options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var i=e(n.helper),a=e(this).data("draggable").options;i.css("opacity")&&(a._opacity=i.css("opacity")),i.css("opacity",a.opacity)},stop:function(t,n){var i=e(this).data("draggable").options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var i=e(this).data("draggable");i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName&&(i.overflowOffset=i.scrollParent.offset())},drag:function(t){var i=e(this).data("draggable"),a=i.options,s=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(a.axis&&"x"==a.axis||(a.scrollSensitivity>i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+a.scrollSpeed:a.scrollSensitivity>t.pageY-i.overflowOffset.top&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-a.scrollSpeed)),a.axis&&"y"==a.axis||(a.scrollSensitivity>i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+a.scrollSpeed:a.scrollSensitivity>t.pageX-i.overflowOffset.left&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-a.scrollSpeed))):(a.axis&&"x"==a.axis||(a.scrollSensitivity>t.pageY-e(document).scrollTop()?s=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):a.scrollSensitivity>e(window).height()-(t.pageY-e(document).scrollTop())&&(s=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed))),a.axis&&"y"==a.axis||(a.scrollSensitivity>t.pageX-e(document).scrollLeft()?s=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):a.scrollSensitivity>e(window).width()-(t.pageX-e(document).scrollLeft())&&(s=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var i=e(this).data("draggable"),a=i.options;i.snapElements=[],e(a.snap.constructor!=String?a.snap.items||":data(draggable)":a.snap).each(function(){var t=e(this),n=t.offset();this!=i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){for(var i=e(this).data("draggable"),a=i.options,s=a.snapTolerance,o=n.offset.left,r=o+i.helperProportions.width,l=n.offset.top,c=l+i.helperProportions.height,d=i.snapElements.length-1;d>=0;d--){var u=i.snapElements[d].left,p=u+i.snapElements[d].width,f=i.snapElements[d].top,h=f+i.snapElements[d].height;if(o>u-s&&p+s>o&&l>f-s&&h+s>l||o>u-s&&p+s>o&&c>f-s&&h+s>c||r>u-s&&p+s>r&&l>f-s&&h+s>l||r>u-s&&p+s>r&&c>f-s&&h+s>c){if("inner"!=a.snapMode){var m=s>=Math.abs(f-c),_=s>=Math.abs(h-l),g=s>=Math.abs(u-r),v=s>=Math.abs(p-o);m&&(n.position.top=i._convertPositionTo("relative",{top:f-i.helperProportions.height,left:0}).top-i.margins.top),_&&(n.position.top=i._convertPositionTo("relative",{top:h,left:0}).top-i.margins.top),g&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u-i.helperProportions.width}).left-i.margins.left),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:p}).left-i.margins.left)}var b=m||_||g||v;if("outer"!=a.snapMode){var m=s>=Math.abs(f-l),_=s>=Math.abs(h-c),g=s>=Math.abs(u-o),v=s>=Math.abs(p-r);m&&(n.position.top=i._convertPositionTo("relative",{top:f,left:0}).top-i.margins.top),_&&(n.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top-i.margins.top),g&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u}).left-i.margins.left),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:p-i.helperProportions.width}).left-i.margins.left)}!i.snapElements[d].snapping&&(m||_||g||v||b)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=m||_||g||v||b}else i.snapElements[d].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(){var i=e(this).data("draggable").options,a=e.makeArray(e(i.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(a.length){var s=parseInt(a[0].style.zIndex)||0;e(a).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+a.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var i=e(n.helper),a=e(this).data("draggable").options;i.css("zIndex")&&(a._zIndex=i.css("zIndex")),i.css("zIndex",a.zIndex)},stop:function(t,n){var i=e(this).data("draggable").options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],n=0;t.length>n;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){"accept"==t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var i=n||e.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]==this.element[0])return!1;var a=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&e.ui.intersect(i,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(a=!0,!1):void 0}),a?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,i){if(!n.offset)return!1;var a=(t.positionAbs||t.position.absolute).left,s=a+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,r=o+t.helperProportions.height,l=n.offset.left,c=l+n.proportions.width,d=n.offset.top,u=d+n.proportions.height;switch(i){case"fit":return a>=l&&c>=s&&o>=d&&u>=r;case"intersect":return a+t.helperProportions.width/2>l&&c>s-t.helperProportions.width/2&&o+t.helperProportions.height/2>d&&u>r-t.helperProportions.height/2;case"pointer":var p=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,f=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,h=e.ui.isOver(f,p,d,l,n.proportions.height,n.proportions.width);return h;case"touch":return(o>=d&&u>=o||r>=d&&u>=r||d>o&&r>u)&&(a>=l&&c>=a||s>=l&&c>=s||l>a&&s>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var i=e.ui.ddmanager.droppables[t.options.scope]||[],a=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;i.length>o;o++)if(!(i[o].options.disabled||t&&!i[o].accept.call(i[o].element[0],t.currentItem||t.element))){for(var r=0;s.length>r;r++)if(s[r]==i[o].element[0]){i[o].proportions.height=0;continue e}i[o].visible="none"!=i[o].element.css("display"),i[o].visible&&("mousedown"==a&&i[o]._activate.call(i[o],n),i[o].offset=i[o].element.offset(),i[o].proportions={width:i[o].element[0].offsetWidth,height:i[o].element[0].offsetHeight})}},drop:function(t,n){var i=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n)))}),i},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i=e.ui.intersect(t,this,this.options.tolerance),a=i||1!=this.isover?i&&0==this.isover?"isover":null:"isout";if(a){var s;if(this.options.greedy){var o=this.options.scope,r=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});r.length&&(s=e.data(r[0],"droppable"),s.greedyChild="isover"==a?1:0)}s&&"isover"==a&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[a]=1,this["isout"==a?"isover":"isout"]=0,this["isover"==a?"_over":"_out"].call(this,n),s&&"isout"==a&&(s.isout=0,s.isover=1,s._over.call(s,n))}}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var a=null;if(e(t.target).parents().each(function(){return e.data(this,i.widgetName+"-item")==i?(a=e(this),!1):void 0}),e.data(t.target,i.widgetName+"-item")==i&&(a=e(t.target)),!a)return!1;if(this.options.handle&&!n){var o=!1;if(e(this.options.handle,a).find("*").andSelf().each(function(){this==t.target&&(o=!0)}),!o)return!1}return this.currentItem=a,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,i){var a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",a.cursor)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var n=this.options,i=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(n.scrollSensitivity>this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+n.scrollSpeed:n.scrollSensitivity>t.pageY-this.overflowOffset.top&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-n.scrollSpeed),n.scrollSensitivity>this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+n.scrollSpeed:n.scrollSensitivity>t.pageX-this.overflowOffset.left&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(n.scrollSensitivity>t.pageY-e(document).scrollTop()?i=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):n.scrollSensitivity>e(window).height()-(t.pageY-e(document).scrollTop())&&(i=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),n.scrollSensitivity>t.pageX-e(document).scrollLeft()?i=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):n.scrollSensitivity>e(window).width()-(t.pageX-e(document).scrollLeft())&&(i=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),i!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var a=this.items.length-1;a>=0;a--){var s=this.items[a],o=s.item[0],r=this._intersectsWithPointer(s);if(r&&s.instance===this.currentContainer&&o!=this.currentItem[0]&&this.placeholder[1==r?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"==this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1==r?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,a=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:a.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:a.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,a=i+this.helperProportions.height,s=e.left,o=s+e.width,r=e.top,l=r+e.height,c=this.offset.click.top,d=this.offset.click.left,u=i+c>r&&l>i+c&&t+d>s&&o>t+d;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?u:t+this.helperProportions.width/2>s&&o>n-this.helperProportions.width/2&&i+this.helperProportions.height/2>r&&l>a-this.helperProportions.height/2},_intersectsWithPointer:function(t){var n="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),a=n&&i,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return a?this.floating?o&&"right"==o||"down"==s?2:1:s&&("down"==s?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),a=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"==s&&i||"left"==s&&!i:a&&("down"==a&&n||"up"==a&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],i=[],a=this._connectWith();if(a&&t)for(var s=a.length-1;s>=0;s--)for(var o=e(a[s]),r=o.length-1;r>=0;r--){var l=e.data(o[r],this.widgetName);l&&l!=this&&!l.options.disabled&&i.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=i.length-1;s>=0;s--)i[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;t.length>n;n++)if(t[n]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],a=this._connectWith();if(a&&this.ready)for(var s=a.length-1;s>=0;s--)for(var o=e(a[s]),r=o.length-1;r>=0;r--){var l=e.data(o[r],this.widgetName);l&&l!=this&&!l.options.disabled&&(i.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var s=i.length-1;s>=0;s--)for(var c=i[s][1],d=i[s][0],r=0,u=d.length;u>r;r++){var p=e(d[r]);p.data(this.widgetName+"-item",c),n.push({item:p,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var i=this.items[n];if(i.instance==this.currentContainer||!this.currentContainer||i.item[0]==this.currentItem[0]){var a=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item;t||(i.width=a.outerWidth(),i.height=a.outerHeight());var s=a.offset();i.left=s.left,i.top=s.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var i=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(n.style.visibility="hidden"),n},update:function(e,a){(!i||n.forcePlaceholderSize)&&(a.height()||a.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),a.width()||a.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){for(var n=null,i=null,a=this.containers.length-1;a>=0;a--)if(!e.contains(this.currentItem[0],this.containers[a].element[0]))if(this._intersectsWith(this.containers[a].containerCache)){if(n&&e.contains(this.containers[a].element[0],n.element[0]))continue;n=this.containers[a],i=a}else this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",t,this._uiHash(this)),this.containers[a].containerCache.over=0);if(n)if(1===this.containers.length)this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1;else{for(var s=1e4,o=null,r=this.containers[i].floating?"left":"top",l=this.containers[i].floating?"width":"height",c=this.positionAbs[r]+this.offset.click[r],d=this.items.length-1;d>=0;d--)if(e.contains(this.containers[i].element[0],this.items[d].item[0])&&this.items[d].item[0]!=this.currentItem[0]){var u=this.items[d].item.offset()[r],p=!1;Math.abs(u-c)>Math.abs(u+this.items[d][l]-c)&&(p=!0,u+=this.items[d][l]),s>Math.abs(u-c)&&(s=Math.abs(u-c),o=this.items[d],this.direction=p?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[i],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[i].element,!0),this._trigger("change",t,this._uiHash()),this.containers[i]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"==n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!=n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(""==i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i
},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],i=e(t.containment).offset(),a="hidden"!=e(n).css("overflow");this.containment=[i.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,i.left+(a?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(a?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"==t?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*i}},_generatePosition:function(t){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(i[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition&&(this.containment&&(this.containment[0]>t.pageX-this.offset.click.left&&(s=this.containment[0]+this.offset.click.left),this.containment[1]>t.pageY-this.offset.click.top&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid)){var r=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?this.containment[1]>r-this.offset.click.top||r-this.offset.click.top>this.containment[3]?this.containment[1]>r-this.offset.click.top?r+n.grid[1]:r-n.grid[1]:r:r;var l=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?this.containment[0]>l-this.offset.click.left||l-this.offset.click.left>this.containment[2]?this.containment[0]>l-this.offset.click.left?l+n.grid[0]:l-n.grid[0]:l:l}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:i.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:i.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this.counter;this._delay(function(){a==this.counter&&this.refreshPositions(!i)})},_clear:function(t,n){this.reverting=!1;var i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var a in this._storedCSS)("auto"==this._storedCSS[a]||"static"==this._storedCSS[a])&&(this._storedCSS[a]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||n||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var a=this.containers.length-1;a>=0;a--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[a])),this.containers[a].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[a])),this.containers[a].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var a=0;i.length>a;a++)i[a].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!n){for(var a=0;i.length>a;a++)i[a].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)(null==t[n]||t[n]==undefined)&&(e[n]=t[n]);return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]),n.hasClass(this.markerClassName)||(this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,i){t.settings[n]=i}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var n=this._get(t,"appendText"),i=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[i?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var a=this._get(t,"showOn");if(("focus"==a||"both"==a)&&e.focus(this._showDatepicker),"button"==a||"both"==a){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==o?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[i?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var i=function(e){for(var t=0,n=0,i=0;e.length>i;i++)e[i].length>t&&(t=e[i].length,n=i);return n};t.setMonth(i(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(i(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,i){t.settings[n]=i}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,n,i,a){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}if(extendRemove(s.settings,i||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,!this._pos){var r=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[r/2-100+c,l/2-150+d]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==i?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==i||"span"==i)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();if("input"==i)e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==i||"span"==i){var a=t.children("."+this._inlineClass);a.children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();if("input"==i)e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==i||"span"==i){var a=t.children("."+this._inlineClass);a.children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var i=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):i?"all"==t?$.extend({},i.settings):this._get(i,t):null;var a=t||{};if("string"==typeof t&&(a={},a[t]=n),i){this._curInst==i&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(i,"min"),r=this._getMinMaxDate(i,"max");extendRemove(i.settings,a),null!==o&&a.dateFormat!==undefined&&a.minDate===undefined&&(i.settings.minDate=this._formatDate(i,o)),null!==r&&a.dateFormat!==undefined&&a.maxDate===undefined&&(i.settings.maxDate=this._formatDate(i,r)),this._attachments($(e),i),this._autoSize(i),this._setDate(i,s),this._updateAlternate(i),this._updateDatepicker(i)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,i=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var a=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);a[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,a[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,i?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,i?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),i=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">i||!n||n.indexOf(i)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(i){$.datepicker.log(i)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),i=n?n.apply(e,[e,t]):{};if(i!==!1){extendRemove(t.settings,i),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var a=!1;$(e).parents().each(function(){return a|="fixed"==$(this).css("position"),!a});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,a),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":a?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),!t.inline){var o=$.datepicker._get(t,"showAnim"),r=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),r,l):t.dpDiv[o||"show"](o?r:null,l),o&&r||l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");n.length&&n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i=this._getNumberOfMonths(e),a=i[1],s=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",s*a+"em"),e.dpDiv[(1!=i[0]||1!=i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var i=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,r=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?i-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+i>r&&r>i?Math.abs(t.left+i-r):0),t.top-=Math.min(t.top,t.top+a>l&&l>a?Math.abs(a+o):0),t},_findPos:function(e){for(var t=this._getInst(e),n=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];var i=$(e).offset();return[i.left,i.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var n=this._get(t,"showAnim"),i=this._get(t,"duration"),a=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),i,a):t.dpDiv["slideDown"==n?"slideUp":"fadeIn"==n?"fadeOut":"hide"](n?i:null,a),n||a(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,n){var i=$(e),a=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(a,t+("M"==n?this._get(a,"showCurrentAtPos"):0),n),this._updateDatepicker(a))},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var i=new Date;n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var i=$(e),a=this._getInst(i[0]);a["selected"+("M"==n?"Month":"Year")]=a["draw"+("M"==n?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(i)},_selectDay:function(e,t,n,i){var a=$(e);if(!$(i).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(a[0])){var s=this._getInst(a[0]);s.selectedDay=s.currentDay=$("a",i).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]),this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),i=this._getInst(n[0]);t=null!=t?t:this._formatDate(i),i.input&&i.input.val(t),this._updateAlternate(i);var a=this._get(i,"onSelect");a?a.apply(i.input?i.input[0]:null,[t,i]):i.input&&i.input.trigger("change"),i.inline?this._updateDatepicker(i):(this._hideDatepicker(),this._lastInput=i.input[0],"object"!=typeof i.input[0]&&i.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),a=this.formatDate(n,i,this._getFormatConfig(e));$(t).each(function(){$(this).val(a)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var i=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;i="string"!=typeof i?i:(new Date).getFullYear()%100+parseInt(i,10);for(var a=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,r=(n?n.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,d=-1,u=-1,p=!1,f=function(t){var n=e.length>v+1&&e.charAt(v+1)==t;return n&&v++,n},h=function(e){var n=f(e),i="@"==e?14:"!"==e?20:"y"==e&&n?4:"o"==e?3:2,a=new RegExp("^\\d{1,"+i+"}"),s=t.substring(g).match(a);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},m=function(e,n,i){var a=$.map(f(e)?i:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;if($.each(a,function(e,n){var i=n[1];return t.substr(g,i.length).toLowerCase()==i.toLowerCase()?(s=n[0],g+=i.length,!1):void 0}),-1!=s)return s+1;throw"Unknown name at position "+g},_=function(){if(t.charAt(g)!=e.charAt(v))throw"Unexpected literal at position "+g;g++},g=0,v=0;e.length>v;v++)if(p)"'"!=e.charAt(v)||f("'")?_():p=!1;else switch(e.charAt(v)){case"d":d=h("d");break;case"D":m("D",a,s);break;case"o":u=h("o");break;case"m":c=h("m");break;case"M":c=m("M",o,r);break;case"y":l=h("y");break;case"@":var b=new Date(h("@"));l=b.getFullYear(),c=b.getMonth()+1,d=b.getDate();break;case"!":var b=new Date((h("!")-this._ticksTo1970)/1e4);l=b.getFullYear(),c=b.getMonth()+1,d=b.getDate();break;case"'":f("'")?_():p=!0;break;default:_()}if(t.length>g){var y=t.substr(g);if(!/^\s+/.test(y))throw"Extra/unparsed characters found in date: "+y}if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i>=l?0:-100)),u>-1)for(c=1,d=u;;){var w=this._getDaysInMonth(l,c-1);if(w>=d)break;c++,d-=w}var b=this._daylightSavingAdjust(new Date(l,c-1,d));if(b.getFullYear()!=l||b.getMonth()+1!=c||b.getDate()!=d)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,n){if(!t)return"";var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,a=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,r=function(t){var n=e.length>p+1&&e.charAt(p+1)==t;return n&&p++,n},l=function(e,t,n){var i=""+t;if(r(e))for(;n>i.length;)i="0"+i;return i},c=function(e,t,n,i){return r(e)?i[t]:n[t]},d="",u=!1;if(t)for(var p=0;e.length>p;p++)if(u)"'"!=e.charAt(p)||r("'")?d+=e.charAt(p):u=!1;else switch(e.charAt(p)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=c("D",t.getDay(),i,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=c("M",t.getMonth(),s,o);break;case"y":d+=r("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":r("'")?d+="'":u=!0;break;default:d+=e.charAt(p)}return d},_possibleChars:function(e){for(var t="",n=!1,i=function(t){var n=e.length>a+1&&e.charAt(a+1)==t;
return n&&a++,n},a=0;e.length>a;a++)if(n)"'"!=e.charAt(a)||i("'")?t+=e.charAt(a):n=!1;else switch(e.charAt(a)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":i("'")?t+="'":n=!0;break;default:t+=e.charAt(a)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var a,s,n=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null;a=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{a=this.parseDate(n,i,o)||s}catch(r){this.log(r),i=t?"":i}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=i?a.getDate():0,e.currentMonth=i?a.getMonth():0,e.currentYear=i?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}for(var i=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,a=i.getFullYear(),s=i.getMonth(),o=i.getDate(),r=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(t);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":s+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(a,s));break;case"y":case"Y":a+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(a,s))}l=r.exec(t)}return new Date(a,s,o)},s=null==t||""===t?n:"string"==typeof t?a(t):"number"==typeof t?isNaN(t)?n:i(t):new Date(t.getTime());return s=s&&"Invalid Date"==s.toString()?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,a=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),a==e.selectedMonth&&s==e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),i=this._get(e,"showButtonPanel"),a=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),r=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=o[0]||1!=o[1],d=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),u=this._getMinMaxDate(e,"min"),p=this._getMinMaxDate(e,"max"),f=e.drawMonth-r,h=e.drawYear;if(0>f&&(f+=12,h--),p){var m=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth()-o[0]*o[1]+1,p.getDate()));for(m=u&&u>m?u:m;this._daylightSavingAdjust(new Date(h,f,1))>m;)f--,0>f&&(f=11,h--)}e.drawMonth=f,e.drawYear=h;var _=this._get(e,"prevText");_=s?this.formatDate(_,this._daylightSavingAdjust(new Date(h,f-l,1)),this._getFormatConfig(e)):_;var g=this._canAdjustMonth(e,-1,h,f)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+_+"</span></a>":a?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+_+"</span></a>",v=this._get(e,"nextText");v=s?this.formatDate(v,this._daylightSavingAdjust(new Date(h,f+l,1)),this._getFormatConfig(e)):v;var b=this._canAdjustMonth(e,1,h,f)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+v+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+v+"</span></a>":a?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+v+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+v+"</span></a>",y=this._get(e,"currentText"),w=this._get(e,"gotoCurrent")&&e.currentDay?d:t;y=s?this.formatDate(y,w,this._getFormatConfig(e)):y;var k=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=i?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?k:"")+(this._isInRange(e,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+y+"</button>":"")+(n?"":k)+"</div>":"",j=parseInt(this._get(e,"firstDay"),10);j=isNaN(j)?0:j;var C=this._get(e,"showWeek"),S=this._get(e,"dayNames");this._get(e,"dayNamesShort");var E=this._get(e,"dayNamesMin"),T=this._get(e,"monthNames"),z=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),P=this._get(e,"showOtherMonths"),A=this._get(e,"selectOtherMonths");this._get(e,"calculateWeek")||this.iso8601Week;for(var I=this._getDefaultDate(e),F="",N=0;o[0]>N;N++){var H="";this.maxRows=4;for(var L=0;o[1]>L;L++){var R=this._daylightSavingAdjust(new Date(h,f,e.selectedDay)),q=" ui-corner-all",W="";if(c){if(W+='<div class="ui-datepicker-group',o[1]>1)switch(L){case 0:W+=" ui-datepicker-group-first",q=" ui-corner-"+(n?"right":"left");break;case o[1]-1:W+=" ui-datepicker-group-last",q=" ui-corner-"+(n?"left":"right");break;default:W+=" ui-datepicker-group-middle",q=""}W+='">'}W+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+q+'">'+(/all|left/.test(q)&&0==N?n?b:g:"")+(/all|right/.test(q)&&0==N?n?g:b:"")+this._generateMonthYearHeader(e,f,h,u,p,N>0||L>0,T,z)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";for(var Y=C?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",U=0;7>U;U++){var B=(U+j)%7;Y+="<th"+((U+j+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+S[B]+'">'+E[B]+"</span></th>"}W+=Y+"</tr></thead><tbody>";var V=this._getDaysInMonth(h,f);h==e.selectedYear&&f==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var X=(this._getFirstDayOfMonth(h,f)-j+7)%7,G=Math.ceil((X+V)/7),K=c?this.maxRows>G?this.maxRows:G:G;this.maxRows=K;for(var Q=this._daylightSavingAdjust(new Date(h,f,1-X)),Z=0;K>Z;Z++){W+="<tr>";for(var J=C?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(Q)+"</td>":"",U=0;7>U;U++){var et=M?M.apply(e.input?e.input[0]:null,[Q]):[!0,""],tt=Q.getMonth()!=f,nt=tt&&!A||!et[0]||u&&u>Q||p&&Q>p;J+='<td class="'+((U+j+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(Q.getTime()==R.getTime()&&f==e.selectedMonth&&e._keyEvent||I.getTime()==Q.getTime()&&I.getTime()==R.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!P?"":" "+et[1]+(Q.getTime()==d.getTime()?" "+this._currentClass:"")+(Q.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(tt&&!P||!et[2]?"":' title="'+et[2]+'"')+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+Q.getMonth()+'" data-year="'+Q.getFullYear()+'"')+">"+(tt&&!P?"&#xa0;":nt?'<span class="ui-state-default">'+Q.getDate()+"</span>":'<a class="ui-state-default'+(Q.getTime()==t.getTime()?" ui-state-highlight":"")+(Q.getTime()==d.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+Q.getDate()+"</a>")+"</td>",Q.setDate(Q.getDate()+1),Q=this._daylightSavingAdjust(Q)}W+=J+"</tr>"}f++,f>11&&(f=0,h++),W+="</tbody></table>"+(c?"</div>"+(o[0]>0&&L==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),H+=W}F+=H}return F+=x+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,F},_generateMonthYearHeader:function(e,t,n,i,a,s,o,r){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),d=this._get(e,"showMonthAfterYear"),u='<div class="ui-datepicker-title">',p="";if(s||!l)p+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var f=i&&i.getFullYear()==n,h=a&&a.getFullYear()==n;p+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var m=0;12>m;m++)(!f||m>=i.getMonth())&&(!h||a.getMonth()>=m)&&(p+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+r[m]+"</option>");p+="</select>"}if(d||(u+=p+(!s&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!c)u+='<span class="ui-datepicker-year">'+n+"</span>";else{var _=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),v=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=v(_[0]),y=Math.max(b,v(_[1]||""));for(b=i?Math.max(b,i.getFullYear()):b,y=a?Math.min(y,a.getFullYear()):y,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';y>=b;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",u+=e.yearshtml,e.yearshtml=null}return u+=this._get(e,"yearSuffix"),d&&(u+=(!s&&l&&c?"":"&#xa0;")+p),u+="</div>"},_adjustInstDate:function(e,t,n){var i=e.drawYear+("Y"==n?t:0),a=e.drawMonth+("M"==n?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(i,a))+("D"==n?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,a,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"==n||"Y"==n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),a=n&&n>t?n:t;return a=i&&a>i?i:a},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var a=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,i+(0>t?t:a[0]*a[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!i||i.getTime()>=t.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var a=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),a,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),jQuery(function(e){e.datepicker.regional["zh-CN"]={closeText:"å³é­",prevText:"&#x3C;ä¸æ",nextText:"ä¸æ&#x3E;",currentText:"ä»å¤©",monthNames:["ä¸æ?","äºæ","ä¸æ","åæ","äºæ","å­æ","ä¸æ","å«æ","ä¹æ","åæ","åä¸æ?","åäºæ?"],monthNamesShort:["ä¸æ?","äºæ","ä¸æ","åæ","äºæ","å­æ","ä¸æ","å«æ","ä¹æ","åæ","åä¸æ?","åäºæ?"],dayNames:["æææ?","ææä¸","ææäº?","ææä¸?","ææå?","ææäº?","ææå?"],dayNamesShort:["å¨æ¥","å¨ä¸","å¨äº","å¨ä¸","å¨å","å¨äº","å¨å­"],dayNamesMin:["æ?","ä¸","äº?","ä¸?","å?","äº?","å?"],weekHeader:"å?",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"å¹?"},e.datepicker.setDefaults(e.datepicker.regional["zh-CN"])}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one(e.support.transition.end,function(){n=!0});var a=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(a,t),this},e(function(){e.support.transition=t()})}(jQuery),+function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){a.trigger("closed.bs.alert").remove()}var n=e(this),i=n.attr("data-target");i||(i=n.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var a=e(i);t&&t.preventDefault(),a.length||(a=n.hasClass("alert")?n:n.parent()),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one(e.support.transition.end,s).emulateTransitionEnd(150):s())};var i=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var i=e(this),a=i.data("bs.alert");a||i.data("bs.alert",a=new n(this)),"string"==typeof t&&a[t].call(i)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.isLoading=!1};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",i=this.$element,a=i.is("input")?"val":"html",s=i.data();t+="Text",s.resetText||i.data("resetText",i[a]()),i[a](s[t]||this.options[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var i=e(this),a=i.data("bs.button"),s="object"==typeof n&&n;a||i.data("bs.button",a=new t(this,s)),"toggle"==n?a.toggle():n&&a.setState(n)})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(t){var n=this,i=this.getActiveIndex();return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(t,n){var i=this.$element.find(".item.active"),a=n||i[t](),s=this.interval,o="next"==t?"left":"right",r="next"==t?"first":"last",l=this;if(!a.length){if(!this.options.wrap)return;a=this.$element.find(".item")[r]()}if(a.hasClass("active"))return this.sliding=!1;var c=e.Event("slide.bs.carousel",{relatedTarget:a[0],direction:o});return this.$element.trigger(c),c.isDefaultPrevented()?void 0:(this.sliding=!0,s&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var t=e(l.$indicators.children()[l.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")?(a.addClass(t),a[0].offsetWidth,i.addClass(o),a.addClass(o),i.one(e.support.transition.end,function(){a.removeClass([t,o].join(" ")).addClass("active"),i.removeClass(["active",o].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*i.css("transition-duration").slice(0,-1))):(i.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),s&&this.cycle(),this)};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var i=e(this),a=i.data("bs.carousel"),s=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n),o="string"==typeof n?n:s.slide;a||i.data("bs.carousel",a=new t(this,s)),"number"==typeof n?a.to(n):o?a[o]():s.interval&&a.pause().cycle()})},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var i,n=e(this),a=e(n.attr("data-target")||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},a.data(),n.data()),o=n.attr("data-slide-to");o&&(s.interval=!1),a.carousel(s),(o=n.attr("data-slide-to"))&&a.data("bs.carousel").to(o),t.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);t.carousel(t.data())})})}(jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var o=e.camelCase(["scroll",a].join("-"));this.$element.one(e.support.transition.end,e.proxy(s,this)).emulateTransitionEnd(350)[a](this.$element[0][o])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?(this.$element[n](0).one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350),void 0):i.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),a=i.data("bs.collapse"),s=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);!a&&s.toggle&&"show"==n&&(n=!n),a||i.data("bs.collapse",a=new t(this,s)),"string"==typeof n&&a[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var i,n=e(this),a=n.attr("data-target")||t.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),s=e(a),o=s.data("bs.collapse"),r=o?"toggle":n.data(),l=n.attr("data-parent"),c=l&&e(l);o&&o.transitioning||(c&&c.find('[data-toggle=collapse][data-parent="'+l+'"]').not(n).addClass("collapsed"),n[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),s.collapse(r)})}(jQuery),+function(e){"use strict";function a(i){e(t).remove(),e(n).each(function(){var t=s(e(this)),n={relatedTarget:this};t.hasClass("open")&&(t.trigger(i=e.Event("hide.bs.dropdown",n)),i.isDefaultPrevented()||t.removeClass("open").trigger("hidden.bs.dropdown",n))})}function s(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}var t=".dropdown-backdrop",n="[data-toggle=dropdown]",i=function(t){e(t).on("click.bs.dropdown",this.toggle)};i.prototype.toggle=function(t){var n=e(this);if(!n.is(".disabled, :disabled")){var i=s(n),o=i.hasClass("open");if(a(),!o){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",a);var r={relatedTarget:this};if(i.trigger(t=e.Event("show.bs.dropdown",r)),t.isDefaultPrevented())return;i.toggleClass("open").trigger("shown.bs.dropdown",r),n.focus()}return!1}},i.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var a=s(i),o=a.hasClass("open");if(!o||o&&27==t.keyCode)return 27==t.which&&a.find(n).focus(),i.click();var r=" li:not(.divider):visible a",l=a.find("[role=menu]"+r+", [role=listbox]"+r);if(l.length){var c=l.index(l.filter(":focus"));38==t.keyCode&&c>0&&c--,40==t.keyCode&&l.length-1>c&&c++,~c||(c=0),l.eq(c).focus()}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),a=n.data("bs.dropdown");a||n.data("bs.dropdown",a=new i(this)),"string"==typeof t&&a[t].call(n)})},e.fn.dropdown.Constructor=i,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,i.prototype.toggle).on("keydown.bs.dropdown.data-api",n+", [role=menu], [role=listbox]",i.prototype.keydown)}(jQuery),+function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});i?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(a)}).emulateTransitionEnd(300):n.$element.focus().trigger(a)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,i){return this.each(function(){var a=e(this),s=a.data("bs.modal"),o=e.extend({},t.DEFAULTS,a.data(),"object"==typeof n&&n);s||a.data("bs.modal",s=new t(this,o)),"string"==typeof n?s[n](i):o.show&&s.show(i)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),a=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},a.data(),n.data());n.is("a")&&t.preventDefault(),a.modal(s,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),+function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i);for(var a=this.options.trigger.split(" "),s=a.length;s--;){var o=a[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var r="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this,i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,o=s.test(a);o&&(a=a.replace(s,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(a),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var r=this.getPosition(),l=i[0].offsetWidth,c=i[0].offsetHeight;if(o){var d=this.$element.parent(),u=a,p=document.documentElement.scrollTop||document.body.scrollTop,f="body"==this.options.container?window.innerWidth:d.outerWidth(),h="body"==this.options.container?window.innerHeight:d.outerHeight(),m="body"==this.options.container?0:d.offset().left;a="bottom"==a&&r.top+r.height+c-p>h?"top":"top"==a&&0>r.top-p-c?"bottom":"right"==a&&r.right+l>f?"left":"left"==a&&m>r.left-l?"right":a,i.removeClass(u).addClass(a)
}var _=this.getCalculatedOffset(a,r,l,c);this.applyPlacement(_,a),this.hoverState=null;var g=function(){n.$element.trigger("shown.bs."+n.type)};e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,g).emulateTransitionEnd(150):g()}},t.prototype.applyPlacement=function(t,n){var i,a=this.tip(),s=a[0].offsetWidth,o=a[0].offsetHeight,r=parseInt(a.css("margin-top"),10),l=parseInt(a.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(l)&&(l=0),t.top=t.top+r,t.left=t.left+l,e.offset.setOffset(a[0],e.extend({using:function(e){a.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),a.addClass("in");var c=a[0].offsetWidth,d=a[0].offsetHeight;if("top"==n&&d!=o&&(i=!0,t.top=t.top+o-d),/bottom|top/.test(n)){var u=0;0>t.left&&(u=-2*t.left,t.left=0,a.offset(t),c=a[0].offsetWidth,d=a[0].offsetHeight),this.replaceArrow(u-s+c,c,"left")}else this.replaceArrow(d-o,d,"top");i&&a.offset(t)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function a(){"in"!=t.hoverState&&n.detach(),t.$element.trigger("hidden.bs."+t.type)}var t=this,n=this.tip(),i=e.Event("hide.bs."+this.type);return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?n.one(e.support.transition.end,a).emulateTransitionEnd(150):a(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),a=i.data("bs.tooltip"),s="object"==typeof n&&n;(a||"destroy"!=n)&&(a||i.data("bs.tooltip",a=new t(this,s)),"string"==typeof n&&a[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var i=e(this),a=i.data("bs.popover"),s="object"==typeof n&&n;(a||"destroy"!=n)&&(a||i.data("bs.popover",a=new t(this,s)),"string"==typeof n&&a[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){"use strict";function t(n,i){var a,s=e.proxy(this.process,this);this.$element=e(n).is("body")?e(window):e(n),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",s),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||(a=e(n).attr("href"))&&a.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}t.DEFAULTS={offset:10},t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var n=this;this.$body.find(this.selector).map(function(){var i=e(this),a=i.data("target")||i.attr("href"),s=/^#./.test(a)&&e(a);return s&&s.length&&s.is(":visible")&&[[s[t]().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),a]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var o,e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),i=this.offsets,a=this.targets,s=this.activeTarget;if(e>=n)return s!=(o=a.last()[0])&&this.activate(o);if(s&&i[0]>=e)return s!=(o=a[0])&&this.activate(o);for(o=i.length;o--;)s!=a[o]&&e>=i[o]&&(!i[o+1]||i[o+1]>=e)&&this.activate(a[o])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var i=e(this),a=i.data("bs.scrollspy"),s="object"==typeof n&&n;a||i.data("bs.scrollspy",a=new t(this,s)),"string"==typeof n&&a[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(jQuery),+function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var a=n.find(".active:last a")[0],s=e.Event("show.bs.tab",{relatedTarget:a});if(t.trigger(s),!s.isDefaultPrevented()){var o=e(i);this.activate(t.parent("li"),n),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:a})})}}},t.prototype.activate=function(t,n,i){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var a=n.find("> .active"),s=i&&e.support.transition&&a.hasClass("fade");s?a.one(e.support.transition.end,o).emulateTransitionEnd(150):o(),a.removeClass("in")};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var i=e(this),a=i.data("bs.tab");a||i.data("bs.tab",a=new t(this)),"string"==typeof n&&a[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(jQuery),+function(e){"use strict";var t=function(n,i){this.options=e.extend({},t.DEFAULTS,i),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$window.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=e(document).height(),i=this.$window.scrollTop(),a=this.$element.offset(),s=this.options.offset,o=s.top,r=s.bottom;"top"==this.affixed&&(a.top+=i),"object"!=typeof s&&(r=o=s),"function"==typeof o&&(o=s.top(this.$element)),"function"==typeof r&&(r=s.bottom(this.$element));var l=null!=this.unpin&&a.top>=i+this.unpin?!1:null!=r&&a.top+this.$element.height()>=n-r?"bottom":null!=o&&o>=i?"top":!1;if(this.affixed!==l){this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),d=e.Event(c+".bs.affix");this.$element.trigger(d),d.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(c).trigger(e.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:n-r-this.$element.height()}))}}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var i=e(this),a=i.data("bs.affix"),s="object"==typeof n&&n;a||i.data("bs.affix",a=new t(this,s)),"string"==typeof n&&a[n]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(jQuery),function(e){var t=function(n,i){return this.$element=e(n),this.$note=e('<div class="alert"></div>'),this.options=e.extend(!0,{},e.fn.notify.defaults,i),this._link=null,this.options.transition?"fade"===this.options.transition?this.$note.addClass("in").addClass(this.options.transition):this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in"),this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success"),this.options.message&&("string"==typeof this.options.message?this.$note.html(this.options.message):"object"==typeof this.options.message&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text&&this.$note.text(this.options.message.text))),this.options.closable&&(this._link=e('<a class="close pull-right">&times;</a>'),e(this._link).on("click",e.proxy(t.onClose,this)),this.$note.prepend(this._link)),this};t.onClose=function(){this.options.onClose(),e(this.$note).remove(),this.options.onClosed()},t.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",e.proxy(t.onClose,this)),this.$element.append(this.$note),this.$note.alert()},t.prototype.hide=function(){this.options.fadeOut.enabled?this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",e.proxy(t.onClose,this)):t.onClose.call(this)},e.fn.notify=function(e){return new t(this,e)},e.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3e3},message:null,onClose:function(){},onClosed:function(){}}}(window.jQuery),function(e){var t={debugOn:!1,markupCreated:!1,markup:"",attachEvents:function(n){e("#gollum-dialog-action-ok").click(function(e){t.eventOK(e,n)}),e("#gollum-dialog-action-cancel").click(t.eventCancel),e('#gollum-dialog-dialog input[type="text"]').keydown(function(e){13==e.keyCode&&t.eventOK(e,n)})},detachEvents:function(){e("#gollum-dialog-action-ok").unbind("click"),e("#gollum-dialog-action-cancel").unbind("click")},createFieldMarkup:function(e){for(var n="<fieldset>",i=0;e.length>i;i++)if("object"==typeof e[i]){switch(n+='<div class="field">',e[i].type){case"text":n+=t.createFieldText(e[i]);break;default:}n+="</div>"}return n+="</fieldset>"},createFieldText:function(e){var t="";return e.name&&(t+="<label",e.id&&(t+=' for="'+e.name+'"'),t+=">"+e.name+"</label>"),t+='<input type="text"',e.id&&(t+=' name="'+e.id+'"',"code"==e.type&&(t+=' class="code"'),t+=' id="gollum-dialog-dialog-generated-field-'+e.id+'">'),t},createMarkup:function(n,i){return t.markupCreated=!0,e.facebox?'<div id="gollum-dialog-dialog"><div id="gollum-dialog-dialog-title"><h4>'+n+"</h4></div>"+'<div id="gollum-dialog-dialog-body">'+i+"</div>"+'<div id="gollum-dialog-dialog-buttons">'+'<a href="#" title="Cancel" id="gollum-dialog-action-cancel" '+'class="gollum-minibutton">Cancel</a>'+'<a href="#" title="OK" id="gollum-dialog-action-ok" '+'class="gollum-minibutton">OK</a>'+"</div>"+"</div>":'<div id="gollum-dialog-dialog"><div id="gollum-dialog-dialog-inner"><div id="gollum-dialog-dialog-bg"><div id="gollum-dialog-dialog-title"><h4>'+n+"</h4></div>"+'<div id="gollum-dialog-dialog-body">'+i+"</div>"+'<div id="gollum-dialog-dialog-buttons">'+'<a href="#" title="Cancel" id="gollum-dialog-action-cancel" '+'class="minibutton">Cancel</a>'+'<a href="#" title="OK" id="gollum-dialog-action-ok" '+'class="minibutton">OK</a>'+"</div>"+"</div>"+"</div>"+"</div>"},eventCancel:function(e){e.preventDefault(),n("Cancelled dialog."),t.hide()},eventOK:function(n,i){n.preventDefault();var a=[];e("#gollum-dialog-dialog-body input").each(function(){a[e(this).attr("name")]=e(this).val()}),i&&"function"==typeof i&&i(a),t.hide()},hide:function(){e.facebox?(t.markupCreated=!1,e(document).trigger("close.facebox"),t.detachEvents()):e.browser.msie?(e("#gollum-dialog-dialog").hide().removeClass("active"),e("select").css("visibility","visible")):e("#gollum-dialog-dialog").animate({opacity:0},{duration:200,complete:function(){e("#gollum-dialog-dialog").removeClass("active")}})},init:function(i){var a="",s="";return i&&"object"==typeof i?(i.body&&"string"==typeof i.body&&(s="<p>"+i.body+"</p>"),i.fields&&"object"==typeof i.fields&&(s+=t.createFieldMarkup(i.fields)),i.title&&"string"==typeof i.title&&(a=i.title),t.markupCreated&&(e.facebox?e(document).trigger("close.facebox"):e("#gollum-dialog-dialog").remove()),t.markup=t.createMarkup(a,s),e.facebox?e(document).bind("reveal.facebox",function(){i.OK&&"function"==typeof i.OK&&(t.attachEvents(i.OK),e(e('#facebox input[type="text"]').get(0)).focus())}):(e("body").append(t.markup),i.OK&&"function"==typeof i.OK&&t.attachEvents(i.OK)),t.show(),void 0):(n("Editor Dialog: Cannot init; invalid init object"),void 0)},show:function(){t.markupCreated?(n("Showing dialog"),e.facebox?e.facebox(t.markup):e.browser.msie?(e("#gollum-dialog.dialog").addClass("active"),t.position(),e("select").css("visibility","hidden")):(e("#gollum-dialog.dialog").css("display","none"),e("#gollum-dialog-dialog").animate({opacity:0},{duration:0,complete:function(){e("#gollum-dialog-dialog").css("display","block"),t.position(),e("#gollum-dialog-dialog").animate({opacity:1},{duration:500})}}))):n("Dialog: No markup to show. Please use init first.")},position:function(){var t=e("#gollum-dialog-dialog-inner").height();e("#gollum-dialog-dialog-inner").css("height",t+"px").css("margin-top",-1*parseInt(t/2))}};e.facebox&&e(document).bind("reveal.facebox",function(){e("#facebox img.close_image").remove()});var n=function(e){t.debugOn&&"undefined"!=typeof console&&console.log(e)};e.GollumDialog=t}(jQuery),function(e){var i,t={MarkupType:"markdown",EditorMode:"code",NewFile:!1,HasFunctionBar:!0,Debug:!1,NoDefinitionsFor:[],AfterClickFunBar:null},n={};e.fn.GollumEditor=function(r){if(i=this,n=e.extend(t,r),a("GollumEditor loading"),i.data("AfterClickFunBar",n.AfterClickFunBar),o.baseEditorMarkup()&&(o.titleDisplayed()&&i.find(".gollum-editor-title-field").addClass("active"),o.editSummaryMarkup()&&(e.GollumEditor.Placeholder.add(e(".gollum-editor-edit-summary input")),e('.gollum-editor form[name="gollum-editor"]').submit(function(t){t.preventDefault(),e.GollumEditor.Placeholder.clearAll(),a("submitting"),e(this).unbind("submit"),e(this).submit()})),o.collapsibleInputs()&&e(".gollum-editor .collapsed a.button, .gollum-editor .expanded a.button").click(function(t){t.preventDefault(),e(this).parent().toggleClass("expanded"),e(this).parent().toggleClass("collapsed")}),o.previewButton()&&i.find(".gollum-editor .gollum-editor-preview").click(function(){var t=e(".gollum-editor form").attr("action"),n=e(e(".gollum-editor form").get(0));return n.attr("action",this.href||"/preview"),n.attr("target","_blank"),n.submit(),n.attr("action",t),n.removeAttr("target"),!1}),o.functionBar())){var d=i.find(".gollum-editor-body").attr("data-markup-lang");d&&(n.MarkupType=d),s.setActiveLanguage(n.MarkupType),o.formatSelector()&&l.init(e(".gollum-editor-format-selector select")),o.help()&&(e(".gollum-editor-help").hide(),e(".gollum-editor-help").removeClass("jaws"))}},e.GollumEditor=function(){},e.GollumEditor.defineLanguage=function(e,t){"object"==typeof t?s.define(e,t):a("GollumEditor.defineLanguage: definition for "+e+" is not an object")};var a=function(e){n.Debug&&"undefined"!=typeof console&&console.log(e)},s={_ACTIVE_LANG:"",_LOADED_LANGS:[],_LANG:{},define:function(t,n){if(s._ACTIVE_LANG=t,s._LOADED_LANGS.push(t),"object"==typeof e.GollumEditor.WikiLanguage){var i={};e.extend(i,e.GollumEditor.WikiLanguage,n),s._LANG[t]=i}else s._LANG[t]=n},getActiveLanguage:function(){return s._ACTIVE_LANG},setActiveLanguage:function(e){s.isLoadedFor(e)?(s._ACTIVE_LANG=e,r.refresh(i)):(s._ACTIVE_LANG=null,s.loadFor(e,function(t,n){"success"!=n&&(a("Failed to load language definition for "+e),s.define(e,{})),o.functionBar()&&r.refresh(),s.isValid()&&o.formatSelector()&&l.updateSelected()}))},getDefinitionFor:function(e,t){return t||(t=s._ACTIVE_LANG),s.isLoadedFor(t)&&s._LANG[t][e]&&"object"==typeof s._LANG[t][e]?s._LANG[t][e]:null},loadFor:function(t,i){if(n.NoDefinitionsFor.length)for(var a=0;n.NoDefinitionsFor.length>a;a++)if(t==n.NoDefinitionsFor[a]&&"function"==typeof i)return i(null,"error"),void 0;var s="/assets/langs/"+t+".js";e.ajax({url:s,dataType:"script",complete:function(e,t){"function"==typeof i&&i(e,t)}})},isLoadedFor:function(e){if(0===s._LOADED_LANGS.length)return!1;for(var t=0;s._LOADED_LANGS.length>t;t++)if(s._LOADED_LANGS[t]==e)return!0;return!1},isValid:function(){return s._ACTIVE_LANG&&"object"==typeof s._LANG[s._ACTIVE_LANG]}},o={baseEditorMarkup:function(){return i.find(".gollum-editor").length&&i.find(".gollum-editor-body").length},collapsibleInputs:function(){return i.find(".gollum-editor .collapsed, .gollum-editor .expanded").length},formatSelector:function(){return i.find(".gollum-editor-format-selector select").length},functionBar:function(){return n.HasFunctionBar&&i.find(".gollum-editor-function-bar").length},ff4Environment:function(){var e=new RegExp(/Firefox\/4.0b/);return e.test(navigator.userAgent)},editSummaryMarkup:function(){return i.find("input.gollum-editor-message-field").length>0},help:function(){return i.find(".gollum-editor .gollum-editor-help").length&&i.find(".gollum-editor .function-help").length},previewButton:function(){return i.find(".gollum-editor .gollum-editor-preview").length},titleDisplayed:function(){return n.NewFile}},r={isActive:!1,activate:function(){a("Activating function bar"),i.find(".gollum-editor-function-bar a.function-button").each(function(){var t=e(this).attr("class").split(" ")[e(this).attr("class").split(" ").length-1];s.getDefinitionFor(t)?(e(this).click(r.evtFunctionButtonClick),e(this).removeClass("disabled")):"function-help"!=e(this).attr("id")&&e(this).addClass("disabled")}),i.find(".gollum-editor-function-bar").addClass("active"),r.isActive=!0},deactivate:function(){i.find(".gollum-editor-function-bar a.function-button").unbind("click"),i.find(".gollum-editor-function-bar").removeClass("active"),r.isActive=!1},evtFunctionButtonClick:function(t){t.preventDefault();var n=e(this).attr("class").split(" ")[e(this).attr("class").split(" ").length-1],i=s.getDefinitionFor(n);"object"==typeof i&&r.executeAction(i,t)},executeAction:function(t,n){var i=n||window.event,s=e(i.target).parents(".gollum-editor").find(".gollum-editor-body").val();r.getFieldSelectionPosition(e(i.target).parents(".gollum-editor").find(".gollum-editor-body"));var l=r.getFieldSelection(e(i.target).parents(".gollum-editor").find(".gollum-editor-body")),c=l,d=!0,u=null;if(null==t&&(t={}),t.exec&&"function"==typeof t.exec)return t.exec(s,l,e(i.target).parents(".gollum-editor").find(".gollum-editor-body")),void 0;var p=/([^\n]+)/gi;if(t.search&&"object"==typeof t.search&&(a("Replacing search Regex"),p=null,p=new RegExp(t.search),a(p)),a('repText is "'+c+'"'),t.replace&&"string"==typeof t.replace){a("Running replacement - using "+t.replace);var f=t.replace;c=c.replace(p,f),c=c.replace(/\$[\d]/g,""),""===c&&(a("Search string is empty"),u=f.indexOf("$1"),c=f.replace(/\$[\d]/g,""),-1==u&&(u=Math.floor(f.length/2)))}t.append&&"string"==typeof t.append&&(c==l&&(d=!1),c+=t.append),c&&r.replaceFieldSelection(e(i.target).parents(".gollum-editor").find(".gollum-editor-body"),c,d,u);var h=e(i.target).parents(".gollum-editor-wrap").data("AfterClickFunBar");e.isFunction(h)&&h(e(i.target).parents(".gollum-editor").find(".gollum-editor-body").val())},getFieldSelectionPosition:function(e){if(e.length){var t=0,n=0,i=e.get(0);if("number"==typeof i.selectionStart&&"number"==typeof i.selectionEnd)t=i.selectionStart,n=i.selectionEnd;else{var s=document.selection.createRange(),o=s.duplicate();o.moveToElementText(i),o.setEndPoint("EndToEnd",s),t=o.text.length-s.text.length,n=t+s.text.length;var c,r=t,l=0;for(a("IE: start position is currently "+r),c=0;r>c;c++)i.value.charAt(c).match(/\r/)&&++l;l&&(a("IE start: compensating for "+l+" line breaks"),t-=l,l=0);var d=n;for(c=0;d>c;c++)i.value.charAt(c).match(/\r/)&&++l;l&&(a("IE end: compensating for "+l+" line breaks"),n-=l)}return{start:t,end:n}}},getFieldSelection:function(e){var n,t="";return e.length?(n=r.getFieldSelectionPosition(e),t=e.val().substring(n.start,n.end),a("Selected: "+t+" ("+n.start+", "+n.end+")"),t):!1},isShown:function(){return i.find(".gollum-editor-function-bar").is(":visible")},refresh:function(){o.functionBar()&&(a("Refreshing function bar"),s.isValid()?(i.find(".gollum-editor-function-bar a.function-button").unbind("click"),r.activate(),c&&c.setActiveHelp(s.getActiveLanguage())):(a("Language definition is invalid."),r.isShown()&&r.deactivate(),c.isShown()&&c.hide()))},replaceFieldSelection:function(e,t,n,i){var a=r.getFieldSelectionPosition(e),s=e.val(),o=!0;n===!1&&(o=!1);var l=null;if(e[0].scrollTop&&(l=e[0].scrollTop),e.val(s.substring(0,a.start)+t+s.substring(a.end)),e[0].focus(),o)if(e[0].setSelectionRange)i?e[0].setSelectionRange(a.start+i,a.start+i):e[0].setSelectionRange(a.start,a.start+t.length);else if(e[0].createTextRange){var c=e[0].createTextRange();c.collapse(!0),i?(c.moveEnd(a.start+i),c.moveStart(a.start+i)):(c.moveEnd("character",a.start+t.length),c.moveStart("character",a.start)),c.select()}l&&(e[0].scrollTop=l)}},l={$_SELECTOR:null,evtChangeFormat:function(){var n=e(this).val();s.setActiveLanguage(n)},init:function(e){a("Initializing format selector"),l.$_SELECTOR&&"object"==typeof l.$_SELECTOR&&l.$_SELECTOR.unbind("change"),l.$_SELECTOR=e,l.updateSelected(),l.$_SELECTOR.change(l.evtChangeFormat)},updateSelected:function(){var e=s.getActiveLanguage();l.$_SELECTOR.val(e)}},c={_ACTIVE_HELP:"",_LOADED_HELP_LANGS:[],_HELP:{},define:function(t,n){c.isValidHelpFormat(n)?(a("help is a valid format"),c._ACTIVE_HELP_LANG=t,c._LOADED_HELP_LANGS.push(t),c._HELP[t]=n,e(".function-help").length&&(e(".function-help").hasClass("disabled")&&e(".function-help").removeClass("disabled"),e(".function-help").unbind("click"),e(".function-help").click(c.evtHelpButtonClick),c.generateHelpMenuFor(t),e(".gollum-editor-help").length&&e(".gollum-editor-help").attr("data-autodisplay")!==void 0&&"true"===e(".gollum-editor-help").attr("data-autodisplay")&&c.show())):e(".function-help").length&&e(".function-help").addClass("disabled")},generateHelpMenuFor:function(t){if(!c._HELP[t])return a("Help is not defined for "+t.toString()),!1;var n=c._HELP[t];i.find(".gollum-editor-help-parent").html(""),i.find(".gollum-editor-help-list").html(""),i.find(".gollum-editor-help-content").html("");for(var s=0;n.length>s&&"object"==typeof n[s];s++){var o=e('<li><a href="#" rel="'+s+'">'+n[s].menuName+"</a></li>");e(".gollum-editor-help-parent").append(o),0===s&&o.children("a").addClass("selected"),o.children("a").click(c.evtParentMenuClick)}c.generateSubMenu(n[0],0)},generateSubMenu:function(t,n){i.find(".gollum-editor-help-list").html(""),i.find(".gollum-editor-help-content").html("");for(var a=0;t.content.length>a&&"object"==typeof t.content[a];a++){var s=e('<li><a href="#" rel="'+n+":"+a+'">'+t.content[a].menuName+"</a></li>");i.find(".gollum-editor-help-list").append(s),s.children("a").click(c.evtSubMenuClick)}},hide:function(){kzi.util.isIE()?i.find(".gollum-editor-help").css("display","none"):i.find(".gollum-editor-help").animate({opacity:0},200,function(){i.find(".gollum-editor-help").animate({height:"hide"},200)})},show:function(){kzi.util.isIE()?i.find(".gollum-editor-help").css("display","block"):i.find(".gollum-editor-help").animate({height:"show"},200,function(){i.find(".gollum-editor-help").animate({opacity:1},300)})},showHelpFor:function(e,t){var n=c._HELP[c._ACTIVE_HELP_LANG][e].content[t].data;i.find(".gollum-editor-help-content").html(n)},isLoadedFor:function(e){for(var t=0;c._LOADED_HELP_LANGS.length>t;t++)if(e==c._LOADED_HELP_LANGS[t])return!0;return!1},isShown:function(){return i.find(".gollum-editor-help").is(":visible")},isValidHelpFormat:function(e){return"object"==typeof e&&e.length&&"string"==typeof e[0].menuName&&"object"==typeof e[0].content&&e[0].content.length},setActiveHelp:function(e){c.isLoadedFor(e)?(c._ACTIVE_HELP_LANG=e,i.find(".function-help").length&&(i.find(".function-help").hasClass("disabled")&&i.find(".function-help").removeClass("disabled"),i.find(".function-help").unbind("click"),i.find(".function-help").click(c.evtHelpButtonClick),c.generateHelpMenuFor(e))):(i.find(".function-help").length&&i.find(".function-help").addClass("disabled"),c.isShown()&&c.hide())},evtHelpButtonClick:function(t){t.preventDefault();var n=e(t.target).parents(".gollum-editor");c.isShown()?(n.find(".gollum-editor-help").length&&"undefined"!==n.find(".gollum-editor-help").attr("data-autodisplay")&&"true"===n.find(".gollum-editor-help").attr("data-autodisplay")&&n.find(".gollum-editor-help").attr("data-autodisplay",""),c.hide()):c.show()},evtParentMenuClick:function(t){if(t.preventDefault(),!e(this).hasClass("selected")){var n=e(this).attr("rel"),a=c._HELP[c._ACTIVE_HELP_LANG][n];e(".gollum-editor-help-parent li a").removeClass("selected"),e(this).addClass("selected"),c.generateSubMenu(a,n),e(i.find(".gollum-editor-help-list li a").get(0)).click()}},evtSubMenuClick:function(t){if(t.preventDefault(),!e(this).hasClass("selected")){var n=e(this).attr("rel").split(":");i.find(".gollum-editor-help-list li a").removeClass("selected"),e(this).addClass("selected"),c.showHelpFor(n[0],n[1])}}};e.GollumEditor.defineHelp=c.define,e.GollumEditor.Dialog=e.GollumDialog,e.GollumEditor.replaceSelection=function(t){r.replaceFieldSelection(e(event.target).parents(".gollum-editor").find(".gollum-editor-body"),t)},e.GollumEditor.FunctionBar=r,e.GollumEditor.Placeholder=e.GollumPlaceholder}(jQuery),function(e){var t={_PLACEHOLDERS:[],_p:function(t){this.fieldObject=t,this.placeholderText=t.val();var n=t.val();t.addClass("ph"),t.blur(function(){""==e(this).val()&&(e(this).val(n),e(this).addClass("ph"))}),t.focus(function(){e(this).removeClass("ph"),e(this).val()==n?e(this).val(""):e(this)[0].select()})},add:function(e){t._PLACEHOLDERS.push(new t._p(e))},clearAll:function(){for(var e=0;t._PLACEHOLDERS.length>e;e++)t._PLACEHOLDERS[e].fieldObject.val()==t._PLACEHOLDERS[e].placeholderText&&t._PLACEHOLDERS[e].fieldObject.val("")},exists:function(){return _PLACEHOLDERS.length}};e.GollumPlaceholder=t}(jQuery),function(e){function t(t){var n;return t&&t.constructor==Array&&3==t.length?t:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])]:(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3])]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]:i[e.trim(t).toLowerCase()]}function n(n,i){var a;do{if(a=e.curCSS(n,i),""!=a&&"transparent"!=a||e.nodeName(n,"body"))break;i="backgroundColor"}while(n=n.parentNode);return t(a)}e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(i,a){e.fx.step[a]=function(e){0==e.state&&(e.start=n(e.elem,a),e.end=t(e.end)),e.elem.style[a]="rgb("+[Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0]),255),0),Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1]),255),0),Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2]),255),0)].join(",")+")"}});var i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){var t={"function-bold":{search:/([^\n]+)([\n\s]*)/g,replace:"**$1**$2"},"function-italic":{search:/([^\n]+)([\n\s]*)/g,replace:"_$1_$2"},"function-code":{search:/(^[\n]+)([\n\s]*)/g,replace:"\n`$1`$2\n"},"function-hr":{append:"\n***\n"},"function-ul":{search:/(.+)([\n]?)/g,replace:"\n* $1$2"},"function-ol":{search:/(.+)([\n]?)/g,replace:"\n1. $1$2"},"function-blockquote":{search:/(.+)([\n]?)/g,replace:"\n> $1$2"},"function-h1":{search:/(.+)([\n]?)/g,replace:"\n# $1$2\n"},"function-h2":{search:/(.+)([\n]?)/g,replace:"\n## $1$2\n"},"function-h3":{search:/(.+)([\n]?)/g,replace:"\n### $1$2\n"},"function-link":{exec:function(){}},"function-image":{exec:function(){}},"function-emoji":{},"function-preview":{}},n=[{menuName:"Block Elements",content:[{menuName:"Paragraphs &amp; Breaks",data:"<p>To create a paragraph, simply create a block of text that is not separated by one or more blank lines. Blocks of text separated by one or more blank lines will be parsed as paragraphs.</p><p>If you want to create a line break, end a line with two or more spaces, then hit Return/Enter.</p>"},{menuName:"Headers",data:"<p>Markdown supports two header formats. The wiki editor uses the &ldquo;atx&rsquo;-style headers. Simply prefix your header text with the number of <code>#</code> characters to specify heading depth. For example: <code># Header 1</code>, <code>## Header 2</code> and <code>### Header 3</code> will be progressively smaller headers. You may end your headers with any number of hashes.</p>"},{menuName:"Blockquotes",data:"<p>Markdown creates blockquotes email-style by prefixing each line with the <code>&gt;</code>. This looks best if you decide to hard-wrap text and prefix each line with a <code>&gt;</code> character, but Markdown supports just putting <code>&gt;</code> before your paragraph.</p>"},{menuName:"Lists",data:"<p>Markdown supports both ordered and unordered lists. To create an ordered list, simply prefix each line with a number (any number will do &mdash; this is why the editor only uses one number.) To create an unordered list, you can prefix each line with <code>*</code>, <code>+</code> or <code>-</code>.</p> List items can contain multiple paragraphs, however each paragraph must be indented by at least 4 spaces or a tab."},{menuName:"Code Blocks",data:"<p>Markdown wraps code blocks in pre-formatted tags to preserve indentation in your code blocks. To create a code block, indent the entire block by at least 4 spaces or one tab. Markdown will strip the extra indentation you&rsquo;ve added to the code block.</p>"},{menuName:"Horizontal Rules",data:"Horizontal rules are created by placing three or more hyphens, asterisks or underscores on a line by themselves. Spaces are allowed between the hyphens, asterisks or underscores."}]},{menuName:"Span Elements",content:[{menuName:"Links",data:"<p>Markdown has two types of links: <strong>inline</strong> and <strong>reference</strong>. For both types of links, the text you want to display to the user is placed in square brackets. For example, if you want your link to display the text &ldquo;GitHub&rdquo;, you write <code>[GitHub]</code>.</p><p>To create an inline link, create a set of parentheses immediately after the brackets and write your URL within the parentheses. (e.g., <code>[GitHub](http://github.com/)</code>). Relative paths are allowed in inline links.</p><p>To create a reference link, use two sets of square brackets. <code>[my internal link][internal-ref]</code> will link to the internal reference <code>internal-ref</code>.</p>"},{menuName:"Emphasis",data:"<p>Asterisks (<code>*</code>) and underscores (<code>_</code>) are treated as emphasis and are wrapped with an <code>&lt;em&gt;</code> tag, which usually displays as italics in most browsers. Double asterisks (<code>**</code>) or double underscores (<code>__</code>) are treated as bold using the <code>&lt;strong&gt;</code> tag. To create italic or bold text, simply wrap your words in single/double asterisks/underscores. For example, <code>**My double emphasis text**</code> becomes <strong>My double emphasis text</strong>, and <code>*My single emphasis text*</code> becomes <em>My single emphasis text</em>.</p>"},{menuName:"Code",data:"<p>To create inline spans of code, simply wrap the code in backticks (<code>`</code>). Markdown will turn <code>`myFunction`</code> into <code>myFunction</code>.</p>"},{menuName:"Images",data:"<p>Markdown image syntax looks a lot like the syntax for links; it is essentially the same syntax preceded by an exclamation point (<code>!</code>). For example, if you want to link to an image at <code>http://github.com/unicorn.png</code> with the alternate text <code>My Unicorn</code>, you would write <code>![My Unicorn](http://github.com/unicorn.png)</code>.</p>"}]},{menuName:"Miscellaneous",content:[{menuName:"Automatic Links",data:'<p>If you want to create a link that displays the actual URL, markdown allows you to quickly wrap the URL in <code>&lt;</code> and <code>&gt;</code> to do so. For example, the link <a href="javascript:void(0);">http://github.com/</a> is easily produced by writing <code>&lt;http://github.com/&gt;</code>.</p>'},{menuName:"Escaping",data:"<p>If you want to use a special Markdown character in your document (such as displaying literal asterisks), you can escape the character with the backslash (<code>\\</code>). Markdown will ignore the character directly after a backslash."}]}];
e.GollumEditor.defineLanguage("markdown",t),e.GollumEditor.defineHelp("markdown",n)}(jQuery),function(e,t){function o(t){e.extend(!0,n,t)}function r(n,i,a){function z(e){h?O()&&(W(),L(e)):M()}function M(){m=i.theme?"ui":"fc",n.addClass("fc"),i.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),i.theme&&n.addClass("ui-widget"),h=e("<div class='fc-content' style='position:relative'/>").prependTo(n),p=new l(o,i),f=p.render(),f&&n.prepend(f),F(i.defaultView),i.handleWindowResize&&e(window).resize(U),I()||P()}function P(){setTimeout(function(){!b.start&&I()&&H()},0)}function A(){b&&(gt("viewDestroy",b,b,b.element),b.triggerEventDestroy()),e(window).unbind("resize",U),p.destroy(),h.remove(),n.removeClass("fc fc-rtl ui-widget")}function O(){return n.is(":visible")}function I(){return e("body").is(":visible")}function F(e){b&&e==b.name||N(e)}function N(t){j++,b&&(gt("viewDestroy",b,b,b.element),at(),b.triggerEventDestroy(),ft(),b.element.remove(),p.deactivateButton(b.name)),p.activateButton(t),b=new s[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(h),o),H(),ht(),j--}function H(e){(!b.start||e||b.start>C||C>=b.end)&&O()&&L(e)}function L(e){j++,b.start&&(gt("viewDestroy",b,b,b.element),at(),K()),ft(),b.render(C,e||0),Y(),ht(),(b.afterRender||B)(),tt(),nt(),gt("viewRender",b,b,b.element),b.trigger("viewDisplay",d),j--,Q()}function R(){O()&&(at(),K(),W(),Y(),G())}function W(){w=i.contentHeight?i.contentHeight:i.height?i.height-(f?f.height():0)-q(h):Math.round(h.width()/Math.max(i.aspectRatio,.5))}function Y(){w===t&&W(),j++,b.setHeight(w),b.setWidth(h.width()),j--,y=n.outerWidth()}function U(){if(!j)if(b.start){var e=++x;setTimeout(function(){e==x&&!j&&O()&&y!=(y=n.outerWidth())&&(j++,R(),b.trigger("windowResize",d),j--)},200)}else P()}function V(){K(),Z()}function X(e){K(),G(e)}function G(e){O()&&(b.setEventData(S),b.renderEvents(S,e),b.trigger("eventAfterAllRender"))}function K(){b.triggerEventDestroy(),b.clearEvents(),b.clearEventData()}function Q(){!i.lazyFetching||r(b.visStart,b.visEnd)?Z():G()}function Z(){c(b.visStart,b.visEnd)}function J(e){S=e,G()}function et(e){X(e)}function tt(){p.updateTitle(b.title)}function nt(){var e=new Date;e>=b.start&&b.end>e?p.disableButton("today"):p.enableButton("today")}function it(e,n,i){b.select(e,n,i===t?!0:i)}function at(){b&&b.unselect()}function st(){H(-1)}function ot(){H(1)}function rt(){_(C,-1),H()}function lt(){_(C,1),H()}function ct(){C=new Date,H()}function dt(e,t,n){e instanceof Date?C=k(e):$(C,e,t,n),H()}function ut(e,n,i){e!==t&&_(C,e),n!==t&&g(C,n),i!==t&&v(C,i),H()}function pt(){return k(C)}function ft(){h.css({width:"100%",height:h.height(),overflow:"hidden"})}function ht(){h.css({width:"",height:"",overflow:""})}function mt(){return b}function _t(e,n){return n===t?i[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(i[e]=n,R()),void 0)}function gt(e,t){return i[e]?i[e].apply(t||d,Array.prototype.slice.call(arguments,2)):void 0}var o=this;o.options=i,o.render=z,o.destroy=A,o.refetchEvents=V,o.reportEvents=J,o.reportEventChange=et,o.rerenderEvents=X,o.changeView=F,o.select=it,o.unselect=at,o.prev=st,o.next=ot,o.prevYear=rt,o.nextYear=lt,o.today=ct,o.gotoDate=dt,o.incrementDate=ut,o.formatDate=function(e,t){return E(e,t,i)},o.formatDates=function(e,t,n){return T(e,t,n,i)},o.getDate=pt,o.getView=mt,o.option=_t,o.trigger=gt,u.call(o,i,a);var p,f,h,m,b,y,w,D,r=o.isFetchNeeded,c=o.fetchEvents,d=n[0],x=0,j=0,C=new Date,S=[];$(C,i.year,i.month,i.date),i.droppable&&e(document).bind("dragstart",function(t,n){var a=t.target,s=e(a);if(!s.parents(".fc").length){var o=i.dropAccept;(e.isFunction(o)?o.call(a,s):s.is(o))&&(D=a,b.dragStart(D,t,n))}}).bind("dragstop",function(e,t){D&&(b.dragStop(D,e,t),D=null)})}function l(t,n){function r(){o=n.theme?"ui":"fc";var t=n.header;return t?a=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(c("left")).append(c("center")).append(c("right"))):void 0}function l(){a.remove()}function c(i){var a=e("<td class='fc-header-"+i+"'/>"),r=n.header[i];return r&&e.each(r.split(" "),function(i){i>0&&a.append("<span class='fc-header-space'/>");var r;e.each(this.split(","),function(i,l){if("title"==l)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),r&&r.addClass(o+"-corner-right"),r=null;else{var c;if(t[l]?c=t[l]:s[l]&&(c=function(){p.removeClass(o+"-state-hover"),t.changeView(l)}),c){var d=n.theme?K(n.buttonIcons,l):null,u=K(n.buttonText,l),p=e("<span class='fc-button fc-button-"+l+" "+o+"-state-default'>"+(d?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+d+"'/>"+"</span>":u)+"</span>").click(function(){p.hasClass(o+"-state-disabled")||c()}).mousedown(function(){p.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){p.removeClass(o+"-state-down")}).hover(function(){p.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){p.removeClass(o+"-state-hover").removeClass(o+"-state-down")}).appendTo(a);Z(p),r||p.addClass(o+"-corner-left"),r=p}}}),r&&r.addClass(o+"-corner-right")}),a}function d(e){a.find("h2").html(e)}function u(e){a.find("span.fc-button-"+e).addClass(o+"-state-active")}function p(e){a.find("span.fc-button-"+e).removeClass(o+"-state-active")}function f(e){a.find("span.fc-button-"+e).addClass(o+"-state-disabled")}function h(e){a.find("span.fc-button-"+e).removeClass(o+"-state-disabled")}var i=this;i.render=r,i.destroy=l,i.updateTitle=d,i.activateButton=u,i.deactivateButton=p,i.disableButton=f,i.enableButton=h;var o,a=e([])}function u(n,i){function y(e,t){return!f||f>e||t>h}function w(e,t){f=e,h=t,v=[];var n=++m,i=p.length;_=i;for(var a=0;i>a;a++)x(p[a],n)}function x(t,i){j(t,function(a){if(i==m){if(a){n.eventDataTransform&&(a=e.map(a,n.eventDataTransform)),t.eventDataTransform&&(a=e.map(a,t.eventDataTransform));for(var s=0;a.length>s;s++)a[s].source=t,O(a[s]);v=v.concat(a)}_--,_||l(v)}})}function j(t,i){var s,r,o=a.sourceFetchers;for(s=0;o.length>s;s++){if(r=o[s](t,f,h,i),r===!0)return;if("object"==typeof r)return j(r,i),void 0}var l=t.events;if(l)e.isFunction(l)?(P(),l(k(f),k(h),function(e){i(e),A()})):e.isArray(l)?i(l):i();else{var d=t.url;if(d){var _,u=t.success,p=t.error,m=t.complete;_=e.isFunction(t.data)?t.data():t.data;var g=e.extend({},_||{}),v=it(t.startParam,n.startParam),b=it(t.endParam,n.endParam);v&&(g[v]=Math.round(+f/1e3)),b&&(g[b]=Math.round(+h/1e3)),P(),e.ajax(e.extend({},c,t,{data:g,success:function(t){t=t||[];var n=nt(u,this,arguments);e.isArray(n)&&(t=n),i(t)},error:function(){nt(p,this,arguments),i()},complete:function(){nt(m,this,arguments),A()}}))}else i()}}function $(e){e=S(e),e&&(_++,x(e,m))}function S(t){return e.isFunction(t)||e.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t?(I(t),p.push(t),t):void 0}function D(t){p=e.grep(p,function(e){return!F(e,t)}),v=e.grep(v,function(e){return!F(e.source,t)}),l(v)}function E(e){var t,i,n=v.length,a=r().defaultEventEnd,s=e.start-e._start,o=e.end?e.end-(e._end||a(e)):0;for(t=0;n>t;t++)i=v[t],i._id==e._id&&i!=e&&(i.start=new Date(+i.start+s),i.end=e.end?i.end?new Date(+i.end+o):new Date(+a(i)+o):null,i.title=e.title,i.url=e.url,i.allDay=e.allDay,i.className=e.className,i.editable=e.editable,i.color=e.color,i.backgroundColor=e.backgroundColor,i.borderColor=e.borderColor,i.textColor=e.textColor,O(i));O(e),l(v)}function T(e,t){O(e),e.source||(t&&(u.events.push(e),e.source=u),v.push(e)),l(v)}function z(t){if(t){if(!e.isFunction(t)){var i=t+"";t=function(e){return e._id==i}}v=e.grep(v,t,!0);for(var n=0;p.length>n;n++)e.isArray(p[n].events)&&(p[n].events=e.grep(p[n].events,t,!0))}else{v=[];for(var n=0;p.length>n;n++)e.isArray(p[n].events)&&(p[n].events=[])}l(v)}function M(t){return e.isFunction(t)?e.grep(v,t):t?(t+="",e.grep(v,function(e){return e._id==t})):v}function P(){g++||o("loading",null,!0,r())}function A(){--g||o("loading",null,!1,r())}function O(e){var i=e.source||{},a=it(i.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+d++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=k(e.start=C(e.start,a)),e.end=C(e.end,a),e.end&&e.start>=e.end&&(e.end=null),e._end=e.end?k(e.end):null,e.allDay===t&&(e.allDay=it(i.allDayDefault,n.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function I(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=a.sourceNormalizers,n=0;t.length>n;n++)t[n](e)}function F(e,t){return e&&t&&N(e)==N(t)}function N(e){return("object"==typeof e?e.events||e.url:"")||e}var s=this;s.isFetchNeeded=y,s.fetchEvents=w,s.addEventSource=$,s.removeEventSource=D,s.updateEvent=E,s.renderEvent=T,s.removeEvents=z,s.clientEvents=M,s.normalizeEvent=O;for(var f,h,o=s.trigger,r=s.getView,l=s.reportEvents,u={events:[]},p=[u],m=0,_=0,g=0,v=[],b=0;i.length>b;b++)S(i[b])}function _(e,t,n){return e.setFullYear(e.getFullYear()+t),n||w(e),e}function g(e,t,n){if(+e){var i=e.getMonth()+t,a=k(e);for(a.setDate(1),a.setMonth(i),e.setMonth(i),n||w(e);e.getMonth()!=a.getMonth();)e.setDate(e.getDate()+(a>e?1:-1))}return e}function v(e,t,n){if(+e){var i=e.getDate()+t,a=k(e);a.setHours(9),a.setDate(i),e.setDate(i),n||w(e),b(e,a)}return e}function b(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*h)}function y(e,t){return e.setMinutes(e.getMinutes()+t),e}function w(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function k(e,t){return t?w(new Date(+e)):new Date(+e)}function x(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function j(e,t){return Math.round((k(e,!0)-k(t,!0))/f)}function $(e,n,i,a){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),i!==t&&i!=e.getMonth()&&(e.setDate(1),e.setMonth(i)),a!==t&&e.setDate(a)}function C(e,n){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(n===t&&(n=!0),S(e,n)||(e?new Date(e):null)):null}function S(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var i=new Date(n[1],0,1);if(t||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(i.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(i.setDate(n[5]),a.setDate(n[5])),b(i,a),n[7]&&i.setHours(n[7]),n[8]&&i.setMinutes(n[8]),n[10]&&i.setSeconds(n[10]),n[12]&&i.setMilliseconds(1e3*Number("0."+n[12])),b(i,a)}else if(i.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),i.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var s=60*Number(n[16])+(n[18]?Number(n[18]):0);s*="-"==n[15]?1:-1,i=new Date(+i+1e3*60*s)}return i}function D(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);return t[3]&&(n%=12,"p"==t[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(t[2]?parseInt(t[2],10):0)}}function E(e,t,n){return T(e,null,t,n)}function T(e,t,i,a){a=a||n;var r,c,d,u,s=e,o=t,l=i.length,p="";for(r=0;l>r;r++)if(c=i.charAt(r),"'"==c){for(d=r+1;l>d;d++)if("'"==i.charAt(d)){s&&(p+=d==r+1?"'":i.substring(r+1,d),r=d);break}}else if("("==c){for(d=r+1;l>d;d++)if(")"==i.charAt(d)){var f=E(s,i.substring(r+1,d),a);parseInt(f.replace(/\D/,""),10)&&(p+=f),r=d;break}}else if("["==c){for(d=r+1;l>d;d++)if("]"==i.charAt(d)){var h=i.substring(r+1,d),f=E(s,h,a);f!=E(o,h,a)&&(p+=f),r=d;break}}else if("{"==c)s=t,o=e;else if("}"==c)s=e,o=t;else{for(d=l;d>r;d--)if(u=z[i.substring(r,d)]){s&&(p+=u(s,a)),r=d-1;break}d==r&&s&&(p+=c)}return p}function M(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1}function P(e){return e.end?A(e.end,e.allDay):v(k(e.start),1)}function A(e,t){return e=k(e),t||e.getHours()||e.getMinutes()?v(e,1):w(e)}function O(n,i,a){n.unbind("mouseover").mouseover(function(n){for(var o,r,l,s=n.target;s!=this;)o=s,s=s.parentNode;(r=o._fci)!==t&&(o._fci=t,l=i[r],a(l.event,l.element,l),e(n.target).trigger(n)),n.stopPropagation()})}function I(t,n,i){for(var s,a=0;t.length>a;a++)s=e(t[a]),s.width(Math.max(0,n-N(s,i)))}function F(t,n,i){for(var s,a=0;t.length>a;a++)s=e(t[a]),s.height(Math.max(0,n-q(s,i)))}function N(e,t){return H(e)+R(e)+(t?L(e):0)}function H(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function L(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function R(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function q(e,t){return W(e)+U(e)+(t?Y(e):0)}function W(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function Y(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function U(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function B(){}function V(e,t){return e-t}function X(e){return Math.max.apply(Math,e)}function G(e){return(10>e?"0":"")+e}function K(e,n){if(e[n]!==t)return e[n];for(var s,i=n.split(/(?=[A-Z])/),a=i.length-1;a>=0;a--)if(s=e[i[a].toLowerCase()],s!==t)return s;return e[""]}function Q(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Z(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function J(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function tt(e,t){var n=e.source||{},i=e.color,a=n.color,s=t("eventColor"),o=e.backgroundColor||i||n.backgroundColor||a||t("eventBackgroundColor")||s,r=e.borderColor||i||n.borderColor||a||t("eventBorderColor")||s,l=e.textColor||n.textColor||t("eventTextColor"),c=[];return o&&c.push("background-color:"+o),r&&c.push("border-color:"+r),l&&c.push("color:"+l),c.join(";")}function nt(t,n,i){if(e.isFunction(t)&&(t=[t]),t){var a,s;for(a=0;t.length>a;a++)s=t[a].apply(n,i)||s;return s}}function it(){for(var e=0;arguments.length>e;e++)if(arguments[e]!==t)return arguments[e]}function at(e,t){function l(e,t){t&&(g(e,t),e.setDate(1));var l=i("firstDay"),c=k(e,!0);c.setDate(1);var d=g(k(c),1),u=k(c);v(u,-((u.getDay()-l+7)%7)),s(u);var p=k(d);v(p,(7-p.getDay()+l)%7),s(p,-1,!0);var f=o(),h=Math.round(j(p,u)/7);"fixed"==i("weekMode")&&(v(p,7*(6-h)),h=6),n.title=r(c,i("titleFormat")),n.start=c,n.end=d,n.visStart=u,n.visEnd=p,a(h,f,!0)}var n=this;n.render=l,rt.call(n,e,t,"month");var i=n.opt,a=n.renderBasic,s=n.skipHiddenDays,o=n.getCellsPerWeek,r=t.formatDate}function st(e,t){function l(e,t){t&&v(e,7*t);var l=v(k(e),-((e.getDay()-i("firstDay")+7)%7)),c=v(k(l),7),d=k(l);s(d);var u=k(c);s(u,-1,!0);var p=o();n.start=l,n.end=c,n.visStart=d,n.visEnd=u,n.title=r(d,v(k(u),-1),i("titleFormat")),a(1,p,!1)}var n=this;n.render=l,rt.call(n,e,t,"basicWeek");var i=n.opt,a=n.renderBasic,s=n.skipHiddenDays,o=n.getCellsPerWeek,r=t.formatDates}function ot(e,t){function r(e,t){t&&v(e,t),s(e,0>t?-1:1);var r=k(e,!0),l=v(k(r),1);n.title=o(e,i("titleFormat")),n.start=n.visStart=r,n.end=n.visEnd=l,a(1,1,!1)}var n=this;n.render=r,rt.call(n,e,t,"basicDay");var i=n.opt,a=n.renderBasic,s=n.skipHiddenDays,o=t.formatDate}function rt(t,n,i){function V(e,t,n){P=e,A=t,O=n,X(),b||G(),K()}function X(){R=s("theme")?"ui":"fc",W=s("columnFormat"),Y=s("weekNumbers"),U=s("weekNumberTitle"),B="iso"!=s("weekNumberCalculation")?"w":"W"}function G(){D=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function K(){var n=et();m&&m.remove(),m=e(n).appendTo(t),_=m.find("thead"),g=_.find(".fc-day-header"),b=m.find("tbody"),y=b.find("tr"),x=b.find(".fc-day"),j=y.find("td:first-child"),$=y.eq(0).find(".fc-day > div"),C=y.eq(0).find(".fc-day-content > div"),J(_.add(_.find("tr"))),J(y),y.eq(0).addClass("fc-first"),y.filter(":last").addClass("fc-last"),x.each(function(t,n){var i=d(Math.floor(t/A),t%A);o("dayRender",a,i,e(n))}),ot(x)}function et(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+tt()+nt()+"</table>";return e}function tt(){var n,i,e=R+"-widget-header",t="";for(t+="<thead><tr>",Y&&(t+="<th class='fc-week-number "+e+"'>"+Q(U)+"</th>"),n=0;A>n;n++)i=d(0,n),t+="<th class='fc-day-header fc-"+p[i.getDay()]+" "+e+"'>"+Q(h(i,W))+"</th>";return t+="</tr></thead>"}function nt(){var n,i,a,e=R+"-widget-content",t="";for(t+="<tbody>",n=0;P>n;n++){for(t+="<tr class='fc-week'>",Y&&(a=d(n,0),t+="<td class='fc-week-number "+e+"'>"+"<div>"+Q(h(a,B))+"</div>"+"</td>"),i=0;A>i;i++)a=d(n,i),t+=it(a);t+="</tr>"}return t+="</tbody>"}function it(e){var t=R+"-widget-content",n=a.start.getMonth(),i=w(new Date),s="",o=["fc-day","fc-"+p[e.getDay()],t];return e.getMonth()!=n&&o.push("fc-other-month"),+e==+i?o.push("fc-today",R+"-state-highlight"):i>e?o.push("fc-past"):o.push("fc-future"),s+="<td class='"+o.join(" ")+"'"+" data-date='"+h(e,"yyyy-MM-dd")+"'"+">"+"<div>",O&&(s+="<div class='fc-day-number'>"+e.getDate()+"</div>"),s+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function at(t){T=t;var i,a,o,n=T-_.height();"variable"==s("weekMode")?i=a=Math.floor(n/(1==P?2:6)):(i=Math.floor(n/P),a=n-i*(P-1)),j.each(function(t,n){P>t&&(o=e(n),o.find("> div").css("min-height",(t==P-1?a:i)-q(o)))})}function st(e){E=e,H.clear(),L.clear(),M=0,Y&&(M=_.find("th.fc-week-number").outerWidth()),z=Math.floor((E-M)/A),I(g.slice(0,-1),z)}function ot(e){e.click(rt).mousedown(c)}function rt(t){if(!s("selectable")){var n=S(e(this).data("date"));o("dayClick",this,n,!0,t)}}function ct(e,t,n){n&&F.build();for(var i=f(e,t),a=0;i.length>a;a++){var s=i[a];ot(dt(s.row,s.leftCol,s.row,s.rightCol))}}function dt(e,n,i,a){var s=F.rect(e,n,i,a,t);return r(s,t)}function ut(e){return k(e)}function pt(e,t){ct(e,v(k(t),1),!0)}function ft(){l()}function ht(e,t,n){var i=u(e),a=x[i.row*A+i.col];o("dayClick",a,e,t,n)}function mt(e,t){N.start(function(e){l(),e&&dt(e.row,e.col,e.row,e.col)},t)}function _t(e,t,n){var i=N.stop();if(l(),i){var a=d(i);o("drop",e,a,!0,t,n)}}function gt(e){return k(e.start)}function vt(e){return H.left(e)}function bt(e){return H.right(e)}function yt(e){return L.left(e)}function wt(e){return L.right(e)}function kt(e){return y.eq(e)}var a=this;a.renderBasic=V,a.setHeight=at,a.setWidth=st,a.renderDayOverlay=ct,a.defaultSelectionEnd=ut,a.renderSelection=pt,a.clearSelection=ft,a.reportDayClick=ht,a.dragStart=mt,a.dragStop=_t,a.defaultEventEnd=gt,a.getHoverListener=function(){return N},a.colLeft=vt,a.colRight=bt,a.colContentLeft=yt,a.colContentRight=wt,a.getIsCellAllDay=function(){return!0},a.allDayRow=kt,a.getRowCnt=function(){return P},a.getColCnt=function(){return A},a.getColWidth=function(){return z},a.getDaySegmentContainer=function(){return D},xt.call(a,t,n,i),Et.call(a),Dt.call(a),lt.call(a);var m,_,g,b,y,x,j,$,C,D,E,T,z,M,P,A,O,F,N,H,L,R,W,Y,U,B,s=a.opt,o=a.trigger,r=a.renderOverlay,l=a.clearOverlays,c=a.daySelectionMousedown,d=a.cellToDate,u=a.dateToCell,f=a.rangeToSegments,h=n.formatDate;Z(t.addClass("fc-grid")),F=new Tt(function(t,n){var i,a,s;g.each(function(t,o){i=e(o),a=i.offset().left,t&&(s[1]=a),s=[a],n[t]=s}),s[1]=a+i.outerWidth(),y.each(function(n,o){P>n&&(i=e(o),a=i.offset().top,n&&(s[1]=a),s=[a],t[n]=s)}),s[1]=a+i.outerHeight()}),N=new zt(F),H=new Pt(function(e){return $.eq(e)}),L=new Pt(function(e){return C.eq(e)})}function lt(){function t(t,n){e.renderDayEvents(t,n)}function n(){e.getDaySegmentContainer().empty()}var e=this;e.renderEvents=t,e.clearEvents=n,jt.call(e)}function ct(e,t){function l(e,t){t&&v(e,7*t);var l=v(k(e),-((e.getDay()-i("firstDay")+7)%7)),c=v(k(l),7),d=k(l);s(d);var u=k(c);s(u,-1,!0);var p=o();n.title=r(d,v(k(u),-1),i("titleFormat")),n.start=l,n.end=c,n.visStart=d,n.visEnd=u,a(p)}var n=this;n.render=l,ut.call(n,e,t,"agendaWeek");var i=n.opt,a=n.renderAgenda,s=n.skipHiddenDays,o=n.getCellsPerWeek,r=t.formatDates}function dt(e,t){function r(e,t){t&&v(e,t),s(e,0>t?-1:1);var r=k(e,!0),l=v(k(r),1);n.title=o(e,i("titleFormat")),n.start=n.visStart=r,n.end=n.visEnd=l,a(1)}var n=this;n.render=r,ut.call(n,e,t,"agendaDay");var i=n.opt,a=n.renderAgenda,s=n.skipHiddenDays,o=t.formatDate}function ut(n,i,a){function wt(e){st=e,kt(),j?$t():jt()}function kt(){ft=o("theme")?"ui":"fc",ht=o("isRTL"),mt=D(o("minTime")),_t=D(o("maxTime")),gt=o("columnFormat"),vt=o("weekNumbers"),bt=o("weekNumberTitle"),yt="iso"!=o("weekNumberCalculation")?"w":"W",nt=o("snapMinutes")||o("slotMinutes")}function jt(){var a,s,r,l,c,t=ft+"-widget-header",i=ft+"-widget-content",d=0==o("slotMinutes")%15;for($t(),A=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),o("allDaySlot")?(O=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(A),a="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+t+" fc-agenda-axis'>"+o("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+t+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",N=e(a).appendTo(A),H=N.find("tr"),Nt(H.find("td")),A.append("<div class='fc-agenda-divider "+t+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):O=e([]),L=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(A),R=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(L),W=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(R),a="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",s=x(),l=y(k(s),_t),y(s,mt),ot=0,r=0;l>s;r++)c=s.getMinutes(),a+="<tr class='fc-slot"+r+" "+(c?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+t+"'>"+(d&&c?"&nbsp;":b(s,o("axisFormat")))+"</th>"+"<td class='"+i+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",y(s,o("slotMinutes")),ot++;a+="</tbody></table>",Y=e(a).appendTo(R),Ht(Y.find("td"))}function $t(){var t=Ct();j&&j.remove(),j=e(t).appendTo(n),$=j.find("thead"),C=$.find("th").slice(1,-1),S=j.find("tbody"),E=S.find("td").slice(0,-1),T=E.find("> div"),z=E.find(".fc-day-content > div"),M=E.eq(0),P=T.eq(0),J($.add($.find("tr"))),J(S.add(S.find("tr")))}function Ct(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+St()+Mt()+"</table>";return e}function St(){var t,i,a,e=ft+"-widget-header",n="";for(n+="<thead><tr>",vt?(t=m(0,0),i=b(t,yt),ht?i+=bt:i=bt+i,n+="<th class='fc-agenda-axis fc-week-number "+e+"'>"+Q(i)+"</th>"):n+="<th class='fc-agenda-axis "+e+"'>&nbsp;</th>",a=0;st>a;a++)t=m(0,a),n+="<th class='fc-"+p[t.getDay()]+" fc-col"+a+" "+e+"'>"+Q(b(t,gt))+"</th>";return n+="<th class='fc-agenda-gutter "+e+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function Mt(){var n,a,s,o,r,e=ft+"-widget-header",t=ft+"-widget-content",i=w(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+e+"'>&nbsp;</th>",s="",a=0;st>a;a++)n=m(0,a),r=["fc-col"+a,"fc-"+p[n.getDay()],t],+n==+i?r.push(ft+"-state-highlight","fc-today"):i>n?r.push("fc-past"):r.push("fc-future"),o="<td class='"+r.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",s+=o;return l+=s,l+="<td class='fc-agenda-gutter "+t+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function At(e){e===t&&(e=X),X=e,ut={};var n=S.position().top,i=L.position().top,a=Math.min(e-n,Y.height()+i+1);P.height(a-q(M)),A.css("top",n),L.height(a-i-1),tt=Y.find("tr:first").height()+1,it=o("slotMinutes")/nt,at=tt/it}function Ot(t){B=t,ct.clear(),dt.clear();var n=$.find("th:first");N&&(n=n.add(N.find("th:first"))),n=n.add(Y.find("th:first")),G=0,I(n.width("").each(function(t,n){G=Math.max(G,e(n).outerWidth())}),G);var i=j.find(".fc-agenda-gutter");N&&(i=i.add(N.find("th.fc-agenda-gutter")));var a=L[0].clientWidth;et=L.width()-a,et?(I(i,et),i.show().prev().removeClass("fc-last")):i.hide().prev().addClass("fc-last"),K=Math.floor((a-G)/st),I(C.slice(0,-1),K)}function It(){function i(){L.scrollTop(n)}var e=x(),t=k(e);t.setHours(o("firstHour"));var n=Kt(e,t)+1;i(),setTimeout(i,0)}function Ft(){It()}function Nt(e){e.click(Lt).mousedown(f)}function Ht(e){e.click(Lt).mousedown(an)}function Lt(e){if(!o("selectable")){var t=Math.min(st-1,Math.floor((e.pageX-j.offset().left-G)/K)),n=m(0,t),i=this.parentNode.className.match(/fc-slot(\d+)/);if(i){var a=parseInt(i[1])*o("slotMinutes"),s=Math.floor(a/60);n.setHours(s),n.setMinutes(a%60+mt),r("dayClick",E[t],n,!1,e)}else r("dayClick",E[t],n,!0,e)}}function Rt(e,t,n){n&&rt.build();for(var i=g(e,t),a=0;i.length>a;a++){var s=i[a];Nt(qt(s.row,s.leftCol,s.row,s.rightCol))}}function qt(e,t,n,i){var a=rt.rect(e,t,n,i,A);return l(a,A)}function Wt(e,t){for(var n=0;st>n;n++){var i=m(0,n),a=v(k(i),1),s=new Date(Math.max(i,e)),o=new Date(Math.min(a,t));if(o>s){var r=rt.rect(0,n,0,n,R),c=Kt(i,s),d=Kt(i,o);r.top=c,r.height=d-c,Ht(l(r,R))}}}function Yt(e){return ct.left(e)}function Ut(e){return dt.left(e)}function Bt(e){return ct.right(e)}function Vt(e){return dt.right(e)}function Xt(e){return o("allDaySlot")&&!e.row}function Gt(e){var t=m(0,e.col),n=e.row;return o("allDaySlot")&&n--,n>=0&&y(t,mt+n*nt),t}function Kt(e,n){if(e=k(e,!0),y(k(e),mt)>n)return 0;if(n>=y(k(e),_t))return Y.height();var i=o("slotMinutes"),a=60*n.getHours()+n.getMinutes()-mt,s=Math.floor(a/i),r=ut[s];return r===t&&(r=ut[s]=Y.find("tr").eq(s).find("td div")[0].offsetTop),Math.max(0,Math.round(r-1+tt*(a%i/i)))}function Qt(){return H}function Zt(e){var t=k(e.start);return e.allDay?t:y(t,o("defaultEventMinutes"))}function Jt(e,t){return t?k(e):y(k(e),o("slotMinutes"))}function en(e,t,n){n?o("allDaySlot")&&Rt(e,v(k(t),1),!0):tn(e,t)}function tn(t,n){var i=o("selectHelper");if(rt.build(),i){var a=_(t).col;if(a>=0&&st>a){var s=rt.rect(0,a,0,a,R),r=Kt(t,t),l=Kt(t,n);if(l>r){if(s.top=r,s.height=l-r,s.left+=2,s.width-=5,e.isFunction(i)){var c=i(t,n);c&&(s.position="absolute",U=e(c).css(s).appendTo(R))}else s.isStart=!0,s.isEnd=!0,U=e(h({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},s)),U.css("opacity",o("dragOpacity"));U&&(Ht(U),R.append(U),I(U,s.width,!0),F(U,s.height,!0))}}}else Wt(t,n)}function nn(){c(),U&&(U.remove(),U=null)}function an(t){if(1==t.which&&o("selectable")){u(t);var n;lt.start(function(e,t){if(nn(),e&&e.col==t.col&&!Xt(e)){var i=Gt(t),a=Gt(e);n=[i,y(k(i),nt),a,y(k(a),nt)].sort(V),tn(n[0],n[3])}else n=null},t),e(document).one("mouseup",function(e){lt.stop(),n&&(+n[0]==+n[1]&&sn(n[0],!1,e),d(n[0],n[3],!1,e))})}}function sn(e,t,n){r("dayClick",E[_(e).col],e,t,n)}function on(e,t){lt.start(function(e){if(c(),e)if(Xt(e))qt(e.row,e.col,e.row,e.col);else{var t=Gt(e),n=y(k(t),o("defaultEventMinutes"));Wt(t,n)}},t)}function rn(e,t,n){var i=lt.stop();c(),i&&r("drop",e,Gt(i),Xt(i),t,n)}var s=this;s.renderAgenda=wt,s.setWidth=Ot,s.setHeight=At,s.afterRender=Ft,s.defaultEventEnd=Zt,s.timePosition=Kt,s.getIsCellAllDay=Xt,s.allDayRow=Qt,s.getCoordinateGrid=function(){return rt},s.getHoverListener=function(){return lt},s.colLeft=Yt,s.colRight=Bt,s.colContentLeft=Ut,s.colContentRight=Vt,s.getDaySegmentContainer=function(){return O},s.getSlotSegmentContainer=function(){return W},s.getMinMinute=function(){return mt},s.getMaxMinute=function(){return _t},s.getSlotContainer=function(){return R},s.getRowCnt=function(){return 1},s.getColCnt=function(){return st},s.getColWidth=function(){return K},s.getSnapHeight=function(){return at},s.getSnapMinutes=function(){return nt},s.defaultSelectionEnd=Jt,s.renderDayOverlay=Rt,s.renderSelection=en,s.clearSelection=nn,s.reportDayClick=sn,s.dragStart=on,s.dragStop=rn,xt.call(s,n,i,a),Et.call(s),Dt.call(s),pt.call(s);var j,$,C,S,E,T,z,M,P,A,O,N,H,L,R,W,Y,U,B,X,G,K,et,tt,nt,it,at,st,ot,rt,lt,ct,dt,ft,ht,mt,_t,gt,vt,bt,yt,o=s.opt,r=s.trigger,l=s.renderOverlay,c=s.clearOverlays,d=s.reportSelection,u=s.unselect,f=s.daySelectionMousedown,h=s.slotSegHtml,m=s.cellToDate,_=s.dateToCell,g=s.rangeToSegments,b=i.formatDate,ut={};Z(n.addClass("fc-agenda")),rt=new Tt(function(t,n){function d(e){return Math.max(l,Math.min(c,e))}var i,a,s;C.each(function(t,o){i=e(o),a=i.offset().left,t&&(s[1]=a),s=[a],n[t]=s}),s[1]=a+i.outerWidth(),o("allDaySlot")&&(i=H,a=i.offset().top,t[0]=[a,a+i.outerHeight()]);for(var r=R.offset().top,l=L.offset().top,c=l+L.outerHeight(),u=0;ot*it>u;u++)t.push([d(r+at*u),d(r+at*(u+1))])}),lt=new zt(rt),ct=new Pt(function(e){return T.eq(e)}),dt=new Pt(function(e){return z.eq(e)})}function pt(){function B(e,t){var n,a=e.length,s=[],o=[];for(n=0;a>n;n++)e[n].allDay?s.push(e[n]):o.push(e[n]);i("allDaySlot")&&(R(s,t),c()),Z(X(o),t)}function V(){d().empty(),u().empty()}function X(t){var s,r,l,c,d,n=$(),i=h(),a=f(),o=e.map(t,K),u=[];for(r=0;n>r;r++)for(s=x(0,r),y(s,i),d=G(t,o,s,y(k(s),a-i)),d=ft(d),l=0;d.length>l;l++)c=d[l],c.col=r,u.push(c);return u}function G(e,t,n,i){var s,r,l,c,d,u,p,f,a=[],o=e.length;for(s=0;o>s;s++)r=e[s],l=r.start,c=t[s],c>n&&i>l&&(n>l?(d=k(n),p=!1):(d=l,p=!0),c>i?(u=k(i),f=!1):(u=c,f=!0),a.push({event:r,start:d,end:u,isStart:p,isEnd:f}));return a.sort(kt)}function K(e){return e.end?k(e.end):y(k(e.start),i("defaultEventMinutes"))}function Z(n,s){var o,l,c,d,p,f,h,m,g,v,y,x,j,$,C,S,r=n.length,k="",D=u(),E=i("isRTL");for(o=0;r>o;o++)l=n[o],c=l.event,d=_(l.start,l.start),p=_(l.start,l.end),f=b(l.col),h=w(l.col),m=h-f,h-=.025*m,m=h-f,g=m*(l.forwardCoord-l.backwardCoord),i("slotEventOverlap")&&(g=Math.max(2*(g-10),g)),E?(y=h-l.backwardCoord*m,v=y-g):(v=f+l.backwardCoord*m,y=v+g),v=Math.max(v,f),y=Math.min(y,h),g=y-v,l.top=d,l.left=v,l.outerWidth=g,l.outerHeight=p-d,k+=J(c,l);for(D[0].innerHTML=k,x=D.children(),o=0;r>o;o++)l=n[o],c=l.event,j=e(x[o]),$=a("eventRender",c,c,j),$===!1?j.remove():($&&$!==!0&&(j.remove(),j=e($).css({position:"absolute",top:l.top,left:l.left}).appendTo(D)),l.element=j,c._id===s?et(c,j,l):j[0]._fci=o,T(c,j));for(O(D,n,et),o=0;r>o;o++)l=n[o],(j=l.element)&&(l.vsides=q(j,!0),l.hsides=N(j,!0),C=j.find(".fc-event-title"),C.length&&(l.contentTop=C[0].offsetTop));for(o=0;r>o;o++)l=n[o],(j=l.element)&&(j[0].style.width=Math.max(0,l.outerWidth-l.hsides)+"px",S=Math.max(0,l.outerHeight-l.vsides),j[0].style.height=S+"px",c=l.event,l.contentTop!==t&&10>S-l.contentTop&&(j.find("div.fc-event-time").text(Y(c.start,i("timeFormat"))+" - "+c.title),j.find("div.fc-event-title").remove()),a("eventAfterRender",c,c,j))}function J(e,t){var n="<",a=e.url,r=tt(e,i),l=["fc-event","fc-event-vert"];return s(e)&&l.push("fc-event-draggable"),t.isStart&&l.push("fc-event-start"),t.isEnd&&l.push("fc-event-end"),l=l.concat(e.className),e.source&&(l=l.concat(e.source.className||[])),n+=a?"a href='"+Q(e.url)+"'":"div",n+=" class='"+l.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+t.top+"px;"+"left:"+t.left+"px;"+r+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+Q(U(e.start,e.end,i("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+Q(e.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",t.isEnd&&o(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(a?"a":"div")+">"}function et(e,t,n){var i=t.find("div.fc-event-time");s(e)&&it(e,t,i),n.isEnd&&o(e)&&at(e,t,i),l(e,t)}function nt(e,t,n){function b(){l||(t.width(o).height("").draggable("option","grid",null),l=!0)}var o,r,c,s=n.isStart,l=!0,d=p(),u=C(),f=S(),_=D(),g=h();t.draggable({opacity:i("dragOpacity","month"),revertDuration:i("dragRevertDuration"),start:function(n,p){a("eventDragStart",t,e,n,p),M(e,t),o=t.width(),d.start(function(n,a){if(L(),n){r=!1;var o=x(0,a.col),d=x(0,n.col);c=j(d,o),n.row?s?l&&(t.width(u-10),F(t,f*Math.round((e.end?(e.end-e.start)/m:i("defaultEventMinutes"))/_)),t.draggable("option","grid",[u,1]),l=!1):r=!0:(H(v(k(e.start),c),v(P(e),c)),b()),r=r||l&&!c
}else b(),r=!0;t.draggable("option","revert",r)},n,"drag")},stop:function(n,i){if(d.stop(),L(),a("eventDragStop",t,e,n,i),r)b(),t.css("filter",""),z(e,t);else{var s=0;l||(s=Math.round((t.offset().top-E().offset().top)/f)*_+g-(60*e.start.getHours()+e.start.getMinutes())),A(this,e,c,s,l,n,i)}}})}function it(e,t,s){function I(){L(),f&&(m?(s.hide(),t.draggable("option","grid",null),H(v(k(e.start),E),v(P(e),E))):(F(T),s.css("display",""),t.draggable("option","grid",[l,c])))}function F(t){var a,n=y(k(e.start),t);e.end&&(a=y(k(e.end),t)),s.text(U(n,a,i("timeFormat")))}var u,p,f,h,m,_,b,w,E,T,O,o=n.getCoordinateGrid(),r=$(),l=C(),c=S(),d=D();t.draggable({scroll:!1,grid:[l,c],axis:1==r?"y":!1,opacity:i("dragOpacity"),revertDuration:i("dragRevertDuration"),start:function(n,i){a("eventDragStart",t,e,n,i),M(e,t),o.build(),u=t.position(),p=o.cell(n.pageX,n.pageY),f=h=!0,m=_=g(p),b=w=0,E=0,T=O=0},drag:function(e,n){var i=o.cell(e.pageX,e.pageY);if(f=!!i){if(m=g(i),b=Math.round((n.position.left-u.left)/l),b!=w){var a=x(0,p.col),s=p.col+b;s=Math.max(0,s),s=Math.min(r-1,s);var v=x(0,s);E=j(v,a)}m||(T=Math.round((n.position.top-u.top)/c)*d)}(f!=h||m!=_||b!=w||T!=O)&&(I(),h=f,_=m,w=b,O=T),t.draggable("option","revert",!f)},stop:function(n,i){L(),a("eventDragStop",t,e,n,i),f&&(m||E||T)?A(this,e,E,m?0:T,m,n,i):(f=!0,m=!1,b=0,E=0,T=0,I(),t.css("filter",""),t.css(u),z(e,t))}})}function at(e,t,n){var s,o,l=S(),c=D();t.resizable({handles:{s:".ui-resizable-handle"},grid:l,start:function(n,i){s=o=0,M(e,t),a("eventResizeStart",this,e,n,i)},resize:function(a,d){s=Math.round((Math.max(l,t.height())-d.originalSize.height)/l),s!=o&&(n.text(U(e.start,s||e.end?y(r(e),c*s):null,i("timeFormat"))),o=s)},stop:function(n,i){a("eventResizeStop",this,e,n,i),s?I(this,e,0,c*s,n,i):z(e,t)}})}var n=this;n.renderEvents=B,n.clearEvents=V,n.slotSegHtml=J,jt.call(n);var i=n.opt,a=n.trigger,s=n.isEventDraggable,o=n.isEventResizable,r=n.eventEnd,l=n.eventElementHandlers,c=n.setHeight,d=n.getDaySegmentContainer,u=n.getSlotSegmentContainer,p=n.getHoverListener,f=n.getMaxMinute,h=n.getMinMinute,_=n.timePosition,g=n.getIsCellAllDay,b=n.colContentLeft,w=n.colContentRight,x=n.cellToDate,$=n.getColCnt,C=n.getColWidth,S=n.getSnapHeight,D=n.getSnapMinutes,E=n.getSlotContainer,T=n.reportEventElement,z=n.showEvents,M=n.hideEvents,A=n.eventDrop,I=n.eventResize,H=n.renderDayOverlay,L=n.clearOverlays,R=n.renderDayEvents,W=n.calendar,Y=W.formatDate,U=W.formatDates;n.draggableDayEvent=nt}function ft(e){var i,t=ht(e),n=t[0];if(mt(t),n){for(i=0;n.length>i;i++)_t(n[i]);for(i=0;n.length>i;i++)gt(n[i],0,0)}return vt(t)}function ht(e){var n,i,a,t=[];for(n=0;e.length>n;n++){for(i=e[n],a=0;t.length>a&&bt(i,t[a]).length;a++);(t[a]||(t[a]=[])).push(i)}return t}function mt(e){var t,n,i,a,s;for(t=0;e.length>t;t++)for(n=e[t],i=0;n.length>i;i++)for(a=n[i],a.forwardSegs=[],s=t+1;e.length>s;s++)bt(a,e[s],a.forwardSegs)}function _t(e){var a,s,n=e.forwardSegs,i=0;if(e.forwardPressure===t){for(a=0;n.length>a;a++)s=n[a],_t(s),i=Math.max(i,1+s.forwardPressure);e.forwardPressure=i}}function gt(e,n,i){var s,a=e.forwardSegs;if(e.forwardCoord===t)for(a.length?(a.sort(wt),gt(a[0],n+1,i),e.forwardCoord=a[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-i)/(n+1),s=0;a.length>s;s++)gt(a[s],0,e.forwardCoord)}function vt(e){var n,i,a,t=[];for(n=0;e.length>n;n++)for(i=e[n],a=0;i.length>a;a++)t.push(i[a]);return t}function bt(e,t,n){n=n||[];for(var i=0;t.length>i;i++)yt(e,t[i])&&n.push(t[i]);return n}function yt(e,t){return e.end>t.start&&t.end>e.start}function wt(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||kt(e,t)}function kt(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function xt(n,i,a){function f(t,n){var i=p[t];return e.isPlainObject(i)?K(i,n||a):i}function h(e,t){return i.trigger.apply(i,[e,t||s].concat(Array.prototype.slice.call(arguments,2),[s]))}function m(e){var t=e.source||{};return it(e.startEditable,t.startEditable,f("eventStartEditable"),e.editable,t.editable,f("editable"))&&!f("disableDragging")}function _(e){var t=e.source||{};return it(e.durationEditable,t.durationEditable,f("eventDurationEditable"),e.editable,t.editable,f("editable"))&&!f("disableResizing")}function g(e){c={};var t,i,n=e.length;for(t=0;n>t;t++)i=e[t],c[i._id]?c[i._id].push(i):c[i._id]=[i]}function b(){c={},d={},u=[]}function w(e){return e.end?k(e.end):o(e)}function x(e,t){u.push({event:e,element:t}),d[e._id]?d[e._id].push(t):d[e._id]=[t]}function $(){e.each(u,function(e,t){s.trigger("eventDestroy",t.event,t.event,t.element)})}function C(e,t){t.click(function(n){return t.hasClass("ui-draggable-dragging")||t.hasClass("ui-resizable-resizing")?void 0:h("eventClick",this,e,n)}).hover(function(t){h("eventMouseover",this,e,t)},function(t){h("eventMouseout",this,e,t)})}function S(e,t){E(e,t,"show")}function D(e,t){E(e,t,"hide")}function E(e,t,n){var a,i=d[e._id],s=i.length;for(a=0;s>a;a++)t&&i[a][0]==t[0]||i[a][n]()}function T(e,t,n,i,a,s,o){var r=t.allDay,d=t._id;M(c[d],n,i,a),h("eventDrop",e,t,n,i,a,function(){M(c[d],-n,-i,r),l(d)},s,o),l(d)}function z(e,t,n,i,a,s){var o=t._id;P(c[o],n,i),h("eventResize",e,t,n,i,function(){P(c[o],-n,-i),l(o)},a,s),l(o)}function M(e,n,i,a){i=i||0;for(var s,o=e.length,l=0;o>l;l++)s=e[l],a!==t&&(s.allDay=a),y(v(s.start,n,!0),i),s.end&&(s.end=y(v(s.end,n,!0),i)),r(s,p)}function P(e,t,n){n=n||0;for(var i,a=e.length,s=0;a>s;s++)i=e[s],i.end=y(v(w(i),t,!0),n),r(i,p)}function L(e){return"object"==typeof e&&(e=e.getDay()),O[e]}function R(){return I}function q(e,t,n){for(t=t||1;O[(e.getDay()+(n?t:0)+7)%7];)v(e,t)}function W(){var e=Y.apply(null,arguments),t=U(e),n=B(t);return n}function Y(e,t){var n=s.getColCnt(),i=H?-1:1,a=H?n-1:0;"object"==typeof e&&(t=e.col,e=e.row);var o=e*n+(t*i+a);return o}function U(e){var t=s.visStart.getDay();return e+=F[t],7*Math.floor(e/I)+N[(e%I+I)%I]-t}function B(e){var t=k(s.visStart);return v(t,e),t}function V(e){var t=X(e),n=G(t),i=Q(n);return i}function X(e){return j(e,s.visStart)}function G(e){var t=s.visStart.getDay();return e+=t,Math.floor(e/7)*I+F[(e%7+7)%7]-F[t]}function Q(e){var t=s.getColCnt(),n=H?-1:1,i=H?t-1:0,a=Math.floor(e/t),o=(e%t+t)%t*n+i;return{row:a,col:o}}function Z(e,t){for(var n=s.getRowCnt(),i=s.getColCnt(),a=[],o=X(e),r=X(t),l=G(o),c=G(r)-1,d=0;n>d;d++){var u=d*i,p=u+i-1,f=Math.max(l,u),h=Math.min(c,p);if(h>=f){var m=Q(f),_=Q(h),g=[m.col,_.col].sort(),v=U(f)==o,b=U(h)+1==r;a.push({row:d,leftCol:g[0],rightCol:g[1],isStart:v,isEnd:b})}}return a}var s=this;s.element=n,s.calendar=i,s.name=a,s.opt=f,s.trigger=h,s.isEventDraggable=m,s.isEventResizable=_,s.setEventData=g,s.clearEventData=b,s.eventEnd=w,s.reportEventElement=x,s.triggerEventDestroy=$,s.eventElementHandlers=C,s.showEvents=S,s.hideEvents=D,s.eventDrop=T,s.eventResize=z;var o=s.defaultEventEnd,r=i.normalizeEvent,l=i.reportEventChange,c={},d={},u=[],p=i.options;s.isHiddenDay=L,s.skipHiddenDays=q,s.getCellsPerWeek=R,s.dateToCell=V,s.dateToDayOffset=X,s.dayOffsetToCellOffset=G,s.cellOffsetToCell=Q,s.cellToDate=W,s.cellToCellOffset=Y,s.cellOffsetToDayOffset=U,s.dayOffsetToDate=B,s.rangeToSegments=Z;var I,A=f("hiddenDays")||[],O=[],F=[],N=[],H=f("isRTL");(function(){f("weekends")===!1&&A.push(0,6);for(var t=0,n=0;7>t;t++)F[t]=n,O[t]=-1!=e.inArray(t,A),O[t]||(N[n]=t,n++);if(I=n,!I)throw"invalid hiddenDays"})()}function jt(){function L(e,t){var n=q(e,!1,!0);Ct(n,function(e,t){r(e.event,t)}),st(n,t),Ct(n,function(e,t){i("eventAfterRender",e.event,e.event,t)})}function R(e,t,n){var i=q([e],!0,!1),a=[];return Ct(i,function(e,i){e.row===t&&i.css("top",n),a.push(i[0])}),a}function q(t,n,i){var r,l,a=$(),s=n?e("<div/>"):a,o=W(t);return U(o),r=B(o),s[0].innerHTML=r,l=s.children(),n&&a.append(l),G(o,l),Ct(o,function(e,t){e.hsides=N(t,!0)}),Ct(o,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),Ct(o,function(e,t){e.outerHeight=t.outerHeight(!0)}),K(o,i),o}function W(e){for(var t=[],n=0;e.length>n;n++){var i=Y(e[n]);t.push.apply(t,i)}return t}function Y(e){for(var t=e.start,n=P(e),i=z(t,n),a=0;i.length>a;a++)i[a].event=e;return i}function U(e){for(var t=n("isRTL"),i=0;e.length>i;i++){var a=e[i],s=(t?a.isEnd:a.isStart)?y:g,o=(t?a.isStart:a.isEnd)?w:b,r=s(a.leftCol),l=o(a.rightCol);a.left=r,a.outerWidth=l-r}}function B(e){for(var t="",n=0;e.length>n;n++)t+=V(e[n]);return t}function V(e){var t="",i=n("isRTL"),o=e.event,r=o.url,l=["fc-event","fc-event-hori"];a(o)&&l.push("fc-event-draggable"),e.isStart&&l.push("fc-event-start"),e.isEnd&&l.push("fc-event-end"),l=l.concat(o.className),o.source&&(l=l.concat(o.source.className||[]));var c=tt(o,n);return t+=r?"<a href='"+Q(r)+"'":"<div",t+=" class='"+l.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+e.left+"px;"+c+"'"+">"+"<div class='fc-event-inner'>",!o.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+Q(C(o.start,o.end,n("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+Q(o.title||"")+"</span>"+"</div>",e.isEnd&&s(o)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(i?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),t+="</"+(r?"a":"div")+">"}function G(t,n){for(var a=0;t.length>a;a++){var s=t[a],o=s.event,r=n.eq(a),l=i("eventRender",o,o,r);l===!1?r.remove():(l&&l!==!0&&(l=e(l).css({position:"absolute",left:s.left}),r.replaceWith(l),r=l),s.element=r)}}function K(e,t){var n=J(e),i=at(),a=[];if(t)for(var s=0;i.length>s;s++)i[s].height(n[s]);for(var s=0;i.length>s;s++)a.push(i[s].position().top);Ct(e,function(e,t){t.css("top",a[e.row]+e.top)})}function J(e){for(var t=f(),n=h(),i=[],a=et(e),s=0;t>s;s++){for(var o=a[s],r=[],l=0;n>l;l++)r.push(0);for(var c=0;o.length>c;c++){var d=o[c];d.top=X(r.slice(d.leftCol,d.rightCol+1));for(var l=d.leftCol;d.rightCol>=l;l++)r[l]=d.top+d.outerHeight}i.push(X(r))}return i}function et(e){var i,a,s,t=f(),n=[];for(i=0;e.length>i;i++)a=e[i],s=a.row,a.element&&(n[s]?n[s].push(a):n[s]=[a]);for(s=0;t>s;s++)n[s]=nt(n[s]||[]);return n}function nt(e){for(var t=[],n=it(e),i=0;n.length>i;i++)t.push.apply(t,n[i]);return t}function it(e){e.sort(St);for(var t=[],n=0;e.length>n;n++){for(var i=e[n],a=0;t.length>a&&$t(i,t[a]);a++);t[a]?t[a].push(i):t[a]=[i]}return t}function at(){var e,t=f(),n=[];for(e=0;t>e;e++)n[e]=_(e).find("div.fc-day-content > div");return n}function st(e,t){var n=$();Ct(e,function(e,n,i){var a=e.event;a._id===t?ot(a,n,e):n[0]._fci=i}),O(n,e,ot)}function ot(e,n,i){a(e)&&t.draggableDayEvent(e,n,i),i.isEnd&&s(e)&&t.resizableDayEvent(e,n,i),l(e,n)}function rt(e,t){var s,a=T();t.draggable({delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(n,o){i("eventDragStart",t,e,n,o),d(e,t),a.start(function(n,i,a,o){if(t.draggable("option","revert",!n||!a&&!o),D(),n){var r=M(i),l=M(n);s=j(l,r),S(v(k(e.start),s),v(P(e),s))}else s=0},n,"drag")},stop:function(n,o){a.stop(),D(),i("eventDragStop",t,e,n,o),s?u(this,e,s,0,e.allDay,n,o):(t.css("filter",""),c(e,t))}})}function lt(t,a,s){var r=n("isRTL"),l=r?"w":"e",u=a.find(".ui-resizable-"+l),m=!1;Z(a),a.mousedown(function(e){e.preventDefault()}).click(function(e){m&&(e.preventDefault(),e.stopImmediatePropagation())}),u.mousedown(function(n){function x(n){i("eventResizeStop",this,t,n),e("body").css("cursor",""),r.stop(),D(),b&&p(this,t,b,0,n),setTimeout(function(){m=!1},0)}if(1==n.which){m=!0;var r=T();f(),h();var b,y,g=a.css("top"),w=e.extend({},t),k=H(F(t.start));E(),e("body").css("cursor",l+"-resize").one("mouseup",x),i("eventResizeStart",this,t,n),r.start(function(n,i){if(n){var a=A(i),r=A(n);if(r=Math.max(r,k),b=I(r)-I(a)){w.end=v(o(t),b,!0);var u=y;y=R(w,s.row,g),y=e(y),y.find("*").css("cursor",l+"-resize"),u&&u.remove(),d(t)}else y&&(c(t),y.remove(),y=null);D(),S(t.start,v(P(t),b))}},n)}})}var t=this;t.renderDayEvents=L,t.draggableDayEvent=rt,t.resizableDayEvent=lt;var n=t.opt,i=t.trigger,a=t.isEventDraggable,s=t.isEventResizable,o=t.eventEnd,r=t.reportEventElement,l=t.eventElementHandlers,c=t.showEvents,d=t.hideEvents,u=t.eventDrop,p=t.eventResize,f=t.getRowCnt,h=t.getColCnt;t.getColWidth;var _=t.allDayRow,g=t.colLeft,b=t.colRight,y=t.colContentLeft,w=t.colContentRight;t.dateToCell;var $=t.getDaySegmentContainer,C=t.calendar.formatDates,S=t.renderDayOverlay,D=t.clearOverlays,E=t.clearSelection,T=t.getHoverListener,z=t.rangeToSegments,M=t.cellToDate,A=t.cellToCellOffset,I=t.cellOffsetToDayOffset,F=t.dateToDayOffset,H=t.dayOffsetToCellOffset}function $t(e,t){for(var n=0;t.length>n;n++){var i=t[n];if(e.rightCol>=i.leftCol&&i.rightCol>=e.leftCol)return!0}return!1}function Ct(e,t){for(var n=0;e.length>n;n++){var i=e[n],a=i.element;a&&t(i,a,n)}}function St(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function Dt(){function l(e,t,n){c(),t||(t=a(e,n)),s(e,t,n),d(e,t,n)}function c(e){r&&(r=!1,o(),i("unselect",null,e))}function d(e,t,n,a){r=!0,i("select",null,e,t,n,a)}function u(i){var a=t.cellToDate,r=t.getIsCellAllDay,l=t.getHoverListener(),u=t.reportDayClick;if(1==i.which&&n("selectable")){c(i);var f;l.start(function(e,t){o(),e&&r(e)?(f=[a(t),a(e)].sort(V),s(f[0],f[1],!0)):f=null},i),e(document).one("mouseup",function(e){l.stop(),f&&(+f[0]==+f[1]&&u(f[0],!0,e),d(f[0],f[1],!0,e))})}}var t=this;t.select=l,t.unselect=c,t.reportSelection=d,t.daySelectionMousedown=u;var n=t.opt,i=t.trigger,a=t.defaultSelectionEnd,s=t.renderSelection,o=t.clearSelection,r=!1;n("selectable")&&n("unselectAuto")&&e(document).mousedown(function(t){var i=n("unselectCancel");i&&e(t.target).parents(i).length||c(t)})}function Et(){function a(t,a){var s=i.shift();return s||(s=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),s[0].parentNode!=a[0]&&s.appendTo(a),n.push(s.css(t).show()),s}function s(){for(var e;e=n.shift();)i.push(e.hide().unbind())}var t=this;t.renderOverlay=a,t.clearOverlays=s;var n=[],i=[]}function Tt(e){var n,i,t=this;t.build=function(){n=[],i=[],e(n,i)},t.cell=function(e,t){var o,a=n.length,s=i.length,r=-1,l=-1;for(o=0;a>o;o++)if(t>=n[o][0]&&n[o][1]>t){r=o;break}for(o=0;s>o;o++)if(e>=i[o][0]&&i[o][1]>e){l=o;break}return r>=0&&l>=0?{row:r,col:l}:null},t.rect=function(e,t,a,s,o){var r=o.offset();return{top:n[e][0]-r.top,left:i[t][0]-r.left,width:i[s][1]-i[t][0],height:n[a][1]-n[e][0]}}}function zt(t){function r(e){Mt(e);var n=t.cell(e.pageX,e.pageY);(!n!=!o||n&&(n.row!=o.row||n.col!=o.col))&&(n?(s||(s=n),a(n,s,n.row-s.row,n.col-s.col)):a(n,s),o=n)}var i,a,s,o,n=this;n.start=function(n,l,c){a=n,s=o=null,t.build(),r(l),i=c||"mousemove",e(document).bind(i,r)},n.stop=function(){return e(document).unbind(i,r),o}}function Mt(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function Pt(e){function o(t){return i[t]=i[t]||e(t)}var n=this,i={},a={},s={};n.left=function(e){return a[e]=a[e]===t?o(e).position().left:a[e]},n.right=function(e){return s[e]=s[e]===t?n.left(e)+o(e).width():s[e]},n.clear=function(){i={},a={},s={}}}var n={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},i={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},a=e.fullCalendar={version:"1.6.4"},s=a.views={};e.fn.fullCalendar=function(a){if("string"==typeof a){var o,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e.data(this,"fullCalendar");if(n&&e.isFunction(n[a])){var i=n[a].apply(n,s);o===t&&(o=i),"destroy"==a&&e.removeData(this,"fullCalendar")}}),o!==t?o:this}a=a||{};var l=a.eventSources||[];return delete a.eventSources,a.events&&(l.push(a.events),delete a.events),a=e.extend(!0,{},n,a.isRTL||a.isRTL===t&&n.isRTL?i:{},a),this.each(function(t,n){var i=e(n),s=new r(i,a,l);i.data("fullCalendar",s),s.render()}),this},a.sourceNormalizers=[],a.sourceFetchers=[];var c={dataType:"json",cache:!1},d=1;a.addDays=v,a.cloneDate=k,a.parseDate=C,a.parseISO8601=S,a.parseTime=D,a.formatDate=E,a.formatDates=T;var p=["sun","mon","tue","wed","thu","fri","sat"],f=864e5,h=36e5,m=6e4,z={s:function(e){return e.getSeconds()},ss:function(e){return G(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return G(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return G(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return G(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return G(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return G(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return 12>e.getHours()?"a":"p"},tt:function(e){return 12>e.getHours()?"am":"pm"},T:function(e){return 12>e.getHours()?"A":"P"},TT:function(e){return 12>e.getHours()?"AM":"PM"},u:function(e){return E(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return M(e)}};a.dateFormatters=z,a.applyAll=nt,s.month=at,s.basicWeek=st,s.basicDay=ot,o({weekMode:"fixed"}),s.agendaWeek=ct,s.agendaDay=dt,o({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery),function(e,t,n){"use strict";function i(e){return function(){var o,r,t=arguments[0],n="["+(e?e+":":"")+t+"] ",i=arguments[1],a=arguments,s=function(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):e===void 0?"undefined":"string"!=typeof e?JSON.stringify(e):e};for(o=n+i.replace(/\{\d+\}/g,function(e){var n,t=+e.slice(1,-1);return a.length>t+2?(n=a[t+2],"function"==typeof n?n.toString().replace(/ ?\{[\s\S]*$/,""):n===void 0?"undefined":"string"!=typeof n?ct(n):n):e}),o=o+"\nhttp://errors.angularjs.org/1.2.5/"+(e?e+"/":"")+t,r=2;arguments.length>r;r++)o=o+(2==r?"?":"&")+"p"+(r-2)+"="+encodeURIComponent(s(arguments[r]));return new Error(o)}}function y(e){if(null==e||q(e))return!1;var t=e.length;return 1===e.nodeType&&t?!0:I(e)||H(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function w(e,t,n){var i;if(e)if(L(e))for(i in e)"prototype"!=i&&"length"!=i&&"name"!=i&&e.hasOwnProperty(i)&&t.call(n,e[i],i);else if(e.forEach&&e.forEach!==w)e.forEach(t,n);else if(y(e))for(i=0;e.length>i;i++)t.call(n,e[i],i);else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i);return e}function k(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function x(e,t,n){for(var i=k(e),a=0;i.length>a;a++)t.call(n,e[i[a]],i[a]);return i}function j(e){return function(t,n){e(n,t)}}function $(){for(var t,e=b.length;e;){if(e--,t=b[e].charCodeAt(0),57==t)return b[e]="A",b.join("");if(90!=t)return b[e]=String.fromCharCode(t+1),b.join("");b[e]="0"}return b.unshift("0"),b.join("")}function C(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function S(e){var t=e.$$hashKey;return w(arguments,function(t){t!==e&&w(t,function(t,n){e[n]=t})}),C(e,t),e}function D(e){return parseInt(e,10)}function E(e,t){return S(new(S(function(){},{prototype:e})),t)}function T(){}function z(e){return e}function M(e){return function(){return e}}function P(e){return e===void 0}function A(e){return e!==void 0}function O(e){return null!=e&&"object"==typeof e}function I(e){return"string"==typeof e}function F(e){return"number"==typeof e}function N(e){return"[object Date]"===f.call(e)}function H(e){return"[object Array]"===f.call(e)}function L(e){return"function"==typeof e}function R(e){return"[object RegExp]"===f.call(e)}function q(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function W(e){return e&&e.$evalAsync&&e.$watch}function Y(e){return"[object File]"===f.call(e)}function V(e){return!(!e||!(e.nodeName||e.on&&e.find))}function G(e,t,n){var i=[];return w(e,function(e,a,s){i.push(t.call(n,e,a,s))}),i}function Q(e,t){return-1!=Z(e,t)}function Z(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;e.length>n;n++)if(t===e[n])return n;return-1}function J(e,t){var n=Z(e,t);return n>=0&&e.splice(n,1),t}function tt(e,t){if(q(e)||W(e))throw h("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(t){if(e===t)throw h("cpi","Can't copy! Source and destination are identical.");if(H(e)){t.length=0;for(var n=0;e.length>n;n++)t.push(tt(e[n]))}else{var i=t.$$hashKey;w(t,function(e,n){delete t[n]});for(var a in e)t[a]=tt(e[a]);C(t,i)}}else t=e,e&&(H(e)?t=tt(e,[]):N(e)?t=new Date(e.getTime()):R(e)?t=new RegExp(e.source):O(e)&&(t=tt(e,{})));return t}function nt(e,t){t=t||{};for(var n in e)e.hasOwnProperty(n)&&"$$"!==n.substr(0,2)&&(t[n]=e[n]);return t}function it(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var s,o,r,i=typeof e,a=typeof t;if(i==a&&"object"==i){if(!H(e)){if(N(e))return N(t)&&e.getTime()==t.getTime();if(R(e)&&R(t))return e.toString()==t.toString();if(W(e)||W(t)||q(e)||q(t)||H(t))return!1;r={};for(o in e)if("$"!==o.charAt(0)&&!L(e[o])){if(!it(e[o],t[o]))return!1;r[o]=!0}for(o in t)if(!r.hasOwnProperty(o)&&"$"!==o.charAt(0)&&t[o]!==n&&!L(t[o]))return!1;return!0}if(!H(t))return!1;if((s=e.length)==t.length){for(o=0;s>o;o++)if(!it(e[o],t[o]))return!1;return!0}}return!1}function at(){return t.securityPolicy&&t.securityPolicy.isActive||t.querySelector&&!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"))}function st(e,t,n){return e.concat(u.call(t,n))}function ot(e,t){return u.call(e,t||0)}function rt(e,t){var n=arguments.length>2?ot(arguments,2):[];return!L(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,n.concat(u.call(arguments,0))):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function lt(e,i){var a=i;return"string"==typeof e&&"$"===e.charAt(0)?a=n:q(i)?a="$WINDOW":i&&t===i?a="$DOCUMENT":W(i)&&(a="$SCOPE"),a}function ct(e,t){return e===void 0?n:JSON.stringify(e,lt,t?"  ":null)}function dt(e){return I(e)?JSON.parse(e):e}function ut(e){if(e&&0!==e.length){var t=a(""+e);e=!("f"==t||"0"==t||"false"==t||"no"==t||"n"==t||"[]"==t)}else e=!1;return e}function pt(e){e=c(e).clone();try{e.empty()}catch(t){}var n=3,i=c("<div>").append(e).html();try{return e[0].nodeType===n?a(i):i.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+a(t)})}catch(t){return a(i)}}function ft(e){try{return decodeURIComponent(e)}catch(t){}}function ht(e){var n,i,t={};return w((e||"").split("&"),function(e){if(e&&(n=e.split("="),i=ft(n[0]),A(i))){var a=A(n[1])?ft(n[1]):!0;t[i]?H(t[i])?t[i].push(a):t[i]=[t[i],a]:t[i]=a}}),t}function mt(e){var t=[];return w(e,function(e,n){H(e)?w(e,function(e){t.push(gt(n,!0)+(e===!0?"":"="+gt(e,!0)))}):t.push(gt(n,!0)+(e===!0?"":"="+gt(e,!0)))}),t.length?t.join("&"):""}function _t(e){return gt(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function gt(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}function vt(e,n){function l(e){e&&i.push(e)}var a,s,i=[e],o=["ng:app","ng-app","x-ng-app","data-ng-app"],r=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;w(o,function(n){o[n]=!0,l(t.getElementById(n)),n=n.replace(":","\\:"),e.querySelectorAll&&(w(e.querySelectorAll("."+n),l),w(e.querySelectorAll("."+n+"\\:"),l),w(e.querySelectorAll("["+n+"]"),l))}),w(i,function(e){if(!a){var t=" "+e.className+" ",n=r.exec(t);n?(a=e,s=(n[2]||"").replace(/\s+/g,",")):w(e.attributes,function(t){!a&&o[t.name]&&(a=e,s=t.value)})}}),a&&n(a,s?[s]:[])}function bt(n,i){var a=function(){if(n=c(n),n.injector()){var e=n[0]===t?"document":pt(n);throw h("btstrpd","App Already Bootstrapped with this Element '{0}'",e)}i=i||[],i.unshift(["$provide",function(e){e.value("$rootElement",n)}]),i.unshift("ng");var a=gn(i);return a.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(e,t,n,i){e.$apply(function(){t.data("$injector",i),n(t)(e)})}]),a},s=/^NG_DEFER_BOOTSTRAP!/;return e&&!s.test(e.name)?a():(e.name=e.name.replace(s,""),_.resumeBootstrap=function(e){w(e,function(e){i.push(e)}),a()},void 0)}function wt(e,t){return t=t||"_",e.replace(yt,function(e,n){return(n?t:"")+e.toLowerCase()})}function kt(){d=e.jQuery,d?(c=d,S(d.fn,{scope:nn.scope,isolateScope:nn.isolateScope,controller:nn.controller,injector:nn.injector,inheritedData:nn.inheritedData}),Rt("remove",!0,!0,!1),Rt("empty",!1,!1,!1),Rt("html",!1,!1,!0)):c=qt,_.element=c}function xt(e,t,n){if(!e)throw h("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function jt(e,t,n){return n&&H(e)&&(e=e[e.length-1]),xt(L(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function $t(e,t){if("hasOwnProperty"===e)throw h("badname","hasOwnProperty is not a valid {0} name",t)}function Ct(e,t,n){if(!t)return e;for(var a,i=t.split("."),s=e,o=i.length,r=0;o>r;r++)a=i[r],e&&(e=(s=e)[a]);return!n&&L(e)?rt(s,e):e}function St(e){var t=e[0],n=e[e.length-1];if(t===n)return c(t);var i=t,a=[i];do{if(i=i.nextSibling,!i)break;a.push(i)}while(i!==n);return c(a)}function Dt(e){function a(e,t,n){return e[t]||(e[t]=n())}var t=i("$injector"),n=i("ng"),s=a(e,"angular",Object);return s.$$minErr=s.$$minErr||i,a(s,"module",function(){var e={};return function(i,s,o){var r=function(e,t){if("hasOwnProperty"===e)throw n("badname","hasOwnProperty is not a valid {0} name",t)};return r(i,"module"),s&&e.hasOwnProperty(i)&&(e[i]=null),a(e,i,function(){function l(t,n,i){return function(){return e[i||"push"]([t,n,arguments]),r}}if(!s)throw t("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var e=[],n=[],a=l("$injector","invoke"),r={_invokeQueue:e,_runBlocks:n,requires:s,name:i,provider:l("$provide","provider"),factory:l("$provide","factory"),service:l("$provide","service"),value:l("$provide","value"),constant:l("$provide","constant","unshift"),animation:l("$animateProvider","register"),filter:l("$filterProvider","register"),controller:l("$controllerProvider","register"),directive:l("$compileProvider","directive"),config:a,run:function(e){return n.push(e),this}};return o&&a(o),r})}})}function Tt(t){S(t,{bootstrap:bt,copy:tt,extend:S,equals:it,element:c,forEach:w,injector:gn,noop:T,bind:rt,toJson:ct,fromJson:dt,identity:z,isUndefined:P,isDefined:A,isString:I,isFunction:L,isObject:O,isNumber:F,isElement:V,isArray:H,version:Et,isDate:N,lowercase:a,uppercase:s,callbacks:{counter:0},$$minErr:i,$$csp:at}),g=Dt(e);try{g("ngLocale")}catch(n){g("ngLocale",[]).provider("$locale",Bn)}g("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Si}),e.provider("$compile",Cn).directive({a:ca,input:Ca,textarea:Ca,form:ha,script:ls,select:us,style:fs,option:ps,ngBind:Na,ngBindHtml:La,ngBindTemplate:Ha,ngClass:qa,ngClassEven:Ya,ngClassOdd:Wa,ngCloak:Ua,ngController:Ba,ngForm:ma,ngHide:ns,ngIf:Xa,ngInclude:Ga,ngInit:Qa,ngNonBindable:Za,ngPluralize:Ja,ngRepeat:es,ngShow:ts,ngStyle:is,ngSwitch:as,ngSwitchWhen:ss,ngSwitchDefault:os,ngOptions:ds,ngTransclude:rs,ngModel:Ma,ngList:Oa,ngChange:Pa,required:Aa,ngRequired:Aa,ngValue:Fa}).directive({ngInclude:Ka}).directive(da).directive(Va),e.provider({$anchorScroll:vn,$animate:yn,$browser:kn,$cacheFactory:xn,$controller:Mn,$document:Pn,$exceptionHandler:An,$filter:qi,$interpolate:Yn,$interval:Un,$http:Hn,$httpBackend:Rn,$location:li,$log:ci,$parse:xi,$rootScope:Ci,$q:ji,$sce:Ai,$sceDelegate:Pi,$sniffer:Oi,$templateCache:jn,$timeout:Ii,$window:Ri})}])}function It(){return++Pt}function Lt(e){return e.replace(Ft,function(e,t,n,i){return i?n.toUpperCase():n}).replace(Nt,"Moz$1")}function Rt(e,t,n,i){function s(e){var r,l,u,p,f,h,m,s=n&&e?[this.filter(e)]:[this],o=t;if(!i||null!=e)for(;s.length;)for(r=s.shift(),l=0,u=r.length;u>l;l++)for(p=c(r[l]),o?p.triggerHandler("$destroy"):o=!o,f=0,h=(m=p.children()).length;h>f;f++)s.push(d(m[f]));return a.apply(this,arguments)}var a=d.fn[e];a=a.$original||a,s.$original=a,d.fn[e]=s}function qt(e){if(e instanceof qt)return e;if(!(this instanceof qt)){if(I(e)&&"<"!=e.charAt(0))throw Ht("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new qt(e)}if(I(e)){var n=t.createElement("div");n.innerHTML="<div>&#160;</div>"+e,n.removeChild(n.firstChild),Zt(this,n.childNodes);var i=c(t.createDocumentFragment());i.append(this)}else Zt(this,e)}function Wt(e){return e.cloneNode(!0)}function Yt(e){Bt(e);for(var t=0,n=e.childNodes||[];n.length>t;t++)Yt(n[t])}function Ut(e,t,n,i){if(A(i))throw Ht("offargs","jqLite#off() does not support the `selector` argument");var a=Vt(e,"events"),s=Vt(e,"handle");s&&(P(t)?w(a,function(t,n){Ot(e,n,t),delete a[n]}):w(t.split(" "),function(t){P(n)?(Ot(e,t,a[t]),delete a[t]):J(a[t]||[],n)}))}function Bt(e,t){var i=e[Mt],a=zt[i];if(a){if(t)return delete zt[i].data[t],void 0;a.handle&&(a.events.$destroy&&a.handle({},"$destroy"),Ut(e)),delete zt[i],e[Mt]=n}}function Vt(e,t,n){var i=e[Mt],a=zt[i||-1];return A(n)?(a||(e[Mt]=i=It(),a=zt[i]={}),a[t]=n,void 0):a&&a[t]}function Xt(e,t,n){var i=Vt(e,"data"),a=A(n),s=!a&&A(t),o=s&&!O(t);if(i||o||Vt(e,"data",i={}),a)i[t]=n;else{if(!s)return i;if(o)return i&&i[t];S(i,t)}}function Gt(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Kt(e,t){t&&e.setAttribute&&w(t.split(" "),function(t){e.setAttribute("class",B((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+B(t)+" "," ")))})}function Qt(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");w(t.split(" "),function(e){e=B(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",B(n))}}function Zt(e,t){if(t){t=t.nodeName||!A(t.length)||q(t)?[t]:t;for(var n=0;t.length>n;n++)e.push(t[n])}}function Jt(e,t){return en(e,"$"+(t||"ngController")+"Controller")}function en(e,t,i){e=c(e),9==e[0].nodeType&&(e=e.find("html"));for(var a=H(t)?t:[t];e.length;){for(var s=0,o=a.length;o>s;s++)if((i=e.data(a[s]))!==n)return i;e=e.parent()}}function tn(e){for(var t=0,n=e.childNodes;n.length>t;t++)Yt(n[t]);for(;e.firstChild;)e.removeChild(e.firstChild)}function on(e,t){var n=an[t.toLowerCase()];return n&&sn[e.nodeName]&&n}function rn(e,n){var i=function(i,a){if(i.preventDefault||(i.preventDefault=function(){i.returnValue=!1}),i.stopPropagation||(i.stopPropagation=function(){i.cancelBubble=!0
}),i.target||(i.target=i.srcElement||t),P(i.defaultPrevented)){var s=i.preventDefault;i.preventDefault=function(){i.defaultPrevented=!0,s.call(i)},i.defaultPrevented=!1}i.isDefaultPrevented=function(){return i.defaultPrevented||i.returnValue===!1},w(n[a||i.type],function(t){t.call(e,i)}),8>=l?(i.preventDefault=null,i.stopPropagation=null,i.isDefaultPrevented=null):(delete i.preventDefault,delete i.stopPropagation,delete i.isDefaultPrevented)};return i.elem=e,i}function cn(e){var i,t=typeof e;return"object"==t&&null!==e?"function"==typeof(i=e.$$hashKey)?i=e.$$hashKey():i===n&&(i=e.$$hashKey=$()):i=e,t+":"+i}function dn(e){w(e,this.put,this)}function _n(e){var t,n,i,a;return"function"==typeof e?(t=e.$inject)||(t=[],e.length&&(n=e.toString().replace(hn,""),i=n.match(un),w(i[1].split(pn),function(e){e.replace(fn,function(e,n,i){t.push(i)})})),e.$inject=t):H(e)?(a=e.length-1,jt(e[a],"fn"),t=e.slice(0,a)):jt(e,"fn",!0),t}function gn(e){function c(e){return function(t,n){return O(t)?(w(t,j(e)),void 0):e(t,n)}}function d(e,t){if($t(e,"service"),(L(t)||H(t))&&(t=o.instantiate(t)),!t.$get)throw mn("pget","Provider '{0}' must define $get factory method.",e);return s[e+n]=t}function u(e,t){return d(e,{$get:t})}function p(e,t){return u(e,["$injector",function(e){return e.instantiate(t)}])}function f(e,t){return u(e,M(t))}function h(e,t){$t(e,"constant"),s[e]=t,r[e]=t}function m(e,t){var i=o.get(e+n),a=i.$get;i.$get=function(){var e=l.invoke(a,i);return l.invoke(t,null,{$delegate:e})}}function _(e){var n,i,s,r,t=[];return w(e,function(e){if(!a.get(e)){a.put(e,!0);try{if(I(e))for(n=g(e),t=t.concat(_(n.requires)).concat(n._runBlocks),i=n._invokeQueue,s=0,r=i.length;r>s;s++){var l=i[s],c=o.get(l[0]);c[l[1]].apply(c,l[2])}else L(e)?t.push(o.invoke(e)):H(e)?t.push(o.invoke(e)):jt(e,"module")}catch(d){throw H(e)&&(e=e[e.length-1]),d.message&&d.stack&&-1==d.stack.indexOf(d.message)&&(d=d.message+"\n"+d.stack),mn("modulerr","Failed to instantiate module {0} due to:\n{1}",e,d.stack||d.message||d)}}}),t}function v(e,a){function o(n){if(e.hasOwnProperty(n)){if(e[n]===t)throw mn("cdep","Circular dependency found: {0}",i.join(" <- "));return e[n]}try{return i.unshift(n),e[n]=t,e[n]=a(n)}finally{i.shift()}}function r(e,t,n){var s,r,l,i=[],a=_n(e);for(r=0,s=a.length;s>r;r++){if(l=a[r],"string"!=typeof l)throw mn("itkn","Incorrect injection token! Expected service name as string, got {0}",l);i.push(n&&n.hasOwnProperty(l)?n[l]:o(l))}return e.$inject||(e=e[s]),e.apply(t,i)}function l(e,t){var i,a,n=function(){};return n.prototype=(H(e)?e[e.length-1]:e).prototype,i=new n,a=r(e,i,t),O(a)||L(a)?a:i}return{invoke:r,instantiate:l,get:o,annotate:_n,has:function(t){return s.hasOwnProperty(t+n)||e.hasOwnProperty(t)}}}var t={},n="Provider",i=[],a=new dn,s={$provide:{provider:c(d),factory:c(u),service:c(p),value:c(f),constant:c(h),decorator:m}},o=s.$injector=v(s,function(){throw mn("unpr","Unknown provider: {0}",i.join(" <- "))}),r={},l=r.$injector=v(r,function(e){var t=o.get(e+n);return l.invoke(t.$get,t)});return w(_(e),function(e){l.invoke(e||T)}),l}function vn(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,i){function o(e){var t=null;return w(e,function(e){t||"a"!==a(e.nodeName)||(t=e)}),t}function r(){var i,e=n.hash();e?(i=s.getElementById(e))?i.scrollIntoView():(i=o(s.getElementsByName(e)))?i.scrollIntoView():"top"===e&&t.scrollTo(0,0):t.scrollTo(0,0)}var s=t.document;return e&&i.$watch(function(){return n.hash()},function(){i.$evalAsync(r)}),r}]}function wn(e,t,i,a){function m(e){try{e.apply(null,ot(arguments,1))}finally{if(f--,0===f)for(;h.length;)try{h.pop()()}catch(t){i.error(t)}}}function v(e,t){(function n(){w(_,function(e){e()}),g=t(n,e)})()}function $(){k=null,b!=s.url()&&(b=s.url(),w(x,function(e){e(s.url())}))}var s=this,o=t[0],r=e.location,l=e.history,d=e.setTimeout,u=e.clearTimeout,p={};s.isMock=!1;var f=0,h=[];s.$$completeOutstandingRequest=m,s.$$incOutstandingRequestCount=function(){f++},s.notifyWhenNoOutstandingRequests=function(e){w(_,function(e){e()}),0===f?e():h.push(e)};var g,_=[];s.addPollFn=function(e){return P(g)&&v(100,d),_.push(e),e};var b=r.href,y=t.find("base"),k=null;s.url=function(t,n){if(r!==e.location&&(r=e.location),t){if(b==t)return;return b=t,a.history?n?l.replaceState(null,"",t):(l.pushState(null,"",t),y.attr("href",y.attr("href"))):(k=t,n?r.replace(t):r.href=t),s}return k||r.href.replace(/%27/g,"'")};var x=[],j=!1;s.onUrlChange=function(t){return j||(a.history&&c(e).on("popstate",$),a.hashchange?c(e).on("hashchange",$):s.addPollFn($),j=!0),x.push(t),t},s.baseHref=function(){var e=y.attr("href");return e?e.replace(/^https?\:\/\/[^\/]*/,""):""};var C={},S="",D=s.baseHref();s.cookies=function(e,t){var a,s,r,l,c;if(!e){if(o.cookie!==S)for(S=o.cookie,s=S.split("; "),C={},l=0;s.length>l;l++)r=s[l],c=r.indexOf("="),c>0&&(e=unescape(r.substring(0,c)),C[e]===n&&(C[e]=unescape(r.substring(c+1))));return C}t===n?o.cookie=escape(e)+"=;path="+D+";expires=Thu, 01 Jan 1970 00:00:00 GMT":I(t)&&(a=(o.cookie=escape(e)+"="+escape(t)+";path="+D).length+1,a>4096&&i.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+a+" > 4096 bytes)!"))},s.defer=function(e,t){var n;return f++,n=d(function(){delete p[n],m(e)},t||0),p[n]=!0,n},s.defer.cancel=function(e){return p[e]?(delete p[e],u(e),m(T),!0):!1}}function kn(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,i){return new wn(e,i,t,n)}]}function xn(){this.$get=function(){function t(t,n){function u(e){e!=c&&(d?d==e&&(d=e.n):d=e,p(e.n,e.p),p(e,c),c=e,c.n=null)}function p(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(t in e)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var a=0,s=S({},n,{id:t}),o={},r=n&&n.capacity||Number.MAX_VALUE,l={},c=null,d=null;return e[t]={put:function(e,t){var n=l[e]||(l[e]={key:e});return u(n),P(t)?void 0:(e in o||a++,o[e]=t,a>r&&this.remove(d.key),t)},get:function(e){var t=l[e];if(t)return u(t),o[e]},remove:function(e){var t=l[e];t&&(t==c&&(c=t.p),t==d&&(d=t.n),p(t.n,t.p),delete l[e],delete o[e],a--)},removeAll:function(){o={},a=0,l={},c=d=null},destroy:function(){o=null,s=null,l=null,delete e[t]},info:function(){return S({},s,{size:a})}}}var e={};return t.info=function(){var t={};return w(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function jn(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Cn(e,i){var a={},s="Directive",o=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,r=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,d=/^(on[a-z]+|formaction)$/;this.directive=function u(t,n){return $t(t,"directive"),I(t)?(xt(n,"directiveFactory"),a.hasOwnProperty(t)||(a[t]=[],e.factory(t+s,["$injector","$exceptionHandler",function(e,n){var i=[];return w(a[t],function(a,s){try{var o=e.invoke(a);L(o)?o={compile:M(o)}:!o.compile&&o.link&&(o.compile=M(o.link)),o.priority=o.priority||0,o.index=s,o.name=o.name||t,o.require=o.require||o.controller&&o.name,o.restrict=o.restrict||"A",i.push(o)}catch(r){n(r)}}),i}])),a[t].push(n)):w(t,j(u)),this},this.aHrefSanitizationWhitelist=function(e){return A(e)?(i.aHrefSanitizationWhitelist(e),this):i.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return A(e)?(i.imgSrcSanitizationWhitelist(e),this):i.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,i,u,p,f,h,m,_,g,b,y,k){function T(e,t,n,i,a){e instanceof c||(e=c(e)),w(e,function(t,n){3==t.nodeType&&t.nodeValue.match(/\S+/)&&(e[n]=t=c(t).wrap("<span></span>").parent()[0])});var s=A(e,t,e,n,i,a);return function(t,n,i){xt(t,"scope");var a=n?nn.clone.call(e):e;w(i,function(e,t){a.data("$"+t+"Controller",e)});for(var o=0,r=a.length;r>o;o++){var l=a[o];(1==l.nodeType||9==l.nodeType)&&a.eq(o).data("$scope",t)}return P(a,"ng-scope"),n&&n(a,t),s&&s(t,a,a),a}}function P(e,t){try{e.addClass(t)}catch(n){}}function A(e,t,i,a,s,o){function m(e,i,a,s){var o,l,d,u,p,f,h,m,_,g=[];for(h=0,m=i.length;m>h;h++)g.push(i[h]);for(h=0,_=0,m=r.length;m>h;_++)d=g[_],o=r[h++],l=r[h++],u=c(d),o?(o.scope?(p=e.$new(),u.data("$scope",p),P(u,"ng-scope")):p=e,f=o.transclude,f||!s&&t?o(l,p,d,a,F(e,f||t)):o(l,p,d,a,s)):l&&l(e,d.childNodes,n,s)}for(var l,d,u,p,f,r=[],h=0;e.length>h;h++)p=new x,u=N(e[h],[],p,0===h?a:n,s),l=u.length?W(u,e[h],p,t,i,null,[],[],o):null,d=l&&l.terminal||!e[h].childNodes||!e[h].childNodes.length?null:A(e[h].childNodes,l?l.transclude:t),r.push(l),r.push(d),f=f||l||d,o=null;return f?m:null}function F(e,t){return function(n,i,a){var s=!1;n||(n=e.$new(),n.$$transcluded=!0,s=!0);var o=t(n,i,a);return s&&o.on("$destroy",rt(n,n.$destroy)),o}}function N(e,t,n,i,a){var d,u,s=e.nodeType,c=n.$attr;switch(s){case 1:U(t,Dn(v(e).toLowerCase()),"E",i,a);for(var p,f,h,m,_,g=e.attributes,b=0,y=g&&g.length;y>b;b++){var w=!1,k=!1;if(p=g[b],!l||l>=8||p.specified){f=p.name,m=Dn(f),D.test(m)&&(f=wt(m.substr(6),"-"));var x=m.replace(/(Start|End)$/,"");m===x+"Start"&&(w=f,k=f.substr(0,f.length-5)+"end",f=f.substr(0,f.length-6)),h=Dn(f.toLowerCase()),c[h]=f,n[h]=_=B(l&&"href"==f?decodeURIComponent(e.getAttribute(f,2)):p.value),on(e,h)&&(n[h]=!0),J(e,t,_,h),U(t,h,"A",i,a,w,k)}}if(u=e.className,I(u)&&""!==u)for(;d=r.exec(u);)h=Dn(d[2]),U(t,h,"C",i,a)&&(n[h]=B(d[3])),u=u.substr(d.index+d[0].length);break;case 3:Q(t,e.nodeValue);break;case 8:try{d=o.exec(e.nodeValue),d&&(h=Dn(d[1]),U(t,h,"M",i,a)&&(n[h]=B(d[2])))}catch(j){}}return t.sort(G),t}function R(e,t,n){var i=[],a=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw $n("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);1==e.nodeType&&(e.hasAttribute(t)&&a++,e.hasAttribute(n)&&a--),i.push(e),e=e.nextSibling}while(a>0)}else i.push(e);return c(i)}function q(e,t,n){return function(i,a,s,o,r){return a=R(a[0],t,n),e(i,a,s,o,r)}}function W(e,a,s,o,r,l,d,p,f){function lt(e,t,n,i){e&&(n&&(e=q(e,n,i)),e.require=D.require,(b===D||D.$$isolateScope)&&(e=tt(e,{isolateScope:!0})),d.push(e)),t&&(n&&(t=q(t,n,i)),t.require=D.require,(b===D||D.$$isolateScope)&&(t=tt(t,{isolateScope:!0})),p.push(t))}function ct(e,t,n){var i,a="data",s=!1;if(I(e)){for(;"^"==(i=e.charAt(0))||"?"==i;)e=e.substr(1),"^"==i&&(a="inheritedData"),s=s||"?"==i;if(i=null,n&&"data"===a&&(i=n[e]),i=i||t[a]("$"+e+"Controller"),!i&&!s)throw $n("ctreq","Controller '{0}', required by directive '{1}', can't be found!",e,E);return i}return H(e)&&(i=[],w(e,function(e){i.push(ct(e,t,n))})),i}function dt(e,t,o,r,l){function O(e,t){var i;return 2>arguments.length&&(t=e,e=n),$&&(i=D),l(e,t,i)}var f,_,g,k,j,C,S,E,D={};if(f=a===o?s:nt(s,new x(c(o),s.$attr)),_=f.$$element,b){var T=/^\s*([@=&])(\??)\s*(\w*)\s*$/,z=c(o);S=t.$new(!0),y&&y===b.$$originalDirective?z.data("$isolateScope",S):z.data("$isolateScopeNoTemplate",S),P(z,"ng-isolate-scope"),w(b.scope,function(e,n){var l,c,d,u,a=e.match(T)||[],s=a[3]||n,o="?"==a[2],r=a[1];switch(S.$$isolateBindings[n]=r+s,r){case"@":f.$observe(s,function(e){S[n]=e}),f.$$observers[s].$$scope=t,f[s]&&(S[n]=i(f[s])(t));break;case"=":if(o&&!f[s])return;c=h(f[s]),u=c.literal?it:function(e,t){return e===t},d=c.assign||function(){throw l=S[n]=c(t),$n("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",f[s],b.name)},l=S[n]=c(t),S.$watch(function(){var e=c(t);return u(e,S[n])||(u(e,l)?d(t,e=S[n]):S[n]=e),l=e},null,c.literal);break;case"&":c=h(f[s]),S[n]=function(e){return c(t,e)};break;default:throw $n("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",b.name,n,e)}})}for(E=l&&O,v&&w(v,function(e){var i,n={$scope:e===b||e.$$isolateScope?S:t,$element:_,$attrs:f,$transclude:E};C=e.controller,"@"==C&&(C=f[e.name]),i=m(C,n),D[e.name]=i,$||_.data("$"+e.name+"Controller",i),e.controllerAs&&(n.$scope[e.controllerAs]=i)}),g=0,k=d.length;k>g;g++)try{j=d[g],j(j.isolateScope?S:t,_,f,j.require&&ct(j.require,_,D),E)}catch(M){u(M,pt(_))}var A=t;for(b&&(b.template||null===b.templateUrl)&&(A=S),e&&e(A,o.childNodes,n,l),g=p.length-1;g>=0;g--)try{j=p[g],j(j.isolateScope?S:t,_,f,j.require&&ct(j.require,_,D),E)}catch(M){u(M,pt(_))}}f=f||{};for(var g,D,E,z,F,W,_=-Number.MAX_VALUE,v=f.controllerDirectives,b=f.newIsolateScopeDirective,y=f.templateDirective,k=f.nonTlbTranscludeDirective,j=!1,$=!1,S=s.$$element=c(a),M=l,A=o,U=0,G=e.length;G>U;U++){D=e[U];var Q=D.$$start,Z=D.$$end;if(Q&&(S=R(a,Q,Z)),z=n,_>D.priority)break;if((W=D.scope)&&(g=g||D,D.templateUrl||(K("new/isolated scope",b,D,S),O(W)&&(b=D))),E=D.name,!D.templateUrl&&D.controller&&(W=D.controller,v=v||{},K("'"+E+"' controller",v[E],D,S),v[E]=D),(W=D.transclude)&&(j=!0,D.$$tlb||(K("transclusion",k,D,S),k=D),"element"==W?($=!0,_=D.priority,z=R(a,Q,Z),S=s.$$element=c(t.createComment(" "+E+": "+s[E]+" ")),a=S[0],et(r,c(ot(z)),a),A=T(z,o,_,M&&M.name,{nonTlbTranscludeDirective:k})):(z=c(Wt(a)).contents(),S.empty(),A=T(z,o))),D.template)if(K("template",y,D,S),y=D,W=L(D.template)?D.template(S,s):D.template,W=C(W),D.replace){if(M=D,z=c("<div>"+B(W)+"</div>").contents(),a=z[0],1!=z.length||1!==a.nodeType)throw $n("tplrt","Template for directive '{0}' must have exactly one root element. {1}",E,"");et(r,S,a);var J={$attr:{}},at=N(a,[],J),st=e.splice(U+1,e.length-(U+1));b&&Y(at),e=e.concat(at).concat(st),V(s,J),G=e.length}else S.html(W);if(D.templateUrl)K("template",y,D,S),y=D,D.replace&&(M=D),dt=X(e.splice(U,e.length-U),S,s,r,A,d,p,{controllerDirectives:v,newIsolateScopeDirective:b,templateDirective:y,nonTlbTranscludeDirective:k}),G=e.length;else if(D.compile)try{F=D.compile(S,s,A),L(F)?lt(null,F,Q,Z):F&&lt(F.pre,F.post,Q,Z)}catch(rt){u(rt,pt(S))}D.terminal&&(dt.terminal=!0,_=Math.max(_,D.priority))}return dt.scope=g&&g.scope===!0,dt.transclude=j&&A,dt}function Y(e){for(var t=0,n=e.length;n>t;t++)e[t]=E(e[t],{$$isolateScope:!0})}function U(t,i,o,r,l,c,d){if(i===l)return null;var p=null;if(a.hasOwnProperty(i))for(var f,h=e.get(i+s),m=0,_=h.length;_>m;m++)try{f=h[m],(r===n||r>f.priority)&&-1!=f.restrict.indexOf(o)&&(c&&(f=E(f,{$$start:c,$$end:d})),t.push(f),p=f)}catch(g){u(g)}return p}function V(e,t){var n=t.$attr,i=e.$attr,a=e.$$element;w(e,function(i,a){"$"!=a.charAt(0)&&(t[a]&&(i+=("style"===a?";":" ")+t[a]),e.$set(a,i,!0,n[a]))}),w(t,function(t,s){"class"==s?(P(a,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==s?(a.attr("style",a.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==s.charAt(0)||e.hasOwnProperty(s)||(e[s]=t,i[s]=n[s])})}function X(e,t,n,i,a,s,o,r){var d,u,l=[],h=t[0],m=e.shift(),_=S({},m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),g=L(m.templateUrl)?m.templateUrl(t,n):m.templateUrl;return t.empty(),p.get(b.getTrustedResourceUrl(g),{cache:f}).success(function(p){var f,v,b,y;if(p=C(p),m.replace){if(b=c("<div>"+B(p)+"</div>").contents(),f=b[0],1!=b.length||1!==f.nodeType)throw $n("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,g);v={$attr:{}},et(i,t,f);var k=N(f,[],v);O(m.scope)&&Y(k),e=k.concat(e),V(n,v)}else f=h,t.html(p);for(e.unshift(_),d=W(e,f,n,a,t,m,s,o,r),w(i,function(e,n){e==f&&(i[n]=t[0])}),u=A(t[0].childNodes,a);l.length;){var x=l.shift(),j=l.shift(),$=l.shift(),S=l.shift(),D=t[0];j!==h&&(D=Wt(f),et($,c(j),D)),y=d.transclude?F(x,d.transclude):S,d(u,x,D,i,y)}l=null}).error(function(e,t,n,i){throw $n("tpload","Failed to load template: {0}",i.url)}),function(e,t,n,i,a){l?(l.push(t),l.push(n),l.push(i),l.push(a)):d(u,t,n,i,a)}}function G(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?t.name>e.name?-1:1:e.index-t.index}function K(e,t,n,i){if(t)throw $n("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,pt(i))}function Q(e,t){var n=i(t,!0);n&&e.push({priority:0,compile:M(function(e,t){var i=t.parent(),a=i.data("$binding")||[];a.push(n),P(i.data("$binding",a),"ng-binding"),e.$watch(n,function(e){t[0].nodeValue=e})})})}function Z(e,t){if("srcdoc"==t)return b.HTML;var n=v(e);return"xlinkHref"==t||"FORM"==n&&"action"==t||"IMG"!=n&&("src"==t||"ngSrc"==t)?b.RESOURCE_URL:void 0}function J(e,t,n,a){var s=i(n,!0);if(s){if("multiple"===a&&"SELECT"===v(e))throw $n("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",pt(e));t.push({priority:100,compile:function(){return{pre:function(t,n,o){var r=o.$$observers||(o.$$observers={});if(d.test(a))throw $n("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");s=i(o[a],!0,Z(e,a)),s&&(o[a]=s(t),(r[a]||(r[a]=[])).$$inter=!0,(o.$$observers&&o.$$observers[a].$$scope||t).$watch(s,function(e,t){"class"===a&&e!=t?o.$updateClass(e,t):o.$set(a,e)}))}}}})}}function et(e,n,i){var r,l,a=n[0],s=n.length,o=a.parentNode;if(e)for(r=0,l=e.length;l>r;r++)if(e[r]==a){e[r++]=i;for(var d=r,u=d+s-1,p=e.length;p>d;d++,u++)p>u?e[d]=e[u]:delete e[d];e.length-=s-1;break}o&&o.replaceChild(i,a);var f=t.createDocumentFragment();f.appendChild(a),i[c.expando]=a[c.expando];for(var h=1,m=n.length;m>h;h++){var _=n[h];c(_).remove(),f.appendChild(_),delete n[h]}n[0]=i,n.length=1}function tt(e,t){return S(function(){return e.apply(null,arguments)},e,t)}var x=function(e,t){this.$$element=e,this.$attr=t||{}};x.prototype={$normalize:Dn,$addClass:function(e){e&&e.length>0&&y.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&y.removeClass(this.$$element,e)},$updateClass:function(e,t){this.$removeClass(zn(t,e)),this.$addClass(zn(e,t))},$set:function(e,t,i,a){var r,s=on(this.$$element[0],e);s&&(this.$$element.prop(e,t),a=s),this[e]=t,a?this.$attr[e]=a:(a=this.$attr[e],a||(this.$attr[e]=a=wt(e,"-"))),r=v(this.$$element),("A"===r&&"href"===e||"IMG"===r&&"src"===e)&&(this[e]=t=k(t,"src"===e)),i!==!1&&(null===t||t===n?this.$$element.removeAttr(a):this.$$element.attr(a,t));var l=this.$$observers;l&&w(l[e],function(e){try{e(t)}catch(n){u(n)}})},$observe:function(e,t){var n=this,i=n.$$observers||(n.$$observers={}),a=i[e]||(i[e]=[]);return a.push(t),_.$evalAsync(function(){a.$$inter||t(n[e])}),t}};var j=i.startSymbol(),$=i.endSymbol(),C="{{"==j||"}}"==$?z:function C(e){return e.replace(/\{\{/g,j).replace(/}}/g,$)},D=/^ngAttr[A-Z]/;return T}]}function Dn(e){return Lt(e.replace(Sn,""))}function zn(e,t){var n="",i=e.split(/\s+/),a=t.split(/\s+/);e:for(var s=0;i.length>s;s++){for(var o=i[s],r=0;a.length>r;r++)if(o==a[r])continue e;n+=(n.length>0?" ":"")+o}return n}function Mn(){var e={},t=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){$t(t,"controller"),O(t)?S(e,t):e[t]=n},this.$get=["$injector","$window",function(n,a){return function(s,o){var r,l,c,d;if(I(s)&&(l=s.match(t),c=l[1],d=l[3],s=e.hasOwnProperty(c)?e[c]:Ct(o.$scope,c,!0)||Ct(a,c,!0),jt(s,c,!0)),r=n.instantiate(s,o),d){if(!o||"object"!=typeof o.$scope)throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",c||s.name,d);o.$scope[d]=r}return r}}]}function Pn(){this.$get=["$window",function(e){return c(e.document)}]}function An(){this.$get=["$log",function(e){return function(){e.error.apply(e,arguments)}}]}function On(e){var n,i,s,t={};return e?(w(e.split("\n"),function(e){s=e.indexOf(":"),n=a(B(e.substr(0,s))),i=B(e.substr(s+1)),n&&(t[n]?t[n]+=", "+i:t[n]=i)}),t):t}function In(e){var t=O(e)?e:n;return function(n){return t||(t=On(e)),n?t[a(n)]||null:t}}function Fn(e,t,n){return L(n)?n(e,t):(w(n,function(n){e=n(e,t)}),e)}function Nn(e){return e>=200&&300>e}function Hn(){var e=/^\s*(\[|\{[^\{])/,t=/[\}\]]\s*$/,i=/^\)\]\}',?\n/,o={"Content-Type":"application/json;charset=utf-8"},r=this.defaults={transformResponse:[function(n){return I(n)&&(n=n.replace(i,""),e.test(n)&&t.test(n)&&(n=dt(n))),n}],transformRequest:[function(e){return O(e)&&!Y(e)?ct(e):e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:o,put:o,patch:o},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},l=this.interceptors=[],c=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(e,t,i,o,d,u){function h(e){function _(e){var t=S({},e,{data:Fn(e.data,e.headers,i.transformResponse)});return Nn(e.status)?t:d.reject(t)}function v(e){function l(e){var t;w(e,function(n,i){L(n)&&(t=n(),null!=t?e[i]=t:delete e[i])})}var i,s,o,t=r.headers,n=S({},e.headers);t=S({},t.common,t[a(e.method)]),l(t),l(n);e:for(i in t){s=a(i);for(o in n)if(a(o)===s)continue e;n[i]=t[i]}return n}var i={transformRequest:r.transformRequest,transformResponse:r.transformResponse},o=v(e);S(i,e),i.headers=o,i.method=s(i.method);var l=Li(i.url)?t.cookies()[i.xsrfCookieName||r.xsrfCookieName]:n;l&&(o[i.xsrfHeaderName||r.xsrfHeaderName]=l);var c=function(e){o=e.headers;var t=Fn(e.data,In(o),e.transformRequest);return P(e.data)&&w(o,function(e,t){"content-type"===a(t)&&delete o[t]}),P(e.withCredentials)&&!P(r.withCredentials)&&(e.withCredentials=r.withCredentials),g(e,t,o).then(_,_)},u=[c,n],p=d.when(i);for(w(f,function(e){(e.request||e.requestError)&&u.unshift(e.request,e.requestError),(e.response||e.responseError)&&u.push(e.response,e.responseError)});u.length;){var h=u.shift(),m=u.shift();p=p.then(h,m)}return p.success=function(e){return p.then(function(t){e(t.data,t.status,t.headers,i)}),p},p.error=function(e){return p.then(null,function(t){e(t.data,t.status,t.headers,i)}),p},p}function m(){w(arguments,function(e){h[e]=function(t,n){return h(S(n||{},{method:e,url:t}))}})}function _(){w(arguments,function(e){h[e]=function(t,n,i){return h(S(i||{},{method:e,url:t,data:n}))}})}function g(t,n,i){function f(e,t,n){l&&(Nn(e)?l.put(u,[e,t,On(n)]):l.remove(u)),m(t,e,n),o.$$phase||o.$apply()}function m(e,n,i){n=Math.max(n,0),(Nn(n)?a.resolve:a.reject)({data:e,status:n,headers:In(i),config:t})}function _(){var e=Z(h.pendingRequests,t);-1!==e&&h.pendingRequests.splice(e,1)}var l,c,a=d.defer(),s=a.promise,u=v(t.url,t.params);if(h.pendingRequests.push(t),s.then(_,_),(t.cache||r.cache)&&t.cache!==!1&&"GET"==t.method&&(l=O(t.cache)?t.cache:O(r.cache)?r.cache:p),l)if(c=l.get(u),A(c)){if(c.then)return c.then(_,_),c;H(c)?m(c[1],c[0],tt(c[2])):m(c,200,{})}else l.put(u,s);return P(c)&&e(t.method,u,n,f,i,t.timeout,t.withCredentials,t.responseType),s}function v(e,t){if(!t)return e;var n=[];return x(t,function(e,t){null===e||P(e)||(H(e)||(e=[e]),w(e,function(e){O(e)&&(e=ct(e)),n.push(gt(t)+"="+gt(e))}))}),e+(-1==e.indexOf("?")?"?":"&")+n.join("&")}var p=i("$http"),f=[];return w(l,function(e){f.unshift(I(e)?u.get(e):u.invoke(e))}),w(c,function(e,t){var n=I(e)?u.get(e):u.invoke(e);f.splice(t,0,{response:function(e){return n(d.when(e))},responseError:function(e){return n(d.reject(e))}})}),h.pendingRequests=[],m("get","delete","head","jsonp"),_("post","put"),h.defaults=r,h}]}function Rn(){this.$get=["$browser","$window","$document",function(e,t,n){return qn(e,Ln,e.defer,t.angular.callbacks,n[0])}]}function qn(e,t,n,i,s){function r(e,t){var n=s.createElement("script"),i=function(){n.onreadystatechange=n.onload=n.onerror=null,s.body.removeChild(n),t&&t()};return n.type="text/javascript",n.src=e,l&&8>=l?n.onreadystatechange=function(){/loaded|complete/.test(n.readyState)&&i()}:n.onload=n.onerror=function(){i()},s.body.appendChild(n),i}var o=-1;return function(s,l,c,d,u,p,f,h){function y(){m=o,g&&g(),v&&v.abort()}function k(t,i,a,s){var o=Hi(l).protocol;b&&n.cancel(b),g=v=null,i="file"==o&&0===i?a?200:404:i,i=1223==i?204:i,t(i,a,s),e.$$completeOutstandingRequest(T)}var m;if(e.$$incOutstandingRequestCount(),l=l||e.url(),"jsonp"==a(s)){var _="_"+(i.counter++).toString(36);i[_]=function(e){i[_].data=e};var g=r(l.replace("JSON_CALLBACK","angular.callbacks."+_),function(){i[_].data?k(d,200,i[_].data):k(d,m||-2),delete i[_]})}else{var v=new t;v.open(s,l,!0),w(u,function(e,t){A(e)&&v.setRequestHeader(t,e)}),v.onreadystatechange=function(){if(4==v.readyState){var e=null,t=null;m!==o&&(e=v.getAllResponseHeaders(),t=v.responseType?v.response:v.responseText),k(d,m||v.status,t,e)}},f&&(v.withCredentials=!0),h&&(v.responseType=h),v.send(c||null)}if(p>0)var b=n(y,p);else p&&p.then&&p.then(y)}}function Yn(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,a){function r(r,l,c){for(var d,u,_,g,p=0,f=[],h=r.length,m=!1,v=[];h>p;)-1!=(d=r.indexOf(e,p))&&-1!=(u=r.indexOf(t,d+s))?(p!=d&&f.push(r.substring(p,d)),f.push(_=n(g=r.substring(d+s,u))),_.exp=g,p=u+o,m=!0):(p!=h&&f.push(r.substring(p)),p=h);if((h=f.length)||(f.push(""),h=1),c&&f.length>1)throw Wn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",r);return!l||m?(v.length=h,_=function(e){try{for(var s,t=0,n=h;n>t;t++)"function"==typeof(s=f[t])&&(s=s(e),s=c?a.getTrusted(c,s):a.valueOf(s),null===s||P(s)?s="":"string"!=typeof s&&(s=ct(s))),v[t]=s;return v.join("")}catch(o){var l=Wn("interr","Can't interpolate: {0}\n{1}",r,o.toString());i(l)}},_.exp=r,_.parts=f,_):void 0}var s=e.length,o=t.length;return r.startSymbol=function(){return e},r.endSymbol=function(){return t},r}]}function Un(){this.$get=["$rootScope","$window","$q",function(e,t,n){function a(a,s,o,r){var l=t.setInterval,c=t.clearInterval,d=n.defer(),u=d.promise,p=0,f=A(r)&&!r;return o=A(o)?o:0,u.then(null,null,a),u.$$intervalId=l(function(){d.notify(p++),o>0&&p>=o&&(d.resolve(p),c(u.$$intervalId),delete i[u.$$intervalId]),f||e.$apply()},s),i[u.$$intervalId]=d,u}var i={};return a.cancel=function(e){return e&&e.$$intervalId in i?(i[e.$$intervalId].reject("canceled"),clearInterval(e.$$intervalId),delete i[e.$$intervalId],!0):!1},a}]}function Bn(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"Â¤",posSuf:"",negPre:"(Â¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}function Kn(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=_t(t[n]);return t.join("/")}function Qn(e,t,n){var i=Hi(e,n);t.$$protocol=i.protocol,t.$$host=i.hostname,t.$$port=D(i.port)||Xn[i.protocol]||null}function Zn(e,t,n){var i="/"!==e.charAt(0);i&&(e="/"+e);var a=Hi(e,n);t.$$path=decodeURIComponent(i&&"/"===a.pathname.charAt(0)?a.pathname.substring(1):a.pathname),t.$$search=ht(a.search),t.$$hash=decodeURIComponent(a.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Jn(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function ei(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function ti(e){return e.substr(0,ei(e).lastIndexOf("/")+1)}function ni(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function ii(e,t){this.$$html5=!0,t=t||"";var i=ti(e);Qn(e,this,e),this.$$parse=function(t){var n=Jn(i,t);if(!I(n))throw Gn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,i);Zn(n,this,e),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=mt(this.$$search),t=this.$$hash?"#"+_t(this.$$hash):"";this.$$url=Kn(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=i+this.$$url.substr(1)},this.$$rewrite=function(a){var s,o;return(s=Jn(e,a))!==n?(o=s,(s=Jn(t,s))!==n?i+(Jn("/",s)||s):e+o):(s=Jn(i,a))!==n?i+s:i==a+"/"?i:void 0}}function ai(e,t){var n=ti(e);Qn(e,this,e),this.$$parse=function(i){function o(e,t,n){var a,i=/^\/?.*?:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),i.exec(t)?e:(a=i.exec(e),a?a[1]:e)}var a=Jn(e,i)||Jn(n,i),s="#"==a.charAt(0)?Jn(t,a):this.$$html5?a:"";if(!I(s))throw Gn("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',i,t);Zn(s,this,e),this.$$path=o(this.$$path,s,e),this.$$compose()},this.$$compose=function(){var n=mt(this.$$search),i=this.$$hash?"#"+_t(this.$$hash):"";this.$$url=Kn(this.$$path)+(n?"?"+n:"")+i,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$rewrite=function(t){return ei(e)==ei(t)?t:void 0}}function si(e,t){this.$$html5=!0,ai.apply(this,arguments);var n=ti(e);this.$$rewrite=function(i){var a;return e==ei(i)?i:(a=Jn(n,i))?e+t+a:n===i+"/"?n:void 0}}function oi(e){return function(){return this[e]}}function ri(e,t){return function(n){return P(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function li(){var t="",n=!1;this.hashPrefix=function(e){return A(e)?(t=e,this):t},this.html5Mode=function(e){return A(e)?(n=e,this):n},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(i,s,o,r){function _(e){i.$broadcast("$locationChangeSuccess",l.absUrl(),e)}var l,d,f,u=s.baseHref(),p=s.url();n?(f=ni(p)+(u||"/"),d=o.history?ii:si):(f=ei(p),d=ai),l=new d(f,"#"+t),l.$$parse(l.$$rewrite(p)),r.on("click",function(t){if(!t.ctrlKey&&!t.metaKey&&2!=t.which){for(var n=c(t.target);"a"!==a(n[0].nodeName);)if(n[0]===r[0]||!(n=n.parent())[0])return;var o=n.prop("href"),d=l.$$rewrite(o);o&&!n.attr("target")&&d&&!t.isDefaultPrevented()&&(t.preventDefault(),d!=s.url()&&(l.$$parse(d),i.$apply(),e.angular["ff-684208-preventDefault"]=!0))}}),l.absUrl()!=p&&s.url(l.absUrl(),!0),s.onUrlChange(function(e){if(l.absUrl()!=e){if(i.$broadcast("$locationChangeStart",e,l.absUrl()).defaultPrevented)return s.url(l.absUrl()),void 0;i.$evalAsync(function(){var t=l.absUrl();l.$$parse(e),_(t)}),i.$$phase||i.$digest()}});var h=0;return i.$watch(function(){var e=s.url(),t=l.$$replace;return h&&e==l.absUrl()||(h++,i.$evalAsync(function(){i.$broadcast("$locationChangeStart",l.absUrl(),e).defaultPrevented?l.$$parse(e):(s.url(l.absUrl(),t),_(e))})),l.$$replace=!1,h}),l}]}function ci(){var e=!0,t=this;this.debugEnabled=function(t){return A(t)?(e=t,this):e},this.$get=["$window",function(n){function i(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function a(e){var t=n.console||{},a=t[e]||t.log||T;return a.apply?function(){var e=[];return w(arguments,function(t){e.push(i(t))}),a.apply(t,e)}:function(e,t){a(e,null==t?"":t)}}return{log:a("log"),info:a("info"),warn:a("warn"),error:a("error"),debug:function(){var n=a("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function fi(e,t){if("constructor"===e)throw di("isecfld",'Referencing "constructor" field in Angular expressions is disallowed! Expression: {0}',t);return e}function hi(e,t){if(e){if(e.constructor===e)throw di("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.document&&e.location&&e.alert&&e.setInterval)throw di("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.on&&e.find))throw di("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t)}return e}function bi(e,t,i,a,s){s=s||{};for(var r,o=t.split("."),l=0;o.length>1;l++){r=fi(o.shift(),a);var c=e[r];c||(c={},e[r]=c),e=c,e.then&&s.unwrapPromises&&(pi(a),"$$v"in e||function(e){e.then(function(t){e.$$v=t})}(e),e.$$v===n&&(e.$$v={}),e=e.$$v)}return r=fi(o.shift(),a),e[r]=i,i}function wi(e,t,i,a,s,o,r){return fi(e,o),fi(t,o),fi(i,o),fi(a,o),fi(s,o),r.unwrapPromises?function(r,l){var d,c=l&&l.hasOwnProperty(e)?l:r;return null===c||c===n?c:(c=c[e],c&&c.then&&(pi(o),"$$v"in c||(d=c,d.$$v=n,d.then(function(e){d.$$v=e})),c=c.$$v),t&&null!==c&&c!==n?(c=c[t],c&&c.then&&(pi(o),"$$v"in c||(d=c,d.$$v=n,d.then(function(e){d.$$v=e
})),c=c.$$v),i&&null!==c&&c!==n?(c=c[i],c&&c.then&&(pi(o),"$$v"in c||(d=c,d.$$v=n,d.then(function(e){d.$$v=e})),c=c.$$v),a&&null!==c&&c!==n?(c=c[a],c&&c.then&&(pi(o),"$$v"in c||(d=c,d.$$v=n,d.then(function(e){d.$$v=e})),c=c.$$v),s&&null!==c&&c!==n?(c=c[s],c&&c.then&&(pi(o),"$$v"in c||(d=c,d.$$v=n,d.then(function(e){d.$$v=e})),c=c.$$v),c):c):c):c):c)}:function(o,r){var l=r&&r.hasOwnProperty(e)?r:o;return null===l||l===n?l:(l=l[e],t&&null!==l&&l!==n?(l=l[t],i&&null!==l&&l!==n?(l=l[i],a&&null!==l&&l!==n?(l=l[a],s&&null!==l&&l!==n?l=l[s]:l):l):l):l)}}function ki(e,t,i){if(yi.hasOwnProperty(e))return yi[e];var o,a=e.split("."),s=a.length;if(t.csp)o=6>s?wi(a[0],a[1],a[2],a[3],a[4],i,t):function(e,o){var l,r=0;do l=wi(a[r++],a[r++],a[r++],a[r++],a[r++],i,t)(e,o),o=n,e=l;while(s>r);return l};else{var r="var l, fn, p;\n";w(a,function(e,n){fi(e,i),r+="if(s === null || s === undefined) return s;\nl=s;\ns="+(n?"s":'((k&&k.hasOwnProperty("'+e+'"))?k:s)')+'["'+e+'"]'+";\n"+(t.unwrapPromises?'if (s && s.then) {\n pw("'+i.replace(/(["\r\n])/g,"\\$1")+'");\n'+' if (!("$$v" in s)) {\n'+" p=s;\n"+" p.$$v = undefined;\n"+" p.then(function(v) {p.$$v=v;});\n"+"}\n"+" s=s.$$v\n"+"}\n":"")}),r+="return s;";var l=new Function("s","k","pw",r);l.toString=function(){return r},o=function(e,t){return l(e,t,pi)}}return"hasOwnProperty"!==e&&(yi[e]=o),o}function xi(){var e={},t={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=function(e){return A(e)?(t.unwrapPromises=!!e,this):t.unwrapPromises},this.logPromiseWarnings=function(e){return A(e)?(t.logPromiseWarnings=e,this):t.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(n,i,a){return t.csp=i.csp,pi=function(e){t.logPromiseWarnings&&!ui.hasOwnProperty(e)&&(ui[e]=!0,a.warn("[$parse] Promise found in the expression `"+e+"`. "+"Automatic unwrapping of promises in Angular expressions is deprecated."))},function(i){var a;switch(typeof i){case"string":if(e.hasOwnProperty(i))return e[i];var s=new gi(t),o=new vi(s,n,t);return a=o.parse(i,!1),"hasOwnProperty"!==i&&(e[i]=a),a;case"function":return i;default:return T}}}]}function ji(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return $i(function(t){e.$evalAsync(t)},t)}]}function $i(e,t){function r(e){return e}function l(e){return s(e)}function c(e){var t=i(),n=0,s=H(e)?[]:{};return w(e,function(e,i){n++,a(e).then(function(e){s.hasOwnProperty(i)||(s[i]=e,--n||t.resolve(s))},function(e){s.hasOwnProperty(i)||t.reject(e)})}),0===n&&t.resolve(s),t.promise}var i=function(){var c,d,o=[];return d={resolve:function(t){if(o){var i=o;o=n,c=a(t),i.length&&e(function(){for(var e,t=0,n=i.length;n>t;t++)e=i[t],c.then(e[0],e[1],e[2])})}},reject:function(e){d.resolve(s(e))},notify:function(t){if(o){var n=o;o.length&&e(function(){for(var e,i=0,a=n.length;a>i;i++)e=n[i],e[2](t)})}},promise:{then:function(e,n,a){var s=i(),d=function(n){try{s.resolve((L(e)?e:r)(n))}catch(i){s.reject(i),t(i)}},u=function(e){try{s.resolve((L(n)?n:l)(e))}catch(i){s.reject(i),t(i)}},p=function(e){try{s.notify((L(a)?a:r)(e))}catch(n){t(n)}};return o?o.push([d,u,p]):c.then(d,u,p),s.promise},"catch":function(e){return this.then(null,e)},"finally":function(e){function t(e,t){var n=i();return t?n.resolve(e):n.reject(e),n.promise}function n(n,i){var a=null;try{a=(e||r)()}catch(s){return t(s,!1)}return a&&L(a.then)?a.then(function(){return t(n,i)},function(e){return t(e,!1)}):t(n,i)}return this.then(function(e){return n(e,!0)},function(e){return n(e,!1)})}}}},a=function(t){return t&&L(t.then)?t:{then:function(n){var a=i();return e(function(){a.resolve(n(t))}),a.promise}}},s=function(n){return{then:function(a,s){var o=i();return e(function(){try{o.resolve((L(s)?s:l)(n))}catch(e){o.reject(e),t(e)}}),o.promise}}},o=function(n,o,c,d){var p,u=i(),f=function(e){try{return(L(o)?o:r)(e)}catch(n){return t(n),s(n)}},h=function(e){try{return(L(c)?c:l)(e)}catch(n){return t(n),s(n)}},m=function(e){try{return(L(d)?d:r)(e)}catch(n){t(n)}};return e(function(){a(n).then(function(e){p||(p=!0,u.resolve(a(e).then(f,h,m)))},function(e){p||(p=!0,u.resolve(h(e)))},function(e){p||u.notify(m(e))})}),u.promise};return{defer:i,reject:s,when:o,all:c}}function Ci(){var e=10,t=i("$rootScope"),n=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(i,a,s,o){function r(){this.$id=$(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$isolateBindings={}}function c(e){if(l.$$phase)throw t("inprog","{0} already in progress",l.$$phase);l.$$phase=e}function d(){l.$$phase=null}function u(e,t){var n=s(e);return jt(n,t),n}function p(){}r.prototype={constructor:r,$new:function(e){var t,n;return e?(n=new r,n.$root=this.$root,n.$$asyncQueue=this.$$asyncQueue,n.$$postDigestQueue=this.$$postDigestQueue):(t=function(){},t.prototype=this,n=new t,n.$id=$()),n["this"]=n,n.$$listeners={},n.$parent=this,n.$$watchers=n.$$nextSibling=n.$$childHead=n.$$childTail=null,n.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=n,this.$$childTail=n):this.$$childHead=this.$$childTail=n,n},$watch:function(e,t,i){var a=this,s=u(e,"watch"),o=a.$$watchers,r={fn:t,last:p,get:s,exp:e,eq:!!i};if(n=null,!L(t)){var l=u(t||T,"listener");r.fn=function(e,t,n){l(n)}}if("string"==typeof e&&s.constant){var c=r.fn;r.fn=function(e,t,n){c.call(this,e,t,n),J(o,r)}}return o||(o=a.$$watchers=[]),o.unshift(r),function(){J(o,r)}},$watchCollection:function(e,t){function u(){a=r(n);var e,t;if(O(a))if(y(a)){i!==l&&(i=l,d=i.length=0,o++),e=a.length,d!==e&&(o++,i.length=d=e);for(var s=0;e>s;s++)i[s]!==a[s]&&(o++,i[s]=a[s])}else{i!==c&&(i=c={},d=0,o++),e=0;for(t in a)a.hasOwnProperty(t)&&(e++,i.hasOwnProperty(t)?i[t]!==a[t]&&(o++,i[t]=a[t]):(d++,i[t]=a[t],o++));if(d>e){o++;for(t in i)i.hasOwnProperty(t)&&!a.hasOwnProperty(t)&&(d--,delete i[t])}}else i!==a&&(i=a,o++);return o}function p(){t(a,i,n)}var i,a,n=this,o=0,r=s(e),l=[],c={},d=0;return this.$watch(u,p)},$digest:function(){var i,s,o,r,f,h,_,g,y,w,k,l=this.$$asyncQueue,u=this.$$postDigestQueue,m=e,v=this,b=[];c("$digest"),n=null;do{for(h=!1,g=v;l.length;){try{k=l.shift(),k.scope.$eval(k.expression)}catch(x){d(),a(x)}n=null}e:do{if(r=g.$$watchers)for(f=r.length;f--;)try{if(i=r[f])if((s=i.get(g))===(o=i.last)||(i.eq?it(s,o):"number"==typeof s&&"number"==typeof o&&isNaN(s)&&isNaN(o))){if(i===n){h=!1;break e}}else h=!0,n=i,i.last=i.eq?tt(s):s,i.fn(s,o===p?s:o,g),5>m&&(y=4-m,b[y]||(b[y]=[]),w=L(i.exp)?"fn: "+(i.exp.name||i.exp.toString()):i.exp,w+="; newVal: "+ct(s)+"; oldVal: "+ct(o),b[y].push(w))}catch(x){d(),a(x)}if(!(_=g.$$childHead||g!==v&&g.$$nextSibling))for(;g!==v&&!(_=g.$$nextSibling);)g=g.$parent}while(g=_);if(h&&!m--)throw d(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,ct(b))}while(h||l.length);for(d();u.length;)try{u.shift()()}catch(x){a(x)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==l&&(e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null)}},$eval:function(e,t){return s(e)(this,t)},$evalAsync:function(e){l.$$phase||l.$$asyncQueue.length||o.defer(function(){l.$$asyncQueue.length&&l.$digest()}),this.$$asyncQueue.push({scope:this,expression:e})},$$postDigest:function(e){this.$$postDigestQueue.push(e)},$apply:function(e){try{return c("$apply"),this.$eval(e)}catch(t){a(t)}finally{d();try{l.$digest()}catch(t){throw a(t),t}}},$on:function(e,t){var n=this.$$listeners[e];return n||(this.$$listeners[e]=n=[]),n.push(t),function(){n[Z(n,t)]=null}},$emit:function(e){var i,c,d,n=[],s=this,o=!1,r={name:e,targetScope:s,stopPropagation:function(){o=!0},preventDefault:function(){r.defaultPrevented=!0},defaultPrevented:!1},l=st([r],arguments,1);do{for(i=s.$$listeners[e]||n,r.currentScope=s,c=0,d=i.length;d>c;c++)if(i[c])try{i[c].apply(null,l)}catch(u){a(u)}else i.splice(c,1),c--,d--;if(o)return r;s=s.$parent}while(s);return r},$broadcast:function(e){var l,c,d,n=this,i=n,s=n,o={name:e,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1},r=st([o],arguments,1);do{for(i=s,o.currentScope=i,l=i.$$listeners[e]||[],c=0,d=l.length;d>c;c++)if(l[c])try{l[c].apply(null,r)}catch(u){a(u)}else l.splice(c,1),c--,d--;if(!(s=i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(s=i.$$nextSibling);)i=i.$parent}while(i=s);return o}};var l=new r;return l}]}function Si(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*(https?|ftp|file):|data:image\//;this.aHrefSanitizationWhitelist=function(t){return A(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return A(e)?(t=e,this):t},this.$get=function(){return function(n,i){var s,a=i?t:e;return l&&!(l>=8)||(s=Hi(n).href,""===s||s.match(a))?n:"unsafe:"+s}}}function Ti(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function zi(e){if("self"===e)return e;if(I(e)){if(e.indexOf("***")>-1)throw Di("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=Ti(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(R(e))return new RegExp("^"+e.source+"$");throw Di("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Mi(e){var t=[];return A(e)&&w(e,function(e){t.push(zi(e))}),t}function Pi(){this.SCE_CONTEXTS=Ei;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Mi(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Mi(e)),t},this.$get=["$injector",function(i){function s(e,t){return"self"===e?Li(t):!!e.exec(t.href)}function o(n){var a,o,i=Hi(n.toString()),r=!1;for(a=0,o=e.length;o>a;a++)if(s(e[a],i)){r=!0;break}if(r)for(a=0,o=t.length;o>a;a++)if(s(t[a],i)){r=!1;break}return r}function r(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function d(e,t){var i=c.hasOwnProperty(e)?c[e]:null;if(!i)throw Di("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw Di("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new i(t)}function u(e){return e instanceof l?e.$$unwrapTrustedValue():e}function p(e,t){if(null===t||t===n||""===t)return t;var i=c.hasOwnProperty(e)?c[e]:null;if(i&&t instanceof i)return t.$$unwrapTrustedValue();if(e===Ei.RESOURCE_URL){if(o(t))return t;throw Di("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===Ei.HTML)return a(t);throw Di("unsafe","Attempting to use an unsafe value in a safe context.")}var a=function a(){throw Di("unsafe","Attempting to use an unsafe value in a safe context.")};i.has("$sanitize")&&(a=i.get("$sanitize"));var l=r(),c={};return c[Ei.HTML]=r(l),c[Ei.CSS]=r(l),c[Ei.URL]=r(l),c[Ei.JS]=r(l),c[Ei.RESOURCE_URL]=r(c[Ei.URL]),{trustAs:d,getTrusted:p,valueOf:u}}]}function Ai(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sniffer","$sceDelegate",function(t,n,i){if(e&&n.msie&&8>n.msieDocumentMode)throw Di("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var s=tt(Ei);s.isEnabled=function(){return e},s.trustAs=i.trustAs,s.getTrusted=i.getTrusted,s.valueOf=i.valueOf,e||(s.trustAs=s.getTrusted=function(e,t){return t},s.valueOf=z),s.parseAs=function(e,n){var i=t(n);return i.literal&&i.constant?i:function(t,n){return s.getTrusted(e,i(t,n))}};var r=s.parseAs,l=s.getTrusted,c=s.trustAs;return w(Ei,function(e,t){var n=a(t);s[Lt("parse_as_"+n)]=function(t){return r(e,t)},s[Lt("get_trusted_"+n)]=function(t){return l(e,t)},s[Lt("trust_as_"+n)]=function(t){return c(e,t)}}),s}]}function Oi(){this.$get=["$window","$document",function(e,t){var c,h,n={},i=D((/android (\d+)/.exec(a((e.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((e.navigator||{}).userAgent),o=t[0]||{},r=o.documentMode,d=/^(Moz|webkit|O|ms)(?=[A-Z])/,u=o.body&&o.body.style,p=!1,f=!1;if(u){for(var m in u)if(h=d.exec(m)){c=h[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in u&&"webkit"),p=!!("transition"in u||c+"Transition"in u),f=!!("animation"in u||c+"Animation"in u),!i||p&&f||(p=I(o.body.style.webkitTransition),f=I(o.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>i||s),hashchange:"onhashchange"in e&&(!r||r>7),hasEvent:function(e){if("input"==e&&9==l)return!1;if(P(n[e])){var t=o.createElement("div");n[e]="on"+e in t}return n[e]},csp:at(),vendorPrefix:c,transitions:p,animations:f,msie:l,msieDocumentMode:r}}]}function Ii(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(e,t,n,i){function s(s,o,r){var u,l=n.defer(),c=l.promise,d=A(r)&&!r;return u=t.defer(function(){try{l.resolve(s())}catch(t){l.reject(t),i(t)}finally{delete a[c.$$timeoutId]}d||e.$apply()},o),c.$$timeoutId=u,a[u]=l,c}var a={};return s.cancel=function(e){return e&&e.$$timeoutId in a?(a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},s}]}function Hi(e){var n=e;return l&&(Fi.setAttribute("href",n),n=Fi.href),Fi.setAttribute("href",n),{href:Fi.href,protocol:Fi.protocol?Fi.protocol.replace(/:$/,""):"",host:Fi.host,search:Fi.search?Fi.search.replace(/^\?/,""):"",hash:Fi.hash?Fi.hash.replace(/^#/,""):"",hostname:Fi.hostname,port:Fi.port,pathname:"/"===Fi.pathname.charAt(0)?Fi.pathname:"/"+Fi.pathname}}function Li(e){var t=I(e)?Hi(e):e;return t.protocol===Ni.protocol&&t.host===Ni.host}function Ri(){this.$get=M(e)}function qi(e){function n(i,a){if(O(i)){var s={};return w(i,function(e,t){s[t]=n(t,e)}),s}return e.factory(i+t,a)}var t="Filter";this.register=n,this.$get=["$injector",function(e){return function(n){return e.get(n+t)}}],n("currency",Yi),n("date",na),n("filter",Wi),n("json",ia),n("limitTo",oa),n("lowercase",aa),n("number",Ui),n("orderBy",ra),n("uppercase",sa)}function Wi(){return function(e,t,n){if(!H(e))return e;var i=typeof n,a=[];a.check=function(e){for(var t=0;a.length>t;t++)if(!a[t](e))return!1;return!0},"function"!==i&&(n="boolean"===i&&n?function(e,t){return _.equals(e,t)}:function(e,t){return t=(""+t).toLowerCase(),(""+e).toLowerCase().indexOf(t)>-1});var s=function(e,t){if("string"==typeof t&&"!"===t.charAt(0))return!s(e,t.substr(1));switch(typeof e){case"boolean":case"number":case"string":return n(e,t);case"object":switch(typeof t){case"object":return n(e,t);default:for(var i in e)if("$"!==i.charAt(0)&&s(e[i],t))return!0}return!1;case"array":for(var a=0;e.length>a;a++)if(s(e[a],t))return!0;return!1;default:return!1}};switch(typeof t){case"boolean":case"number":case"string":t={$:t};case"object":for(var o in t)"$"==o?function(){if(t[o]){var e=o;a.push(function(n){return s(n,t[e])})}}():function(){if(void 0!==t[o]){var e=o;a.push(function(n){return s(Ct(n,e),t[e])})}}();break;case"function":a.push(t);break;default:return e}for(var r=[],l=0;e.length>l;l++){var c=e[l];a.check(c)&&r.push(c)}return r}}function Yi(e){var t=e.NUMBER_FORMATS;return function(e,n){return P(n)&&(n=t.CURRENCY_SYM),Vi(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,2).replace(/\u00A4/g,n)}}function Ui(e){var t=e.NUMBER_FORMATS;return function(e,n){return Vi(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Vi(e,t,n,i,a){if(isNaN(e)||!isFinite(e))return"";var s=0>e;e=Math.abs(e);var o=e+"",r="",l=[],c=!1;if(-1!==o.indexOf("e")){var d=o.match(/([\d\.]+)e(-?)(\d+)/);d&&"-"==d[2]&&d[3]>a+1?o="0":(r=o,c=!0)}if(c)a>0&&e>-1&&1>e&&(r=e.toFixed(a));else{var u=(o.split(Bi)[1]||"").length;P(a)&&(a=Math.min(Math.max(t.minFrac,u),t.maxFrac));var p=Math.pow(10,a);e=Math.round(e*p)/p;var f=(""+e).split(Bi),h=f[0];f=f[1]||"";var m,_=0,g=t.lgSize,v=t.gSize;if(h.length>=g+v)for(_=h.length-g,m=0;_>m;m++)0===(_-m)%v&&0!==m&&(r+=n),r+=h.charAt(m);for(m=_;h.length>m;m++)0===(h.length-m)%g&&0!==m&&(r+=n),r+=h.charAt(m);for(;a>f.length;)f+="0";a&&"0"!==a&&(r+=i+f.substr(0,a))}return l.push(s?t.negPre:t.posPre),l.push(r),l.push(s?t.negSuf:t.posSuf),l.join("")}function Xi(e,t,n){var i="";for(0>e&&(i="-",e=-e),e=""+e;t>e.length;)e="0"+e;return n&&(e=e.substr(e.length-t)),i+e}function Gi(e,t,n,i){return n=n||0,function(a){var s=a["get"+e]();return(n>0||s>-n)&&(s+=n),0===s&&-12==n&&(s=12),Xi(s,t,i)}}function Ki(e,t){return function(n,i){var a=n["get"+e](),o=s(t?"SHORT"+e:e);return i[o][a]}}function Qi(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=Xi(Math[t>0?"floor":"ceil"](t/60),2)+Xi(Math.abs(t%60),2)}function Zi(e,t){return 12>e.getHours()?t.AMPMS[0]:t.AMPMS[1]}function na(e){function n(e){var n;if(n=e.match(t)){var i=new Date(0),a=0,s=0,o=n[8]?i.setUTCFullYear:i.setFullYear,r=n[8]?i.setUTCHours:i.setHours;n[9]&&(a=D(n[9]+n[10]),s=D(n[9]+n[11])),o.call(i,D(n[1]),D(n[2])-1,D(n[3]));var l=D(n[4]||0)-a,c=D(n[5]||0)-s,d=D(n[6]||0),u=Math.round(1e3*parseFloat("0."+(n[7]||0)));return r.call(i,l,c,d,u),i}return e}var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,i){var o,r,a="",s=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,I(t)&&(t=ta.test(t)?D(t):n(t)),F(t)&&(t=new Date(t)),!N(t))return t;for(;i;)r=ea.exec(i),r?(s=st(s,r,1),i=s.pop()):(s.push(i),i=null);return w(s,function(n){o=Ji[n],a+=o?o(t,e.DATETIME_FORMATS):n.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}}function ia(){return function(e){return ct(e,!0)}}function oa(){return function(e,t){if(!H(e)&&!I(e))return e;if(t=D(t),I(e))return t?t>=0?e.slice(0,t):e.slice(t,e.length):"";var i,a,n=[];for(t>e.length?t=e.length:-e.length>t&&(t=-e.length),t>0?(i=0,a=t):(i=e.length+t,a=e.length);a>i;i++)n.push(e[i]);return n}}function ra(e){return function(t,n,i){function o(e,t){for(var i=0;n.length>i;i++){var a=n[i](e,t);if(0!==a)return a}return 0}function r(e,t){return ut(t)?function(t,n){return e(n,t)}:e}function l(e,t){var n=typeof e,i=typeof t;return n==i?("string"==n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:t>e?-1:1):i>n?-1:1}if(!H(t))return t;if(!n)return t;n=H(n)?n:[n],n=G(n,function(t){var n=!1,i=t||z;return I(t)&&(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),i=e(t)),r(function(e,t){return l(i(e),i(t))},n)});for(var a=[],s=0;t.length>s;s++)a.push(t[s]);return a.sort(r(o,i))}}function la(e){return L(e)&&(e={link:e}),e.restrict=e.restrict||"AC",M(e)}function pa(e,t){function r(t,n){n=n?"-"+wt(n,"-"):"",e.removeClass((t?Da:Sa)+n).addClass((t?Sa:Da)+n)}var n=this,i=e.parent().controller("form")||ua,a=0,s=n.$error={},o=[];n.$name=t.name||t.ngForm,n.$dirty=!1,n.$pristine=!0,n.$valid=!0,n.$invalid=!1,i.$addControl(n),e.addClass(Ea),r(!0),n.$addControl=function(e){$t(e.$name,"input"),o.push(e),e.$name&&(n[e.$name]=e)},n.$removeControl=function(e){e.$name&&n[e.$name]===e&&delete n[e.$name],w(s,function(t,i){n.$setValidity(i,!0,e)}),J(o,e)},n.$setValidity=function(e,t,o){var l=s[e];if(t)l&&(J(l,o),l.length||(a--,a||(r(t),n.$valid=!0,n.$invalid=!1),s[e]=!1,r(!0,e),i.$setValidity(e,!0,n)));else{if(a||r(t),l){if(Q(l,o))return}else s[e]=l=[],a++,r(!1,e),i.$setValidity(e,!1,n);l.push(o),n.$valid=!1,n.$invalid=!0}},n.$setDirty=function(){e.removeClass(Ea).addClass(Ta),n.$dirty=!0,n.$pristine=!1,i.$setDirty()},n.$setPristine=function(){e.removeClass(Ta).addClass(Ea),n.$dirty=!1,n.$pristine=!0,w(o,function(e){e.$setPristine()})}}function ya(e,t,a,s,o,r){var l=!1;t.on("compositionstart",function(){l=!0}),t.on("compositionend",function(){l=!1});var c=function(){if(!l){var n=t.val();ut(a.ngTrim||"T")&&(n=B(n)),s.$viewValue!==n&&e.$apply(function(){s.$setViewValue(n)})}};if(o.hasEvent("input"))t.on("input",c);else{var d,u=function(){d||(d=r.defer(function(){c(),d=null}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||u()}),o.hasEvent("paste")&&t.on("paste cut",u)}t.on("change",c),s.$render=function(){t.val(s.$isEmpty(s.$viewValue)?"":s.$viewValue)};var f,h,p=a.ngPattern,m=function(e,t){return s.$isEmpty(t)||e.test(t)?(s.$setValidity("pattern",!0),t):(s.$setValidity("pattern",!1),n)};if(p&&(h=p.match(/^\/(.*)\/([gim]*)$/),h?(p=new RegExp(h[1],h[2]),f=function(e){return m(p,e)}):f=function(n){var a=e.$eval(p);if(!a||!a.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",p,a,pt(t));return m(a,n)},s.$formatters.push(f),s.$parsers.push(f)),a.ngMinlength){var _=D(a.ngMinlength),g=function(e){return!s.$isEmpty(e)&&_>e.length?(s.$setValidity("minlength",!1),n):(s.$setValidity("minlength",!0),e)};s.$parsers.push(g),s.$formatters.push(g)}if(a.ngMaxlength){var v=D(a.ngMaxlength),b=function(e){return!s.$isEmpty(e)&&e.length>v?(s.$setValidity("maxlength",!1),n):(s.$setValidity("maxlength",!0),e)};s.$parsers.push(b),s.$formatters.push(b)}}function wa(e,t,i,a,s,o){if(ya(e,t,i,a,s,o),a.$parsers.push(function(e){var t=a.$isEmpty(e);return t||va.test(e)?(a.$setValidity("number",!0),""===e?null:t?e:parseFloat(e)):(a.$setValidity("number",!1),n)}),a.$formatters.push(function(e){return a.$isEmpty(e)?"":""+e}),i.min){var r=function(e){var t=parseFloat(i.min);return!a.$isEmpty(e)&&t>e?(a.$setValidity("min",!1),n):(a.$setValidity("min",!0),e)};a.$parsers.push(r),a.$formatters.push(r)}if(i.max){var l=function(e){var t=parseFloat(i.max);return!a.$isEmpty(e)&&e>t?(a.$setValidity("max",!1),n):(a.$setValidity("max",!0),e)};a.$parsers.push(l),a.$formatters.push(l)}a.$formatters.push(function(e){return a.$isEmpty(e)||F(e)?(a.$setValidity("number",!0),e):(a.$setValidity("number",!1),n)})}function ka(e,t,i,a,s,o){ya(e,t,i,a,s,o);var r=function(e){return a.$isEmpty(e)||_a.test(e)?(a.$setValidity("url",!0),e):(a.$setValidity("url",!1),n)};a.$formatters.push(r),a.$parsers.push(r)}function xa(e,t,i,a,s,o){ya(e,t,i,a,s,o);var r=function(e){return a.$isEmpty(e)||ga.test(e)?(a.$setValidity("email",!0),e):(a.$setValidity("email",!1),n)};a.$formatters.push(r),a.$parsers.push(r)}function ja(e,t,n,i){P(n.name)&&t.attr("name",$()),t.on("click",function(){t[0].checked&&e.$apply(function(){i.$setViewValue(n.value)})}),i.$render=function(){var e=n.value;t[0].checked=e==i.$viewValue},n.$observe("value",i.$render)}function $a(e,t,n,i){var a=n.ngTrueValue,s=n.ngFalseValue;I(a)||(a=!0),I(s)||(s=!1),t.on("click",function(){e.$apply(function(){i.$setViewValue(t[0].checked)})}),i.$render=function(){t[0].checked=i.$viewValue},i.$isEmpty=function(e){return e!==a},i.$formatters.push(function(e){return e===a}),i.$parsers.push(function(e){return e?a:s})}function Ra(e,t){return e="ngClass"+e,function(){return{restrict:"AC",link:function(n,i,a){function o(e){if(t===!0||n.$index%2===t){var i=r(e||"");s?it(e,s)||a.$updateClass(i,r(s)):a.$addClass(i)}s=tt(e)}function r(e){if(H(e))return e.join(" ");if(O(e)){var t=[];return w(e,function(e,n){e&&t.push(n)}),t.join(" ")}return e}var s;n.$watch(a[e],o,!0),a.$observe("class",function(){o(n.$eval(a[e]))}),"ngClass"!==e&&n.$watch("$index",function(i,s){var o=1&i;if(1&o!==s){var l=r(n.$eval(a[e]));o===t?a.$addClass(l):a.$removeClass(l)}})}}}}var a=function(e){return I(e)?e.toLowerCase():e},s=function(e){return I(e)?e.toUpperCase():e},o=function(e){return I(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},r=function(e){return I(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(a=o,s=r);var l,c,d,g,v,u=[].slice,p=[].push,f=Object.prototype.toString,h=i("ng"),_=(e.angular,e.angular||(e.angular={})),b=["0","0","0"];l=D((/msie (\d+)/.exec(a(navigator.userAgent))||[])[1]),isNaN(l)&&(l=D((/trident\/.*; rv:(\d+)/.exec(a(navigator.userAgent))||[])[1])),T.$inject=[],z.$inject=[];var B=function(){return String.prototype.trim?function(e){return I(e)?e.trim():e}:function(e){return I(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}();v=9>l?function(e){return e=e.nodeName?e:e[0],e.scopeName&&"HTML"!=e.scopeName?s(e.scopeName+":"+e.nodeName):e.nodeName}:function(e){return e.nodeName?e.nodeName:e[0].nodeName};var yt=/[A-Z]/g,Et={full:"1.2.5",major:1,minor:2,dot:5,codeName:"singularity-expansion"},zt=qt.cache={},Mt=qt.expando="ng-"+(new Date).getTime(),Pt=1,At=e.document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},Ot=e.document.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)},Ft=/([\:\-\_]+(.))/g,Nt=/^moz([A-Z])/,Ht=i("jqLite"),nn=qt.prototype={ready:function(n){function a(){i||(i=!0,n())}var i=!1;"complete"===t.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),qt(e).on("load",a))},toString:function(){var e=[];return w(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return e>=0?c(this[e]):c(this[this.length+e])},length:0,push:p,sort:[].sort,splice:[].splice},an={};w("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){an[a(e)]=e});var sn={};w("input,select,option,textarea,button,form,details".split(","),function(e){sn[s(e)]=!0}),w({data:Xt,inheritedData:en,scope:function(e){return c(e).data("$scope")||en(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return c(e).data("$isolateScope")||c(e).data("$isolateScopeNoTemplate")},controller:Jt,injector:function(e){return en(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Gt,css:function(e,t,i){if(t=Lt(t),!A(i)){var a;return 8>=l&&(a=e.currentStyle&&e.currentStyle[t],""===a&&(a="auto")),a=a||e.style[t],8>=l&&(a=""===a?n:a),a}e.style[t]=i},attr:function(e,t,i){var s=a(t);if(an[s]){if(!A(i))return e[t]||(e.attributes.getNamedItem(t)||T).specified?s:n;i?(e[t]=!0,e.setAttribute(t,s)):(e[t]=!1,e.removeAttribute(s))}else if(A(i))e.setAttribute(t,i);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?n:o}},prop:function(e,t,n){return A(n)?(e[t]=n,void 0):e[t]},text:function(){function t(t,n){var i=e[t.nodeType];return P(n)?i?t[i]:"":(t[i]=n,void 0)}var e=[];return 9>l?(e[1]="innerText",e[3]="nodeValue"):e[1]=e[3]="textContent",t.$dv="",t}(),val:function(e,t){if(P(t)){if("SELECT"===v(e)&&e.multiple){var n=[];return w(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){if(P(t))return e.innerHTML;for(var n=0,i=e.childNodes;i.length>n;n++)Yt(i[n]);e.innerHTML=t},empty:tn},function(e,t){qt.prototype[t]=function(t,i){var a,s;if(e!==tn&&(2==e.length&&e!==Gt&&e!==Jt?t:i)===n){if(O(t)){for(a=0;this.length>a;a++)if(e===Xt)e(this[a],t);else for(s in t)e(this[a],s,t[s]);return this}for(var o=e.$dv,r=o===n?Math.min(this.length,1):this.length,l=0;r>l;l++){var c=e(this[l],t,i);o=o?o+c:c}return o}for(a=0;this.length>a;a++)e(this[a],t,i);return this}}),w({removeData:Bt,dealoc:Yt,on:function ln(e,n,i,a){if(A(a))throw Ht("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var s=Vt(e,"events"),o=Vt(e,"handle");s||Vt(e,"events",s={}),o||Vt(e,"handle",o=rn(e,s)),w(n.split(" "),function(n){var a=s[n];if(!a){if("mouseenter"==n||"mouseleave"==n){var r=t.body.contains||t.body.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1};s[n]=[];var l={mouseleave:"mouseout",mouseenter:"mouseover"};ln(e,l[n],function(e){var t=this,i=e.relatedTarget;(!i||i!==t&&!r(t,i))&&o(e,n)})}else At(e,n,o),s[n]=[];a=s[n]}a.push(i)})},off:Ut,replaceWith:function(e,t){var n,i=e.parentNode;Yt(e),w(new qt(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return w(e.childNodes,function(e){1===e.nodeType&&t.push(e)}),t},contents:function(e){return e.childNodes||[]},append:function(e,t){w(new qt(t),function(t){(1===e.nodeType||11===e.nodeType)&&e.appendChild(t)})},prepend:function(e,t){if(1===e.nodeType){var n=e.firstChild;w(new qt(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=c(t)[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:function(e){Yt(e);var t=e.parentNode;t&&t.removeChild(e)},after:function(e,t){var n=e,i=e.parentNode;w(new qt(t),function(e){i.insertBefore(e,n.nextSibling),n=e})},addClass:Qt,removeClass:Kt,toggleClass:function(e,t,n){P(n)&&(n=!Gt(e,t)),(n?Qt:Kt)(e,t)},parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},next:function(e){if(e.nextElementSibling)return e.nextElementSibling;for(var t=e.nextSibling;null!=t&&1!==t.nodeType;)t=t.nextSibling;return t},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Wt,triggerHandler:function(e,t,n){var i=(Vt(e,"events")||{})[t];n=n||[];var a=[{preventDefault:T,stopPropagation:T}];w(i,function(t){t.apply(e,a.concat(n))})}},function(e,t){qt.prototype[t]=function(t,n,i){for(var a,s=0;this.length>s;s++)P(a)?(a=e(this[s],t,n,i),A(a)&&(a=c(a))):Zt(a,e(this[s],t,n,i));return A(a)?a:this},qt.prototype.bind=qt.prototype.on,qt.prototype.unbind=qt.prototype.off}),dn.prototype={put:function(e,t){this[cn(e)]=t},get:function(e){return this[cn(e)]},remove:function(e){var t=this[e=cn(e)];return delete this[e],t}};var un=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,pn=/,/,fn=/^\s*(_?)(\S+?)\1\s*$/,hn=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,mn=i("$injector"),bn=i("$animate"),yn=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var i=t+"-animation";if(t&&"."!=t.charAt(0))throw bn("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=i,e.factory(i,n)},this.$get=["$timeout",function(e){return{enter:function(t,n,i,a){i?i.after(t):(n&&n[0]||(n=i.parent()),n.append(t)),a&&e(a,0,!1)},leave:function(t,n){t.remove(),n&&e(n,0,!1)},move:function(e,t,n,i){this.enter(e,t,n,i)},addClass:function(t,n,i){n=I(n)?n:H(n)?n.join(" "):"",w(t,function(e){Qt(e,n)}),i&&e(i,0,!1)},removeClass:function(t,n,i){n=I(n)?n:H(n)?n.join(" "):"",w(t,function(e){Kt(e,n)}),i&&e(i,0,!1)},enabled:T}}]}],$n=i("$compile");Cn.$inject=["$provide","$$sanitizeUriProvider"];var Sn=/^(x[\:\-_]|data[\:\-_])/i,Ln=e.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(n){}throw i("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")},Wn=i("$interpolate"),Vn=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Xn={http:80,https:443,ftp:21},Gn=i("$location");si.prototype=ai.prototype=ii.prototype={$$html5:!1,$$replace:!1,absUrl:oi("$$absUrl"),url:function(e,t){if(P(e))return this.$$url;var n=Vn.exec(e);return n[1]&&this.path(decodeURIComponent(n[1])),(n[2]||n[1])&&this.search(n[3]||""),this.hash(n[5]||"",t),this},protocol:oi("$$protocol"),host:oi("$$host"),port:oi("$$port"),path:ri("$$path",function(e){return"/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(I(e))this.$$search=ht(e);else{if(!O(e))throw Gn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");this.$$search=e}break;default:P(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:ri("$$hash",z),replace:function(){return this.$$replace=!0,this
}};var pi,di=i("$parse"),ui={},mi={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:T,"+":function(e,t,i,a){return i=i(e,t),a=a(e,t),A(i)?A(a)?i+a:i:A(a)?a:n},"-":function(e,t,n,i){return n=n(e,t),i=i(e,t),(A(n)?n:0)-(A(i)?i:0)},"*":function(e,t,n,i){return n(e,t)*i(e,t)},"/":function(e,t,n,i){return n(e,t)/i(e,t)},"%":function(e,t,n,i){return n(e,t)%i(e,t)},"^":function(e,t,n,i){return n(e,t)^i(e,t)},"=":T,"===":function(e,t,n,i){return n(e,t)===i(e,t)},"!==":function(e,t,n,i){return n(e,t)!==i(e,t)},"==":function(e,t,n,i){return n(e,t)==i(e,t)},"!=":function(e,t,n,i){return n(e,t)!=i(e,t)},"<":function(e,t,n,i){return i(e,t)>n(e,t)},">":function(e,t,n,i){return n(e,t)>i(e,t)},"<=":function(e,t,n,i){return i(e,t)>=n(e,t)},">=":function(e,t,n,i){return n(e,t)>=i(e,t)},"&&":function(e,t,n,i){return n(e,t)&&i(e,t)},"||":function(e,t,n,i){return n(e,t)||i(e,t)},"&":function(e,t,n,i){return n(e,t)&i(e,t)},"|":function(e,t,n,i){return i(e,t)(e,t,n(e,t))},"!":function(e,t,n){return!n(e,t)}},_i={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},gi=function(e){this.options=e};gi.prototype={constructor:gi,lex:function(e){this.text=e,this.index=0,this.ch=n,this.lastCh=":",this.tokens=[];for(var t,i=[];this.text.length>this.index;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent(),this.was("{,")&&"{"===i[0]&&(t=this.tokens[this.tokens.length-1])&&(t.json=-1===t.text.indexOf("."));else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch,json:this.was(":[,")&&this.is("{[")||this.is("}]:,")}),this.is("{[")&&i.unshift(this.ch),this.is("}]")&&i.shift(),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var a=this.ch+this.peek(),s=a+this.peek(2),o=mi[this.ch],r=mi[a],l=mi[s];l?(this.tokens.push({index:this.index,text:s,fn:l}),this.index+=3):r?(this.tokens.push({index:this.index,text:a,fn:r}),this.index+=2):o?(this.tokens.push({index:this.index,text:this.ch,fn:o,json:this.was("[,:")&&this.is("+-")}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(e){return-1!==e.indexOf(this.ch)},was:function(e){return-1!==e.indexOf(this.lastCh)},peek:function(e){var t=e||1;return this.text.length>this.index+t?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||"Â "===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var i=A(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw di("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,i,this.text)},readNumber:function(){for(var e="",t=this.index;this.text.length>this.index;){var n=a(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))e+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}e=1*e,this.tokens.push({index:t,text:e,json:!0,fn:function(){return e}})},readIdent:function(){for(var i,a,s,o,e=this,t="",n=this.index;this.text.length>this.index&&(o=this.text.charAt(this.index),"."===o||this.isIdent(o)||this.isNumber(o));)"."===o&&(i=this.index),t+=o,this.index++;if(i)for(a=this.index;this.text.length>a;){if(o=this.text.charAt(a),"("===o){s=t.substr(i-n+1),t=t.substr(0,i-n),this.index=a;break}if(!this.isWhitespace(o))break;a++}var r={index:n,text:t};if(mi.hasOwnProperty(t))r.fn=mi[t],r.json=mi[t];else{var l=ki(t,this.options,this.text);r.fn=S(function(e,t){return l(e,t)},{assign:function(n,i){return bi(n,t,i,e.text,e.options)}})}this.tokens.push(r),s&&(this.tokens.push({index:i,text:".",json:!1}),this.tokens.push({index:i+1,text:s,json:!1}))},readString:function(e){var t=this.index;this.index++;for(var n="",i=e,a=!1;this.text.length>this.index;){var s=this.text.charAt(this.index);if(i+=s,a){if("u"===s){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{var r=_i[s];n+=r?r:s}a=!1}else if("\\"===s)a=!0;else{if(s===e)return this.index++,this.tokens.push({index:t,text:i,string:n,json:!0,fn:function(){return n}}),void 0;n+=s}this.index++}this.throwError("Unterminated quote",t)}};var vi=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};vi.ZERO=function(){return 0},vi.prototype={constructor:vi,parse:function(e,t){this.text=e,this.json=t,this.tokens=this.lexer.lex(e),t&&(this.assignment=this.logicalOR,this.functionCall=this.fieldAccess=this.objectIndex=this.filterChain=function(){this.throwError("is not valid json",{text:e,index:0})});var n=t?this.primary():this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),n.literal=!!n.literal,n.constant=!!n.constant,n},primary:function(){var e;if(this.expect("("))e=this.filterChain(),this.consume(")");else if(this.expect("["))e=this.arrayDeclaration();else if(this.expect("{"))e=this.object();else{var t=this.expect();e=t.fn,e||this.throwError("not a primary expression",t),t.json&&(e.constant=!0,e.literal=!0)}for(var n,i;n=this.expect("(","[",".");)"("===n.text?(e=this.functionCall(e,i),i=null):"["===n.text?(i=e,e=this.objectIndex(e)):"."===n.text?(i=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw di("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw di("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,i){if(this.tokens.length>0){var a=this.tokens[0],s=a.text;if(s===e||s===t||s===n||s===i||!e&&!t&&!n&&!i)return a}return!1},expect:function(e,t,n,i){var a=this.peek(e,t,n,i);return a?(this.json&&!a.json&&this.throwError("is not valid json",a),this.tokens.shift(),a):!1},consume:function(e){this.expect(e)||this.throwError("is unexpected, expecting ["+e+"]",this.peek())},unaryFn:function(e,t){return S(function(n,i){return e(n,i,t)},{constant:t.constant})},ternaryFn:function(e,t,n){return S(function(i,a){return e(i,a)?t(i,a):n(i,a)},{constant:e.constant&&t.constant&&n.constant})},binaryFn:function(e,t,n){return S(function(i,a){return t(i,a,e,n)},{constant:e.constant&&n.constant})},statements:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,n){for(var i,a=0;e.length>a;a++){var s=e[a];s&&(i=s(t,n))}return i}},filterChain:function(){for(var t,e=this.expression();;){if(!(t=this.expect("|")))return e;e=this.binaryFn(e,t.fn,this.filter())}},filter:function(){for(var e=this.expect(),t=this.$filter(e.text),n=[];;){if(!(e=this.expect(":"))){var i=function(e,i,a){for(var s=[a],o=0;n.length>o;o++)s.push(n[o](e,i));return t.apply(e,s)};return function(){return i}}n.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var t,n,e=this.ternary();return(n=this.expect("="))?(e.assign||this.throwError("implies assignment but ["+this.text.substring(0,n.index)+"] can not be assigned to",n),t=this.ternary(),function(n,i){return e.assign(n,t(n,i),i)}):e},ternary:function(){var t,n,e=this.logicalOR();return(n=this.expect("?"))?(t=this.ternary(),(n=this.expect(":"))?this.ternaryFn(e,t,this.ternary()):(this.throwError("expected :",n),void 0)):e},logicalOR:function(){for(var t,e=this.logicalAND();;){if(!(t=this.expect("||")))return e;e=this.binaryFn(e,t.fn,this.logicalAND())}},logicalAND:function(){var t,e=this.equality();return(t=this.expect("&&"))&&(e=this.binaryFn(e,t.fn,this.logicalAND())),e},equality:function(){var t,e=this.relational();return(t=this.expect("==","!=","===","!=="))&&(e=this.binaryFn(e,t.fn,this.equality())),e},relational:function(){var t,e=this.additive();return(t=this.expect("<",">","<=",">="))&&(e=this.binaryFn(e,t.fn,this.relational())),e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e=this.binaryFn(e,t.fn,this.multiplicative());return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e=this.binaryFn(e,t.fn,this.unary());return e},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(vi.ZERO,e.fn,this.unary()):(e=this.expect("!"))?this.unaryFn(e.fn,this.unary()):this.primary()},fieldAccess:function(e){var t=this,n=this.expect().text,i=ki(n,this.options,this.text);return S(function(t,n,a){return i(a||e(t,n),n)},{assign:function(i,a,s){return bi(e(i,s),n,a,t.text,t.options)}})},objectIndex:function(e){var t=this,i=this.expression();return this.consume("]"),S(function(a,s){var l,c,o=e(a,s),r=i(a,s);return o?(l=hi(o[r],t.text),l&&l.then&&t.options.unwrapPromises&&(c=l,"$$v"in l||(c.$$v=n,c.then(function(e){c.$$v=e})),l=l.$$v),l):n},{assign:function(n,a,s){var o=i(n,s),r=hi(e(n,s),t.text);return r[o]=a}})},functionCall:function(e,t){var n=[];if(")"!==this.peekToken().text)do n.push(this.expression());while(this.expect(","));this.consume(")");var i=this;return function(a,s){for(var o=[],r=t?t(a,s):a,l=0;n.length>l;l++)o.push(n[l](a,s));var c=e(a,s,r)||T;hi(r,i.text),hi(c,i.text);var d=c.apply?c.apply(r,o):c(o[0],o[1],o[2],o[3],o[4]);return hi(d,i.text)}},arrayDeclaration:function(){var e=[],t=!0;if("]"!==this.peekToken().text)do{var n=this.expression();e.push(n),n.constant||(t=!1)}while(this.expect(","));return this.consume("]"),S(function(t,n){for(var i=[],a=0;e.length>a;a++)i.push(e[a](t,n));return i},{literal:!0,constant:t})},object:function(){var e=[],t=!0;if("}"!==this.peekToken().text)do{var n=this.expect(),i=n.string||n.text;this.consume(":");var a=this.expression();e.push({key:i,value:a}),a.constant||(t=!1)}while(this.expect(","));return this.consume("}"),S(function(t,n){for(var i={},a=0;e.length>a;a++){var s=e[a];i[s.key]=s.value(t,n)}return i},{literal:!0,constant:t})}};var yi={},Di=i("$sce"),Ei={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Fi=t.createElement("a"),Ni=Hi(e.location.href,!0);qi.$inject=["$provide"],Yi.$inject=["$locale"],Ui.$inject=["$locale"];var Bi=".",Ji={yyyy:Gi("FullYear",4),yy:Gi("FullYear",2,0,!0),y:Gi("FullYear",1),MMMM:Ki("Month"),MMM:Ki("Month",!0),MM:Gi("Month",2,1),M:Gi("Month",1,1),dd:Gi("Date",2),d:Gi("Date",1),HH:Gi("Hours",2),H:Gi("Hours",1),hh:Gi("Hours",2,-12),h:Gi("Hours",1,-12),mm:Gi("Minutes",2),m:Gi("Minutes",1),ss:Gi("Seconds",2),s:Gi("Seconds",1),sss:Gi("Milliseconds",3),EEEE:Ki("Day"),EEE:Ki("Day",!0),a:Zi,Z:Qi},ea=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,ta=/^\-?\d+$/;na.$inject=["$locale"];var aa=M(a),sa=M(s);ra.$inject=["$parse"];var ca=M({restrict:"E",compile:function(e,n){return 8>=l&&(n.href||n.name||n.$set("href",""),e.append(t.createComment("IE fix"))),n.href||n.name?void 0:function(e,t){t.on("click",function(e){t.attr("href")||e.preventDefault()})}}}),da={};w(an,function(e,t){if("multiple"!=e){var n=Dn("ng-"+t);da[n]=function(){return{priority:100,compile:function(){return function(e,i,a){e.$watch(a[n],function(e){a.$set(t,!!e)})}}}}}}),w(["src","srcset","href"],function(e){var t=Dn("ng-"+e);da[t]=function(){return{priority:99,link:function(n,i,a){a.$observe(t,function(t){t&&(a.$set(e,t),l&&i.prop(e,a[e]))})}}}});var ua={$addControl:T,$removeControl:T,$setValidity:T,$setDirty:T,$setPristine:T};pa.$inject=["$element","$attrs","$scope"];var fa=function(e){return["$timeout",function(t){var i={name:"form",restrict:e?"EAC":"E",controller:pa,compile:function(){return{pre:function(e,i,a,s){if(!a.action){var o=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1};At(i[0],"submit",o),i.on("$destroy",function(){t(function(){Ot(i[0],"submit",o)},0,!1)})}var r=i.parent().controller("form"),l=a.name||a.ngForm;l&&bi(e,l,s,l),r&&i.on("$destroy",function(){r.$removeControl(s),l&&bi(e,l,n,l),S(s,ua)})}}}};return i}]},ha=fa(),ma=fa(!0),_a=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,ga=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$/,va=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,ba={text:ya,number:wa,url:ka,email:xa,radio:ja,checkbox:$a,hidden:T,button:T,submit:T,reset:T},Ca=["$browser","$sniffer",function(e,t){return{restrict:"E",require:"?ngModel",link:function(n,i,s,o){o&&(ba[a(s.type)]||ba.text)(n,i,s,o,t,e)}}}],Sa="ng-valid",Da="ng-invalid",Ea="ng-pristine",Ta="ng-dirty",za=["$scope","$exceptionHandler","$attrs","$element","$parse",function(e,t,n,a,s){function u(e,t){t=t?"-"+wt(t,"-"):"",a.removeClass((e?Da:Sa)+t).addClass((e?Sa:Da)+t)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=n.name;var o=s(n.ngModel),r=o.assign;if(!r)throw i("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,pt(a));this.$render=T,this.$isEmpty=function(e){return P(e)||""===e||null===e||e!==e};var l=a.inheritedData("$formController")||ua,c=0,d=this.$error={};a.addClass(Ea),u(!0),this.$setValidity=function(e,t){d[e]!==!t&&(t?(d[e]&&c--,c||(u(!0),this.$valid=!0,this.$invalid=!1)):(u(!1),this.$invalid=!0,this.$valid=!1,c++),d[e]=!t,u(t,e),l.$setValidity(e,t,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,a.removeClass(Ta).addClass(Ea)},this.$setViewValue=function(n){this.$viewValue=n,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,a.removeClass(Ea).addClass(Ta),l.$setDirty()),w(this.$parsers,function(e){n=e(n)}),this.$modelValue!==n&&(this.$modelValue=n,r(e,n),w(this.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}}))};var p=this;e.$watch(function(){var t=o(e);if(p.$modelValue!==t){var n=p.$formatters,i=n.length;for(p.$modelValue=t;i--;)t=n[i](t);p.$viewValue!==t&&(p.$viewValue=t,p.$render())}return t})}],Ma=function(){return{require:["ngModel","^?form"],controller:za,link:function(e,t,n,i){var a=i[0],s=i[1]||ua;s.$addControl(a),e.$on("$destroy",function(){s.$removeControl(a)})}}},Pa=M({require:"ngModel",link:function(e,t,n,i){i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Aa=function(){return{require:"?ngModel",link:function(e,t,n,i){if(i){n.required=!0;var a=function(e){return n.required&&i.$isEmpty(e)?(i.$setValidity("required",!1),void 0):(i.$setValidity("required",!0),e)};i.$formatters.push(a),i.$parsers.unshift(a),n.$observe("required",function(){a(i.$viewValue)})}}}},Oa=function(){return{require:"ngModel",link:function(e,t,i,a){var s=/\/(.*)\//.exec(i.ngList),o=s&&new RegExp(s[1])||i.ngList||",",r=function(e){if(!P(e)){var t=[];return e&&w(e.split(o),function(e){e&&t.push(B(e))}),t}};a.$parsers.push(r),a.$formatters.push(function(e){return H(e)?e.join(", "):n}),a.$isEmpty=function(e){return!e||!e.length}}}},Ia=/^(true|false|\d+)$/,Fa=function(){return{priority:100,compile:function(e,t){return Ia.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Na=la(function(e,t,i){t.addClass("ng-binding").data("$binding",i.ngBind),e.$watch(i.ngBind,function(e){t.text(e==n?"":e)})}),Ha=["$interpolate",function(e){return function(t,n,i){var a=e(n.attr(i.$attr.ngBindTemplate));n.addClass("ng-binding").data("$binding",a),i.$observe("ngBindTemplate",function(e){n.text(e)})}}],La=["$sce","$parse",function(e,t){return function(n,i,a){function o(){return(s(n)||"").toString()}i.addClass("ng-binding").data("$binding",a.ngBindHtml);var s=t(a.ngBindHtml);n.$watch(o,function(){i.html(e.getTrustedHtml(s(n))||"")})}}],qa=Ra("",!0),Wa=Ra("Odd",0),Ya=Ra("Even",1),Ua=la({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),Ba=[function(){return{scope:!0,controller:"@",priority:500}}],Va={};w("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Dn("ng-"+e);Va[t]=["$parse",function(n){return{compile:function(i,s){var o=n(s[t]);return function(t,n){n.on(a(e),function(e){t.$apply(function(){o(t,{$event:e})})})}}}}]});var Xa=["$animate",function(e){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,a,s,o){var r,l;n.$watch(a.ngIf,function(s){ut(s)?l||(l=n.$new(),o(l,function(n){n[n.length++]=t.createComment(" end ngIf: "+a.ngIf+" "),r={clone:n},e.enter(n,i.parent(),i)})):(l&&(l.$destroy(),l=null),r&&(e.leave(St(r.clone)),r=null))})}}}],Ga=["$http","$templateCache","$anchorScroll","$animate","$sce",function(e,t,n,i,a){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:_.noop,compile:function(s,o){var r=o.ngInclude||o.src,l=o.onload||"",c=o.autoscroll;return function(s,o,d,u,p){var h,m,f=0,_=function(){h&&(h.$destroy(),h=null),m&&(i.leave(m),m=null)};s.$watch(a.parseAsResourceUrl(r),function(a){var r=function(){!A(c)||c&&!s.$eval(c)||n()},d=++f;a?(e.get(a,{cache:t}).success(function(e){if(d===f){var t=s.$new();u.template=e;var n=p(t,function(e){_(),i.enter(e,null,o,r)});h=t,m=n,h.$emit("$includeContentLoaded"),s.$eval(l)}}).error(function(){d===f&&_()}),s.$emit("$includeContentRequested")):(_(),u.template=null)})}}}}],Ka=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(t,n,i,a){n.html(a.template),e(n.contents())(t)}}}],Qa=la({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Za=la({terminal:!0,priority:1e3}),Ja=["$locale","$interpolate",function(e,t){var n=/{}/g;return{restrict:"EA",link:function(i,s,o){var r=o.count,l=o.$attr.when&&s.attr(o.$attr.when),c=o.offset||0,d=i.$eval(l)||{},u={},p=t.startSymbol(),f=t.endSymbol(),h=/^when(Minus)?(.+)$/;w(o,function(e,t){h.test(t)&&(d[a(t.replace("when","").replace("Minus","-"))]=s.attr(o.$attr[t]))}),w(d,function(e,i){u[i]=t(e.replace(n,p+r+"-"+c+f))}),i.$watch(function(){var t=parseFloat(i.$eval(r));return isNaN(t)?"":(t in d||(t=e.pluralCat(t-c)),u[t](i,s,!0))},function(e){s.text(e)})}}}],es=["$parse","$animate",function(e,n){function o(e){return e.clone[0]}function r(e){return e.clone[e.clone.length-1]}var a="$$NG_REMOVED",s=i("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(i,l,d,u,p){var m,_,g,v,b,k,x,j,$,f=d.ngRepeat,h=f.match(/^\s*(.+)\s+in\s+(.*?)\s*(\s+track\s+by\s+(.+)\s*)?$/),C={$id:cn};if(!h)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",f);if(k=h[1],x=h[2],m=h[4],m?(_=e(m),g=function(e,t,n){return $&&(C[$]=e),C[j]=t,C.$index=n,_(i,C)}):(v=function(e,t){return cn(t)},b=function(e){return e}),h=k.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!h)throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",k);j=h[3]||h[1],$=h[2];var S={};i.$watchCollection(x,function(e){var d,u,m,k,x,C,D,E,T,z,M,A,h=l[0],_={},P=[];if(y(e))z=e,T=g||v;else{T=g||b,z=[];for(C in e)e.hasOwnProperty(C)&&"$"!=C.charAt(0)&&z.push(C);z.sort()}for(k=z.length,u=P.length=z.length,d=0;u>d;d++)if(C=e===z?d:z[d],D=e[C],E=T(C,D,d),$t(E,"`track by` id"),S.hasOwnProperty(E))M=S[E],delete S[E],_[E]=M,P[d]=M;else{if(_.hasOwnProperty(E))throw w(P,function(e){e&&e.scope&&(S[e.id]=e)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}",f,E);P[d]={id:E},_[E]=!1}for(C in S)S.hasOwnProperty(C)&&(M=S[C],A=St(M.clone),n.leave(A),w(A,function(e){e[a]=!0}),M.scope.$destroy());for(d=0,u=z.length;u>d;d++){if(C=e===z?d:z[d],D=e[C],M=P[d],P[d-1]&&(h=r(P[d-1])),M.scope){x=M.scope,m=h;do m=m.nextSibling;while(m&&m[a]);o(M)!=m&&n.move(St(M.clone),null,c(h)),h=r(M)}else x=i.$new();x[j]=D,$&&(x[$]=C),x.$index=d,x.$first=0===d,x.$last=d===k-1,x.$middle=!(x.$first||x.$last),x.$odd=!(x.$even=0===(1&d)),M.scope||p(x,function(e){e[e.length++]=t.createComment(" end ngRepeat: "+f+" "),n.enter(e,null,c(h)),h=e,M.scope=x,M.clone=e,_[M.id]=M})}S=_})}}}],ts=["$animate",function(e){return function(t,n,i){t.$watch(i.ngShow,function(t){e[ut(t)?"removeClass":"addClass"](n,"ng-hide")})}}],ns=["$animate",function(e){return function(t,n,i){t.$watch(i.ngHide,function(t){e[ut(t)?"addClass":"removeClass"](n,"ng-hide")})}}],is=la(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&w(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),as=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(t,n,i,a){var o,r,s=i.ngSwitch||i.on,l=[];t.$watch(s,function(n){for(var s=0,c=l.length;c>s;s++)l[s].$destroy(),e.leave(r[s]);r=[],l=[],(o=a.cases["!"+n]||a.cases["?"])&&(t.$eval(i.change),w(o,function(n){var i=t.$new();l.push(i),n.transclude(i,function(t){var i=n.element;r.push(t),e.enter(t,i.parent(),i)})}))})}}}],ss=la({transclude:"element",priority:800,require:"^ngSwitch",compile:function(e,t){return function(e,n,i,a,s){a.cases["!"+t.ngSwitchWhen]=a.cases["!"+t.ngSwitchWhen]||[],a.cases["!"+t.ngSwitchWhen].push({transclude:s,element:n})}}}),os=la({transclude:"element",priority:800,require:"^ngSwitch",link:function(e,t,n,i,a){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:a,element:t})}}),rs=la({controller:["$element","$transclude",function(e,t){if(!t)throw i("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",pt(e));this.$transclude=t}],link:function(e,t,n,i){i.$transclude(function(e){t.empty(),t.append(e)})}}),ls=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var i=n.id,a=t[0].text;e.put(i,a)}}}}],cs=i("ngOptions"),ds=M({terminal:!0}),us=["$compile","$parse",function(e,i){var a=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/,s={$setViewValue:T};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var r,l,i=this,a={},o=s;i.databound=n.ngModel,i.init=function(e,t,n){o=e,r=t,l=n},i.addOption=function(t){$t(t,'"option value"'),a[t]=!0,o.$viewValue==t&&(e.val(t),l.parent()&&l.remove())},i.removeOption=function(e){this.hasOption(e)&&(delete a[e],o.$viewValue==e&&this.renderUnknownOption(e))},i.renderUnknownOption=function(t){var n="? "+cn(t)+" ?";l.val(n),e.prepend(l),e.val(n),l.prop("selected",!0)},i.hasOption=function(e){return a.hasOwnProperty(e)},t.$on("$destroy",function(){i.renderUnknownOption=T})}],link:function(s,o,r,l){function $(e,t,n,i){n.$render=function(){var e=n.$viewValue;i.hasOption(e)?(v.parent()&&v.remove(),t.val(e),""===e&&m.prop("selected",!0)):P(e)&&m?t.val(""):i.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){v.parent()&&v.remove(),n.$setViewValue(t.val())})})}function C(e,t,n){var i;n.$render=function(){var e=new dn(n.$viewValue);w(t.find("option"),function(t){t.selected=A(e.get(t.value))})},e.$watch(function(){it(i,n.$viewValue)||(i=tt(n.$viewValue),n.$render())}),t.on("change",function(){e.$apply(function(){var e=[];w(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}function S(t,s,o){function x(){var i,a,r,f,b,x,S,D,E,T,z,P,I,F,N,e={"":[]},n=[""],j=o.$modelValue,$=v(t)||[],C=d?k($):$,M={},O=!1;if(p)if(y&&H(j)){O=new dn([]);for(var L=0;j.length>L;L++)M[c]=j[L],O.put(y(t,M),j[L])}else O=new dn(j);for(z=0;E=C.length,E>z;z++){if(S=z,d){if(S=C[z],"$"===S.charAt(0))continue;M[d]=S}if(M[c]=$[S],i=u(t,M)||"",(a=e[i])||(a=e[i]=[],n.push(i)),p)P=A(O.remove(y?y(t,M):m(t,M)));else{if(y){var R={};R[c]=j,P=y(t,R)===y(t,M)}else P=j===m(t,M);O=O||P}N=l(t,M),N=A(N)?N:"",a.push({id:y?y(t,M):d?C[z]:z,label:N,selected:P})}for(p||(h||null===j?e[""].unshift({id:"",label:"",selected:!O}):O||e[""].unshift({id:"?",label:"",selected:!0})),T=0,D=n.length;D>T;T++){for(i=n[T],a=e[i],T>=w.length?(f={element:g.clone().attr("label",i),label:a.label},b=[f],w.push(b),s.append(f.element)):(b=w[T],f=b[0],f.label!=i&&f.element.attr("label",f.label=i)),I=null,z=0,E=a.length;E>z;z++)r=a[z],(x=b[z+1])?(I=x.element,x.label!==r.label&&I.text(x.label=r.label),x.id!==r.id&&I.val(x.id=r.id),I[0].selected!==r.selected&&I.prop("selected",x.selected=r.selected)):(""===r.id&&h?F=h:(F=_.clone()).val(r.id).attr("selected",r.selected).text(r.label),b.push(x={element:F,label:r.label,id:r.id,selected:r.selected}),I?I.after(F):f.element.append(F),I=F);for(z++;b.length>z;)b.pop().element.remove()}for(;w.length>T;)w.pop()[0].element.remove()}var r;if(!(r=f.match(a)))throw cs("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",f,pt(s));var l=i(r[2]||r[1]),c=r[4]||r[6],d=r[5],u=i(r[3]||""),m=i(r[2]?r[1]:c),v=i(r[7]),b=r[8],y=b?i(r[8]):null,w=[[{element:s,label:""}]];h&&(e(h)(t),h.removeClass("ng-scope"),h.remove()),s.empty(),s.on("change",function(){t.$apply(function(){var e,r,l,u,f,h,_,g,b,i=v(t)||[],a={};if(p){for(l=[],h=0,g=w.length;g>h;h++)for(e=w[h],f=1,_=e.length;_>f;f++)if((u=e[f].element)[0].selected){if(r=u.val(),d&&(a[d]=r),y)for(b=0;i.length>b&&(a[c]=i[b],y(t,a)!=r);b++);else a[c]=i[r];l.push(m(t,a))}}else if(r=s.val(),"?"==r)l=n;else if(""===r)l=null;else if(y){for(b=0;i.length>b;b++)if(a[c]=i[b],y(t,a)==r){l=m(t,a);break}}else a[c]=i[r],d&&(a[d]=r),l=m(t,a);o.$setViewValue(l)})}),o.$render=x,t.$watch(x)}if(l[1]){for(var m,d=l[0],u=l[1],p=r.multiple,f=r.ngOptions,h=!1,_=c(t.createElement("option")),g=c(t.createElement("optgroup")),v=_.clone(),b=0,y=o.children(),x=y.length;x>b;b++)if(""===y[b].value){m=h=y.eq(b);break}if(d.init(u,h,v),p&&(r.required||r.ngRequired)){var j=function(e){return u.$setValidity("required",!r.required||e&&e.length),e};u.$parsers.push(j),u.$formatters.unshift(j),r.$observe("required",function(){j(u.$viewValue)})}f?S(s,o,u):p?C(s,o,u):$(s,o,u,d)}}}}],ps=["$interpolate",function(e){var t={addOption:T,removeOption:T};return{restrict:"E",priority:100,compile:function(n,i){if(P(i.value)){var a=e(n.text(),!0);a||i.$set("value",n.text())}return function(e,n,i){var s="$selectController",o=n.parent(),r=o.data(s)||o.parent().data(s);r&&r.databound?n.prop("selected",!1):r=t,a?e.$watch(a,function(e,t){i.$set("value",e),e!==t&&r.removeOption(t),r.addOption(e)}):r.addOption(i.value),n.on("$destroy",function(){r.removeOption(i.value)})}}}}],fs=M({restrict:"E",terminal:!0});kt(),Tt(_),c(t).ready(function(){vt(t,bt)})}(window,document),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-start{border-spacing:1px 1px;-ms-zoom:1.0001;}.ng-animate-active{border-spacing:0px 0px;-ms-zoom:1;}</style>'),function(e,t){"use strict";function a(){function e(e,n){return t.extend(new(t.extend(function(){},{prototype:e})),n)}function i(e,t){var n=t.caseInsensitiveMatch,i={originalPath:e,regexp:e},a=i.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?|\*])?/g,function(e,t,n,i){var s="?"===i?i:null,o="*"===i?i:null;return a.push({name:n,optional:!!s}),t=t||"",""+(s?"":t)+"(?:"+(s?t:"")+(o&&"(.+?)"||"([^/]+)")+(s||"")+")"+(s||"")}).replace(/([\/$\*])/g,"\\$1"),i.regexp=new RegExp("^"+e+"$",n?"i":""),i}var n={};this.when=function(e,a){if(n[e]=t.extend({reloadOnSearch:!0},a,e&&i(e,a)),e){var s="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";n[s]=t.extend({redirectTo:e},i(s,a))}return this},this.otherwise=function(e){return this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(i,a,s,o,r,l,c,d){function f(e,t){var n=t.keys,i={};if(!t.regexp)return null;var a=t.regexp.exec(e);if(!a)return null;for(var s=1,o=a.length;o>s;++s){var r=n[s-1],l="string"==typeof a[s]?decodeURIComponent(a[s]):a[s];r&&l&&(i[r.name]=l)}return i}function h(){var e=m(),n=p.current;e&&n&&e.$$route===n.$$route&&t.equals(e.pathParams,n.pathParams)&&!e.reloadOnSearch&&!u?(n.params=e.params,t.copy(n.params,s),i.$broadcast("$routeUpdate",n)):(e||n)&&(u=!1,i.$broadcast("$routeChangeStart",e,n),p.current=e,e&&e.redirectTo&&(t.isString(e.redirectTo)?a.path(_(e.redirectTo,e.params)).search(e.params).replace():a.url(e.redirectTo(e.pathParams,a.path(),a.search())).replace()),o.when(e).then(function(){if(e){var i,a,n=t.extend({},e.resolve);return t.forEach(n,function(e,i){n[i]=t.isString(e)?r.get(e):r.invoke(e)}),t.isDefined(i=e.template)?t.isFunction(i)&&(i=i(e.params)):t.isDefined(a=e.templateUrl)&&(t.isFunction(a)&&(a=a(e.params)),a=d.getTrustedResourceUrl(a),t.isDefined(a)&&(e.loadedTemplateUrl=a,i=l.get(a,{cache:c}).then(function(e){return e.data}))),t.isDefined(i)&&(n.$template=i),o.all(n)}}).then(function(a){e==p.current&&(e&&(e.locals=a,t.copy(e.params,s)),i.$broadcast("$routeChangeSuccess",e,n))},function(t){e==p.current&&i.$broadcast("$routeChangeError",e,n,t)}))}function m(){var i,s;return t.forEach(n,function(n){!s&&(i=f(a.path(),n))&&(s=e(n,{params:t.extend({},a.search(),i),pathParams:i}),s.$$route=n)}),s||n[null]&&e(n[null],{params:{},pathParams:{}})}function _(e,n){var i=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)i.push(e);else{var a=e.match(/(\w+)(.*)/),s=a[1];i.push(n[s]),i.push(a[2]||""),delete n[s]}}),i.join("")}var u=!1,p={routes:n,reload:function(){u=!0,i.$evalAsync(h)}};return i.$on("$locationChangeSuccess",h),p}]}function s(){this.$get=function(){return{}}}function o(e,n,i){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,s,o,r,l){function f(){c&&(c.$destroy(),c=null),d&&(i.leave(d),d=null)}function h(){var o=e.current&&e.current.locals,r=o&&o.$template;if(r){var h=a.$new(),m=e.current,_=l(h,function(e){i.enter(e,null,d||s,function(){!t.isDefined(u)||u&&!a.$eval(u)||n()}),f()});d=_,c=m.scope=h,c.$emit("$viewContentLoaded"),c.$eval(p)}else f()}var c,d,u=o.autoscroll,p=o.onload||"";a.$on("$routeChangeSuccess",h),h()}}}function r(e,t,n){return{restrict:"ECA",priority:-400,link:function(i,a){var s=n.current,o=s.locals;a.html(o.$template);var r=e(a.contents());if(s.controller){o.$scope=i;var l=t(s.controller,o);s.controllerAs&&(i[s.controllerAs]=l),a.data("$ngControllerController",l),a.children().data("$ngControllerController",l)}r(i)}}}var i=t.module("ngRoute",["ng"]).provider("$route",a);i.provider("$routeParams",s),i.directive("ngView",o),i.directive("ngView",r),o.$inject=["$route","$anchorScroll","$animate"],r.$inject=["$compile","$controller","$route"]}(window,window.angular),function(e,t,n){"use strict";function s(e){return null!=e&&""!==e&&"hasOwnProperty"!==e&&a.test("."+e)}function o(e,t){if(!s(t))throw i("badmember",'Dotted member path "@{0}" is invalid.',t);for(var a=t.split("."),o=0,r=a.length;r>o&&e!==n;o++){var l=a[o];e=null!==e?e[l]:n}return e}function r(e,n){n=n||{},t.forEach(n,function(e,t){delete n[t]});for(var i in e)e.hasOwnProperty(i)&&"$$"!==i.substr(0,2)&&(n[i]=e[i]);return n}var i=t.$$minErr("$resource"),a=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;t.module("ngResource",["ng"]).factory("$resource",["$http","$q",function(e,a){function f(e){return h(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function h(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")
}function m(e,t){this.template=e,this.defaults=t||{},this.urlParams={}}function _(f,h,g){function b(e,t){var n={};return t=d({},h,t),c(t,function(t,i){p(t)&&(t=t()),n[i]=t&&t.charAt&&"@"==t.charAt(0)?o(e,t.substr(1)):t}),n}function y(e){return e.resource}function w(e){r(e||{},this)}var v=new m(f);return g=d({},s,g),c(g,function(s,o){var f=/^(POST|PUT|PATCH)$/i.test(s.method);w[o]=function(o,h,m,_){var k,x,j,g={};switch(arguments.length){case 4:j=_,x=m;case 3:case 2:if(!p(h)){g=o,k=h,x=m;break}if(p(o)){x=o,j=h;break}x=h,j=m;case 1:p(o)?x=o:f?k=o:g=o;break;case 0:break;default:throw i("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var $=this instanceof w,C=$?k:s.isArray?[]:new w(k),S={},D=s.interceptor&&s.interceptor.response||y,E=s.interceptor&&s.interceptor.responseError||n;c(s,function(e,t){"params"!=t&&"isArray"!=t&&"interceptor"!=t&&(S[t]=u(e))}),f&&(S.data=k),v.setUrlParams(S,d({},b(k,s.params||{}),g),s.url);var T=e(S).then(function(e){var n=e.data,a=C.$promise;if(n){if(t.isArray(n)!==!!s.isArray)throw i("badcfg","Error in resource configuration. Expected response to contain an {0} but got an {1}",s.isArray?"array":"object",t.isArray(n)?"array":"object");s.isArray?(C.length=0,c(n,function(e){C.push(new w(e))})):(r(n,C),C.$promise=a)}return C.$resolved=!0,e.resource=C,e},function(e){return C.$resolved=!0,(j||l)(e),a.reject(e)});return T=T.then(function(e){var t=D(e);return(x||l)(t,e.headers),t},E),$?T:(C.$promise=T,C.$resolved=!1,C)},w.prototype["$"+o]=function(e,t,n){p(e)&&(n=t,t=e,e={});var i=w[o].call(this,e,this,t,n);return i.$promise||i}}),w.bind=function(e){return _(f,d({},h,e),g)},w}var s={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},l=t.noop,c=t.forEach,d=t.extend,u=t.copy,p=t.isFunction;return m.prototype={setUrlParams:function(e,n,a){var r,l,s=this,o=a||s.template,d=s.urlParams={};c(o.split(/\W/),function(e){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(o)&&(d[e]=!0)}),o=o.replace(/\\:/g,":"),n=n||{},c(s.urlParams,function(e,i){r=n.hasOwnProperty(i)?n[i]:s.defaults[i],t.isDefined(r)&&null!==r?(l=f(r),o=o.replace(new RegExp(":"+i+"(\\W|$)","g"),l+"$1")):o=o.replace(new RegExp("(/?):"+i+"(\\W|$)","g"),function(e,t,n){return"/"==n.charAt(0)?n:t+n})}),o=o.replace(/\/+$/,""),o=o.replace(/\/\.(?=\w+($|\?))/,"."),e.url=o.replace(/\/\\\./,"/."),c(n,function(t,n){s.urlParams[n]||(e.params=e.params||{},e.params[n]=t)})}},_}])}(window,window.angular),function(e,t){"use strict";function a(){this.$get=["$$sanitizeUri",function(e){return function(t){var n=[];return C(t,z(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function s(e){var n=[],i=z(n,t.noop);return i.chars(e),n.join("")}function $(e){var i,t={},n=e.split(",");for(i=0;n.length>i;i++)t[n[i]]=!0;return t}function C(e,n){function x(e,i,a,s){if(i=t.lowercase(i),b[i])for(;_.last()&&y[_.last()];)j("",_.last());v[i]&&_.last()==i&&j("",i),s=m[i]||!!s,s||_.push(i);var o={};a.replace(l,function(e,t,n,i,a){var s=n||i||a||"";o[t]=E(s)}),n.start&&n.start(i,o,s)}function j(e,i){var s,a=0;if(i=t.lowercase(i))for(a=_.length-1;a>=0&&_[a]!=i;a--);if(a>=0){for(s=_.length-1;s>=a;s--)n.end&&n.end(_[s]);_.length=a}}var a,s,h,_=[],g=e;for(_.last=function(){return _[_.length-1]};e;){if(s=!0,_.last()&&w[_.last()])e=e.replace(new RegExp("(.*)<\\s*\\/\\s*"+_.last()+"[^>]*>","i"),function(e,t){return t=t.replace(u,"$1").replace(f,"$1"),n.chars&&n.chars(E(t)),""}),j("",_.last());else if(0===e.indexOf("<!--")?(a=e.indexOf("--",4),a>=0&&e.lastIndexOf("-->",a)===a&&(n.comment&&n.comment(e.substring(4,a)),e=e.substring(a+3),s=!1)):p.test(e)?(h=e.match(p),h&&(e=e.replace(h[0],""),s=!1)):d.test(e)?(h=e.match(r),h&&(e=e.substring(h[0].length),h[0].replace(r,j),s=!1)):c.test(e)&&(h=e.match(o),h&&(e=e.substring(h[0].length),h[0].replace(o,x),s=!1)),s){a=e.indexOf("<");var k=0>a?e:e.substring(0,a);e=0>a?"":e.substring(a),n.chars&&n.chars(E(k))}if(e==g)throw i("badparse","The sanitizer was unable to parse the following block of html: {0}",e);g=e}j()}function E(e){if(!e)return"";var t=D.exec(e),n=t[1],i=t[3],a=t[2];return a&&(S.innerHTML=a.replace(/</g,"&lt;"),a="textContent"in S?S.textContent:S.innerText),n+a+i}function T(e){return e.replace(/&/g,"&amp;").replace(h,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function z(e,n){var i=!1,a=t.bind(e,e.push);return{start:function(e,s,o){e=t.lowercase(e),!i&&w[e]&&(i=e),i||k[e]!==!0||(a("<"),a(e),t.forEach(s,function(i,s){var o=t.lowercase(s),r="img"===e&&"src"===o||"background"===o;j[o]!==!0||x[o]===!0&&!n(i,r)||(a(" "),a(s),a('="'),a(T(i)),a('"'))}),a(o?"/>":">"))},end:function(e){e=t.lowercase(e),i||k[e]!==!0||(a("</"),a(e),a(">")),e==i&&(i=!1)},chars:function(e){i||a(T(e))}}}var i=t.$$minErr("$sanitize"),o=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,r=/^<\s*\/\s*([\w:-]+)[^>]*>/,l=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,c=/^</,d=/^<\s*\//,u=/<!--(.*?)-->/g,p=/<!DOCTYPE([^>]*?)>/i,f=/<!\[CDATA\[(.*?)]]>/g,h=/([^\#-~| |!])/g,m=$("area,br,col,hr,img,wbr"),_=$("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),g=$("rp,rt"),v=t.extend({},g,_),b=t.extend({},_,$("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),y=t.extend({},g,$("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),w=$("script,style"),k=t.extend({},m,b,y,v),x=$("background,cite,href,longdesc,src,usemap"),j=t.extend({},x,$("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,span,start,summary,target,title,type,valign,value,vspace,width")),S=document.createElement("pre"),D=/^(\s*)([\s\S]*?)(\s*)$/;t.module("ngSanitize",[]).provider("$sanitize",a),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,i=/^mailto:/;return function(a,o){function p(e){e&&c.push(s(e))}function f(e,n){c.push("<a "),t.isDefined(o)&&(c.push('target="'),c.push(o),c.push('" ')),c.push('href="'),c.push(e),c.push('">'),p(n),c.push("</a>")}if(!a)return a;for(var r,d,u,l=a,c=[];r=l.match(n);)d=r[0],r[2]==r[3]&&(d="mailto:"+d),u=r.index,p(l.substr(0,u)),f(d,r[0].replace(i,"")),l=l.substring(u+r[0].length);return p(l),e(c.join(""))}}])}(window,window.angular),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dialog","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/popup.html","template/dialog/message.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset-titles.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,n){function r(e){for(var t in e)if(void 0!==a.style[t])return e[t]}var i=function(a,s,o){o=o||{};var r=e.defer(),l=i[o.animation?"animationEndEventName":"transitionEndEventName"],c=function(){n.$apply(function(){a.unbind(l,c),r.resolve(a)})};return l&&a.bind(l,c),t(function(){angular.isString(s)?a.addClass(s):angular.isFunction(s)?s(a):angular.isObject(s)&&a.css(s),l||r.resolve(a)}),r.promise.cancel=function(){l&&a.unbind(l,c),r.reject("Transition cancelled")},r.promise},a=document.createElement("trans"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},o={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return i.transitionEndEventName=r(s),i.animationEndEventName=r(o),i}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(e){var t=function(e,t,n){t.removeClass("collapse"),t.css({height:n}),t[0].offsetWidth,t.addClass("collapse")};return{link:function(n,i,a){var s,o=!0;n.$watch(function(){return i[0].scrollHeight},function(){0!==i[0].scrollHeight&&(s||(o?t(n,i,i[0].scrollHeight+"px"):t(n,i,"auto")))}),n.$watch(a.collapse,function(e){e?d():c()});var r,l=function(t){return r&&r.cancel(),r=e(i,t),r.then(function(){r=void 0},function(){r=void 0}),r},c=function(){o?(o=!1,s||t(n,i,"auto")):l({height:i[0].scrollHeight+"px"}).then(function(){s||t(n,i,"auto")}),s=!1},d=function(){s=!0,o?(o=!1,t(n,i,0)):(t(n,i,i[0].scrollHeight+"px"),l({height:"0"}))}}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(i){var a=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;a&&angular.forEach(this.groups,function(e){e!==i&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(this.groups.indexOf(e),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse","$transition","$timeout",function(e){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:["$scope",function(){this.setHeading=function(e){this.heading=e}}],link:function(t,n,i,a){var s,o;a.addGroup(t),t.isOpen=!1,i.isOpen&&(s=e(i.isOpen),o=s.assign,t.$watch(function(){return s(t.$parent)},function(e){t.isOpen=e}),t.isOpen=s?s(t.$parent):!1),t.$watch("isOpen",function(e){e&&a.closeOthers(t),o&&o(t.$parent,e)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(e,t,n){return function(e,t,i,a){a.setHeading(n(e,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,n,i){e.$watch(function(){return i[n.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).directive("alert",function(){return{restrict:"EA",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"},link:function(e,t,n){e.closeable="close"in n}}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).directive("btnRadio",["buttonConfig",function(e){var t=e.activeClass||"active",n=e.toggleEvent||"click";return{require:"ngModel",link:function(e,i,a,s){s.$render=function(){i.toggleClass(t,angular.equals(s.$modelValue,e.$eval(a.btnRadio)))},i.bind(n,function(){i.hasClass(t)||e.$apply(function(){s.$setViewValue(e.$eval(a.btnRadio)),s.$render()})})}}}]).directive("btnCheckbox",["buttonConfig",function(e){var t=e.activeClass||"active",n=e.toggleEvent||"click";return{require:"ngModel",link:function(e,i,a,s){function o(){var t=e.$eval(a.btnCheckboxTrue);return angular.isDefined(t)?t:!0}function r(){var t=e.$eval(a.btnCheckboxFalse);return angular.isDefined(t)?t:!1}s.$render=function(){i.toggleClass(t,angular.equals(s.$modelValue,o()))},i.bind(n,function(){e.$apply(function(){s.$setViewValue(i.hasClass(t)?r():o()),s.$render()})})}}}]),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(e,t,n){function c(){function n(){l?(e.next(),c()):e.pause()}r&&t.cancel(r);var i=+e.interval;!isNaN(i)&&i>=0&&(r=t(n,i))}var r,l,a=this,s=a.slides=[],o=-1;a.currentSlide=null,a.select=function(i,r){function d(){a.currentSlide&&angular.isString(r)&&!e.noTransition&&i.$element?(i.$element.addClass(r),i.$element[0].offsetWidth=i.$element[0].offsetWidth,angular.forEach(s,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(i,{direction:r,active:!0,entering:!0}),angular.extend(a.currentSlide||{},{direction:r,leaving:!0}),e.$currentTransition=n(i.$element,{}),function(t,n){e.$currentTransition.then(function(){u(t,n)},function(){u(t,n)})}(i,a.currentSlide)):u(i,a.currentSlide),a.currentSlide=i,o=l,c()}function u(t,n){angular.extend(t,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(n||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var l=s.indexOf(i);void 0===r&&(r=l>o?"next":"prev"),i&&i!==a.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),t(d)):d())},a.indexOfSlide=function(e){return s.indexOf(e)},e.next=function(){var t=(o+1)%s.length;return e.$currentTransition?void 0:a.select(s[t],"next")},e.prev=function(){var t=0>o-1?s.length-1:o-1;return e.$currentTransition?void 0:a.select(s[t],"prev")},e.select=function(e){a.select(e)},e.isActive=function(e){return a.currentSlide===e},e.slides=function(){return s},e.$watch("interval",c),e.play=function(){l||(l=!0,c())},e.pause=function(){e.noPause||(l=!1,r&&t.cancel(r))},a.addSlide=function(t,n){t.$element=n,s.push(t),1===s.length||t.active?(a.select(s[s.length-1]),1==s.length&&e.play()):t.active=!1},a.removeSlide=function(e){var t=s.indexOf(e);s.splice(t,1),s.length>0&&e.active?t>=s.length?a.select(s[t-1]):a.select(s[t]):o>t&&o--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(e){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(t,n,i,a){if(i.active){var s=e(i.active),o=s.assign,r=t.active=s(t.$parent);t.$watch(function(){var e=s(t.$parent);return e!==t.active&&(e!==r?r=t.active=e:o(t.$parent,e=r=t.active)),e})}a.addSlide(t,n),t.$on("$destroy",function(){a.removeSlide(t)}),t.$watch("active",function(e){e&&a.select(t)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function s(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function o(e){return"static"===(s(e,"position")||"static")}var n,i;e.bind("mousemove",function(e){n=e.pageX,i=e.pageY});var r=function(t){for(var n=e[0],i=t.offsetParent||n;i&&i!==n&&o(i);)i=i.offsetParent;return i||n};return{position:function(t){var n=this.offset(t),i={top:0,left:0},a=r(t[0]);return a!=e[0]&&(i=this.offset(angular.element(a)),i.top+=a.clientTop-a.scrollTop,i.left+=a.clientLeft-a.scrollLeft),{width:t.prop("offsetWidth"),height:t.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:n.prop("offsetWidth"),height:n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].body.scrollTop),left:i.left+(t.pageXOffset||e[0].body.scrollLeft)}},mouse:function(){return{x:n,y:i}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function(e,t,n,i){function r(t,n){return angular.isDefined(t)?e.$parent.$eval(t):n}function l(e,t){return new Date(e,t,0).getDate()}function c(e,t){for(var n=new Array(t),i=e,a=0;t>a;)n[a++]=new Date(i),i.setDate(i.getDate()+1);return n}function d(e,t,i,a){return{date:e,label:n(e,t),selected:!!i,secondary:!!a}}var a={day:r(t.dayFormat,i.dayFormat),month:r(t.monthFormat,i.monthFormat),year:r(t.yearFormat,i.yearFormat),dayHeader:r(t.dayHeaderFormat,i.dayHeaderFormat),dayTitle:r(t.dayTitleFormat,i.dayTitleFormat),monthTitle:r(t.monthTitleFormat,i.monthTitleFormat)},s=r(t.startingDay,i.startingDay),o=r(t.yearRange,i.yearRange);this.minDate=i.minDate?new Date(i.minDate):null,this.maxDate=i.maxDate?new Date(i.maxDate):null,this.modes=[{name:"day",getVisibleDates:function(e,t){var i=e.getFullYear(),o=e.getMonth(),r=new Date(i,o,1),u=s-r.getDay(),p=u>0?7-u:-u,f=new Date(r),h=0;p>0&&(f.setDate(-p+1),h+=p),h+=l(i,o+1),h+=(7-h%7)%7;for(var m=c(f,h),_=new Array(7),g=0;h>g;g++){var v=new Date(m[g]);m[g]=d(v,a.day,t&&t.getDate()===v.getDate()&&t.getMonth()===v.getMonth()&&t.getFullYear()===v.getFullYear(),v.getMonth()!==o)}for(var b=0;7>b;b++)_[b]=n(m[b].date,a.dayHeader);return{objects:m,title:n(e,a.dayTitle),labels:_}},compare:function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},split:7,step:{months:1}},{name:"month",getVisibleDates:function(e,t){for(var i=new Array(12),s=e.getFullYear(),o=0;12>o;o++){var r=new Date(s,o,1);i[o]=d(r,a.month,t&&t.getMonth()===o&&t.getFullYear()===s)}return{objects:i,title:n(e,a.monthTitle)}},compare:function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(e,t){for(var n=new Array(o),i=e.getFullYear(),s=parseInt((i-1)/o,10)*o+1,r=0;o>r;r++){var l=new Date(s+r,0,1);n[r]=d(l,a.year,t&&t.getFullYear()===l.getFullYear())}return{objects:n,title:[n[0].label,n[o-1].label].join(" - ")}},compare:function(e,t){return e.getFullYear()-t.getFullYear()},split:5,step:{years:o}}],this.isDisabled=function(t,n){var i=this.modes[n||0];return this.minDate&&0>i.compare(t,this.minDate)||this.maxDate&&i.compare(t,this.maxDate)>0||e.dateDisabled&&e.dateDisabled({date:t,mode:i.name})}}]).directive("datepicker",["dateFilter","$parse","datepickerConfig","$log",function(e,t,n,i){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,a,s,o){function p(){e.showWeekNumbers=0===c&&u}function f(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n}function h(t){var n=null,a=!0;l.$modelValue&&(n=new Date(l.$modelValue),isNaN(n)?(a=!1,i.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):t&&(d=n)),l.$setValidity("date",a);var s=r.modes[c],o=s.getVisibleDates(d,n);angular.forEach(o.objects,function(e){e.disabled=r.isDisabled(e.date,c)}),l.$setValidity("date-disabled",!n||!r.isDisabled(n)),e.rows=f(o.objects,s.split),e.labels=o.labels||[],e.title=o.title}function m(e){c=e,p(),h()}function _(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}var r=o[0],l=o[1];if(l){var c=0,d=new Date,u=n.showWeeks;s.showWeeks?e.$parent.$watch(t(s.showWeeks),function(e){u=!!e,p()}):p(),s.min&&e.$parent.$watch(t(s.min),function(e){r.minDate=e?new Date(e):null,h()}),s.max&&e.$parent.$watch(t(s.max),function(e){r.maxDate=e?new Date(e):null,h()}),l.$render=function(){h(!0)},e.select=function(e){if(0===c){var t=new Date(l.$modelValue);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),l.$setViewValue(t),h(!0)}else d=e,m(c-1)},e.move=function(e){var t=r.modes[c].step;d.setMonth(d.getMonth()+e*(t.months||0)),d.setFullYear(d.getFullYear()+e*(t.years||0)),h()},e.toggleMode=function(){m((c+1)%r.modes.length)},e.getWeekNumber=function(t){return 0===c&&e.showWeekNumbers&&7===t.length?_(t[0].date):null}}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",closeOnDateSelection:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig",function(e,t,n,i,a,s){return{restrict:"EA",require:"ngModel",link:function(o,r,l,c){function f(e){return e?a(e,u):null}function h(e){if(e){var t=new Date(e);if(!isNaN(t))return t}return e}function v(e){_?_(o,!!e):p.isOpen=!!e}function j(e,n,i){e&&(o.$watch(t(e),function(e){p[n]=e}),k.attr(i||n,n))}function $(){p.position=i.position(r),p.position.top=p.position.top+r.prop("offsetHeight")}var d=angular.isDefined(l.closeOnDateSelection)?p.$eval(l.closeOnDateSelection):s.closeOnDateSelection,u=l.datepickerPopup||s.dateFormat,p=o.$new();o.$on("$destroy",function(){p.$destroy()}),c.$formatters.push(f),c.$parsers.push(h);var m,_;l.open&&(m=t(l.open),_=m.assign,o.$watch(m,function(e){p.isOpen=!!e})),p.isOpen=m?m(o):!1;var b=function(e){p.isOpen&&e.target!==r[0]&&p.$apply(function(){v(!1)})},y=function(){p.$apply(function(){v(!0)})},w=angular.element("<datepicker-popup-wrap><datepicker></datepicker></datepicker-popup-wrap>");w.attr({"ng-model":"date","ng-change":"dateSelection()"});var k=w.find("datepicker");l.datepickerOptions&&k.attr(angular.extend({},o.$eval(l.datepickerOptions)));var x=t(l.ngModel).assign;p.dateSelection=function(){x(o,p.date),d&&v(!1)},p.$watch(function(){return c.$modelValue},function(e){if(angular.isString(e)){var t=h(e);if(e&&!t)throw x(o,null),new Error(e+" cannot be parsed to a date object.");e=t}p.date=e,$()}),j(l.min,"min"),j(l.max,"max"),l.showWeeks?j(l.showWeeks,"showWeeks","show-weeks"):(p.showWeeks=!0,k.attr("show-weeks","showWeeks")),l.dateDisabled&&k.attr("date-disabled",l.dateDisabled),p.$watch("isOpen",function(e){e?($(),n.bind("click",b),r.unbind("focus",y),r.focus()):(n.unbind("click",b),r.bind("focus",y)),_&&_(o,e)}),p.today=function(){x(o,new Date)},p.clear=function(){x(o,null)},r.after(e(w)(p))}}}]).directive("datepickerPopupWrap",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}]);var dialogModule=angular.module("ui.bootstrap.dialog",["ui.bootstrap.transition"]);dialogModule.controller("MessageBoxController",["$scope","dialog","model",function(e,t,n){e.title=n.title,e.message=n.message,e.buttons=n.buttons,e.close=function(e){t.close(e)}}]),dialogModule.provider("$dialog",function(){var e={backdrop:!0,dialogClass:"modal",backdropClass:"modal-backdrop in",transitionClass:"fade",triggerClass:"in",resolve:{},backdropFade:!1,dialogFade:!1,keyboard:!0,backdropClick:!0},t={},n={value:0};this.options=function(e){t=e},this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$transition","$injector",function(i,a,s,o,r,l,c,d,u){function f(e){var t=angular.element("<div>");return t.addClass(e),t}function h(n){var i=this,a=this.options=angular.extend({},e,t,n);this._open=!1,this.backdropEl=f(a.backdropClass),a.backdropFade&&(this.backdropEl.addClass(a.transitionClass),this.backdropEl.removeClass(a.triggerClass)),this.modalEl=f(a.dialogClass),a.dialogFade&&(this.modalEl.addClass(a.transitionClass),this.modalEl.removeClass(a.triggerClass)),this.handledEscapeKey=function(e){27===e.which&&(i.close(),e.preventDefault(),i.$scope.$apply())},this.handleBackDropClick=function(e){e.preventDefault(),$(e.target).hasClass("modal")&&(i.close(),i.$scope.$apply())}}var p=a.find("body");return h.prototype.isOpen=function(){return this._open},h.prototype.open=function(e,t){var n=this,i=this.options;if(e&&(i.templateUrl=e),t&&(i.controller=t),!i.template&&!i.templateUrl)throw new Error("Dialog.open expected template or templateUrl, neither found. Use options or open method to specify them.");return this._loadResolves().then(function(e){var t=e.$scope=n.$scope=e.$scope?e.$scope:o.$new();if(n.modalEl.html(e.$template),n.options.controller){var i=r(n.options.controller,e);n.modalEl.children().data("ngControllerController",i)}s(n.modalEl)(t),n._addElementsToDom(),setTimeout(function(){n.modalEl.show(),n.options.dialogFade&&n.modalEl.addClass(n.options.triggerClass),n.options.backdropFade&&n.backdropEl.addClass(n.options.triggerClass)}),n._bindEvents()}),this.deferred=c.defer(),this.deferred.promise},h.prototype.close=function(e){function a(e){e.removeClass(t.options.triggerClass)}function s(){t._open&&t._onCloseComplete(e)}var t=this,n=this._getFadingElements();if(n.length>0)for(var i=n.length-1;i>=0;i--)d(n[i],a).then(s);else this._onCloseComplete(e)},h.prototype._getFadingElements=function(){var e=[];return this.options.dialogFade&&e.push(this.modalEl),this.options.backdropFade&&e.push(this.backdropEl),e},h.prototype._bindEvents=function(){this.options.keyboard&&p.bind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.modalEl.bind("click",this.handleBackDropClick)},h.prototype._unbindEvents=function(){this.options.keyboard&&p.unbind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.modalEl.unbind("click",this.handleBackDropClick)},h.prototype._onCloseComplete=function(e){this._removeElementsFromDom(),this._unbindEvents(),this.deferred.resolve(e)},h.prototype._addElementsToDom=function(){p.append(this.modalEl),this.options.backdrop&&(0===n.value&&p.append(this.backdropEl),n.value++),this._open=!0},h.prototype._removeElementsFromDom=function(){this.modalEl.remove(),this.options.backdrop&&(n.value--,0===n.value&&this.backdropEl.remove()),this._open=!1},h.prototype._loadResolves=function(){var n,e=[],t=[],a=this;return this.options.template?n=c.when(this.options.template):this.options.templateUrl&&(n=i.get(this.options.templateUrl,{cache:l}).then(function(e){return e.data})),angular.forEach(this.options.resolve||[],function(n,i){t.push(i),e.push(angular.isString(n)?u.get(n):u.invoke(n))}),t.push("$template"),e.push(n),c.all(e).then(function(e){var n={};return angular.forEach(e,function(e,i){n[t[i]]=e}),n.dialog=a,n})},{dialog:function(e){return new h(e)},messageBox:function(e,t,n){return new h({templateUrl:"template/dialog/message.html",controller:"MessageBoxController",resolve:{model:function(){return{title:e,message:t,buttons:n}}}})}}}]}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(e){var n=null,i=angular.noop;return{restrict:"CA",link:function(t,a){t.$watch("$location.path",function(){i()}),a.parent().bind("click",function(){i()}),a.bind("click",function(t){var s=a===n;t.preventDefault(),t.stopPropagation(),n&&i(),s||(a.parent().addClass("open"),n=a,i=function(t){t&&(t.preventDefault(),t.stopPropagation()),e.unbind("click",i),a.parent().removeClass("open"),i=angular.noop,n=null},e.bind("click",i))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.dialog"]).directive("modal",["$parse","$dialog",function(e,t){return{restrict:"EA",terminal:!0,link:function(n,i,a){var r,s=angular.extend({},n.$eval(a.uiOptions||a.bsOptions||a.options)),o=a.modal||a.show;s=angular.extend(s,{template:i.html(),resolve:{$scope:function(){return n}}});var l=t.dialog(s);i.remove(),r=a.close?function(){e(a.close)(n)}:function(){angular.isFunction(e(o).assign)&&e(o).assign(n,!1)},n.$watch(o,function(e){e?l.open().then(function(){r()}):l.isOpen()&&l.close()})}}}]),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$interpolate",function(e,t){this.currentPage=1,this.noPrevious=function(){return 1===this.currentPage},this.noNext=function(){return this.currentPage===e.numPages},this.isActive=function(e){return this.currentPage===e},this.reset=function(){e.pages=[],this.currentPage=parseInt(e.currentPage,10),this.currentPage>e.numPages&&e.selectPage(e.numPages)};var n=this;e.selectPage=function(t){!n.isActive(t)&&t>0&&e.numPages>=t&&(e.currentPage=t,e.onSelectPage({page:t}))},this.getAttributeValue=function(n,i,a){return angular.isDefined(n)?a?t(n)(e.$parent):e.$parent.$eval(n):i}}]).constant("paginationConfig",{boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["paginationConfig",function(e){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",maxSize:"=",onSelectPage:"&"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(t,n,i,a){function p(e,t,n,i){return{number:e,text:t,active:n,disabled:i}}var s=a.getAttributeValue(i.boundaryLinks,e.boundaryLinks),o=a.getAttributeValue(i.directionLinks,e.directionLinks),r=a.getAttributeValue(i.firstText,e.firstText,!0),l=a.getAttributeValue(i.previousText,e.previousText,!0),c=a.getAttributeValue(i.nextText,e.nextText,!0),d=a.getAttributeValue(i.lastText,e.lastText,!0),u=a.getAttributeValue(i.rotate,e.rotate);t.$watch("numPages + currentPage + maxSize",function(){a.reset();var e=1,n=t.numPages,i=angular.isDefined(t.maxSize)&&t.numPages>t.maxSize;i&&(u?(e=Math.max(a.currentPage-Math.floor(t.maxSize/2),1),n=e+t.maxSize-1,n>t.numPages&&(n=t.numPages,e=n-t.maxSize+1)):(e=(Math.ceil(a.currentPage/t.maxSize)-1)*t.maxSize+1,n=Math.min(e+t.maxSize-1,t.numPages)));for(var f=e;n>=f;f++){var h=p(f,f,a.isActive(f),!1);t.pages.push(h)}if(i&&!u){if(e>1){var m=p(e-1,"...",!1,!1);t.pages.unshift(m)}if(t.numPages>n){var _=p(n+1,"...",!1,!1);t.pages.push(_)}}if(o){var g=p(a.currentPage-1,l,!1,a.noPrevious());t.pages.unshift(g);var v=p(a.currentPage+1,c,!1,a.noNext());t.pages.push(v)}if(s){var b=p(1,r,!1,a.noPrevious());t.pages.unshift(b);var y=p(t.numPages,d,!1,a.noNext());t.pages.push(y)}})}}}]).constant("pagerConfig",{previousText:"Â« Previous",nextText:"Next Â»",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",onSelectPage:"&"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,n,i,a){function l(e,t,n,i,a){return{number:e,text:t,disabled:n,previous:r&&i,next:r&&a}}var s=a.getAttributeValue(i.previousText,e.previousText,!0),o=a.getAttributeValue(i.nextText,e.nextText,!0),r=a.getAttributeValue(i.align,e.align);t.$watch("numPages + currentPage",function(){a.reset();var e=l(a.currentPage-1,s,a.noPrevious(),!0,!1);t.pages.unshift(e);var n=l(a.currentPage+1,o,a.noNext(),!1,!0);t.pages.push(n)})}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position"]).provider("$tooltip",function(){function a(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var e={placement:"top",animation:!0,popupDelay:0},t={mouseenter:"mouseleave",click:"click",focus:"blur"},n={};this.options=function(e){angular.extend(n,e)},this.setTriggers=function(e){angular.extend(t,e)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(i,s,o,r,l,c,d){return function(i,u,p){function h(e){var n=e||f.trigger||p,i=t[n]||n;return{show:n,hide:i}}var f=angular.extend({},e,n),m=a(i),_=d.startSymbol(),g=d.endSymbol(),v="<"+m+"-popup "+'title="'+_+"tt_title"+g+'" '+'content="'+_+"tt_content"+g+'" '+'placement="'+_+"tt_placement"+g+'" '+'animation="tt_animation()" '+'is-open="tt_isOpen"'+">"+"</"+m+"-popup>";
return{restrict:"EA",scope:!0,link:function(e,t,n){function y(){e.tt_isOpen?k():w()}function w(){e.tt_popupDelay?p=o(x,e.tt_popupDelay):e.$apply(x)}function k(){e.$apply(function(){j()})}function x(){var n,i,s,r;if(e.tt_content){switch(d&&o.cancel(d),a.css({top:0,left:0,display:"block"}),_?(m=m||l.find("body"),m.append(a)):t.after(a),n=_?c.offset(t):c.position(t),i=a.prop("offsetWidth"),s=a.prop("offsetHeight"),e.tt_placement){case"mouse":var u=c.mouse();r={top:u.y,left:u.x};break;case"right":r={top:n.top+n.height/2-s/2,left:n.left+n.width};break;case"bottom":r={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"left":r={top:n.top+n.height/2-s/2,left:n.left-i};break;default:r={top:n.top-s,left:n.left+n.width/2-i/2}}r.top+="px",r.left+="px",a.css(r),e.tt_isOpen=!0}}function j(){e.tt_isOpen=!1,o.cancel(p),angular.isDefined(e.tt_animation)&&e.tt_animation()?d=o(function(){a.remove()},500):a.remove()}var d,p,m,a=s(v)(e),_=angular.isDefined(f.appendToBody)?f.appendToBody:!1,g=h(void 0),b=!1;e.tt_isOpen=!1,n.$observe(i,function(t){e.tt_content=t}),n.$observe(u+"Title",function(t){e.tt_title=t}),n.$observe(u+"Placement",function(t){e.tt_placement=angular.isDefined(t)?t:f.placement}),n.$observe(u+"Animation",function(t){e.tt_animation=angular.isDefined(t)?r(t):function(){return f.animation}}),n.$observe(u+"PopupDelay",function(t){var n=parseInt(t,10);e.tt_popupDelay=isNaN(n)?f.popupDelay:n}),n.$observe(u+"Trigger",function(e){b&&(t.unbind(g.show,w),t.unbind(g.hide,k)),g=h(e),g.show===g.hide?t.bind(g.show,y):(t.bind(g.show,w),t.bind(g.hide,k)),b=!0}),n.$observe(u+"AppendToBody",function(t){_=angular.isDefined(t)?r(t)(e):_}),_&&e.$on("$locationChangeSuccess",function(){e.tt_isOpen&&j()}),e.$on("$destroy",function(){e.tt_isOpen?j():a.remove()})}}}}]}).directive("tooltipPopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$compile","$timeout","$parse","$window","$tooltip",function(e,t,n,i,a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,autoType:!1,stackedTypes:["success","info","warning","danger"]}).controller("ProgressBarController",["$scope","$attrs","progressConfig",function(e,t,n){function o(e){return s[e]}var i=angular.isDefined(t.animate)?e.$eval(t.animate):n.animate,a=angular.isDefined(t.autoType)?e.$eval(t.autoType):n.autoType,s=angular.isDefined(t.stackedTypes)?e.$eval("["+t.stackedTypes+"]"):n.stackedTypes;this.makeBar=function(e,t,n){var s=angular.isObject(e)?e.value:e||0,r=angular.isObject(t)?t.value:t||0,l=angular.isObject(e)&&angular.isDefined(e.type)?e.type:a?o(n||0):null;return{from:r,to:s,type:l,animate:i}},this.addBar=function(t){e.bars.push(t),e.totalPercent+=t.to},this.clearBars=function(){e.bars=[],e.totalPercent=0},this.clearBars()}]).directive("progress",function(){return{restrict:"EA",replace:!0,controller:"ProgressBarController",scope:{value:"=percent",onFull:"&",onEmpty:"&"},templateUrl:"template/progressbar/progress.html",link:function(e,t,n,i){e.$watch("value",function(e,t){if(i.clearBars(),angular.isArray(e))for(var n=0,a=e.length;a>n;n++)i.addBar(i.makeBar(e[n],null,n));else i.addBar(i.makeBar(e,t))},!0),e.$watch("totalPercent",function(t){t>=100?e.onFull():0>=t&&e.onEmpty()},!0)}}}).directive("progressbar",["$transition",function(e){return{restrict:"EA",replace:!0,scope:{width:"=",old:"=",type:"=",animate:"="},templateUrl:"template/progressbar/bar.html",link:function(t,n){t.$watch("width",function(i){t.animate?(n.css("width",t.old+"%"),e(n,{width:i+"%"})):n.css("width",i+"%")})}}}]),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5}).directive("rating",["ratingConfig","$parse",function(e,t){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},templateUrl:"template/rating/rating.html",replace:!0,link:function(n,i,a){var s=angular.isDefined(a.max)?n.$parent.$eval(a.max):e.max;n.range=[];for(var o=1;s>=o;o++)n.range.push(o);n.rate=function(e){n.readonly||(n.value=e)},n.enter=function(e){n.readonly||(n.val=e),n.onHover({value:e})},n.reset=function(){n.val=angular.copy(n.value),n.onLeave()},n.reset(),n.$watch("value",function(e){n.val=e}),n.readonly=!1,a.readonly&&n.$parent.$watch(t(a.readonly),function(e){n.readonly=!!e})}}}]),angular.module("ui.bootstrap.tabs",[]).directive("tabs",function(){return function(){throw new Error("The `tabs` directive is deprecated, please migrate to `tabset`. Instructions can be found at http://github.com/angular-ui/bootstrap/tree/master/CHANGELOG.md")}}).controller("TabsetController",["$scope","$element",function TabsetCtrl(e){var n=this,i=n.tabs=e.tabs=[];n.select=function(e){angular.forEach(i,function(e){e.active=!1}),e.active=!0},n.addTab=function(e){i.push(e),(1===i.length||e.active)&&n.select(e)},n.removeTab=function(e){var t=i.indexOf(e);if(e.active&&i.length>1){var a=t==i.length-1?t-1:t+1;n.select(i[a])}i.splice(t,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,require:"^tabset",scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",compile:function(e,t,n){return function(e,t,i,a){e.vertical=angular.isDefined(i.vertical)?e.$eval(i.vertical):!1,e.type=angular.isDefined(i.type)?e.$parent.$eval(i.type):"tabs",e.direction=angular.isDefined(i.direction)?e.$parent.$eval(i.direction):"top",e.tabsAbove="below"!=e.direction,a.$scope=e,a.$transcludeFn=n}}}}).directive("tab",["$parse","$http","$templateCache","$compile",function(e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,n,i){return function(t,n,a,s){var o,r;a.active?(o=e(a.active),r=o.assign,t.$parent.$watch(o,function(e){t.active=!!e}),t.active=o(t.$parent)):r=o=angular.noop,t.$watch("active",function(e){r(t.$parent,e),e?(s.select(t),t.onSelect()):t.onDeselect()}),t.disabled=!1,a.disabled&&t.$parent.$watch(e(a.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},s.addTab(t),t.$on("$destroy",function(){s.removeTab(t)}),t.active&&r(t.$parent,!0),t.$transcludeFn=i}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",["$compile","$parse",function(){function n(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(e,t,i){var a=e.$eval(i.tabContentTransclude);a.$transcludeFn(a.$parent,function(e){angular.forEach(e,function(e){n(e)?a.headingElement=e:t.append(e)})})}}}]).directive("tabsetTitles",["$http",function(){return{restrict:"A",require:"^tabset",templateUrl:"template/tabs/tabset-titles.html",replace:!0,link:function(e,t,n,i){e.$eval(n.tabsetTitles)?i.$transcludeFn(i.$scope.$parent,function(e){t.append(e)}):t.remove()}}}]),angular.module("ui.bootstrap.timepicker",[]).filter("pad",function(){return function(e){return angular.isDefined(e)&&2>e.toString().length&&(e="0"+e),e}}).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:["AM","PM"],readonlyInput:!1,mousewheel:!0}).directive("timepicker",["padFilter","$parse","timepickerConfig",function(e,t,n){return{restrict:"EA",require:"ngModel",replace:!0,templateUrl:"template/timepicker/timepicker.html",scope:{model:"=ngModel"},link:function(i,a,s){function u(){var e=parseInt(i.hours,10),t=i.showMeridian?e>0&&13>e:e>=0&&24>e;return t?(i.showMeridian&&(12===e&&(e=0),i.meridian===l[1]&&(e+=12)),e):void 0}function b(){var t=r.getHours();i.showMeridian&&(t=0===t||12===t?12:t%12),i.hours="h"===g?t:e(t),i.validHours=!0;var n=r.getMinutes();i.minutes="m"===g?n:e(n),i.validMinutes=!0,i.meridian=i.showMeridian?12>r.getHours()?l[0]:l[1]:"",g=!1}function y(e){var t=new Date(r.getTime()+6e4*e);r.setHours(t.getHours()),r.setMinutes(t.getMinutes()),i.model=new Date(r)}var r=new Date,l=n.meridians,c=n.hourStep;s.hourStep&&i.$parent.$watch(t(s.hourStep),function(e){c=parseInt(e,10)});var d=n.minuteStep;s.minuteStep&&i.$parent.$watch(t(s.minuteStep),function(e){d=parseInt(e,10)}),i.showMeridian=n.showMeridian,s.showMeridian&&i.$parent.$watch(t(s.showMeridian),function(e){if(i.showMeridian=!!e,i.model)b();else{var t=new Date(r),n=u();angular.isDefined(n)&&t.setHours(n),i.model=new Date(t)}});var p=a.find("input"),f=p.eq(0),h=p.eq(1),m=angular.isDefined(s.mousewheel)?i.$eval(s.mousewheel):n.mousewheel;if(m){var _=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};f.bind("mousewheel wheel",function(e){i.$apply(_(e)?i.incrementHours():i.decrementHours()),e.preventDefault()}),h.bind("mousewheel wheel",function(e){i.$apply(_(e)?i.incrementMinutes():i.decrementMinutes()),e.preventDefault()})}var g=!1;i.readonlyInput=angular.isDefined(s.readonlyInput)?i.$eval(s.readonlyInput):n.readonlyInput,i.readonlyInput?(i.updateHours=angular.noop,i.updateMinutes=angular.noop):(i.updateHours=function(){var e=u();angular.isDefined(e)?(g="h",null===i.model&&(i.model=new Date(r)),i.model.setHours(e)):(i.model=null,i.validHours=!1)},f.bind("blur",function(){i.validHours&&10>i.hours&&i.$apply(function(){i.hours=e(i.hours)})}),i.updateMinutes=function(){var e=parseInt(i.minutes,10);e>=0&&60>e?(g="m",null===i.model&&(i.model=new Date(r)),i.model.setMinutes(e)):(i.model=null,i.validMinutes=!1)},h.bind("blur",function(){i.validMinutes&&10>i.minutes&&i.$apply(function(){i.minutes=e(i.minutes)})})),i.$watch(function(){return+i.model},function(e){!isNaN(e)&&e>0&&(r=new Date(e),b())}),i.incrementHours=function(){y(60*c)},i.decrementHours=function(){y(60*-c)},i.incrementMinutes=function(){y(d)},i.decrementMinutes=function(){y(-d)},i.toggleMeridian=function(){y(720*(12>r.getHours()?1:-1))}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(n){var i=n.match(t);if(!i)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+n+"'.");return{itemName:i[3],source:e(i[4]),viewMapper:e(i[2]||i[1]),modelMapper:e(i[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,n,i,a,s,o){var r=[9,13,27,38,40];return{require:"ngModel",link:function(l,c,d,u){var p=l.$eval(d.typeaheadMinLength)||1,f=l.$eval(d.typeaheadWaitMs)||0,h=l.$eval(d.typeaheadEditable)!==!1,m=t(d.typeaheadLoading).assign||angular.noop,_=t(d.typeaheadOnSelect),g=d.typeaheadInputFormatter?t(d.typeaheadInputFormatter):void 0,v=t(d.ngModel).assign,b=o.parse(d.typeahead),y=angular.element("<typeahead-popup></typeahead-popup>");y.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(d.typeaheadTemplateUrl)&&y.attr("template-url",d.typeaheadTemplateUrl);var w=l.$new();l.$on("$destroy",function(){w.$destroy()});var k=function(){w.matches=[],w.activeIdx=-1},x=function(e){var t={$viewValue:e};m(l,!0),n.when(b.source(w,t)).then(function(n){if(e===u.$viewValue){if(n.length>0){w.activeIdx=0,w.matches.length=0;for(var i=0;n.length>i;i++)t[b.itemName]=n[i],w.matches.push({label:b.viewMapper(w,t),model:n[i]});w.query=e,w.position=s.position(c),w.position.top=w.position.top+c.prop("offsetHeight")}else k();m(l,!1)}},function(){k(),m(l,!1)})};k(),w.query=void 0;var j;u.$parsers.push(function(e){return k(),e&&e.length>=p&&(f>0?(j&&i.cancel(j),j=i(function(){x(e)},f)):x(e)),h?e:void 0}),u.$formatters.push(function(e){var t,n,i={};return g?(i.$model=e,g(l,i)):(i[b.itemName]=e,t=b.viewMapper(l,i),n=b.viewMapper(l,{}),t!==n?t:e)}),w.select=function(e){var n,i,t={};t[b.itemName]=i=w.matches[e].model,n=b.modelMapper(l,t),v(l,n),_(l,{$item:i,$model:n,$label:b.viewMapper(l,t)}),k(),c[0].focus()},c.bind("keydown",function(e){0!==w.matches.length&&-1!==r.indexOf(e.which)&&(e.preventDefault(),40===e.which?(w.activeIdx=(w.activeIdx+1)%w.matches.length,w.$digest()):38===e.which?(w.activeIdx=(w.activeIdx?w.activeIdx:w.matches.length)-1,w.$digest()):13===e.which||9===e.which?w.$apply(function(){w.select(w.activeIdx)}):27===e.which&&(e.stopPropagation(),k(),w.$digest()))}),a.bind("click",function(){k(),w.$digest()}),c.after(e(y)(w))}}}]).directive("typeaheadPopup",function(){return{restrict:"E",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(e,t,n,i){return{restrict:"E",scope:{index:"=",match:"=",query:"="},link:function(a,s,o){var r=i(o.templateUrl)(a.$parent)||"template/typeahead/typeahead-match.html";e.get(r,{cache:t}).success(function(e){s.replaceWith(n(e.trim())(a))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n?t.replace(new RegExp(e(n),"gi"),"<strong>$&</strong>"):n}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="accordion-group">\n  <div class="accordion-heading" ><a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a></div>\n  <div class="accordion-body" collapse="!isOpen">\n    <div class="accordion-inner" ng-transclude></div>  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="accordion" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html","<div class='alert' ng-class='type && \"alert-\" + type'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a ng-click="prev()" class="carousel-control left" ng-show="slides().length > 1">&lsaquo;</a>\n    <a ng-click="next()" class="carousel-control right" ng-show="slides().length > 1">&rsaquo;</a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<table>\n  <thead>\n    <tr class="text-center">\n      <th><button type="button" class="btn pull-left" ng-click="move(-1)"><i class="icon-chevron-left"></i></button></th>\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button type="button" class="btn btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn pull-right" ng-click="move(1)"><i class="icon-chevron-right"></i></button></th>\n    </tr>\n    <tr class="text-center" ng-show="labels.length > 0">\n      <th ng-show="showWeekNumbers">#</th>\n      <th ng-repeat="label in labels">{{label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows">\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\n      <td ng-repeat="dt in row" class="text-center">\n        <button type="button" style="width:100%;" class="btn" ng-class="{\'btn-info\': dt.selected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{muted: dt.secondary}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" class="dropdown-menu">\n	<li ng-transclude></li>\n	<li class="divider"></li>\n	<li style="padding: 9px;">\n		<span class="btn-group">\n			<button class="btn btn-sm btn-inverse" ng-click="today()">Today</button>\n			<button class="btn btn-sm btn-info" ng-click="showWeeks = ! showWeeks" ng-class="{active: showWeeks}">Weeks</button>\n			<button class="btn btn-sm btn-danger" ng-click="clear()">Clear</button>\n		</span>\n		<button class="btn btn-sm btn-success pull-right" ng-click="isOpen = false">Close</button>\n	</li>\n</ul>')}]),angular.module("template/dialog/message.html",[]).run(["$templateCache",function(e){e.put("template/dialog/message.html",'<div class="modal-dialog">\n<div class="modal-content">\n<div class="modal-header">\n	<h3>{{ title }}</h3>\n</div>\n<div class="modal-body">\n	<p>{{ message }}</p>\n</div>\n<div class="modal-footer">\n	<button ng-repeat="btn in buttons" ng-click="close(btn.result)" class="btn" ng-class="btn.cssClass">{{ btn.label }}</button>\n</div>\n</div>\n</div>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="modal-backdrop fade in"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div class="modal in" ng-transclude></div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<div class="pager">\n  <ul>\n    <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  </ul>\n</div>\n')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<div class="pagination"><ul>\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  </ul>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class=\'type && "progress-bar-" + type\'></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progress.html",'<div class="progress"><progressbar ng-repeat="bar in bars" width="bar.to" old="bar.from" animate="bar.animate" type="bar.type"></progressbar></div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()">\n	<i ng-repeat="number in range" ng-mouseenter="enter(number)" ng-click="rate(number)" ng-class="{\'icon-star\': number <= val, \'icon-star-empty\': number > val}"></i>\n</span>')}]),angular.module("template/tabs/pane.html",[]).run(["$templateCache",function(e){e.put("template/tabs/pane.html",'<div class="tab-pane" ng-class="{active: selected}" ng-show="selected" ng-transclude></div>\n')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabs.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabs.html",'<div class="tabbable">\n  <ul class="nav nav-tabs">\n    <li ng-repeat="pane in panes" ng-class="{active:pane.selected}">\n      <a ng-click="select(pane)">{{pane.heading}}</a>\n    </li>\n  </ul>\n  <div class="tab-content" ng-transclude></div>\n</div>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'\n<div class="tabbable" ng-class="{\'tabs-right\': direction == \'right\', \'tabs-left\': direction == \'left\', \'tabs-below\': direction == \'below\'}">\n  <div tabset-titles="tabsAbove"></div>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n  <div tabset-titles="!tabsAbove"></div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table class="form-inline">\n	<tr class="text-center">\n		<td><a ng-click="incrementHours()" class="btn btn-link"><i class="icon-chevron-up"></i></a></td>\n		<td>&nbsp;</td>\n		<td><a ng-click="incrementMinutes()" class="btn btn-link"><i class="icon-chevron-up"></i></a></td>\n		<td ng-show="showMeridian"></td>\n	</tr>\n	<tr>\n		<td class="control-group" ng-class="{\'error\': !validHours}"><input type="text" ng-model="hours" ng-change="updateHours()" class="span1 text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2" /></td>\n		<td>:</td>\n		<td class="control-group" ng-class="{\'error\': !validMinutes}"><input type="text" ng-model="minutes" ng-change="updateMinutes()" class="span1 text-center" ng-readonly="readonlyInput" maxlength="2"></td>\n		<td ng-show="showMeridian"><button ng-click="toggleMeridian()" class="btn text-center">{{meridian}}</button></td>\n	</tr>\n	<tr class="text-center">\n		<td><a ng-click="decrementHours()" class="btn btn-link"><i class="icon-chevron-down"></i></a></td>\n		<td>&nbsp;</td>\n		<td><a ng-click="decrementMinutes()" class="btn btn-link"><i class="icon-chevron-down"></i></a></td>\n		<td ng-show="showMeridian"></td>\n	</tr>\n</table>')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" ng-bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="typeahead dropdown-menu" ng-style="{display: isOpen()&&\'block\' || \'none\', top: position.top+\'px\', left: position.left+\'px\'}">\n    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\n        <typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></typeahead-match>\n    </li>\n</ul>')}]),angular.module("template/typeahead/typeahead.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead.html",'<ul class="typeahead dropdown-menu" ng-style="{display: isOpen()&&\'block\' || \'none\', top: position.top+\'px\', left: position.left+\'px\'}">\n    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)">\n        <a tabindex="-1" ng-click="selectMatch($index)" ng-bind-html-unsafe="match.label | typeaheadHighlight:query"></a>\n    </li>\n</ul>')}]),angular.module("ui.alias",[]).config(["$compileProvider","uiAliasConfig",function(e,t){t=t||{},angular.forEach(t,function(t,n){angular.isString(t)&&(t={replace:!0,template:t}),e.directive(n,function(){return t})})}]),angular.module("ui.event",[]).directive("uiEvent",["$parse",function(e){return function(t,n,i){var a=t.$eval(i.uiEvent);angular.forEach(a,function(i,a){var s=e(i);n.bind(a,function(e){var n=Array.prototype.slice.call(arguments);n=n.splice(1),s(t,{$event:e,$params:n}),t.$$phase||t.$apply()})})}}]),angular.module("ui.format",[]).filter("format",function(){return function(e,t){var n=e;if(angular.isString(n)&&void 0!==t)if(angular.isArray(t)||angular.isObject(t)||(t=[t]),angular.isArray(t)){var i=t.length,a=function(e,n){return n=parseInt(n,10),n>=0&&i>n?t[n]:e};n=n.replace(/\$([0-9]+)/g,a)}else angular.forEach(t,function(e,t){n=n.split(":"+t).join(e)});return n}}),angular.module("ui.highlight",[]).filter("highlight",function(){return function(e,t,n){return t||angular.isNumber(t)?(e=e.toString(),t=t.toString(),n?e.split(t).join('<span class="ui-match">'+t+"</span>"):e.replace(new RegExp(t,"gi"),'<span class="ui-match">$&</span>')):e}}),angular.module("ui.include",[]).directive("uiInclude",["$http","$templateCache","$anchorScroll","$compile",function(e,t,n,i){return{restrict:"ECA",terminal:!0,compile:function(a,s){var o=s.uiInclude||s.src,r=s.fragment||"",l=s.onload||"",c=s.autoscroll;return function(a,s){function f(){var f=++d,h=a.$eval(o),m=a.$eval(r);h?e.get(h,{cache:t}).success(function(e){if(f===d){u&&u.$destroy(),u=a.$new();var t;t=m?angular.element("<div/>").html(e).find(m):angular.element("<div/>").html(e).contents(),s.html(t),i(t)(u),!angular.isDefined(c)||c&&!a.$eval(c)||n(),u.$emit("$includeContentLoaded"),a.$eval(l)}}).error(function(){f===d&&p()}):p()}var u,d=0,p=function(){u&&(u.$destroy(),u=null),s.html("")};a.$watch(r,f),a.$watch(o,f)}}}}]),angular.module("ui.indeterminate",[]).directive("uiIndeterminate",[function(){return{compile:function(e,t){return t.type&&"checkbox"===t.type.toLowerCase()?function(e,t,n){e.$watch(n.uiIndeterminate,function(e){t[0].indeterminate=!!e})}:angular.noop}}}]),angular.module("ui.inflector",[]).filter("inflector",function(){function e(e){return e.replace(/^([a-z])|\s+([a-z])/g,function(e){return e.toUpperCase()})}function t(e,t){return e.replace(/[A-Z]/g,function(e){return t+e})}var n={humanize:function(n){return e(t(n," ").split("_").join(" "))},underscore:function(e){return e.substr(0,1).toLowerCase()+t(e.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(t){return t=t.substr(0,1).toLowerCase()+e(t.split("_").join(" ")).substr(1).split(" ").join("")}};return function(e,t){return t!==!1&&angular.isString(e)?(t=t||"humanize",n[t](e)):e}}),angular.module("ui.jq",[]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","$timeout",function uiJqInjectingFunction(e,t){return{restrict:"A",compile:function(n,i){if(!angular.isFunction(n[i.uiJq]))throw new Error('ui-jq: The "'+i.uiJq+'" function does not exist');var a=e&&e[i.uiJq];return function(e,n,i){function o(){t(function(){n[i.uiJq].apply(n,s)},0,!1)}var s=[];i.uiOptions?(s=e.$eval("["+i.uiOptions+"]"),angular.isObject(a)&&angular.isObject(s[0])&&(s[0]=angular.extend({},a,s[0]))):a&&(s=[a]),i.ngModel&&n.is("select,input,textarea")&&n.bind("change",function(){n.trigger("input")}),i.uiRefresh&&e.$watch(i.uiRefresh,function(){o()}),o()}}}}]),angular.module("ui.keypress",[]).factory("keypressHelper",["$parse",function keypress(e){var t={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},n=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return function(i,a,s,o){var r,l=[];r=a.$eval(o["ui"+n(i)]),angular.forEach(r,function(t,n){var i,a;a=e(t),angular.forEach(n.split(" "),function(e){i={expression:a,keys:{}},angular.forEach(e.split("-"),function(e){i.keys[e]=!0}),l.push(i)})}),s.bind(i,function(e){var n=!(!e.metaKey||e.ctrlKey),s=!!e.altKey,o=!!e.ctrlKey,r=!!e.shiftKey,c=e.keyCode;"keypress"===i&&!r&&c>=97&&122>=c&&(c-=32),angular.forEach(l,function(i){var l=i.keys[t[c]]||i.keys[c.toString()],d=!!i.keys.meta,u=!!i.keys.alt,p=!!i.keys.ctrl,f=!!i.keys.shift;l&&d===n&&u===s&&p===o&&f===r&&a.$apply(function(){i.expression(a,{$event:e})})})})}}]),angular.module("ui.keypress").directive("uiKeydown",["keypressHelper",function(e){return{link:function(t,n,i){e("keydown",t,n,i)}}}]),angular.module("ui.keypress").directive("uiKeypress",["keypressHelper",function(e){return{link:function(t,n,i){e("keypress",t,n,i)}}}]),angular.module("ui.keypress").directive("uiKeyup",["keypressHelper",function(e){return{link:function(t,n,i){e("keyup",t,n,i)}}}]),angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/}}).directive("uiMask",["uiMaskConfig",function(e){return{priority:100,require:"ngModel",restrict:"A",compile:function(){var t=e;return function(e,n,i,a){function w(e){return angular.isDefined(e)?(O(e),s?(S(),D(),!0):C()):C()}function k(e){angular.isDefined(e)&&(c=e,s&&H())}function x(e){return s?(p=z(e||""),h=T(p),a.$setValidity("mask",h),h&&p.length?M(p):void 0):e}function j(e){return s?(p=z(e||""),h=T(p),a.$viewValue=p.length?M(p):"",a.$setValidity("mask",h),""===p&&void 0!==a.$error.required&&a.$setValidity("required",!1),h?p:void 0):e}function C(){return s=!1,E(),angular.isDefined(m)?n.attr("placeholder",m):n.removeAttr("placeholder"),angular.isDefined(_)?n.attr("maxlength",_):n.removeAttr("maxlength"),n.val(a.$modelValue),a.$viewValue=a.$modelValue,!1}function S(){p=v=z(a.$modelValue||""),f=g=M(p),h=T(p);var e=h&&p.length?f:"";i.maxlength&&n.attr("maxlength",2*r[r.length-1]),n.attr("placeholder",c),n.val(e),a.$viewValue=e}function D(){o||(n.bind("blur",I),n.bind("mousedown mouseup",F),n.bind("input keyup click focus",H),o=!0)
}function E(){o&&(n.unbind("blur",I),n.unbind("mousedown",F),n.unbind("mouseup",F),n.unbind("input",H),n.unbind("keyup",H),n.unbind("click",H),n.unbind("focus",H),o=!1)}function T(e){return e.length?e.length>=u:!0}function z(e){var t="",n=l.slice();return e=e.toString(),angular.forEach(d,function(t){e=e.replace(t,"")}),angular.forEach(e.split(""),function(e){n.length&&n[0].test(e)&&(t+=e,n.shift())}),t}function M(e){var t="",n=r.slice();return angular.forEach(c.split(""),function(i,a){e.length&&a===n[0]?(t+=e.charAt(0)||"_",e=e.substr(1),n.shift()):t+=i}),t}function P(e){var t=i.placeholder;return t!==void 0&&t[e]?t[e]:"_"}function A(){return c.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function O(e){var t=0;if(r=[],l=[],c="","string"==typeof e){u=0;var n=!1,i=e.split("");angular.forEach(i,function(e,i){$.maskDefinitions[e]?(r.push(t),c+=P(i),l.push($.maskDefinitions[e]),t++,n||u++):"?"===e?n=!0:(c+=e,t++)})}r.push(r.slice().pop()+1),d=A(),s=r.length>1?!0:!1}function I(){b=0,y=0,h&&0!==p.length||(f="",n.val(""),e.$apply(function(){a.$setViewValue("")}))}function F(e){"mousedown"===e.type?n.bind("mouseout",N):n.unbind("mouseout",N)}function N(){y=W(this),n.unbind("mouseout",N)}function H(t){t=t||{};var i=t.which,s=t.type;if(16!==i&&91!==i){var c,o=n.val(),l=g,d=z(o),u=v,p=!1,f=R(this)||0,h=b||0,m=f-h,_=r[0],w=r[d.length]||r.slice().shift(),k=y||0,x=W(this)>0,j=k>0,$=o.length>l.length||k&&o.length>l.length-k,C=l.length>o.length||k&&o.length===l.length-k,S=i>=37&&40>=i&&t.shiftKey,D=37===i,E=8===i||"keyup"!==s&&C&&-1===m,T=46===i||"keyup"!==s&&C&&0===m&&!j,P=(D||E||"click"===s)&&f>_;if(y=W(this),!S&&(!x||"click"!==s&&"keyup"!==s)){if("input"===s&&C&&!j&&d===u){for(;E&&f>_&&!L(f);)f--;for(;T&&w>f&&-1===r.indexOf(f);)f++;var A=r.indexOf(f);d=d.substring(0,A)+d.substring(A+1),p=!0}for(c=M(d),g=c,v=d,n.val(c),p&&e.$apply(function(){a.$setViewValue(d)}),$&&_>=f&&(f=_+1),P&&f--,f=f>w?w:_>f?_:f;!L(f)&&f>_&&w>f;)f+=P?-1:1;(P&&w>f||$&&!L(h))&&f++,b=f,q(this,f)}}}function L(e){return r.indexOf(e)>-1}function R(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();return t.moveStart("character",-e.value.length),t.text.length}return 0}function q(e,t){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}}function W(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var r,l,c,d,u,p,f,h,g,v,b,y,s=!1,o=!1,m=i.placeholder,_=i.maxlength,$={};i.uiOptions?($=e.$eval("["+i.uiOptions+"]"),angular.isObject($[0])&&($=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]?angular.extend(t[n],e[n]):t[n]=angular.copy(e[n]));return t}(t,$[0]))):$=t,i.$observe("uiMask",w),i.$observe("placeholder",k),a.$formatters.push(x),a.$parsers.push(j),n.bind("mousedown mouseup",F),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>1&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&1/0!==i&&i!==-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var a=i>=0?i:Math.max(n-Math.abs(i),0);n>a;a++)if(a in t&&t[a]===e)return a;return-1})}}}}]),angular.module("ui.reset",[]).value("uiResetConfig",null).directive("uiReset",["uiResetConfig",function(e){var t=null;return void 0!==e&&(t=e),{require:"ngModel",link:function(e,n,i,a){var s;s=angular.element('<a class="ui-reset" />'),n.wrap('<span class="ui-resetwrap" />').after(s),s.bind("click",function(n){n.preventDefault(),e.$apply(function(){i.uiReset?a.$setViewValue(e.$eval(i.uiReset)):a.$setViewValue(t),a.$render()})})}}}]),angular.module("ui.route",[]).directive("uiRoute",["$location","$parse",function(e,t){return{restrict:"AC",scope:!0,compile:function(n,i){var a;if(i.uiRoute)a="uiRoute";else if(i.ngHref)a="ngHref";else{if(!i.href)throw new Error("uiRoute missing a route or href property on "+n[0]);a="href"}return function(n,i,s){function l(t){var i=t.indexOf("#");i>-1&&(t=t.substr(i+1)),r=function(){o(n,e.path().indexOf(t)>-1)},r()}function c(t){var i=t.indexOf("#");i>-1&&(t=t.substr(i+1)),r=function(){var i=new RegExp("^"+t+"$",["i"]);o(n,i.test(e.path()))},r()}var o=t(s.ngModel||s.routeModel||"$uiRoute").assign,r=angular.noop;switch(a){case"uiRoute":s.uiRoute?c(s.uiRoute):s.$observe("uiRoute",c);break;case"ngHref":s.ngHref?l(s.ngHref):s.$observe("ngHref",l);break;case"href":l(s.href)}n.$on("$routeChangeSuccess",function(){r()}),n.$on("$stateChangeSuccess",function(){r()})}}}}]),angular.module("ui.scroll.jqlite",["ui.scroll"]).service("jqLiteExtras",["$log","$window",function(e,t){return{registerFor:function(e){var n,i,a,s,o,r,l;return i=angular.element.prototype.css,e.prototype.css=function(e,t){var n,a;return a=this,n=a[0],n&&3!==n.nodeType&&8!==n.nodeType&&n.style?i.call(a,e,t):void 0},r=function(e){return e&&e.document&&e.location&&e.alert&&e.setInterval},l=function(e,t,n){var i,a,s,o,l;return i=e[0],l={top:["scrollTop","pageYOffset","scrollLeft"],left:["scrollLeft","pageXOffset","scrollTop"]}[t],a=l[0],o=l[1],s=l[2],r(i)?angular.isDefined(n)?i.scrollTo(e[s].call(e),n):o in i?i[o]:i.document.documentElement[a]:angular.isDefined(n)?i[a]=n:i[a]},t.getComputedStyle?(s=function(e){return t.getComputedStyle(e,null)},n=function(e,t){return parseFloat(t)}):(s=function(e){return e.currentStyle},n=function(e,t){var n,i,a,s,o,r,l;return n=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,s=new RegExp("^("+n+")(?!px)[a-z%]+$","i"),s.test(t)?(l=e.style,i=l.left,o=e.runtimeStyle,r=o&&o.left,o&&(o.left=l.left),l.left=t,a=l.pixelLeft,l.left=i,r&&(o.left=r),a):parseFloat(t)}),a=function(e,t){var i,a,o,l,c,d,u,p,f,h,m,_,g;return r(e)?(i=document.documentElement[{height:"clientHeight",width:"clientWidth"}[t]],{base:i,padding:0,border:0,margin:0}):(g={width:[e.offsetWidth,"Left","Right"],height:[e.offsetHeight,"Top","Bottom"]}[t],i=g[0],u=g[1],p=g[2],d=s(e),m=n(e,d["padding"+u])||0,_=n(e,d["padding"+p])||0,a=n(e,d["border"+u+"Width"])||0,o=n(e,d["border"+p+"Width"])||0,l=d["margin"+u],c=d["margin"+p],f=n(e,l)||0,h=n(e,c)||0,{base:i,padding:m+_,border:a+o,margin:f+h})},o=function(e,t,n){var i,o,r;return o=a(e,t),o.base>0?{base:o.base-o.padding-o.border,outer:o.base,outerfull:o.base+o.margin}[n]:(i=s(e),r=i[t],(0>r||null===r)&&(r=e.style[t]||0),r=parseFloat(r)||0,{base:r-o.padding-o.border,outer:r,outerfull:r+o.padding+o.border+o.margin}[n])},angular.forEach({before:function(e){var t,n,i,a,s,o,r;if(s=this,n=s[0],a=s.parent(),t=a.contents(),t[0]===n)return a.prepend(e);for(i=o=1,r=t.length-1;r>=1?r>=o:o>=r;i=r>=1?++o:--o)if(t[i]===n)return angular.element(t[i-1]).after(e),void 0;throw new Error("invalid DOM structure "+n.outerHTML)},height:function(e){var t;return t=this,angular.isDefined(e)?(angular.isNumber(e)&&(e+="px"),i.call(t,"height",e)):o(this[0],"height","base")},outerHeight:function(e){return o(this[0],"height",e?"outerfull":"outer")},offset:function(e){var t,n,i,a,s,o;return s=this,arguments.length?void 0===e?s:e:(t={top:0,left:0},a=s[0],(n=a&&a.ownerDocument)?(i=n.documentElement,a.getBoundingClientRect&&(t=a.getBoundingClientRect()),o=n.defaultView||n.parentWindow,{top:t.top+(o.pageYOffset||i.scrollTop)-(i.clientTop||0),left:t.left+(o.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):void 0)},scrollTop:function(e){return l(this,"top",e)},scrollLeft:function(e){return l(this,"left",e)}},function(t,n){return e.prototype[n]?void 0:e.prototype[n]=t})}}}]).run(["$log","$window","jqLiteExtras",function(e,t,n){return t.jQuery?void 0:n.registerFor(angular.element)}]),angular.module("ui.scroll",[]).directive("ngScrollViewport",["$log",function(){return{controller:["$scope","$element",function(e,t){return t}]}}]).directive("ngScroll",["$log","$injector","$rootScope","$timeout",function(e,t,n,i){return{require:["?^ngScrollViewport"],transclude:"element",priority:1e3,terminal:!0,compile:function(a,s,o){return function(s,r,l,c){var d,u,p,f,h,m,_,g,v,b,y,w,k,x,j,$,C,S,D,E,T,z,M,P,A,O,I,F,N,H,L,R,q,W,Y,U;if(P=l.ngScroll.match(/^\s*(\w+)\s+in\s+(\w+)\s*$/),!P)throw new Error('Expected ngScroll in form of "item_ in _datasource_" but got "'+l.ngScroll+'"');if(z=P[1],w=P[2],E=function(e){return angular.isObject(e)&&e.get&&angular.isFunction(e.get)},y=s[w],!E(y)&&(y=t.get(w),!E(y)))throw new Error(w+" is not a valid datasource");return g=Math.max(3,+l.bufferSize||10),_=function(){return U.height()*Math.max(.1,+l.padding||.1)},L=function(e){return e[0].scrollHeight||e[0].document.documentElement.scrollHeight},d=null,o(W=s.$new(),function(e){var t,n,i,s,o,r;if(s=e[0].localName,"dl"===s)throw new Error("ng-scroll directive does not support <"+e[0].localName+"> as a repeating tag: "+e[0].outerHTML);return"li"!==s&&"tr"!==s&&(s="div"),r=c[0]||angular.element(window),r.css({"overflow-y":"auto",display:"block"}),i=function(e){var t,n,i;switch(e){case"tr":return i=angular.element("<table><tr><td><div></div></td></tr></table>"),t=i.find("div"),n=i.find("tr"),n.paddingHeight=function(){return t.height.apply(t,arguments)},n;default:return n=angular.element("<"+e+"></"+e+">"),n.paddingHeight=n.height,n}},n=function(e,t,n){return t[{top:"before",bottom:"after"}[n]](e),{paddingHeight:function(){return e.paddingHeight.apply(e,arguments)},insert:function(t){return e[{top:"after",bottom:"before"}[n]](t)}}},o=n(i(s),a,"top"),t=n(i(s),a,"bottom"),W.$destroy(),d={viewport:r,topPadding:o.paddingHeight,bottomPadding:t.paddingHeight,append:t.insert,prepend:o.insert,bottomDataPos:function(){return L(r)-t.paddingHeight()},topDataPos:function(){return o.paddingHeight()}}}),U=d.viewport,S=1,A=1,m=[],O=[],x=!1,f=!1,M=y.loading||function(){},T=!1,F=function(e,t){var n,i;for(n=i=e;t>=e?t>i:i>t;n=t>=e?++i:--i)m[n].scope.$destroy(),m[n].element.remove();return m.splice(e,t-e)},I=function(){return S=1,A=1,F(0,m.length),d.topPadding(0),d.bottomPadding(0),O=[],x=!1,f=!1,u(!1)},h=function(){return U.scrollTop()+U.height()},Y=function(){return U.scrollTop()},R=function(){return!x&&h()+_()>d.bottomDataPos()},v=function(){var t,n,i,a,s,o;for(t=0,a=0,n=s=o=m.length-1;(0>=o?0>=s:s>=0)&&(i=m[n].element.outerHeight(!0),d.bottomDataPos()-t-i>h()+_());n=0>=o?++s:--s)t+=i,a++,x=!1;return a>0?(d.bottomPadding(d.bottomPadding()+t),F(m.length-a,m.length),A-=a,e.log("clipped off bottom "+a+" bottom padding "+d.bottomPadding())):void 0},q=function(){return!f&&d.topDataPos()>Y()-_()},b=function(){var t,n,i,a,s,o;for(a=0,i=0,s=0,o=m.length;o>s&&(t=m[s],n=t.element.outerHeight(!0),Y()-_()>d.topDataPos()+a+n);s++)a+=n,i++,f=!1;return i>0?(d.topPadding(d.topPadding()+a),F(0,i),S+=i,e.log("clipped off top "+i+" top padding "+d.topPadding())):void 0},k=function(e,t){return T||(T=!0,M(!0)),1===O.push(e)?$(t):void 0},D=function(e,t){var n,i,a;return n=s.$new(),n[z]=t,i=e>S,n.$index=e,i&&n.$index--,a={scope:n},o(n,function(t){return a.element=t,i?e===A?(d.append(t),m.push(a)):(m[e-S].element.after(t),m.splice(e-S+1,0,a)):(d.prepend(t),m.unshift(a))}),{appended:i,wrapper:a}},p=function(e,t){var n;return e?d.bottomPadding(Math.max(0,d.bottomPadding()-t.element.outerHeight(!0))):(n=d.topPadding()-t.element.outerHeight(!0),n>=0?d.topPadding(n):U.scrollTop(U.scrollTop()+t.element.outerHeight(!0)))},u=function(t,n,a){var s;return s=function(){return e.log("top {actual="+d.topDataPos()+" visible from="+Y()+" bottom {visible through="+h()+" actual="+d.bottomDataPos()+"}"),R()?k(!0,t):q()&&k(!1,t),a?a():void 0},n?i(function(){var e,t,i;for(t=0,i=n.length;i>t;t++)e=n[t],p(e.appended,e.wrapper);return s()}):s()},C=function(e,t){return u(e,t,function(){return O.shift(),0===O.length?(T=!1,M(!1)):$(e)})},$=function(t){var n;return n=O[0],n?m.length&&!R()?C(t):y.get(A,g,function(n){var i,a,s,o;if(a=[],0===n.length)x=!0,d.bottomPadding(0),e.log("appended: requested "+g+" records starting from "+A+" recieved: eof");else{for(b(),s=0,o=n.length;o>s;s++)i=n[s],a.push(D(++A,i));e.log("appended: requested "+g+" received "+n.length+" buffer size "+m.length+" first "+S+" next "+A)}return C(t,a)}):m.length&&!q()?C(t):y.get(S-g,g,function(n){var i,a,s,o;if(a=[],0===n.length)f=!0,d.topPadding(0),e.log("prepended: requested "+g+" records starting from "+(S-g)+" recieved: bof");else{for(v(),i=s=o=n.length-1;0>=o?0>=s:s>=0;i=0>=o?++s:--s)a.unshift(D(--S,n[i]));e.log("prepended: requested "+g+" received "+n.length+" buffer size "+m.length+" first "+S+" next "+A)}return C(t,a)})},N=function(){return n.$$phase||T?void 0:(u(!1),s.$apply())},U.bind("resize",N),H=function(){return n.$$phase||T?void 0:(u(!0),s.$apply())},U.bind("scroll",H),s.$watch(y.revision,function(){return I()}),j=y.scope?y.scope.$new():s.$new(),s.$on("$destroy",function(){return j.$destroy(),U.unbind("resize",N),U.unbind("scroll",H)}),j.$on("update.items",function(e,t,n){var i,a,s,o,r;if(angular.isFunction(t))for(a=function(e){return t(e.scope)},s=0,o=m.length;o>s;s++)i=m[s],a(i);else(r=t-S-1)>=0&&m.length>r&&(m[t-S-1].scope[z]=n);return null}),j.$on("delete.items",function(e,t){var n,i,a,s,o,r,l,c,d,p,f,h;if(angular.isFunction(t)){for(a=[],r=0,d=m.length;d>r;r++)i=m[r],a.unshift(i);for(o=function(e){return t(e.scope)?(F(a.length-1-n,a.length-n),A--):void 0},n=l=0,p=a.length;p>l;n=++l)s=a[n],o(s)}else(h=t-S-1)>=0&&m.length>h&&(F(t-S-1,t-S),A--);for(n=c=0,f=m.length;f>c;n=++c)i=m[n],i.scope.$index=S+n;return u(!1)}),j.$on("insert.item",function(e,t,n){var i,a,s,o,r,l,c,d,p,f,h,_;if(a=[],angular.isFunction(t)){for(s=[],l=0,p=m.length;p>l;l++)n=m[l],s.unshift(n);for(r=function(e){var s,o,r,l,c;if(o=t(e.scope)){if(D=function(e,t){return D(e,t),A++},angular.isArray(o)){for(c=[],s=r=0,l=o.length;l>r;s=++r)n=o[s],c.push(a.push(D(i+s,n)));return c}return a.push(D(i,o))}},i=c=0,f=s.length;f>c;i=++c)o=s[i],r(o)}else(_=t-S-1)>=0&&m.length>_&&(a.push(D(t,n)),A++);for(i=d=0,h=m.length;h>d;i=++d)n=m[i],n.scope.$index=S+i;return u(!1,a)})}}}}]),angular.module("ui.scrollfix",[]).directive("uiScrollfix",["$window",function(e){return{require:"^?uiScrollfixTarget",link:function(t,n,i,a){function r(){var t;if(angular.isDefined(e.pageYOffset))t=e.pageYOffset;else{var a=document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body;t=a.scrollTop}!n.hasClass("ui-scrollfix")&&t>i.uiScrollfix?n.addClass("ui-scrollfix"):n.hasClass("ui-scrollfix")&&i.uiScrollfix>t&&n.removeClass("ui-scrollfix")}var s=n[0].offsetTop,o=a&&a.$element||angular.element(e);i.uiScrollfix?"string"==typeof i.uiScrollfix&&("-"===i.uiScrollfix.charAt(0)?i.uiScrollfix=s-parseFloat(i.uiScrollfix.substr(1)):"+"===i.uiScrollfix.charAt(0)&&(i.uiScrollfix=s+parseFloat(i.uiScrollfix.substr(1)))):i.uiScrollfix=s,o.on("scroll",r),t.$on("$destroy",function(){o.off("scroll",r)})}}}]).directive("uiScrollfixTarget",[function(){return{controller:["$element",function(e){this.$element=e}]}}]),angular.module("ui.showhide",[]).directive("uiShow",[function(){return function(e,t,n){e.$watch(n.uiShow,function(e){e?t.addClass("ui-show"):t.removeClass("ui-show")})}}]).directive("uiHide",[function(){return function(e,t,n){e.$watch(n.uiHide,function(e){e?t.addClass("ui-hide"):t.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){return function(e,t,n){e.$watch(n.uiToggle,function(e){e?t.removeClass("ui-hide").addClass("ui-show"):t.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.unique",[]).filter("unique",["$parse",function(e){return function(t,n){if(n===!1)return t;if((n||angular.isUndefined(n))&&angular.isArray(t)){var i=[],a=angular.isString(n)?e(n):function(e){return e},s=function(e){return angular.isObject(e)?a(e):e};angular.forEach(t,function(e){for(var t=!1,n=0;i.length>n;n++)if(angular.equals(s(i[n]),s(e))){t=!0;break}t||i.push(e)}),t=i}return t}}]),angular.module("ui.validate",[]).directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){function r(t){return angular.isString(t)?(e.$watch(t,function(){angular.forEach(s,function(e){e(i.$modelValue)})}),void 0):angular.isArray(t)?(angular.forEach(t,function(t){e.$watch(t,function(){angular.forEach(s,function(e){e(i.$modelValue)})})}),void 0):(angular.isObject(t)&&angular.forEach(t,function(t,n){angular.isString(t)&&e.$watch(t,function(){s[n](i.$modelValue)}),angular.isArray(t)&&angular.forEach(t,function(t){e.$watch(t,function(){s[n](i.$modelValue)})})}),void 0)}var a,s={},o=e.$eval(n.uiValidate);o&&(angular.isString(o)&&(o={validator:o}),angular.forEach(o,function(t,n){a=function(a){var s=e.$eval(t,{$value:a});return angular.isObject(s)&&angular.isFunction(s.then)?(s.then(function(){i.$setValidity(n,!0)},function(){i.$setValidity(n,!1)}),a):s?(i.$setValidity(n,!0),a):(i.$setValidity(n,!1),a)},s[n]=a,i.$formatters.push(a),i.$parsers.push(a)}),n.uiValidateWatch&&r(e.$eval(n.uiValidateWatch)))}}}),angular.module("ui.utils",["ui.event","ui.format","ui.highlight","ui.include","ui.indeterminate","ui.inflector","ui.jq","ui.keypress","ui.mask","ui.reset","ui.route","ui.scrollfix","ui.scroll","ui.scroll.jqlite","ui.showhide","ui.unique","ui.validate"]);var _gaq=_gaq||[];angular.module("wt.analytics",[]).run(["$http",function(){"use strict";_gaq.push(["_setAccount",kzi.config.googleAnalytics]),_gaq.push(["_trackPageview"]);var t=document.createElement("script");if(t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js","dev"!==wt.env){var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}}]).service("analytics",function(e,t,n,i){"use strict";var a=function(){var e=s(n.path(),i);t._gaq.push(["_trackPageview",e])};e.$on("$viewContentLoaded",a);var s=function(e,t){for(var n in t){var i="/"+t[n];e=e.replace(i,"")}var a=decodeURIComponent($.param(t));return""===a?e:e+"?"+a}}),angular.module("wt.directive.tpls",["/ycjs/tpl/404.html","/ycjs/tpl/account/account_apps.html","/ycjs/tpl/account/account_level.html","/ycjs/tpl/account/account_message.html","/ycjs/tpl/account/account_projects.html","/ycjs/tpl/account/account_security.html","/ycjs/tpl/account/account_settings.html","/ycjs/tpl/account/account_tabs.html","/ycjs/tpl/account/account_teams.html","/ycjs/tpl/account/account_trophies.html","/ycjs/tpl/account/account_twofactor.html","/ycjs/tpl/account/pop_decommissioning_confirm.html","/ycjs/tpl/activity/activity.html","/ycjs/tpl/activity/activity_feed_template.html","/ycjs/tpl/activity/activity_filter.html","/ycjs/tpl/activity/activity_list.html","/ycjs/tpl/activity/pop_filter_activity.html","/ycjs/tpl/activity/project_activities.html","/ycjs/tpl/blog/pop_add_edit_category.html","/ycjs/tpl/blog/pop_delete_article.html","/ycjs/tpl/blog/pop_delete_category.html","/ycjs/tpl/browse/browse_files.html","/ycjs/tpl/browse/browse_pages.html","/ycjs/tpl/browse/browse_posts.html","/ycjs/tpl/browse/browse_tasks.html","/ycjs/tpl/common/comment_list.html","/ycjs/tpl/common/left_menu.html","/ycjs/tpl/common/pay_dialog.html","/ycjs/tpl/common/pop_add_image.html","/ycjs/tpl/common/pop_add_link.html","/ycjs/tpl/common/pop_comment_menu.html","/ycjs/tpl/common/pop_comment_metion.html","/ycjs/tpl/common/pop_datepicker.html","/ycjs/tpl/common/pop_delete_confirm.html","/ycjs/tpl/common/pop_emojis.html","/ycjs/tpl/common/pop_new_feature.html","/ycjs/tpl/common/pop_star_projects.html","/ycjs/tpl/common/shortcutkey_dialog.html","/ycjs/tpl/common/tab_comment_activity.html","/ycjs/tpl/common/watch_filter.html","/ycjs/tpl/dashboard/calendar.html","/ycjs/tpl/dashboard/dashboard.html","/ycjs/tpl/dashboard/dashboard_left_menu.html","/ycjs/tpl/dashboard/feed.html","/ycjs/tpl/dashboard/inbox.html","/ycjs/tpl/dashboard/projects.html","/ycjs/tpl/dashboard/projects_archive.html","/ycjs/tpl/dashboard/search_result.html","/ycjs/tpl/dashboard/tasks.html","/ycjs/tpl/dashboard/tasks_completed.html","/ycjs/tpl/dashboard/tasks_expired.html","/ycjs/tpl/dashboard/tasks_graph.html","/ycjs/tpl/dashboard/tasks_left_menu.html","/ycjs/tpl/directive/activity.html","/ycjs/tpl/directive/avatar.html","/ycjs/tpl/directive/avatar_pop.html","/ycjs/tpl/directive/badges.html","/ycjs/tpl/directive/confirm_password.html","/ycjs/tpl/directive/datepicker.html","/ycjs/tpl/directive/feed.html","/ycjs/tpl/directive/new_comment.html","/ycjs/tpl/directive/notice.html","/ycjs/tpl/directive/pop_datepicker.html","/ycjs/tpl/directive/task.html","/ycjs/tpl/directive/task.html.bak","/ycjs/tpl/directive/task_composer.html","/ycjs/tpl/entity/event.html","/ycjs/tpl/entity/file.html","/ycjs/tpl/entity/page.html","/ycjs/tpl/entity/post.html","/ycjs/tpl/entity/task.html","/ycjs/tpl/forum/forum_index.html","/ycjs/tpl/header/header.html","/ycjs/tpl/header/header_menu.html","/ycjs/tpl/header/header_search.html","/ycjs/tpl/header/pop_global_fileupload.html","/ycjs/tpl/header/pop_new_menu.html","/ycjs/tpl/header/pop_search.html","/ycjs/tpl/project/pop_project_info.html","/ycjs/tpl/project/prj_not_found.html","/ycjs/tpl/project/prj_right_sidebar.html","/ycjs/tpl/project/prj_title_panel.html","/ycjs/tpl/project/project_add.html","/ycjs/tpl/project/chat/project_chats.html","/ycjs/tpl/project/common/pop_edit_watchers.html","/ycjs/tpl/project/common/pop_watch_member.html","/ycjs/tpl/project/event/pop_add_event.html","/ycjs/tpl/project/event/pop_delete_event.html","/ycjs/tpl/project/event/pop_event_member.html","/ycjs/tpl/project/event/pop_event_more_menu.html","/ycjs/tpl/project/event/project_events.html","/ycjs/tpl/project/file/pop_add_folder.html","/ycjs/tpl/project/file/pop_attach.html","/ycjs/tpl/project/file/pop_attachment_menu.html","/ycjs/tpl/project/file/pop_delete_file.html","/ycjs/tpl/project/file/pop_file_menu.html","/ycjs/tpl/project/file/pop_file_more_menu.html","/ycjs/tpl/project/file/pop_file_watcher.html","/ycjs/tpl/project/file/pop_files.html","/ycjs/tpl/project/file/pop_folder_menu.html","/ycjs/tpl/project/file/pop_move_file.html","/ycjs/tpl/project/file/pop_watch_file.html","/ycjs/tpl/project/file/project_files.html","/ycjs/tpl/project/graph/project_graphs.html","/ycjs/tpl/project/member/pop_add_prj_member.html","/ycjs/tpl/project/member/pop_user_menu.html","/ycjs/tpl/project/page/add_or_edit_page.html","/ycjs/tpl/project/page/pop_delete_page.html","/ycjs/tpl/project/page/pop_page_action.html","/ycjs/tpl/project/page/pop_pages_more_menu.html","/ycjs/tpl/project/page/pop_parents_page.html","/ycjs/tpl/project/page/project_pages.html","/ycjs/tpl/project/post/add_or_edit_post.html","/ycjs/tpl/project/post/pop_delete_post.html","/ycjs/tpl/project/post/pop_edit_post_watchers.html","/ycjs/tpl/project/post/pop_post_action.html","/ycjs/tpl/project/post/pop_posts_more_menu.html","/ycjs/tpl/project/post/pop_watch_member.html","/ycjs/tpl/project/post/project_posts.html","/ycjs/tpl/project/setting/project_setting.html","/ycjs/tpl/project/task/pop_add_entry.html","/ycjs/tpl/project/task/pop_add_task.html","/ycjs/tpl/project/task/pop_add_task_entry.html","/ycjs/tpl/project/task/pop_archive_entry_menu.html","/ycjs/tpl/project/task/pop_assign_label.html","/ycjs/tpl/project/task/pop_assign_member.html","/ycjs/tpl/project/task/pop_copy_task.html","/ycjs/tpl/project/task/pop_delete_task.html","/ycjs/tpl/project/task/pop_entry_menu.html","/ycjs/tpl/project/task/pop_entry_more_menu.html","/ycjs/tpl/project/task/pop_mod_set_labels.html","/ycjs/tpl/project/task/pop_move_task.html","/ycjs/tpl/project/task/pop_task_filter.html","/ycjs/tpl/project/task/pop_task_member.html","/ycjs/tpl/project/task/pop_task_menu.html","/ycjs/tpl/project/task/pop_task_watcher.html","/ycjs/tpl/project/task/pop_unarchive_task.html","/ycjs/tpl/project/task/pop_watch_task.html","/ycjs/tpl/project/task/project_archive_tasks.html","/ycjs/tpl/project/task/project_tasks.html","/ycjs/tpl/project/trash/pop_empty_trash.html","/ycjs/tpl/project/trash/pop_trash_menu.html","/ycjs/tpl/project/trash/project_trash.html","/ycjs/tpl/team/free_apply.html","/ycjs/tpl/team/pop_member_menu.html","/ycjs/tpl/team/pop_team_list.html","/ycjs/tpl/team/pop_transfer_team.html","/ycjs/tpl/team/team.html","/ycjs/tpl/team/team_add.html","/ycjs/tpl/team/team_admin_basic.html","/ycjs/tpl/team/team_admin_billing.html","/ycjs/tpl/team/team_admin_billing_details.html","/ycjs/tpl/team/team_admin_change_quota.html","/ycjs/tpl/team/team_admin_consultant.html","/ycjs/tpl/team/team_admin_degrade.html","/ycjs/tpl/team/team_admin_export.html","/ycjs/tpl/team/team_admin_members.html","/ycjs/tpl/team/team_admin_pay_coupon.html","/ycjs/tpl/team/team_admin_pay_online.html","/ycjs/tpl/team/team_admin_payment.html","/ycjs/tpl/team/team_admin_projects.html","/ycjs/tpl/team/team_admin_security.html","/ycjs/tpl/team/team_admin_sidebar.html","/ycjs/tpl/team/team_admin_summary.html","/ycjs/tpl/team/team_admin_tabs.html","/ycjs/tpl/team/team_admin_upgrade.html","/ycjs/tpl/team/team_mask_panel.html","/ycjs/tpl/team/team_member_invite.html","/ycjs/tpl/team/team_not_found.html","/ycjs/tpl/team/team_setting.html","/ycjs/tpl/user/help.html","/ycjs/tpl/user/pop_user_setting.html","/ycjs/tpl/user/share.html","/ycjs/tpl/user/user_profile.html"]),angular.module("/ycjs/tpl/404.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/404.html",'<div id="main" class="row"> <div class="row"> <div class="col-xs-6 mt_180" style="margin-left: 25%"> <div class="alert alert-danger"> <strong>è­¦å!</strong> æ²¡ææ¾å°ãå¾æ±æ­ï¼é¡µé¢å·²ä¸¢å¤±ã? <br/> <p ng-hide="global.is_login">è¯¥é¡µå¯è½æ¯ç§æé¡µãè¯·ç»éï¼å¹¶åæ¬¡å°è¯è®¿é®ã? <a class="js-real-link" wt-tracker="404 Page|Main|Goto Sign" href="/signin">ç»å½</a>. <br/></p> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/account_apps.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_apps.html",' <div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-user mr_10"></i>å¸æ·è®¾ç½®</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container no_sidebar height-nonav" ng-show="global.loading_done" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/account/account_tabs.html\'"></ng-include> </dt> <dd> <div data-ng-hide="part_loading_done" class="part-loading mt_20"></div> <div data-ng-show="part_loading_done" class="table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>åºç¨åç§°</th> <th>æææ¶é´</th> <th>è¿ææ¶é´</th> <th>è®¾ç½®</th> </tr> </thead> <tbody> <tr data-ng-repeat="app in account_apps"> <td>{{app.client_id | GetClientName}} <span class="edition ng-binding edition-free" ng-class="{1:\'edition-free\', 2:\'edition-business\', 3:\'edition-nonprofit\'}[team.edition]"> å®æ¹ </span> </td> <td> {{app.create_date | timeFullFormatZHCN}} </td> <td> æ°¸ä¸è¿æ </td> <td> <a href="javascript:;" class="btn" data-placement="bottom" data-ng-click="js_pop_decommissioning(app)">è§£é¤ææ</a> </td> </tr> <tr> <td colspan="4" data-ng-show="account_apps.length == 0"> æ²¡æææåºç¨ </td> </tr> </tbody> </table> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/account_level.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_level.html",'<dl class="frame" data-minheight="160"> <dt> <span class="title">åºæ¬è®¾ç½®</span> <ul class="tabs"> <li> <a ng-class="{\'active\':current_tab == \'basic\'}" href="javascript:;" ng-click="change_tab(\'basic\')">ä¿®æ¹ä¸ªäººèµæ</a> </li> <li> <a ng-class="{\'active\':current_tab == \'avatar\'}" href="javascript:;" ng-click="change_tab(\'avatar\')">ä¿®æ¹å¤´å</a> </li> <li> <a ng-class="{\'active\':current_tab == \'email\'}" href="javascript:;" ng-click="change_tab(\'email\')">ä¿®æ¹é®ç®±</a> </li> </ul> </dt> <dd> </dd> </dl>')}]),angular.module("/ycjs/tpl/account/account_message.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_message.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-user mr_10"></i>å¸æ·è®¾ç½®</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container height-nonav" ng-show="global.loading_done" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/account/account_tabs.html\'"></ng-include> </dt> <dd> <div data-ng-hide="part_loading_done" class="part-loading mt_20"></div> <div data-ng-show="part_loading_done" > <div class="sub-section"> <h5>é®ä»¶éç¥</h5> <span>å½ææ°ä»»å¡åéæèææ°çè¯é¢è¦æ±ä½ å³æ³¨æ¶ï¼ä¼åéé®ä»¶ç»ä½?</span> <div class="radio"> <label> <input type="radio" name="notice_by_email" ng-change="js_email_notice(1)" ng-model="notice_by_email" value="1"/> å¼å¯é®ä»¶éç¥ </label> </div> <div class="radio"> <label> <input type="radio" name="notice_by_email" ng-change="js_email_notice(0)" ng-model="notice_by_email" value="0"/> å³é­é®ä»¶éç¥ </label> </div> </div> <div class="sub-section"> <h5>åææ°è®¾ç½?</h5> <span>å½ä½ Webçæ¯å¨çº¿ç¶ææ¶ï¼ä¸åéé®ä»¶éç¥ï¼é¿åéå¤æ¶æ¯çææ°</span> <div class="radio"> <label> <input type="radio" name="notice_for_smart" ng-change="js_smart_notice(1)" value="1" ng-model="notice_for_smart"/> åææ°å¼å? </label> </div> <div class="radio"> <label> <input type="radio" name="notice_for_smart" ng-change="js_smart_notice(0)" value="0" ng-model="notice_for_smart"/> åææ°å³é? </label> </div> </div> <div class="sub-section"> <h5>æ¡é¢éç¥</h5> <span>å½æéè¦æä½æèææåATä½ æ¶ï¼ç³»ç»ä¼å¼¹åºæ°æ³¡æç¤ºï¼åªå¯¹ChromeåSafariææ</span> <div class="radio"> <label> <input type="radio" name="notice_for_desktop" ng-change="js_desk_notice(1)" value="1" ng-model="desk_notice"/> å¼å¯æ¡é¢éç¥ </label> </div> <div class="radio"> <label> <input type="radio" name="notice_for_desktop" ng-change="js_desk_notice(0)" value="0" ng-model="desk_notice"/> å³é­æ¡é¢éç¥ </label> </div> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/account_projects.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_projects.html",' <div class="layout_content"> <div class="layout_content_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/account/account_sidebar.html\'"></ng-include> </div> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-user mr_10"></i>å¸æ·è®¾ç½®</h3> </div> <div class="main"> <div class="pull-right"> <a href="/project/add" class="btn btn-danger">æ°å»ºé¡¹ç®</a> </div> </div> </div> </div> <div class="center-panel-container height-nonav" ng-show="global.loading_done" wt-scroll> <div class="panel-section"> <h4>é¡¹ç®ç®¡ç</h4> </div> <div class="panel-section table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>é¡¹ç®å?</th> <th>è´è´£äº?</th> <th>æåäººæ°</th> <th>æé</th> <th>ç®¡ç</th> </tr> </thead> <tbody> <tr data-ng-repeat="project in account_projects"> <td><a href="/project/{{project.pid}}">{{project.name}}</a></td> <td> <wt-avatar ng-repeat="admin in project.admins" member="admin" name="true" size="30" class="mr_15"></wt-avatar> </td> <td>{{project.member_count}}</td> <td>{{ project.curr_role | prj_role }}</td> <td> <a href="/project/{{project.pid}}/setting"> è®¾ç½® </a> </td> </tr> <tr> <td colspan="5" data-ng-show="account_projects.length == 0"> è¿æ²¡æåä¸ä»»ä½é¡¹ç? </td> </tr> </tbody> </table> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/account_security.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_security.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-user mr_10"></i>å¸æ·è®¾ç½®</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/account/account_tabs.html\'"></ng-include> </dt> <dd> <div data-ng-hide="part_loading_done" class="part-loading mt_20"></div> <div class="table-list" data-ng-show="part_loading_done"> <table class="table table-hover table-bordered"> <thead> <tr> <th>#</th> <th>ç»å½å°å</th> <th>å®¢æ·ç«?</th> <th>ç»å½æ¶é´</th> </tr> </thead> <tbody> <tr data-ng-repeat="history in account_histories"> <td>{{from_index + $index}}</td> <td>{{history.location + \'ï¼\'+ history.ipaddress + \'ï¼\'}}</td> <td> Webç«? </td> <td><span class="mr_15">{{history.create_date | timeFormatZHCN}}</span> {{history.create_date | fromNow}} </td> </tr> <tr> <td colspan="3" data-ng-show="account_histories.length == 0"> è¿æ²¡æä»»ä½ç»å½è®°å½? </td> </tr> </tbody> </table> <div class="pull-right" wt-pagination="security_pagination_opts"></div> </div> </dd> </dl> </div> </div> </div>')
}]),angular.module("/ycjs/tpl/account/account_settings.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_settings.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-user mr_10"></i>å¸æ·è®¾ç½®</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container height-nonav" wt-scroll ng-show="global.loading_done"> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/account/account_tabs.html\'"></ng-include> </dt> <dd> <div data-ng-hide="part_loading_done" class="part-loading mt_20"></div> <div data-ng-show="part_loading_done"> <div class="panel-section"> <p> <wt-avatar member="global.me" size="80" wt-disable-drag class="mr_15"></wt-avatar> ä½ å¯ä»¥éæ©png/jpgå¾çï¼?180*180ï¼ä½ä¸ºå¤´å? </p> <form name="file_upload" action="{{action_url}}" method="POST" enctype="multipart/form-data" data-ng-app="wt" data-file-upload="avatar_upload_option" class="help-inline p_0 m_0 w_300"> <span class="fileinput-button btn-local-upload mr_15 w_300"> <span class="btn w_120"> <span ng-show="!upload_enabled"><i class="icon-spinner icon-spin icon-large"></i> ä¸ä¼ ä¸?</span> <span ng-show="upload_enabled">ä¿®æ¹å¤´å<input type="file" name="files[]" title="ä¸ä¼ æ°å¤´å?"/></span> </span> </span> </form> <hr/> </div> <div class="panel-section"> <h4>ä¿®æ¹ä¸ªäººèµæ</h4> </div> <div class="panel-section"> <form name="user_update_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="form-horizontal wt-form w_660" novalidate> <div class="form-group"> <label class="col-xs-2 control-label p_0">å§åï¼?</label> <div class="col-xs-10"> <input autofocus="" name="user_name" type="text" class="form-control" ng-model="name" placeholder="å§å" required/> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label p_0">ä¸ªæ§ç­¾åï¼</label> <div class="col-xs-10"> <textarea class="form-control help-block" rows="4" ng-model="desc" placeholder="ä¸ªæ§ç­¾åï¼å¯ç©ºï¼?"/> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label p_0"></label> <div class="col-xs-10"> <button wt-form-submit="js_user_update(user_update_form, name,desc)" class="btn btn-success mr_15" loading-status="is_updating" data-loading-text="ä¿å­ä¸?...">ä¿å­ </button> </div> </div> </form> <hr/> </div> <div class="password"> <div class="panel-section"> <h4>ä¿®æ¹å¯ç </h4> </div> <div class="panel-section"> <form name="user_pwd_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="form-horizontal wt-form w_660" novalidate> <div class="form-group"> <label class="col-xs-2 control-label p_0">åå¯ç ï¼</label> <div class="col-xs-10"> <input name="pwd_old" autofocus="" type="password" class="form-control" ng-model="pwd_old" placeholder="åå¯ç ?" required/> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label p_0">æ°å¯ç ï¼</label> <div class="col-xs-10"> <input name="pwd_new" type="password" class="form-control" ng-model="pwd1" placeholder="æ°å¯ç ?" ng-minlength="6" required/> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label p_0">éå¤å¯ç ï¼?</label> <div class="col-xs-10"> <input name="pwd_again" type="password" class="form-control" ng-model="pwd2" wt-repeat-password="pwd_new" placeholder="åè¾å¥ä¸æ¬?"/> </div> </div> <div class="form-group" ng-show="user_pwd_form.$errors.length > 0"> <label class="col-xs-2 control-label p_0"></label> <div class="col-xs-10"> <div class="alert alert-danger mb_0"> <i class="icon-remove-sign"></i> {{user_pwd_form.$errors[0]}} </div> </div> </div> <div class="form-group" ng-show="change_pwd_success"> <label class="col-xs-2 control-label p_0"></label> <div class="col-xs-10"> <div class="alert alert-success mb_0"> <i class="icon-ok mr_5"></i> ä¿®æ¹å¯ç æåã? </div> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label p_0"></label> <div class="col-xs-10"> <button wt-form-submit="js_user_change_pwd(user_pwd_form, pwd_old,pwd1,pwd2)" class="btn btn-success mr_15" data-loading-text="ä¿å­ä¸?..." loading-status="is_changing_pwd">ç¡®è®¤ä¿®æ¹ </button> </div> </div> </form> <hr/> </div> </div> <div> <div class="panel-section"> <h4>ä¿®æ¹é®ç®±å°å</h4> </div> <div class="panel-section" ng-if="email_step == 1"> <p> å½åé®ç®±å°åä¸ºï¼{{global.me.email}}</p> <button ng-click="js_change_email_step(2)" class="btn mr_15">ä¿®æ¹é®ä»¶å°å </button> </div> <div class="panel-section" ng-if="email_step == 2"> <wt-confirm-password class="w_360" confirm-cancel="js_change_email_step(1)" confirm-success="js_change_email_step(3)"></wt-confirm-password> </div> <div class="panel-section" ng-if="email_step == 3"> <form name="user_new_email_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form w_660" novalidate> <p>å½åé®ç®±å°åä¸ºï¼{{global.me.email}}</p> <input name="new_email" autofocus="" type="email" class="form-control" ng-model="new_email" placeholder="æ°é®ç®±å°å" required wt-remote-unique-check="{url:\'/api/user/email/check?email={{new_email}}\'}"/></br> <div class="alert alert-danger mt_10" ng-show="user_new_email_form.$errors.length > 0"> <i class="icon-remove-sign"></i> {{user_new_email_form.$errors[0]}} </div> <div class="alert alert-info" data-ng-hide="send_success"> <i class="icon-info-sign mr_5"></i> ç³»ç»ä¼åéç¡®è®¤é®ä»¶å°æ¨çæ°é®ç®±ä¸­ï¼è¯·æ¥æ¶åç¹å»é®ä»¶ä¸­çå°åå®æä¿®æ¹ã? </div> <div class="alert alert-success" data-ng-show="send_success"> <i class="icon-ok mr_5"></i> ç³»ç»å·²ç»æååéé®ä»¶å°æ¨çæ°é®ç®±ä¸­ï¼è¯·æ¥æ¶åç¹å»é®ä»¶ä¸­çå°åå®æä¿®æ¹ã? </div> <button wt-form-submit="js_user_change_email(user_new_email_form, new_email)" class="btn btn-success mr_15" data-loading-text="åéä¸­..." loading-status="is_sending_email">åéç¡®è®¤é®ä»? </button> <button type="button" data-ng-click="js_change_email_step(1)" class="btn mr_15">åæ¶ </button> </form> </div> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/account_tabs.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_tabs.html",'<ul class="tabs"> <li> <a ng-class="{true: \'active\'}[current_menu == \'settings\']" href="/account/settings"> åºæ¬è®¾ç½® </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'twofactor\']" href="/account/twofactor"> ä¸¤æ­¥éªè¯ </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'security\']" href="/account/security"> å®å¨æ¥å¿ </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'message\']" href="/account/message"> æ¶æ¯è®¾ç½® </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'apps\']" href="/account/apps"> åºç¨ç®¡ç </a> </li> </ul>')}]),angular.module("/ycjs/tpl/account/account_teams.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_teams.html",' <div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-sitemap mr_10"></i>å¢éç®¡ç</h3> </div> <div class="main"> <div class="pull-right"> <a href="/teams/add" class="btn btn-danger">æ°å»ºå¢é</a> </div> </div> </div> </div> <div class="center-panel-container height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <span class="title">æçå¢é</span> <ul class="tabs"> </ul> </dt> <dd> <div data-ng-hide="part_loading_done" class="part-loading mt_20"></div> <div data-ng-show="part_loading_done" class="table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>å¢éå?</th> <th>ææè?</th> <th>çæ¬</th> <th>æé</th> <th>ç®¡ç</th> </tr> </thead> <tbody> <tr data-ng-repeat="team in account_teams"> <td><a href="/teams/{{team.team_id}}">{{team.name}}</a></td> <td> <wt-avatar member="team.owner" name="true"size="30"></wt-avatar> </td> <td><span class="edition" ng-class="{1:\'edition-free\', 2:\'edition-business\', 3:\'edition-nonprofit\'}[team.edition]"> {{team.edition | teamEdition }} </span> </td> <td> <span ng-show="team.is_owner==1">ææè?</span> <span ng-show="team.is_owner==0">{{ team.curr_role | role }}</span> </td> <td> <a href="/teams/{{team.team_id}}/setting" ng-show="team.is_owner!=1" class="btn mr_15"> <i class="icon-signout mr_5"></i>éå? </a> <a href="/teams/{{team.team_id}}/admin" ng-show="team.is_owner==1" class="btn mr_15"> <i class="icon-cog mr_5"></i>è®¾ç½® </a> </td> </tr> <tr> <td colspan="5" data-ng-show="account_teams.length == 0"> è¿æ²¡æå å¥ä»»ä½å¢é? </td> </tr> </tbody> </table> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/account_trophies.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_trophies.html","")}]),angular.module("/ycjs/tpl/account/account_twofactor.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/account_twofactor.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-user mr_10"></i>å¸æ·è®¾ç½®</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/account/account_tabs.html\'"></ng-include> </dt> <dd> <div data-ng-hide="part_loading_done" class="part-loading mt_20"></div> <div data-ng-show="part_loading_done"> <div class="panel-section"> <div class="navigate-step" data-ng-show="two_step > 1"> <div class="line"> <div data-ng-class="{true:\'active\'}[two_step >= 3]"></div> <div data-ng-class="{true:\'active\'}[two_step >= 4]"></div> </div> <ol> <li data-ng-class="{true:\'active\'}[two_step >= 2]"> <span class="step-title">å®è£èº«ä»½éªè¯å?</span> <br> <span class="number">1</span></li> <li data-ng-class="{true:\'active\'}[two_step >= 3]"> <span class="step-title">æ·»å å¸æ·</span> <br> <span class="number">2</span> </li> <li data-ng-class="{true:\'active\'}[two_step >= 4]"> <span class="step-title">éªè¯å¹¶å¼å?</span> <br> <span class="number">3</span> </li> </ol> </div> </div> <div data-ng-switch="two_step"> <div class="panel-section" data-ng-switch-when="0"> <div class="form-group"> <div class="account_status" ng-class="{1:\'on\',0:\'off\'}[account_basic.twofactor_enabled]"> <i class="icon-3x" ng-class="{1:\'icon-shield\',0:\'icon-ban-circle\'}[account_basic.twofactor_enabled]"></i> <img src="/img/inner/account/google_authenticator.png" alt="Googleèº«ä»½éªè¯å?" width="80" height="80"/> <br/> <p class="alert alert-info w_660"> <i class="icon-info-sign mr_5"></i> å½åç¶æï¼<b ng-bind="{1:\'å¼å¯\',0:\'å³é­\'}[account_basic.twofactor_enabled]"></b> <br/><br/> <span ng-hide="account_basic.twofactor_enabled == 1">ä¸¤æ­¥éªè¯ä½¿ç¨ä½ çææºçæå¨æå£ä»¤ï¼ä¸ºæ¨çè´¦æ·æ·»å ä¸ä»½é¢å¤çå®å¨ä¿éï¼?<a href="/guide/advance/two-factor" target="_blank">ç¹å»äºè§£æ´å¤ã?</a></span> <span ng-show="account_basic.twofactor_enabled == 1">æ¨å·²ç»å¼å¯äºä¸¤æ­¥éªè¯ï¼è¯·å¦¥åä¿å­æ¨çå®å¨ç ï¼å¦æç§»å¨è®¾å¤ä¸¢å¤±ï¼è¯·ä½¿ç¨å®å¨ç ç»å½ã?</span> </p> </div> <dl class="recovery_code" ng-show="account_basic.twofactor_enabled == 1"> <dt> <a href="javascript:;" ng-click="account_show_recovery_code=!account_show_recovery_code"><i class="icon-ticket"></i> ç¹å»æ¥çå®å¨ç ?</a> </dt> <dd ng-show="account_show_recovery_code"> <ul> <li ng-repeat="recovery_code in recovery_codes"> {{recovery_code}} </li> </ul> </dd> </dl> </div> <div class="form-group"> <button class="btn btn-success" data-ng-show="account_basic.twofactor_enabled == 0" ng-click="js_two_step(1)">å¼å¯ä¸¤æ­¥éªè¯? </button> <button class="btn btn-danger" data-loading-text="å³é­ä¸¤æ­¥éªè¯ä¸?..." loading-status="is_disable_twofactoring" ng-show="account_basic.twofactor_enabled == 1" ng-click="js_disable_twofactor()"> å³é­ä¸¤æ­¥éªè¯ </button> </div> </div> <div class="panel-section text-center" data-ng-switch-when="1"> <wt-confirm-password confirm-cancel="js_two_step(0)" confirm-success="js_two_step(2)"></wt-confirm-password> </div> <div class="panel-section col-xs-10 text-center" data-ng-switch-when="2"> <div class="clearfix"> <div class="col-xs-5 pull-left"> <img src="/img/inner/account/install.png" alt="å®è£å°ä½ çææ?"/> </div> <div class="col-xs-7 text-left pull-right"> <h5>å¨ç§»å¨è®¾å¤ä¸å®è£èº«ä»½éªè¯å?</h5> <p>Googleèº«ä»½éªè¯å¨æ¯è°·æ­å¼åçå¼æºåºç¨ï¼å¯å¨æçæéªè¯ç ï¼å¹¶ä¸ä¸ä¼èè´¹ææºæµéã?</p> <div class="account-marketplace"> <i class="icon-android icon-3x"></i> <strong>Android ææº</strong> <br/> å¨åå¤§åºç¨å¸åºæç´¢ï¼èº«ä»½éªè¯å? <br/> æèç´æ¥è®¿é®ï¼<a href="http://www.wandoujia.com/apps/com.google.android.apps.authenticator2" target="_blank">è±è±è?</a> </div> <div class="account-marketplace"> <i class="icon-apple icon-3x"></i> <strong>iPhone ææº</strong> <br/> å? AppStore æç´¢ï¼? <br/> <a href="https://itunes.apple.com/us/app/google-authenticator/id388497605?mt=8" target="_blank">Google Authenticator</a> </div> å¶ä»æºè½è®¾å¤çå®è£?<a href="/guide/advance/two-factor" target="_blank">æ¥çè¿é</a> </div> </div> <div class="form-group col-xs-10 p_20"> <button class="btn float_left mr_45" ng-click="js_two_step(1)"><i class="icon-caret-left"></i> ä¸ä¸æ­? </button> <button class="btn btn-success float_left" ng-click="js_two_step(3)">ä¸ä¸æ­? <i class="icon-caret-right"></i> </button> </div> </div> <div class="panel-section col-xs-10 text-center" data-ng-switch-when="3"> <div class="clearfix"> <div class="col-xs-5 pull-left"> <img src="/img/inner/account/account-qrcode.png" alt="å®è£å°ä½ çææ?"/> </div> <div class="col-xs-7 text-left pull-right"> <h5>å¨èº«ä»½éªè¯å¨éæ·»å å¸æ?</h5> <p>æå¼èº«ä»½éªè¯å¨åºç¨ï¼æ«ææ¡å½¢ç æ·»å å¸æ?</p> <div class="part-loading mt_60" wt-loading-done="loading_twofactor_secret_done"></div> <div data-ng-show="loading_twofactor_secret_done"> <p ng-bind-html="twofactor_secret.qrcode"></p> <p class="alert alert-info col-xs-8"> <i class="icon-info-sign mr_5"></i> èº«ä»½éªè¯å¨ä¸è½æ«æéªè¯ç ï¼? æå¨æ·»å ä»¥ä¸å¸æ·ï¼? <br/> <b>å¸æ· ï¼?</b>{{twofactor_secret.name}}<br/> <b>å¯é¥ ï¼?</b>{{twofactor_secret.secret}} </p> </div> </div> </div> <div class="form-group col-xs-10 p_20"> <button class="btn float_left mr_45" ng-click="js_two_step(2)"><i class="icon-caret-left"></i> ä¸ä¸æ­? </button> <button class="btn btn-success float_left" ng-click="js_two_step(4)">ä¸ä¸æ­? <i class="icon-caret-right"></i> </button> </div> </div> <div class="panel-section col-xs-10 text-center" data-ng-switch-when="4"> <div class="clearfix"> <div class="col-xs-5 pull-left"> <img src="/img/inner/account/account-code.png" alt="å¡«åå¨æéªè¯ç "/> </div> <div class="col-xs-7 text-left pull-right"> <h5>å¼å¯å¨æèº«ä»½éªè¯?</h5> <p>è¾å¥èº«ä»½éªè¯å¨èªå¨çæçå¨æéªè¯ç </p> <div class="input-group w_300"> <input type="text" class="form-control" wt-enter="js_enable_twofactor()" ui-event="{ focus : \'js_twofactor_focus()\' }" ng-model="input.factor"> <span class="input-group-btn"> <button class="btn btn-success" type="button" data-loading-text="æ­£å¨å¼å?..." loading-status="is_enable_twofactoring" data-ng-click="js_enable_twofactor()">éªè¯å¹¶å¼å? </button> </span> </div> <div class="form-group w_300 mt_12" data-ng-show="input.enable_twofactor_errors.length > 0"> <div class="alert alert-danger"> <i class="icon-remove-sign"></i> {{input.enable_twofactor_errors}} </div> </div> </div> </div> <div class="form-group col-xs-10 p_20"> <button class="btn" ng-click="js_two_step(3)"><i class="icon-caret-left"></i> ä¸ä¸æ­? </button> </div> </div> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/account/pop_decommissioning_confirm.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/account/pop_decommissioning_confirm.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è§£é¤ææ</h3> </div> <div class="popbox-body w_300"> <span> è§£é¤åè¯¥åºç¨å°ä¸è½è¿å¥Worktileï¼å¿é¡»éæ°æææå¯ä»¥è¿å¥ã? </span> </div> <div class="popbox-footer"> <button ng-click="js_decommissioning()" data-loading-text="è§£é¤ä¸?..." loading-status="is_decommissioning" class="btn btn-danger mr_15">ç¡®å®è§£é¤</button> <button ng-click="js_close()" class="btn btn-cancel">åæ¶</button> </div> ')}]),angular.module("/ycjs/tpl/activity/activity.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/activity/activity.html",'<div ng-hide="permission == 64"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3>æ´»å¨</h3> </div> <div class="main"> <div class="pull-right"> <ng-include src="\'/ycjs/tpl/activity/activity_filter.html\'"></ng-include> </div> </div> </div> </div> <div class="layout_content"> <div class="leftpanel height-nonav" wt-scroll=\'{"autoHideScrollbar":true,"advanced":{"autoScrollOnFocus":false}}\'> <ul class="nav_listmenu"> <li class="menu" ng-class="{true:\'active\',false:\'\'}[project.selected]" ng-repeat="project in projects" wt-tracker="Activity Page|Left Menu|Select Project Filter" ng-click="js_select_prj(project)"> <a href="javascript:;" title="{{project.name}}"> <i class="icon-sign-blank" ng-style="{\'color\':project.bg}" ng-class="{true:\'icon-ok prj-label\',false:\'icon prj-label\'}[project.selected]"></i> <span class="prj-name">{{project.name}}</span></a> </li> </ul> </div> <div class="layout_content_main height-noheader" wt-scroll ng-controller="team_activity_ctrl"> <section ng-include="\'/ycjs/tpl/activity/activity_list.html\'"></section> </div> </div> </div> <ng-include src="\'/ycjs/tpl/team/team_not_found.html\'"></ng-include>')}]),angular.module("/ycjs/tpl/activity/activity_feed_template.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/activity/activity_feed_template.html",'<script type="text/ng-template" id="task_create"> <div class="feed-item-inner slide-trigger"> <div class="feed-item-header"> <wt-avatar member="feed.actor" name="true" size="30"></wt-avatar> <span class="actor">æ°å»ºäºä»»å?</span> </div> <div class="feed-item-body"> <i class="icon-check-empty"></i> <span class="entity"> {{feed.data.entity.name}} </span> <br/> </div> <span class="datetime">{{feed.published | fromNow}}</span> </div> </script> <script type="text/ng-template" id="task_complete"> <div class="feed-item-inner slide-trigger"> <div class="feed-item-header"> <wt-avatar member="feed.actor" name="true" size="30"></wt-avatar> <span class="actor">å®æäºä»»å?</span> </div> <div class="feed-item-body"> <i class="icon-check-sign"></i> <span class="entity"> {{feed.data.entity.name}} </span> <br/> </div> <span class="datetime">{{feed.published | fromNow}}</span> </div> </script> <script type="text/ng-template" id="task_comment_add"> <div class="feed-item-inner slide-trigger"> <div class="feed-item-header"> <wt-avatar member="feed.actor" name="true" size="30"></wt-avatar> <span class="actor">è¯è®ºäºä»»å?</span> </div> <div class="feed-item-body"> <i class="icon-comment-alt"></i> <span class="comment"> {{feed.data.entity.name}} </span> <br/> <span class="entity"> {{feed.data.target.name}} </span> </div> <span class="datetime">{{feed.published | fromNow}}</span> </div> </script>')}]),angular.module("/ycjs/tpl/activity/activity_filter.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/activity/activity_filter.html",'<div class="btn-group" ng-controller="filter_activity_ctrl"> <button class="btn"> {{selected_item.display_name}} </button> <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;" wt-tracker="Activity Page|Nav|Filter-More" ><i class="icon-caret-down"></i></a> <ul class="dropdown-menu pull-right"> <li ng-class="{true:\'divider\',false:\'\'}[item.type==\'divider\']" ng-repeat="item in filter_items"> <a href="" ng-show="type.type!=\'divider\'" wt-tracker="Activity Page|Nav|Filter-More-{{item}}" ng-click="js_select_filter_item(item)"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[item.selected == true]" class="color_gray"></i> {{item.display_name}}</a> </li> </ul> </div>')}]),angular.module("/ycjs/tpl/activity/activity_list.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/activity/activity_list.html",'<div class="empty-panel" ng-show="activities != null && activities.length == 0"> <i class="icon-time"></i><br/> <span>è¿æ²¡æä»»ä½æ´»å?</span> </div> <div class="activity-list m_15" ng-show="activities | isNotNullOrEmpty" ng-cloak> <ul class="activities"> <li class="activity-item" ng-repeat="activity in activities" ng-class="{true:\'activity-item-day\'}[activity.is_show_date]"> <div class="activity-day" ng-show="activity.is_show_date"> <span class="year">{{[activity.published,\'YYYY\'] | momentFormat}}å¹?<br/></span> <strong>{{[activity.published,\'MM/DD\'] | momentFormat}}<br/></strong> <span class="weekday">{{[activity.published,\'ddd\'] | momentFormat}}</span> </div> <div class="activity-icon"> <i ng-class="activity.verb | activityIcon"></i> </div> <div class="activity-meta"> <span class="date" wt-title="[activity.published,\'HH:mm\'] | momentFormat">{{[activity.published,\'HH:mm\'] | momentFormat}}</span> </div> <wt-avatar member="activity.actor" size="30" class="activity-avatar"></wt-avatar> <div class="activity-itemwarp"> <span class="activity"> <wt-include src="tpl_prefix + activity.template"></wt-include> </span> </div> </li> </ul> </div> <div class="loading-more-panel"> <div class="part-loading" ng-show="loading_activity"> </div> <button class="btn" ng-show="has_more && (global.loading_done && loading_activity != true)" wt-tracker="Activity Page|Main|Load More" ng-click="js_load_more($event);"> å è½½æ´å¤... </button> </div> <script type="text/ng-template" id="entity_name_link"> <a class="target" title="{{activity.data.entity.name}}" href="javascript:;" data-ng-click="locator.to_entity(activity.filter.prj,activity.data.entity,true)"> {{activity.data.entity.name}} </a> </script> <script type="text/ng-template" id="entity_summary_link"> <a class="target" title="{{activity.data.entity.name}}" href="javascript:;"> {{activity.data.entity.summary}} </a> </script> <script type="text/ng-template" id="target_name_link"> <a class="target" title="{{activity.data.target.name}}" href="javascript:;" data-ng-click="locator.to_entity(activity.filter.prj,activity.data.target,true)"> {{activity.data.target.name}} </a> </script> <script type="text/ng-template" id="source_name_link"> <a class="target" title="{{activity.data.source.name}}" href="javascript:;" data-ng-click="locator.to_entity(activity.filter.prj,activity.data.source,true)"> {{activity.data.source.name}} </a> </script> <script type="text/ng-template" id="entity_avatar_link"> <wt-avatar member="activity.data.entity" size="30" name="true" class="entity-avatar" avatar="activity.data.entity.image"></wt-avatar> </script> <script type="text/ng-template" id="project_task_create"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨åè¡? <strong>{{activity.data.target.name}}</strong> ä¸æ·»å æ°ä»»å¡</span> <a class="target" title="{{activity.data.entity.name}}" href="javascript:;"> {{activity.data.entity.name}} </a> </script> <script type="text/ng-template" id="item_task_create"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æ·»å ä»»å¡</span> </script> <script type="text/ng-template" id="project_task_update_name"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹ä»»å¡ </span> <ng-include src="\'source_name_link\'"></ng-include> <span>åç§°ä¸? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="item_task_update_name"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹ä»»å¡</span> <span>åç§°ä¸? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="project_task_update_desc"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹ä»»å¡ </span> <ng-include src="\'entity_name_link\'"></ng-include> <span> æè¿°ä¸? <strong>{{activity.data.entity.summary}}</strong></span> </script> <script type="text/ng-template" id="item_task_update_desc"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹ä»»å¡</span> <span> æè¿°ä¸? <strong>{{activity.data.entity.summary}}</strong></span> </script> <script type="text/ng-template" id="project_task_member_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åéä»»å¡</span> <ng-include src="\'target_name_link\'"></ng-include> ç»? <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="item_task_member_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åéä»»å¡ç»?</span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="project_task_member_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åæ¶åéä»»å¡</span> <ng-include src="\'target_name_link\'"></ng-include> ç»? <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="item_task_member_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åæ¶åéä»»å¡ç»?</span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="project_task_watch_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æé</span> <ng-include src="\'entity_avatar_link\'"></ng-include> å³æ³¨ä»»å¡ <ng-include src="\'target_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_task_watch_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æé</span> <ng-include src="\'entity_avatar_link\'"></ng-include> å³æ³¨ä»»å¡ </script> <script type="text/ng-template" id="project_task_watch_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»é¤</span> <ng-include src="\'entity_avatar_link\'"></ng-include> å³æ³¨ä»»å¡ <ng-include src="\'target_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_task_watch_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»é¤</span> <ng-include src="\'entity_avatar_link\'"></ng-include> å³æ³¨ä»»å¡ </script> <script type="text/ng-template" id="project_task_complete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å®æä»»å¡</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_task_complete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å®æä»»å¡</span> </script> <script type="text/ng-template" id="project_task_uncomplete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åæ¶å®æä»»å¡</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_task_uncomplete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åæ¶å®æä»»å¡</span> </script> <script type="text/ng-template" id="project_task_labels_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">è®¾ç½®ä»»å¡</span> <ng-include src="\'entity_name_link\'"></ng-include> <span class="verb">çæ ç­?</span> <span class="label" style="background:{{activity.data.entity.summary.name}}">&nbsp;</span> {{activity.data.entity.summary.desc}} </script> <script type="text/ng-template" id="item_task_labels_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">è®¾ç½®æ ç­¾</span> <span class="label" style="background:{{activity.data.entity.summary.name}}">&nbsp;</span> {{activity.data.entity.summary.desc}} </script> <script type="text/ng-template" id="project_task_labels_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»é¤ä»»å¡</span> <ng-include src="\'entity_name_link\'"></ng-include> <span>çæ ç­?</span> <span class="label" style="background:{{activity.data.entity.summary.name}}">&nbsp;</span> {{activity.data.entity.summary.desc}} </script> <script type="text/ng-template" id="item_task_labels_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»é¤æ ç­¾</span> <span class="label" style="background:{{activity.data.entity.summary.name}}">&nbsp;</span> {{activity.data.entity.summary.desc}} </script> <script type="text/ng-template" id="project_task_expire_set"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">è®¾ç½®ä»»å¡</span> <ng-include src="\'entity_name_link\'"></ng-include> <span class="verb">çæªæ­¢æ¶é?</span> <span>{{activity.data.entity.summary | dateFormatZHCN}}</span> </script> <script type="text/ng-template" id="item_task_expire_set"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">è®¾ç½®æªæ­¢æ¶é´</span> <span>{{activity.data.entity.summary | dateFormatZHCN}}</span> </script> <script type="text/ng-template" id="project_task_expire_reset"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åæ¶ä»»å¡</span> <ng-include src="\'entity_name_link\'"></ng-include> <span class="verb">çæªæ­¢æ¶é?</span> <span>{{activity.data.summary | dateFormatZHCN}}</span> </script> <script type="text/ng-template" id="item_task_expire_reset"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åæ¶æªæ­¢æ¶é´</span> <span>{{activity.data.summary | dateFormatZHCN}}</span> </script> <script type="text/ng-template" id="project_task_attach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨ä»»å? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> æ·»å æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_task_attach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ·»å æä»¶ </strong></span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="project_task_detach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨ä»»å?</span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb">ç§»é¤æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_task_detach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»é¤æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="project_task_delete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤ä»»å¡</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_task_delete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤ä»»å¡</span> </script> <script type="text/ng-template" id="project_task_restore"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">éæ°æ¢å¤ä»»å¡</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_task_restore"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">éæ°æ¢å¤ä»»å¡</span> </script> <script type="text/ng-template" id="item_task_move"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»å¨ä»»å¡ä»? åè¡¨ <strong>{{activity.data.source.name}}</strong> å? åè¡¨ <strong>{{activity.data.target.name}}</strong> </span> </script> <script type="text/ng-template" id="project_task_move"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»å¨ä»»å¡</span> <ng-include src="\'entity_name_link\'"></ng-include> ä»? åè¡¨ <span><strong>{{activity.data.source.name}}</strong></span> <span>å? åè¡¨ <strong>{{activity.data.target.name}}</strong></span> </script> <script type="text/ng-template" id="item_task_todo_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æ·»å æ£æ¥é¡¹ <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_task_todo_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨ä»»å?</span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb">ä¸æ·»å æ£æ¥é¡¹ <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="item_task_todo_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤æ£æ¥é¡¹ <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_task_todo_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨ä»»å?</span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb">ä¸å é¤æ£æ¥é¡¹ <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="item_task_todo_check"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å®ææ£æ¥é¡¹ <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_task_todo_check"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨ä»»å?</span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb">ä¸å®ææ£æ¥é¡¹ <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="item_task_todo_uncheck"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åæ¶å®ææ£æ¥é¡¹ <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_task_todo_uncheck"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨ä»»å?</span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb">ä¸åæ¶å®ææ£æ¥é¡¹ <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="item_task_todo_update"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹æ£æ¥é¡¹ <strong>{{activity.data.source.name}}</strong> ä¸? <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_task_todo_update"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨ä»»å?</span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb">ä¸ä¿®æ¹æ£æ¥é¡¹ <strong>{{activity.data.source.name}}</strong> ä¸? <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="item_task_comment_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åè¡¨äºè¯è®? <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_task_comment_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨ä»»å?</span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb">ä¸åè¡¨äºè¯è®º <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="item_task_comment_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤äºè¯è®? <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_task_comment_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨ä»»å?</span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb">ä¸å é¤äºè¯è®º <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="item_task_archive"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å½æ¡£äºä»»å? </span> </script> <script type="text/ng-template" id="project_task_archive"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å½æ¡£äºä»»å? </span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_task_unarchive"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æ¿æ´»äºä»»å¡ </span> </script> <script type="text/ng-template" id="project_task_unarchive"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æ¿æ´»äºä»»å¡ </span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="project_entity_name_link"> <a class="target" title="{{activity.data.entity.name}}" ng-href="/project/{{activity.filter.prj}}"> {{activity.data.entity.name}} </a> </script> <script type="text/ng-template" id="project_source_name_link"> <a class="target" title="{{activity.data.source.name}}" ng-href="/project/{{activity.filter.prj}}"> {{activity.data.source.name}} </a> </script> <script type="text/ng-template" id="project_target_name_link"> <a class="target" title="{{activity.data.target.name}}" ng-href="/project/{{activity.filter.prj}}"> {{activity.data.target.name}} </a> </script> <script type="text/ng-template" id="project_entity_desc_link"> <a class="target" title="{{activity.data.entity.name}}" ng-href="/project/{{activity.filter.prj}}"> {{activity.data.entity.summary}} </a> </script> <script type="text/ng-template" id="project_project_create"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åå»ºé¡¹ç®</span> </script> <script type="text/ng-template" id="project_project_update_name"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹é¡¹ç®åä¸º</span> <ng-include src="\'project_entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="project_project_update_desc"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹é¡¹ç®æè¿°ä¸?</span> <ng-include src="\'project_entity_desc_link\'"></ng-include> </script> <script type="text/ng-template" id="project_project_update_logo"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹é¡¹ç®æ è¯</span> <span style="background:{{activity.data.entity.summary}}"> <i class="{{activity.data.entity.image}}"></i> </span> </script> <script type="text/ng-template" id="project_project_archive"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å½æ¡£é¡¹ç®</span> </script> <script type="text/ng-template" id="project_project_unarchive"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">éæ°æå¼é¡¹ç®</span> </script> <script type="text/ng-template" id="project_project_delete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤é¡¹ç®</span> </script> <script type="text/ng-template" id="project_project_member_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æ·»å é¡¹ç®æå</span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="project_project_member_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»é¤é¡¹ç®æå</span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="project_project_member_leave"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">éåºäºé¡¹ç®</span> </script> <script type="text/ng-template" id="project_project_member_join"> <span class="verb">å å¥å½åé¡¹ç®</span> </script> <script type="text/ng-template" id="project_entry_create"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æ·»å æ°ä»»å¡åè¡? </span> <span><strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_entry_update_name"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹ä»»å¡åè¡¨ </span> <span><strong>{{activity.data.source.name}}</strong></span> <span class="verb">åç§°ä¸?</span> <span><strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_entry_archive"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å½æ¡£ä»»å¡åè¡¨ </span> <span><strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_entry_unarchive"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">éæ°æå¼ä»»å¡åè¡¨ </span> <span><strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_entry_delete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤ä»»å¡åè¡¨ </span> <span><strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_entry_restore"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">éæ°æ¢å¤ä»»å¡åè¡¨ </span> <span><strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="file_name_link"> <a class="target" title="{{activity.data.entity.name}}" href="javascript:;"> {{activity.data.entity.name}} </a> </script> <script type="text/ng-template" id="item_file_upload"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¸ä¼ æä»¶ <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="project_file_upload"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¸ä¼ æ°æä»?</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_file_new_version"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¸ä¼ æ°çæ?</span> </script> <script type="text/ng-template" id="project_file_new_version"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨æä»?</span> <ng-include src="\'entity_name_link\'"></ng-include> <span class="verb">ä¸ä¼ æ°çæ?</span> </script> <script type="text/ng-template" id="item_file_update_name"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹æä»¶åç§°ä¸?</span> <span> <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_file_update_name"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹æä»¶</span> <ng-include src="\'source_name_link\'"></ng-include> <span class="verb">åç§°ä¸?</span> <span> <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="item_file_update_desc"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹æä»¶æè¿°ä¸?</span> <span> <strong>{{activity.data.entity.summary}}</strong></span> </script> <script type="text/ng-template" id="project_file_update_desc"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> <span class="verb">æè¿°ä¸?</span> <span> <strong>{{activity.data.entity.summary}}</strong></span> </script> <script type="text/ng-template" id="item_file_delete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤æä»¶</span> </script> <script type="text/ng-template" id="project_file_delete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_file_restore"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æ¢å¤æä»¶</span> </script> <script type="text/ng-template" id="project_file_restore"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æ¢å¤æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_file_comment_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åè¡¨äºè¯è®? <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_file_comment_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨æä»?</span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb">ä¸åè¡¨äºè¯è®º <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="item_file_comment_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤äºè¯è®? <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_file_comment_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨æä»?</span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb">ä¸å é¤äºè¯è®º <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="project_folder_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åå»ºäºæ°æä»¶å¤? <strong>{{activity.data.entity.name}}</strong></span> </script> <script type="text/ng-template" id="item_file_move"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä»? <strong>{{activity.data.source.name || "æ ¹ç®å½?"}}</strong></span> <span class="verb">ç§»å¨æä»¶å? <strong>{{activity.data.target.name || "æ ¹ç®å½?"}}</strong></span> </script> <script type="text/ng-template" id="project_file_move"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»å¨æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> <span class="verb">ä»? <strong>{{activity.data.source.name || "æ ¹ç®å½?"}}</strong></span> <span class="verb">å? <strong>{{activity.data.target.name || "æ ¹ç®å½?"}}</strong></span> </script> <script type="text/ng-template" id="item_file_watch_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æé</span> <ng-include src="\'entity_avatar_link\'"></ng-include> å³æ³¨æä»¶ </script> <script type="text/ng-template" id="project_file_watch_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æé</span> <ng-include src="\'entity_avatar_link\'"></ng-include> å³æ³¨æä»¶ <ng-include src="\'target_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_file_watch_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»é¤</span> <ng-include src="\'entity_avatar_link\'"></ng-include> å³æ³¨æä»¶ </script> <script type="text/ng-template" id="project_file_watch_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»é¤</span> <ng-include src="\'entity_avatar_link\'"></ng-include> å³æ³¨æä»¶ <ng-include src="\'target_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_post_create"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æ·»å äºè¯é¢?</span> </script> <script type="text/ng-template" id="project_post_create"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æ·»å äºè¯é¢? </span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_post_delete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤äºè¯é¢?</span> </script> <script type="text/ng-template" id="project_post_delete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤äºè¯é¢? </span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_post_update_name"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹è¯é¢åç§°ä¸? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="project_post_update_name"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹è¯é¢ </span> <ng-include src="\'source_name_link\'"></ng-include> <span class="verb"> åç§°ä¸? <strong>{{ activity.data.entity.name }}</strong> </span> </script> <script type="text/ng-template" id="item_post_update_desc"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹è¯é¢åå®¹ä¸? <strong>{{ activity.data.entity.summary }}</strong></span> </script> <script type="text/ng-template" id="project_post_update_desc"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹è¯é¢ </span> <ng-include src="\'entity_name_link\'"></ng-include> <span class="verb"> åå®¹ä¸? <strong>{{ activity.data.entity.summary }}</strong> </span> </script> <script type="text/ng-template" id="item_post_watch_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ·»å å³æ³¨ </span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="project_post_watch_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å¨è¯é¢? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> æ·»å å³æ³¨ </span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="item_post_watch_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> ç§»é¤å³æ³¨ </span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="project_post_watch_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å¨è¯é¢? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> ç§»é¤å³æ³¨ </span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="item_post_comment_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> åè¡¨äºè¯è®? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="project_post_comment_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å¨è¯é¢? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> åè¡¨äºè¯è®? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="item_post_comment_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å é¤äºè¯è®? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="project_post_comment_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å¨è¯é¢? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> å é¤äºè¯è®? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="item_post_restore"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ¢å¤äºè¯é¢?</span> </script> <script type="text/ng-template" id="project_post_restore"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ¢å¤äºè¯é¢? </span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_post_attach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ·»å æä»¶ </strong></span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="project_post_attach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨è¯é¢? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> æ·»å æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_post_detach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»é¤æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="project_post_detach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨è¯é¢? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb">ç§»é¤æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_page_create"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æ·»å äºææ¡?</span> </script> <script type="text/ng-template" id="project_page_create"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">æ·»å äºææ¡? </span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_page_delete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤äºææ¡?</span> </script> <script type="text/ng-template" id="project_page_delete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤äºææ¡? </span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_page_update_name"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹ææ¡£åç§°ä¸? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="project_page_update_name"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹ææ¡£ </span> <ng-include src="\'source_name_link\'"></ng-include> <span class="verb"> åç§°ä¸? <strong>{{ activity.data.entity.name }}</strong> </span> </script> <script type="text/ng-template" id="item_page_new_version"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ·»å äºæ°çæ¬</span> </script> <script type="text/ng-template" id="project_page_new_version"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨ææ¡? </span> <ng-include src="\'entity_name_link\'"></ng-include> <span class="verb"> ä¸æ·»å äºæ°çæ? </span> </script> <script type="text/ng-template" id="item_page_watch_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ·»å å³æ³¨ </span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="project_page_watch_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å¨ææ¡? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> ä¸æ·»å å³æ³? </span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="item_page_watch_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> ç§»é¤å³æ³¨ </span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="project_page_watch_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å¨ææ¡? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> ä¸ç§»é¤å³æ³? </span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="item_page_comment_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> åè¡¨äºè¯è®? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="project_page_comment_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å¨ææ¡? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> ä¸åè¡¨äºè¯è®º <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="item_page_comment_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å é¤äºè¯è®? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="project_page_comment_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å¨ææ¡? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> ä¸å é¤äºè¯è®º <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="item_page_restore"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ¢å¤äºææ¡?</span> </script> <script type="text/ng-template" id="project_page_restore"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ¢å¤äºææ¡? </span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_page_attach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ·»å æä»¶ </strong></span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="project_page_attach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨ææ¡? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> ä¸æ·»å æä»?</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_page_detach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»é¤æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="project_page_detach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨ææ¡? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> ä¸ç§»é¤æä»?</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_event_create"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åå»ºäºæ¥ç¨?</span> </script> <script type="text/ng-template" id="project_event_create"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">åå»ºäºæ¥ç¨? </span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_event_update_name"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹æ¥ç¨åç§°ä¸? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="project_event_update_name"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹æ¥ç¨ </span> <ng-include src="\'source_name_link\'"></ng-include> <span class="verb"> åç§°ä¸? <strong>{{ activity.data.entity.name }}</strong> </span> </script> <script type="text/ng-template" id="item_event_delete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤äºæ¥ç¨?</span> </script> <script type="text/ng-template" id="project_event_delete"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å é¤äºæ¥ç¨? </span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_event_update_desc"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹æ¥ç¨æè¿°ä¸? <strong>{{ activity.data.entity.summary }}</strong></span> </script> <script type="text/ng-template" id="project_event_update_desc"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ä¿®æ¹æ¥ç¨ </span> <ng-include src="\'entity_name_link\'"></ng-include> <span class="verb"> æè¿°ä¸? <strong>{{ activity.data.entity.summary }}</strong> </span> </script> <script type="text/ng-template" id="item_event_attendee_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ·»å åä¸äº? </span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="project_event_attendee_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å¨æ¥ç¨? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> æ·»å åä¸äº? </span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="item_event_attendee_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> ç§»é¤åä¸äº? </span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="project_event_attendee_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å¨æ¥ç¨? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> ç§»é¤åä¸äº? </span> <ng-include src="\'entity_avatar_link\'"></ng-include> </script> <script type="text/ng-template" id="item_event_comment_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> åè¡¨äºè¯è®? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="project_event_comment_add"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å¨æ¥ç¨? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> åè¡¨äºè¯è®? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="item_event_comment_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å é¤äºè¯è®? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="project_event_comment_remove"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> å¨æ¥ç¨? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> å é¤äºè¯è®? <strong>{{ activity.data.entity.name }}</strong></span> </script> <script type="text/ng-template" id="item_event_restore"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ¢å¤äºæ¥ç¨?</span> </script> <script type="text/ng-template" id="project_event_restore"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ¢å¤äºæ¥ç¨? </span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_event_attach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb"> æ·»å æä»¶ </strong></span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="project_event_attach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨æ¥ç¨? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb"> æ·»å æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="item_event_detach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">ç§»é¤æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> </script> <script type="text/ng-template" id="project_event_detach_file"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb">å¨æ¥ç¨? </span> <ng-include src="\'target_name_link\'"></ng-include> <span class="verb">ç§»é¤æä»¶</span> <ng-include src="\'entity_name_link\'"></ng-include> </script>')
}]),angular.module("/ycjs/tpl/activity/pop_filter_activity.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/activity/pop_filter_activity.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ç­ééé¡¹</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_select_type(\'all\')"> <i ng-class="{false: \'icon-xx\', true: \'icon-ok\'}[selected_type==\'all\']" class="color_gray"></i> å¨é¨</a> </li> <li class="divider"></li> <li ng-repeat="filter_type in filter_types"> <a href="" ng-click="js_select_type(filter_type)"> <span class="color_gray" ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[filter_type.name == selected_type]"></span> {{filter_type.display_name}} </a> </li> </ul> </div> ')}]),angular.module("/ycjs/tpl/activity/project_activities.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/activity/project_activities.html",'<div class="prj_panel layout_content"> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right"> <div class="btn-group"> <button class="btn" ng-click="js_to_graph(\'overview\')"> è¿åº¦ </button> <button class="btn" ng-click="js_to_graph(\'pulse\')"> å¨æ¥ </button> <button class="btn" ng-click="js_to_graph(\'daily\')"> æ¥æ¥ </button> <a class="btn active" href="/project/{{project.info.pid}}/activity">æ´»å¨</a> </div> </div> </div> </div> </div> <div class="activity-panel height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ul class="tabs" ng-controller="filter_activity_ctrl"> <li ng-repeat="item in filter_items"> <a href="javascript:;" ng-click="js_select_filter_item(item)" ng-class="{true:\'active\'}[item.selected == true]"> {{item.display_name}}</a> </li> </ul> </dt> <dd> <section ng-include="\'/ycjs/tpl/activity/activity_list.html\'"></section> </dd> </dl> </div> </div> <div class="layout_right_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/project/prj_right_sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div>')}]),angular.module("/ycjs/tpl/blog/pop_add_edit_category.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/blog/pop_add_edit_category.html",' <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>{{{true:\'ä¿®æ¹åç±»\',false:\'æ·»å åç±»\'}[category.category_id.length > 0]}}</h3> </div> <form name="edit_category_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="form-horizontal wt-form" novalidate> <div class="popbox-body pb_0"> <div class="form-group w_360"> <label class="col-xs-2 control-label p_0">åç§°ï¼?</label> <div class="col-xs-10"> <input autofocus="" name="category_name" type="text" class="form-control" ng-model="category.name" placeholder="åç±»åç§°" required/> </div> </div> <div class="form-group w_360"> <label class="col-xs-2 control-label p_0">ä½ç½®ï¼?</label> <div class="col-xs-10"> <input autofocus="" name="category_pos" type="number" class="form-control" ng-model="category.pos" placeholder="ä½ç½®" required/> </div> </div> <div class="form-group w_360"> <label class="col-xs-2 control-label p_0">é¾æ¥ï¼?</label> <div class="col-xs-10"> <input autofocus="" name="category_permalink" type="text" class="form-control" ng-model="category.permalink" placeholder="é¾æ¥" required/> </div> </div> <div class="form-group w_360"> <label class="col-xs-2 control-label p_0"></label> <div class="col-xs-10"> <button wt-form-submit="js_save_category(edit_category_form)" class="btn btn-success mr_15" loading-status="is_saving_category" data-loading-text="ä¿å­ä¸?...">ç¡®å® </button> <button ng-click="js_close()" class="btn">åæ¶</button> </div> </div> </div> </form> ')}]),angular.module("/ycjs/tpl/blog/pop_delete_article.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/blog/pop_delete_article.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å é¤æç« </h3> </div> <div class="popbox-body w_260 pb_0"> <div class="alert alert-danger"> ä½ ç¡®å®è¦å é¤æ­¤æç«?({{article.title}})ä¹ï¼ </div> </div> <div class="popbox-footer"> <button ng-click="js_delete_article()" data-loading-text="å é¤ä¸?..." loading-status="is_deleting_article" class="btn btn-danger float_left">ç¡®å®å é¤</button> </div>')}]),angular.module("/ycjs/tpl/blog/pop_delete_category.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/blog/pop_delete_category.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å é¤åç±»</h3> </div> <div class="popbox-body w_260 pb_0"> <div class="alert alert-danger"> å é¤åç±»åï¼è¯¥åç±»ä¸çæç« ä¹å°ä¼å é¤ï¼ä½ ç¡®å®è¦å é¤æ­¤åç±»({{category.name}})ä¹ï¼ </div> </div> <div class="popbox-footer"> <button ng-click="js_delete_category()" data-loading-text="å é¤ä¸?..." loading-status="is_deleting_category" class="btn btn-danger float_left">ç¡®å®å é¤</button> </div>')}]),angular.module("/ycjs/tpl/browse/browse_files.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/browse/browse_files.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader" > <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-compass mr_10"></i>åç°</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="height-nonav" wt-scroll> <div class="layout_split_panel"> <div class="layout_split_left"> <dl class="frame" data-minheight="160"> <ul class="nav nav-pills nav-stacked"> <li><a href="/browse"><i class="icon-check"></i><br/>ä»»å¡</a></li> <li class="active"><a href="/browse/files"><i class="icon-file"></i><br/>æä»¶</a></li> <li><a href="/browse/posts"><i class="icon-list-alt"></i><br/>è¯é¢</a></li> <li><a href="/browse/pages"><i class="icon-file-text-alt"></i><br/>ææ¡£</a></li> </ul> </dl> </div> <div class="layout_split_right"> <dl class="frame" data-minheight="160"> <dt> <span class="title">æä»¶</span> <ul class="tabs"> <li> <a ng-class="{true: \'active\'}[current_tab == 0]" href="javascript:;" ng-click="js_change_tab(0)"> å¨é¨ </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 1]" href="javascript:;" ng-click="js_change_tab(1)"> æä¸ä¼ ç </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 2]" href="javascript:;" ng-click="js_change_tab(2)"> æå³æ³¨ç </a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="files != null && files.length == 0 && part_loading_done"> <i class="icon-file"></i><br/> <span>è¿æ²¡æä»»ä½æä»?</span> </div> <div class="file-panel"> <div class="file-list-view" ng-show="files.length > 0"> <div class="wt-row file-item-view file-item-mark" ng-class="{\'border-notop\':$index == 0,\'active\':file.fid == locator.show_detail_file_id}" ng-repeat="file in files" file-id="{{file.fid}}" data-ng-hide="file.is_hide"> <div class="column column-pic slide-trigger" ng-click="locator.to_file(file.pid, file.fid, true)"> <img class="pic" ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> </div> <div class="column column-name slide-trigger" ng-click="locator.to_file(file.pid, file.fid, true)"> <a class="name" href="javascript:;">{{file.name }}</a> </div> <div class="column column-size"> &nbsp;{{(file.size | fileSize) || ""}} </div> <div class="column column-update"> <wt-avatar member="file.update_user" name="false" size="30"></wt-avatar> </div> <div class="column column-date"> <span class="date">{{file.update_date | fromNow}}</span> </div> </div> </div> <div class="loading-more-panel"> <button ng-show="has_more && part_loading_done" class="btn" ng-click="load_files_more()" data-loading-text="å è½½ä¸?..." loading-status="!part_loading_done">å è½½æ´å¤... </button> <div class="load-more part-loading" ng-hide="part_loading_done"></div> </div> </div> </dd> </dl> </div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/browse/browse_pages.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/browse/browse_pages.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader" > <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-compass mr_10"></i>åç°</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="height-nonav" wt-scroll> <div class="layout_split_panel"> <div class="layout_split_left"> <dl class="frame" data-minheight="160"> <ul class="nav nav-pills nav-stacked"> <li><a href="/browse"><i class="icon-check"></i><br/>ä»»å¡</a></li> <li><a href="/browse/files"><i class="icon-file"></i><br/>æä»¶</a></li> <li><a href="/browse/posts"><i class="icon-list-alt"></i><br/>è¯é¢</a></li> <li class="active"><a href="/browse/pages"><i class="icon-file-text-alt"></i><br/>ææ¡£</a></li> </ul> </dl> </div> <div class="layout_split_right"> <dl class="frame" data-minheight="160"> <dt> <span class="title">ææ¡£</span> <ul class="tabs"> <li> <a ng-class="{true: \'active\'}[current_tab == 0]" href="javascript:;" ng-click="js_change_tab(0)"> å¨é¨ </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 1]" href="javascript:;" ng-click="js_change_tab(1)"> æåå»ºç </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 2]" href="javascript:;" ng-click="js_change_tab(2)"> æå³æ³¨ç </a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="pages != null && pages.length == 0 && part_loading_done"> <i class="icon-file-text-alt"></i><br/> <span>è¿æ²¡æä»»ä½ææ¡?</span> </div> <div class="page-panel"> <div class="page-list-view" ng-show="pages.length > 0"> <div class="wt-row page-item-view page-item-mark js-popbox" ng-class="{0:\'border-notop\'}[$index]" ng-repeat="page in pages" page-id="{{page.page_id}}"> <div class="column column-main slide-trigger" ng-click="locator.to_page(page.pid, page.page_id, true)"> <h4> <i class="icon-file-text-alt mr_5"></i> <a class="name" href="javascript:;">{{page.name }}</a> </h4> </div> <div class="column column-owner"> <wt-avatar member="page.last_updator" name="true" size="30"></wt-avatar> </div> <div class="column column-date"> <span class="date">{{page.update_date | fromNow}}</span> </div> </div> </div> <div class="loading-more-panel"> <div class="part-loading" data-ng-hide="part_loading_done"> </div> <button class="btn" ng-show="has_more && part_loading_done" data-loading-text="å è½½ä¸?..." loading-status="!part_loading_done" ng-click="load_pages_more($event);"> å è½½æ´å¤... </button> </div> </div> </dd> </dl> </div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/browse/browse_posts.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/browse/browse_posts.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader" > <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-compass mr_10"></i>åç°</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="height-nonav" wt-scroll> <div class="layout_split_panel"> <div class="layout_split_left"> <dl class="frame" data-minheight="160"> <ul class="nav nav-pills nav-stacked"> <li><a href="/browse"><i class="icon-check"></i><br/>ä»»å¡</a></li> <li><a href="/browse/files"><i class="icon-file"></i><br/>æä»¶</a></li> <li class="active"><a href="/browse/posts"><i class="icon-list-alt"></i><br/>è¯é¢</a></li> <li><a href="/browse/pages"><i class="icon-file-text-alt"></i><br/>ææ¡£</a></li> </ul> </dl> </div> <div class="layout_split_right"> <dl class="frame" data-minheight="160"> <dt> <span class="title">è¯é¢</span> <ul class="tabs"> <li> <a ng-class="{true: \'active\'}[current_tab == 0]" href="javascript:;" ng-click="js_change_tab(0)"> å¨é¨ </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 1]" href="javascript:;" ng-click="js_change_tab(1)"> æåèµ·ç </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 2]" href="javascript:;" ng-click="js_change_tab(2)"> æå³æ³¨ç </a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="posts != null && posts.length == 0 && part_loading_done"> <i class="icon-list-alt"></i><br/> <span>è¿æ²¡æä»»ä½è¯é¢?</span> </div> <div class="post-panel"> <div class="post-list" ng-show="posts.length > 0"> <div class="wt-row post-item js-popbox" data-placement="bottom" data-align="left" ng-class="{\'border-notop\':$index == 0,\'active\':post.post_id == locator.show_detail_post_id}" ng-repeat="post in posts" post-id="{{post.post_id}}"> <div class="column column-owner"> <wt-avatar member="post.owner" size="30" name="true" class="post-avatar"></wt-avatar> </div> <div class="column column-main slide-trigger" ng-click="locator.to_post(post.pid, post.post_id, true)"> <h4><a class="name" href="javascript:;">{{ post.name }}</a></h4> </span> </div> <div class="column column-badges"> <span class="comment_count_style icon-stack" title="è¯é¢æ{{ post.comment_count }}ä¸ªè¯è®?"> <i class="icon-comment"></i> <i class="icon-stack-base">{{post.comment_count}}</i> </span> </div> <div class="column column-date"> <span class="date">{{post.create_date | fromNow}}</span> </div> </div> </div> <div class="loading-more-panel"> <div class="part-loading" data-ng-hide="part_loading_done"> </div> <button class="btn" ng-show="has_more && part_loading_done" data-loading-text="å è½½ä¸?..." loading-status="!part_loading_done" ng-click="load_posts_more($event);"> å è½½æ´å¤... </button> </div> </div> </dd> </dl> </div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/browse/browse_tasks.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/browse/browse_tasks.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader" > <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-compass mr_10"></i>åç°</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="height-nonav" wt-scroll> <div class="layout_split_panel"> <div class="layout_split_left"> <dl class="frame" data-minheight="160"> <ul class="nav nav-pills nav-stacked"> <li class="active"><a href="/browse"><i class="icon-check"></i><br/>ä»»å¡</a></li> <li><a href="/browse/files"><i class="icon-file"></i><br/>æä»¶</a></li> <li><a href="/browse/posts"><i class="icon-list-alt"></i><br/>è¯é¢</a></li> <li><a href="/browse/pages"><i class="icon-file-text-alt"></i><br/>ææ¡£</a></li> </ul> </dl> </div> <div class="layout_split_right"> <dl class="frame" data-minheight="160"> <dt> <span class="title">ä»»å¡</span> <ul class="tabs"> <li> <a ng-class="{true: \'active\'}[current_tab == 0]" href="javascript:;" ng-click="js_change_tab(0)"> å¨é¨ </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 3]" href="javascript:;" ng-click="js_change_tab(3)"> åéç»æç? </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 1]" href="javascript:;" ng-click="js_change_tab(1)"> æåå»ºç </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 2]" href="javascript:;" ng-click="js_change_tab(2)"> æå³æ³¨ç </a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="tasks != null && tasks.length == 0 && part_loading_done"> <i class="icon-check"></i><br/> <span>è¿æ²¡æä»»ä½ä»»å?</span> </div> <div class="task-list-panel"> <div class="group-list" ng-show="tasks.length > 0"> <hr/> <div class="group-item" ng-repeat="task in tasks"> <div class="group-header" ng-if="task.is_show_date"> <span> {{ task.create_date | dateFormatZHCN}}</span> </div> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, true)"> <div class="task-main"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> </div> <wt-badges task="task"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"></wt-avatar> </div> </div> </div> </div> <div class="loading-more-panel"> <button ng-show="has_more && part_loading_done" class="btn" ng-click="load_tasks_more()" data-loading-text="å è½½ä¸?..." loading-status="!part_loading_done">å è½½æ´å¤... </button> <div class="load-more part-loading" ng-hide="part_loading_done"></div> </div> </div> </dd> </dl> </div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/common/comment_list.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/comment_list.html",'<div class="comment-list" ng-controller="comment_ctrl"> <div class="part-loading mt_20" wt-loading-done="comments_loading_done"></div> <ul class="comments"> <li class="comment-item" ng-repeat="comment in comments"> <wt-avatar member="comment.owner" size="40" class="comment-avatar"></wt-avatar> <div class="comment"> <a href="javascript:;" class="comment-name"> {{comment.owner.display_name}} </a> <span class="comment-meta"> <span class="date">{{comment.create_date | fromNow }}</span> <a href="javascript:;" class="comment-action js-popbox" wt-permission="[permission,project.info.curr_role,1,3]" data-placement="left" data-align="top" wt-tracker="Comment Panel|List|Edit Comment-Show Menu" ng-click="js_show_comment_menu($event,comment)"> <i ng-class="{true:\'icon-play-circle\',false:\'hide\'}[comment.owner.uid == global.me.uid && comment.type==1]"></i> </a> </span> <div class="current-comment" ng-hide="comment.is_edit" wt-markdown=\'comment.message\'> </div> <div class="edit-controls clearfix" id="div_comment_{{ comment.cid }}" ng-show="comment.is_edit" wt-show-edit="comment.is_edit"> </div> </div> </li> </ul> <div class="new-comment" wt-permission="[permission,project.info.curr_role,1,3]"> <wt-comment save-comment="js_save_comment(comment)"></wt-comment> </div> </div>')}]),angular.module("/ycjs/tpl/common/left_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/left_menu.html",'<div class="left_menu height-noheader" > <div data-height="{{{true:\'100\',false:\'142\'}[upload_queue.get_queue()==0]}}" wt-scroll> <ul class="left_menu_module"> <li > <a title="å·¥ä½å?" class="left_menu_item" ng-class="{\'active\':global.header_menu == \'dashboard\'}" wt-tracker="LeftMenu|Module|Goto Dashboard" ng-href="/dashboard"> <i class="icon-dashboard mr_10"></i> <span class="collapse_hide">å·¥ä½å?</span> </a> </li> <li> <a title="æ¥å" class="left_menu_item" ng-class="{\'active\':global.header_menu == \'calendar\'}" wt-tracker="LeftMenu|Module|Goto Calendar" ng-href="/calendar"> <i class="icon-calendar mr_10"></i> <span class="collapse_hide">æ¥å</span> </a> </li> <li> <a title="åç°" class="left_menu_item" ng-class="{\'active\':global.header_menu == \'browse\'}" wt-tracker="LeftMenu|Module|Goto Browse" ng-href="/browse"> <i class="icon-compass mr_10"></i> <span class="collapse_hide">åç°</span> </a> </li> <li> <a title="é¡¹ç®" class="left_menu_item" ng-class="{\'active\':global.header_menu == \'projects\'}" wt-tracker="LeftMenu|Module|Goto Projects" href="/projects"> <i class="icon-inbox mr_10 "></i> <span class="collapse_hide">é¡¹ç®</span> </a> </li> </ul> <div class="hr_black"></div> <div class="left_menu_scroll"> <ul class="left_menu_section" ng-class="{true:\'left_menu_section_expand\'}[star_team.expand]"> <li> <a class="left_menu_item js-popbox" data-placement="right" href="javascript:;" ng-click="js_section_expand_toggle(star_team,$event)"> <i class="icon-star mr_10 collapse_hide"></i> å¸¸ç¨é¡¹ç® <i class="collapse_hide" ng-class="{true:\'icon-angle-down\',false:\'icon-angle-right\'}[star_team.expand == true]"></i> </a> <ul class="left_menu_body collapse_hide" wt-slide-show="star_team.expand"> <li data-ng-repeat="project in projects | filter:{is_star:1}" data-ng-click="js_set_current_prj(project)"> <a data-ng-class="{\'active\':current_pid == project.pid}" href="/project/{{project.pid}}"> <i ng-class="project.pic" ng-style="{color: project.bg}"></i> {{project.name}} </a> </li> <li> <a class="empty" ng-show="(projects | filter:{is_star:1}).length==0" href="javascript:;"> <i class="icon-inbox"></i>æ²¡æé¡¹ç® </a> </li> </ul> </li> </ul> <ul class="left_menu_section collapse_hide" ng-class="{true:\'left_menu_section_expand\'}[team.expand]" data-ng-repeat="team in teams"> <li> <a class="left_menu_item" href="javascript:;" ng-click="js_section_expand_toggle(team,$event)"> <i class="icon-sitemap mr_10"></i> <span class="team_name">{{team.name}}</span> <i class="icon-angle" ng-class="{true:\'icon-angle-down\',false:\'icon-angle-right\'}[team.expand == true]"></i> </a> <ul class="left_menu_body" wt-slide-show="team.expand"> <li data-ng-repeat="project in team.projects" data-ng-click="js_set_current_prj(project)"> <a data-ng-class="{\'active\':current_pid == project.pid}" href="/project/{{project.pid}}"> <i ng-class="project.pic" ng-style="{color: project.bg}"></i> {{project.name}} </a> </li> <li> <a class="empty" ng-show="team.projects.length==0" href="javascript:;"> <i class="icon-inbox"></i>æ²¡æé¡¹ç® </a> </li> </ul> </li> </ul> </div> </div> <form id="global_file_upload" data-ng-controller="global_file_ctrl" action="{{global.config.box_url()}}" method="POST" enctype="multipart/form-data" data-file-upload="options" data-ng-class="{\'fileupload-processing\': processing() || loadingFiles}" class="js-popbox" data-placement="right" ng-show="queue.length" ng-class="{true: \'fileupload-processing\'}[!!processing() || loadingFiles]"> <a href="javascript:;" class="icon icon-white icon-upload-alt" ng-click="js_pop_global_fileupload($event)"> <span class="ml_10 collapse_hide">ç®åæ? {{ queue.length }} ä¸ªæä»¶å¨ä¸ä¼ </span> <span class="label label-danger collapse_show">{{ queue.length }}</span> </a> <div class="hr_black"></div> </form> <div class="hr_black"></div> <ul class="left_menu_footer"> <li class="collapse_hide"> <a href="/projects/archive" tooltip-placement="top" tooltip="å½æ¡£é¡¹ç®"> <i class="icon-archive"></i> </a> </li> <li class="collapse_hide"> <a href="/account/teams" tooltip-placement="top" tooltip="å¢éç®¡ç"> <i class="icon-sitemap"></i> </a> </li> <li> <a href="javascript:;" data-ng-click="js_left_menu_toggle()" tooltip-placement="top" tooltip="{{{true:\'å±å¼\',false:\'æå \'}[left_panel_is_fold]}}"> <i class="{{{true:\'icon-step-forward\',false:\'icon-step-backward\'}[left_panel_is_fold]}}"></i> </a> </li> </ul> </div>')}]),angular.module("/ycjs/tpl/common/pay_dialog.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pay_dialog.html",'<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4> ç­å¾æ¯ä»å®æ</h4> </div> <div class="modal-body min-h-400"> <button class="btn btn-success" ng-click="js_pay_complete()">æ¯ä»å®æ</button> <button class="btn btn-success" data-ng-click="js_pay_exception()">æ¯ä»åºç°é®é¢</button> </div> </div> </div>')}]),angular.module("/ycjs/tpl/common/pop_add_image.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_add_image.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æå¥å¾ç</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a ng-click="js_show_images()"><i class="mr_5"></i>éæ©å·²æå¾ç</a></li> <li><a ng-click=js_upload_image()><i class="mr_5"></i>{{{true:"æ­£å¨ä¸ä¼ ä¸?...",false:"æ¬å°ä¸ä¼ "}[uploading_done == false]}}</a> <form name="file_upload" class="hide" action="{{action_url}}" method="POST" enctype="multipart/form-data" data-file-upload="file_upload_option"> <input type="file" id="file_upload" name="files[]" title="æ·»å éä»¶" wt-tracker="Pop Add Image|Button|UploadFile From Loacl"/> </form> </li> <li ng-show="error_msg.length > 0"> <div class="alert alert-danger">{{error_msg}}</div> </li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>éæ©å·²æå¾ç</h3> </div> <div class="mh-300" wt-scroll> <div class="popbox-body "> <ul class="popbox-menu"> <div class="part-loading mt_12" wt-loading-done="images_loading_done"></div> <li ng-repeat="image in images" ng-click="js_select_image(image)" class="ng-scope"> <a class="file-item-li-menu file-picfile" href="javascript:;"> <img ng-src="{{image.path | wtBox}}" alt="{{image.name}}"> <span class="file-name ng-binding">{{image.name}}</span> </a> </li> <li class="empty-menu" ng-show="images.length == 0">æ¬å°æ²¡æä»»ä½å¾ç</li> </ul> </div> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/common/pop_add_link.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_add_link.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æå¥é¾æ¥</h3> </div> <div class="popbox-body w_300"> <form class="wt-form" wt-form-validate="{blurTrig:false,showMsg:false}" name="insert_link_form" role="form" novalidate> <div class="form-group"> <label class="control-label">æå­ï¼?</label> <input type="text" autofocus="" class="form-control" name="link_text" ng-model="link_text" placeholder="é¾æ¥æå­" required=""> </div> <div class="form-group"> <label class="control-label">å°åï¼?</label> <input type="text" class="form-control" name="link_address" ng-model="link_address" placeholder="é¾æ¥å°å" required=""> </div> <div class="form-group"> <button wt-form-submit="js_insert_link(insert_link_form)" type="button" class="btn btn-success">æå¥</button> </div> </form> </div> ')}]),angular.module("/ycjs/tpl/common/pop_comment_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_comment_menu.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è¯è®ºéé¡¹</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="js_del_comment()" wt-tracker="Comment Panel|List|Edit Comment-Delete"><i class="icon-trash"></i> å é¤</a> </li> </ul> </div>')}]),angular.module("/ycjs/tpl/common/pop_comment_metion.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_comment_metion.html",'<div class="popbox-header" ng-mousedown="js_mousedown($event)"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>åééç¥</h3> </div> <div class="popbox-bodywrapper" wt-scroll ng-mousedown="js_mousedown($event)"> <div class="popbox-body"> <input type="text" autofocus="" ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block"/> <br> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in metion_members | filterMembers:search_user_input"> <wt-avatar member="member" size="30" name="true" atname="true" faceclass="plr_5" wt-tracker="Comment Panel|Pop AtPeople|Add People" click="js_metion_member($event,member)"></wt-avatar> </li> </ul> </div> </div> <div class="popbox-footer top-divider"> <a class="action-item" href="javascript:;" ng-click="js_metion_all($event)" wt-tracker="Comment Panel|Pop AtPeople|All People"> <span class="fs_15">@</span> å¨é¨æå({{metion_members.length}}) </a> </div>')}]),angular.module("/ycjs/tpl/common/pop_datepicker.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_datepicker.html",'<div class="popbox-header"> <button class="close" ng-click="js_close()">&times;</button> <h3>è®¾ç½®æªæ­¢æ¶é´</h3> </div> <div class="popbox-body"> <input ng-model="task.expire_date" type="hidden"/> <ul class="list-inline m_0"> <li><a href="javascript:;" ng-click="js_today()" wt-tracker="Pop Datepicker|Top|Today">ä»å¤©</a></li> <li>|</li> <li><a href="javascript:;" ng-click="js_tomorrow()" wt-tracker="Pop Datepicker|Top|Tomorrow">æå¤©</a></li> <li>|</li> <li><a href="javascript:;" ng-click="js_week()" wt-tracker="Pop Datepicker|Top|ThisWeek">æ¬å¨</a></li> <li>|</li> <li><a href="javascript:;" ng-click="js_next_week()" wt-tracker="Pop Datepicker|Top|NextWeek">ä¸å¨</a></li> <li>|</li> <li><a href="javascript:;" ng-click="js_month()" wt-tracker="Pop Datepicker|Top|ThisMonth">æ¬æ</a></li> </ul> <div wt-datepicker="task.expire_date_temp"></div> </div> <div class="popbox-footer"> <a class="btn btn-success mr_15" wt-tracker="Pop Datepicker|Footer|OK" ng-click="js_set_expire(task.expire_date_temp)">ç¡®å®</a> <a class="btn" wt-tracker="Pop Datepicker|Footer|Cancel" ng-click="js_cancel_expire()">åæ¶æªæ­¢æ¶é´</a> </div> ')}]),angular.module("/ycjs/tpl/common/pop_delete_confirm.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_delete_confirm.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>{{ delete_title || "ç¡®è®¤å é¤"}}</h3> </div> <div class="popbox-body w_300"> <span ng-bind-html="delete_message || \'ç¡®è®¤è¦å é¤æ­¤éé¡¹åï¼\'"> </span> </div> <div class="popbox-footer"> <button ng-click="js_sure_delete()" data-loading-text="å é¤ä¸?..." loading-status="is_deleting" class="btn btn-danger mr_15">ç¡®å®å é¤</button> <button ng-click="js_close()" class="btn btn-cancel">åæ¶</button> </div> ')}]),angular.module("/ycjs/tpl/common/pop_emojis.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_emojis.html",'<div class="popbox-body emoji-box" ng-mousedown="js_mousedown($event)" style="max-height: 250px;"> <ul class="popbox-item"> <li ng-click="js_insert_emoji(emoji)" ng-repeat="emoji in emojis"> <a href="javascript:"><img class=\'emoji\' ng-src="/img/emoji/{{ emoji }}.png"/></a> </li> </ul> <ul class="pagination pagination-sm"> <li ng-repeat="emoji_group in emoji_groups" ng-class="{true:\'active\'}[current == $index]"> <a href="javascript:;" ng-click="js_to_page($index)">{{$index+1 }}</a> </li> </ul> </div>')}]),angular.module("/ycjs/tpl/common/pop_new_feature.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_new_feature.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ°åè?</h3> </div> <div class="popbox-body w_300"> <a href="/blog/features/worktile_v3_released" target="_blank">å¨æ°çè®¾è®¡ï¼å¨æ°çWorktile 3.0</a><br/> <br/> <span class="text-muted"> è¿ä¸æ¬¡æä»¬éæ°ä¸ºä½ æé äºä¸ä¸ªå¨æ°çå¯¼èªæ¹å¼ï¼è®©ä½ å¯ä»¥ä¸ç¨æèï¼éæ¶ åæ¢å°èªå·±æ³è¦è¿å¥å·¥ä½çå°æ¹ï¼è¿ä¸æ¬¡æä»¬è®©å·¥ä½å°æä¸ºäºçæ­£çâå·¥ä½å°âï¼è¿ä¸æ¬¡æä»¬æå¢éä¿¡æ¯éæåº¦è¿ä¸æ­¥æåï¼ä½ å¯ä»¥éæ¶åç°èªå·±æåä¸é¡¹ç®ä¸­çä»»ä½åç´ ã? </span> </div> ')}]),angular.module("/ycjs/tpl/common/pop_star_projects.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/pop_star_projects.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å¸¸ç¨é¡¹ç®</h3> </div> <div class="mh-300" wt-scroll> <div class="popbox-body"> <ul class="popbox-menu"> <li data-ng-repeat="project in projects | filter:{is_star:1}"> <a href="javascript:;" data-ng-click="js_to_project(project)" title="{{project.name}}"> <i ng-class="project.pic" ng-style="{color: project.bg}"></i> {{project.name}}</a> </li> </ul> </div> </div> ')}]),angular.module("/ycjs/tpl/common/shortcutkey_dialog.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/shortcutkey_dialog.html",'<div class="modal-dialog dialog-shorcutkey"> <div class="modal-content"> <div class="modal-header"> <h3 class="icon-keyboard"> é®çå¿«æ·é?</h3> </div> <div class="modal-body"> <div class="shortcut-column row"> <div class="shortcut-section col-xs-4"> <h4>éç¨</h4> <ul> <li> <span class="key"><a>?</a></span> <span>æå¼å¿«æ·é®å¸®å©çªå?</span> </li> <li> <span class="key"><a>~</a></span> <span>æå¼å¸¸ç¨é¡¹ç®å¯¼èª</span> </li> <li> <span class="key"><a>Esc</a></span> <span>éåºç¼è¾ç¶ææèå³é­å¼¹åºèå?/çªå£</span> </li> <li> <span class="key"><a>E</a></span> <span>è¿å¥ä»»å¡/è¯é¢/æä»¶/ææ¡£çç¼è¾ç¶æ?</span> </li> <li> <span class="key"><a>W</a></span> <span>æå¼æ·»å å³æ³¨èå</span> </li> <li> <span class="key"><a>Ctrl Enter</a></span> <span>åè¡¨è¯è®º</span> </li> <li> <span class="key"><a>@</a></span> <span>å¨è¯è®ºä¸­æå¼é¡¹ç®æåèå</span> </li> <li> <span class="key"><a>:</a></span> <span>å¨è¯è®ºä¸­æå¼è¡¨æèå</span> </li> </ul> </div> <div class="shortcut-section col-xs-4"> <h4>é¡¹ç®</h4> <ul> <li> <span class="key"><a>Shift T</a></span> <span>åæ¢å°ä»»å?</span> </li> <li> <span class="key"><a>Shift E</a></span> <span>åæ¢å°æ¥å?</span> </li> <li> <span class="key"><a>Shift F</a></span> <span>åæ¢å°æä»?</span> </li> <li> <span class="key"><a>Shift C</a></span> <span>åæ¢å°è¯é¢?</span> </li> <li> <span class="key"><a>Shift D</a></span> <span>åæ¢å°ææ¡?</span> </li> <li> <span class="key"><a>Shift G</a></span> <span>åæ¢å°ç®æ?</span> </li> <li> <span class="key"><a>Shift A</a></span> <span>åæ¢å°æ´»å?</span> </li> <li> <span class="key"><a>Shift R</a></span> <span>åæ¢å°åæ¶ç«</span> </li> </ul> </div> <div class="shortcut-section col-xs-4"> <h4>ä»»å¡</h4> <ul> <li> <span class="key"><a>I</a></span> <span>æå¼æ°å»ºä»»å¡çªå£</span> </li> <li> <span class="key"><a>N</a></span> <span>æå¼æ°å»ºåè¡¨çªå£</span> </li> <li> <span class="key"><a>â?</a></span> <span>åå·¦å¯¼èªéæ©ä»»å¡</span> </li> <li> <span class="key"><a>â?/J</a></span> <span>åä¸å¯¼èªéæ©ä»»å¡</span> </li> <li> <span class="key"><a>â?/K</a></span> <span>åä¸å¯¼èªéæ©ä»»å¡</span> </li> <li> <span class="key"><a>â?</a></span> <span>åå³å¯¼èªéæ©ä»»å¡</span> </li> <li> <span class="key"><a>Enter</a></span> <span>æå¼éä¸­çä»»å?</span> </li> <li> <span class="key"><a>C</a></span> <span>è®¾ç½®éä¸­ä»»å¡ä¸ºå®æ?</span> </li> <li> <span class="key"><a>D</a></span> <span>è®¾ç½®éä¸­ä»»å¡çæªæ­¢æ¥æ?</span> </li> <li> <span class="key"><a>L</a></span> <span>éä¸­ä»»å¡è®¾ç½®æ ç­¾</span> </li> <li> <span class="key"><a>M</a></span> <span>éä¸­ä»»å¡åéæå</span> </li> <li> <span class="key"><a>Space</a></span> <span>å½åéä¸­ä»»å¡åéç»èªå·?</span> </li> <li> <span class="key"><a>Shift <</a></span> <span>ç§»å¨éä¸­ä»»å¡å°å·¦ä¾§åè¡¨ä¸­</span> </li> <li> <span class="key"><a>Shift ></a></span> <span>ç§»å¨éä¸­ä»»å¡å°å³ä¾§åè¡¨ä¸­</span> </li> </ul> </div> </div> </div> </div> </div>')
}]),angular.module("/ycjs/tpl/common/tab_comment_activity.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/tab_comment_activity.html",'<tabset> <tab heading="è¯è®º" active="tab_active.tab_comment_active" select="select_tab_comment()"> <ng-include src="\'/ycjs/tpl/common/comment_list.html\'"></ng-include> </tab> <tab heading="æ´»å¨" active="tab_active.tab_activity_active" select="select_tab_activity()"> <section ng-controller="item_activity_ctrl"> <ng-include src="\'/ycjs/tpl/activity/activity_list.html\'"></ng-include> </section> </tab> </tabset> ')}]),angular.module("/ycjs/tpl/common/watch_filter.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/common/watch_filter.html",'<ul class="nav nav-pills" ng-controller="filter_watch_ctrl"> <li ng-class="{true:\'active\'}[item.selected == true]" ng-repeat="item in filter_items"> <a href="javascript:;" ng-click="js_select_filter_item(item)" wt-tracker="Watch Filter|Filter By {{item}}">{{item.display_name}}</a> </li> </ul> ')}]),angular.module("/ycjs/tpl/dashboard/calendar.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/calendar.html",'<div class="layout_content"> <div class="layout_content_main height-noheader" ng-class="{true:\'nosidebar_out\',false:\'nosidebar_in\'}[global.calendar_fold]"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-calendar mr_10"></i>æ¥å</h3> </div> <div class="main text-center"> <div class="pull-left ml_20"> <button id="calendar_today" class="btn mr_15" ng-click="today()"> ä»å¤© </button> </div> <span id="loading_calendar" ng-class="{true:\'done\'}[loading_calender_done]"> <a href="javascript:;" ng-click="prev()"><i class="icon-chevron-left"></i></a> <h4 id="calendar_title" class="help-inline p_0"></h4> <a href="javascript:;" ng-click="next()"><i class="icon-chevron-right"></i></a> </span> <div class="pull-right"> <button ng-disabled="!global.loading_done" class="btn btn-danger js-popbox mr_15" wt-new-event="js_new_event_success(event)" ng-hide="global.calendar_sidebar_view==\'task\'"> æ°å»ºæ¥ç¨ </button> <div class="btn-group mr_15"> <button class="btn" ng-class="{true: \'active\'}[calendar_view==\'month\']" ng-click="changeView(\'month\')">æ? </button> <button class="btn" ng-class="{true: \'active\'}[calendar_view==\'basicWeek\']" ng-click="changeView(\'basicWeek\')">å? </button> </div> <button class="btn" ng-click="js_toggle_right()"> <i ng-class="{true:\'icon-step-forward\',false:\'icon-step-backward\'}[global.calendar_fold]"></i> </button> </div> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <div id="calendar" calendar="myCalendar" ui-calendar="calendarConfig" ng-model="calendarEventSources"></div> </dl> </div> </div> <div class="layout_content_sidebar height-noheader" ng-class="{true:\'in\',false:\'out\'}[global.calendar_fold]"> <ul class="layout_content_sidebar_header"> <li ng-class="{\'active\':(global.calendar_sidebar_view==\'event\')}" ng-click="js_change_calendar_siderview(\'event\')"> <a href="javascript:;">æ¥ç¨</a> </li> <li ng-class="{\'active\':(global.calendar_sidebar_view==\'task\')}" ng-click="js_change_calendar_siderview(\'task\')"> <a href="javascript:;">ä»»å¡</a> </li> </ul> <div class="hr"></div> <div wt-scroll=\'{"scrollButtons":{"enable":true}}\' data-height="160"> <ul class="nav_list" ng-show="global.calendar_sidebar_view==\'event\'"> <li class="menu" ng-class="{false: \'unchecked\', true: \'checked\'}[project.is_checked]" ng-repeat="project in calendar_projects"> <a href="javascript:;" ng-click="js_filter_calendar_toggle(project)"> <i class="mr_5 icon-ok" ng-style="{true:{\'background\':project.bg,\'borderColor\':project.bg}}[project.is_checked]"> </i>{{project.name}} </a> </li> </ul> <ul class="nav_list" ng-show="global.calendar_sidebar_view==\'task\'"> <li class="group-menu" ng-class="{\'active\':show_my_task}"> <a href="javascript:;" ng-click="js_view_my_tasks();"> <i class="mr_5 icon-check"></i> æçä»»å¡ <i ng-if="show_my_task" class="icon-ok"></i> </a> </li> <li class="group-menu" data-ng-repeat="team in calendar_teams"> <a href="javascript:;" data-ng-click="js_team_members_toggle(team)"> <i class="mr_5 icon-sitemap"></i> {{team.name}} <i class="icon-angle" ng-class="{true:\'icon-angle-down\',false:\'icon-angle-right\'}[team.expand == true]"></i> </a> <ul class="sub_nav_list" data-ng-show="team.expand"> <li class="part-loading" data-ng-hide="members_loading_done"> </li> <li class="sub-menu" ng-class="{\'active\':(show_task_uid == member.uid && show_task_team_id == current_team.team_id && !show_my_task)}" data-ng-repeat="member in team.members" data-ng-click="js_view_member_tasks(member,team)"> <wt-avatar member="member" name="true" size="30"></wt-avatar> <i ng-if="show_task_uid == member.uid && show_task_team_id == current_team.team_id && !show_my_task" class="icon-ok"></i> </li> </ul> </li> </ul> </div> <div class="layout_content_sidebar_footer"> <div class="hr"></div> <a href="javascript:;" data-ng-click="js_show_completed_tasks()" ng-if="global.calendar_sidebar_view==\'task\'" > <i class="mr_10" ng-class="{true:\'icon-eye-open\',false:\'icon-eye-close\'}[show_completed_tasks == 1]"></i> <span ng-bind="{true:\'éèå·²å®æä»»å¡\',false:\'æ¾ç¤ºå·²å®æä»»å¡\'}[show_completed_tasks == 1]"></span></a> <a href="javascript:;" data-ng-click="js_toggle_showall()" ng-if="global.calendar_sidebar_view==\'event\'" > <i class="mr_10" ng-class="{true:\'icon-eye-open\',false:\'icon-eye-close\'}[show_all_events==1]"></i> <span ng-bind="{true:\'åªæ¾ç¤ºæçæ¥ç¨\',false:\'æ¾ç¤ºå¨é¨æ¥ç¨\'}[show_all_events==1]"></span></a> </div> </div> </div>')}]),angular.module("/ycjs/tpl/dashboard/dashboard.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/dashboard.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-dashboard mr_10"></i>å·¥ä½å?</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="main-content dashboard-panel height-nonav" wt-scroll> <div class="center-right-panel"> <div class="center-panel"> <div class="center-panel-inner"> <dl class="frame" data-minheight="160"> <dt> <ul class="tabs"> <li> <a ng-class="{\'active\':current_tab == \'feeds\'}" href="javascript:;" ng-click="js_change_tab(\'feeds\')">ææ°å¨æ?</a> </li> <li> <a ng-class="{\'active\':current_tab == \'my_tasks\'}" href="javascript:;" ng-click="js_change_tab(\'my_tasks\')">æçä»»å¡</a> </li> </ul> </dt> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="box-panel-body" data-ng-show="current_tab == \'feeds\'"> <div class="empty-panel noborder" data-ng-show="feeds.length == 0"> <i class="icon-time"></i><br> <span>æ²¡æææ°å¨æ?</span> </div> <div class="feed-list"> <div class="wt-row feed-item" ng-repeat="feed in feeds"> <wt-feed></wt-feed> </div> </div> <div class="mt_20 text-center" data-ng-show="feeds.length > 0"> <a href="/feed">æ¥çå¨é¨å¨æ?</a> </div> </div> <div class="box-panel-body" data-ng-show="current_tab == \'my_tasks\'"> <div class="empty-panel noborder" data-ng-show="uncompeleted_tasks.length == 0"> <i class="icon-check"></i><br> <span>æ²¡ææªå®æçä»»å¡</span> </div> <div class="task-list-panel"> <div class="group-list" ng-show="uncompeleted_tasks.length > 0"> <div class="group-item" ng-repeat="task in uncompeleted_tasks"> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, true)"> <div class="task-main"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> </div> <wt-badges task="task"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"></wt-avatar> </div> </div> </div> <div class="mt_20 text-center"> <a href="/tasks">æ¥çå¨é¨ä»»å¡</a> </div> </div> </div> </div> </div> </dl> </div> </div> <div class="right-panel"> <div class="box-panel my-tasks-overview"> <div class="box-panel-header hello-body"> <wt-avatar member="global.me" size="50" wt-disable-drag></wt-avatar> <div class="hello-right"> <h4>{{global.me.display_name}}, {{hi_greetings}}</h4><br> <span>{{show_date}}</span> </div> </div> <div class="box-panel-body"> <ul> <li class="tasks-uncompleted"> <a href="/tasks"> <span class="count" data-ng-show="!overview"> <i class="icon-refresh"></i> </span> <span class="count" data-ng-show="overview">{{overview.uncompleted}}</span> <span class="text">å¾å®æä»»å?</span> </a> </li> <li class="tasks-expired"> <a href="/tasks/expired"> <span class="count" data-ng-show="!overview"> <i class="icon-refresh"></i> </span> <span class="count" data-ng-show="overview">{{overview.expired}}</span> <span class="text">è¿æä»»å¡</span> </a> </li> <li class="tasks-completed noborder"> <a href="/tasks/completed"> <span class="count" data-ng-show="!overview"> <i class="icon-refresh"></i> </span> <span class="count" data-ng-show="overview">{{overview.completed}}</span> <span class="text">å·²å®æä»»å?</span> </a> </li> </ul> </div> </div> <div class="box-panel today-event"> <div class="box-panel-header"> <h4><i class="icon-calendar-empty mr_10"></i>ä»å¤©æ¥ç¨</h4> </div> <div class="box-panel-body"> <div class="part-loading" data-ng-hide="today_events.length >= 0"></div> <div class="empty-panel min-height noborder" data-ng-show="today_events.length == 0"> <i class="icon-calendar-empty"></i><br> <span>ä»å¤©æ²¡ææ¥ç¨å®æ</span> </div> <ul data-ng-show="today_events.length > 0"> <li data-ng-repeat="event in today_events"> <span>{{event.start.date | timeFormat}}</span> <a href="javascript:;" data-ng-click="locator.to_event(event.pid, event.event_id, true);"> {{event.name}}</a> </li> </ul> </div> </div> </div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/dashboard/dashboard_left_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/dashboard_left_menu.html",'<div wt-scroll=\'{"scrollButtons":{"enable":true}}\' class="height-nonav" data-scrollnoheight="160" data-ng-cloak=""> <ul class="nav_listmenu"> <li class="menu" ng-class="{true: \'active\'}[current_menu==\'all\']"> <a href="/dashboard"> <i class="icon-inbox mr_5"></i>æçé¡¹ç® </a> </li> <li class="menu" ng-class="{true: \'active\'}[current_menu == team.team_id]" ng-repeat="team in teams"> <a href="/teams/{{team.team_id}}"> <i class="icon-sitemap mr_5"></i>{{team.name}} </a> </li> </li> <li class="menu"> &nbsp; </li> </ul> </div> <div class="menu-footer"> <a href="/projects/archive" tooltip-placement="top" tooltip="å½æ¡£é¡¹ç®"> <i class="icon-archive mr_5"></i>å½æ¡£ </a> <a href="/account/teams" tooltip-placement="top" tooltip="å¢éç®¡ç"> <i class="icon-sitemap mr_5"></i>å¢é </a> </div>')}]),angular.module("/ycjs/tpl/dashboard/feed.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/feed.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-time mr_10"></i>å¨é¨å¨æ?</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ul class="tabs"> <li> <a ng-class="{true: \'active\'}[current_tab == 0]" href="javascript:;" ng-click="js_change_tab(0)"> å¨é¨ </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 1]" href="javascript:;" ng-click="js_change_tab(1)"> ä»»å¡ </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 2]" href="javascript:;" ng-click="js_change_tab(2)"> æä»¶ </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 3]" href="javascript:;" ng-click="js_change_tab(3)"> è¯é¢ </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 4]" href="javascript:;" ng-click="js_change_tab(4)"> ææ¡£ </a> </li> <li> <a ng-class="{true: \'active\'}[current_tab == 5]" href="javascript:;" ng-click="js_change_tab(5)"> æ¥ç¨ </a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="feeds != null && feeds.length == 0 && part_loading_done"> <i class="icon-time"></i><br> <span>æ²¡æä»»ä½å¨æ?</span> </div> <div class="feed-list" ng-show="feeds.length > 0"> <div class="wt-row feed-item" ng-repeat="feed in feeds"> <wt-feed></wt-feed> </div> </div> <div class="loading-more-panel"> <div class="part-loading" data-ng-hide="part_loading_done"> </div> <button class="btn" ng-show="has_more && part_loading_done" data-loading-text="å è½½ä¸?..." loading-status="!part_loading_done" ng-click="load_feeds_more($event);"> å è½½æ´å¤... </button> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/dashboard/inbox.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/inbox.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-bell-alt mr_10"></i>æ¶æ¯ä¸­å¿</h3> </div> <div class="main"> <div class="pull-right"> <button ng-click="js_set_all_notice_read()" class="btn mr_15" tooltip-placement="bottom" tooltip="å¨é¨æ ä¸ºå·²è¯»"> å¨é¨æ ä¸ºå·²è¯» </button> <a href="/account/message" tooltip-placement="bottom" tooltip="æ¶æ¯è®¾ç½®" class="btn"> <i class="icon-cog"></i> </a> </div> </div> </div> </div> <div class="rightpanel-wrapper" ng-show="global.loading_done"> <div class="height-nonav notice-list-panel" wt-scroll> <dl class="frame" data-minheight="148"> <dt> <ul class="tabs"> <li> <a ng-class="{\'active\':is_show_read != true}" href="javascript:;" ng-click="js_show_unread_notices()">æªè¯»</a> </li> <li> <a ng-class="{\'active\':is_show_read == true}" href="javascript:;" ng-click="js_show_read_notices()">å·²è¯»</a> </li> </ul> </dt> <dd class="notice-list"> <div ng-show="is_show_read"> <div class="notice-item wt-row " ng-repeat="notice in read_notices"> <wt-notice notice-click="js_show_slide_detail($eType,notice,$entity)"></wt-notice> </div> <div class="notice-empty text-center" ng-show="is_show_read && read_notices.length == 0 && !loading_read_notice"> <i class="icon-bell-alt"></i><br/><br/> <span>æ²¡æå·²è¯»æ¶æ¯</span> </div> <div class="loading-more-panel" ng-show="!has_no_more && !loading_read_notice"> <button class="btn" ng-click="js_load_more_notice()">å è½½æ´å¤... </button> </div> <div class="load-more part-loading" ng-show="is_show_read && !has_no_more && loading_read_notice"></div> </div> <div ng-hide="is_show_read"> <div class="notice-item wt-row" ng-repeat="notice in show_unread_notices"> <wt-notice notice-click="js_show_slide_detail($eType,notice,$entity)"></wt-notice> </div> <div class="notice-empty text-center" ng-show="show_unread_notices.length == 0 && loading_unread_notice == false"> <i class="icon-bell-alt"></i><br/><br/> <span>æ²¡ææªè¯»æ¶æ¯</span> </div> </div> <div class="load-more part-loading" ng-show="!is_show_all && loading_unread_notice"></div> </dd> </dl> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/dashboard/projects.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/projects.html",'<div class="layout_content"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-inbox mr_10"></i>é¡¹ç®</h3> </div> <div class="main"> <div class="pull-right"> <a href="/project/add" class="btn btn-danger mr_15">æ°å»ºé¡¹ç® </a> <div class="btn-group"> <button class="btn" ng-class="{\'grid\': \'active\'}[view_type]" ng-click="js_view_toggle(\'grid\')"> <i class="icon-th-large"></i> </button> <button class="btn" ng-class="{\'list\': \'active\'}[view_type]" ng-click="js_view_toggle(\'list\')"> <i class="icon-list"></i> </button> </div> </div> </div> </div> </div> <div class="layout_content_main no_sidebar height-nonav" wt-scroll> <div class="projects-panel" data-ng-show="global.loading_done"> <div class="project-grid-panel" ng-show="view_type == \'grid\'"> <div class="projects-panel-header" ng-hide="(projects | filter:{is_star:1}).length==0"> <i class="icon-star"></i> å¸¸ç¨é¡¹ç®</div> <div class="project-grid ui-sortable" sortable="project_sort_options" ng-hide="(projects | filter:{is_star:1}).length==0"> <div class="project-item show-star" ng-repeat="project in projects | filter:{is_star:1}" project-id="{{ project.pid }}" project-pos="{{ project.pos }}"> <a href="javascript:;" ng-class="{1: \'star-started\', 0: \'\'}[project.is_star]" ng-click="js_star_toggle($event,project)" class="star" title="{{ {1: \'ä»å¸¸ç¨é¡¹ç®ç§»é¤\', 0: \'è®¾ç½®ä¸ºå¸¸ç¨é¡¹ç®\'}[project.is_star] }}" ng-hide="project.archived == \'1\'"> <i ng-class="{1: \'icon-star\', 0: \'icon-star-empty\'}[project.is_star]"></i> </a> <a class="center" href="/project/{{project.pid}}"> <i ng-class="project.pic" ng-style="{color:project.bg}"></i> <h4>{{project.name}}</h4> </a> </div> </div> <div data-ng-repeat="team in teams"> <div class="projects-panel-header"> <i class="icon-sitemap"></i> {{team.name}}</div> <div ng-show="view_type == \'grid\'" class="project-grid" ng-class="{\'ui-sortable\':team.projects.length!=0}" sortable="{true:project_sort_options}[team.projects.length!=0]"> <div class="project-item" ng-repeat="project in team.projects" project-id="{{ project.pid }}" project-pos="{{ project.pos }}" data-ng-class="{1:\'show-star\'}[project.is_star]"> <a href="javascript:;" ng-class="{1: \'star-started\', 0: \'\'}[project.is_star]" ng-click="js_star_toggle($event,project)" class="star" title="{{ {1: \'ä»å¸¸ç¨é¡¹ç®ç§»é¤\', 0: \'è®¾ç½®ä¸ºå¸¸ç¨é¡¹ç®\'}[project.is_star] }}" ng-hide="project.archived == \'1\'"> <i ng-class="{1: \'icon-star\', 0: \'icon-star-empty\'}[project.is_star]"></i> </a> <a class="center" href="/project/{{project.pid}}"> <i ng-class="project.pic" ng-style="{color:project.bg}"></i> <h4>{{project.name}}</h4> </a> </div> <div class="project-item projects-empty" ng-show="team.projects.length==0"> <a class="center" href="javascript:;" wt-disable-drag> <i class="icon-inbox"></i> <h4>è¿æ²¡æåä¸ä»»ä½é¡¹ç?</h4> </a> </div> </div> </div> </div> <div ng-show="view_type == \'list\'" class="project-list project-panel"> <div class="empty-panel" ng-show="projects.length == 0 && global.loading_done" ng-cloak> <i class="icon-inbox"></i><br/> <span>è¿æ²¡æä»»ä½é¡¹ç?</span> </div> <dl class="frame" ng-show="projects.length > 0"> <dd> <div class="wt-row" ng-repeat="project in projects" ng-click="js_goto_project($event, project)" data-ng-class="{1:\'show-star\'}[project.is_star]"> <div class="column column-star"> <a href="javascript:;" ng-class="{1: \'star-started\', 0: \'\'}[project.is_star]" ng-click="js_star_toggle($event,project)" class="star" title="{{ {1: \'ä»å¸¸ç¨é¡¹ç®ç§»é¤\', 0: \'è®¾ç½®ä¸ºå¸¸ç¨é¡¹ç®\'}[project.is_star] }}" ng-hide="project.archived == \'1\'"> <i ng-class="{1: \'icon-star\', 0: \'icon-star-empty\'}[project.is_star]"></i> </a> &nbsp; </div> <div class="column column-icon"> <i ng-class="project.pic" ng-style="{color:project.bg}"></i> </div> <div class="column column-name"> <h4>{{project.name}}</h4> </div> <div class="column column-admin"> <wt-avatar ng-repeat="member in project.admins" class="js-popbox member mr_5" member="member" size="30"></wt-avatar> </div> <div class="column column-member"> <i class="icon-user mr_5"></i>{{project.member_count}} </div> </div> </dd> </dl> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/dashboard/projects_archive.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/projects_archive.html",' <div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-archive mr_10"></i>å½æ¡£é¡¹ç®</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="layout_content_main no_sidebar height-nonav" wt-scroll> <div class="empty-panel" ng-show="archived_projects.length == 0 && global.loading_done" ng-cloak> <i class="icon-archive"></i><br/> <span>æ²¡æä»»ä½å½æ¡£é¡¹ç®</span> </div> <div class="project-list project-panel"> <dl class="frame archive" data-minheight="160" ng-show="archived_projects.length > 0"> <dt> <span class="title">æçå½æ¡£é¡¹ç®</span> </dt> <dd> <div class="wt-row" ng-repeat="project in archived_projects" wt-go-to="/project/{{project.pid}}"> <div class="column column-star"> &nbsp; </div> <div class="column column-icon"> <i ng-class="project.pic" ng-style="{color:project.bg}"></i> </div> <div class="column column-name"> <h4>{{project.name}}</h4> </div> <div class="column column-admin"> <wt-avatar ng-repeat="member in project.admins" class="js-popbox member mr_5" member="member" size="30"></wt-avatar> </div> <div class="column column-member"> <i class="icon-user mr_5"></i>{{project.member_count}} </div> </div> </dd> </dl> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/dashboard/search_result.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/search_result.html",' <div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-search mr_10"></i>æç´¢ç»æ</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="rightpanel-wrapper" ng-show="global.loading_done"> <div class="height-nonav seach-panel task-list-panel" wt-scroll> <dl class="frame" data-minheight="160"> <div class="search"> <div class="checkbox"> <label> <input ng-model="is_hide_archived" type="checkbox"> éèå½æ¡£ä»»å¡ </label> </div> <div class="input-group" wt-enter="js_search()"> <input type="text" ng-model="keywords" class="form-control col-lg-6"/> <span class="input-group-btn"> <button class="btn btn-success" type="button" data-ng-click="js_search()">æç´¢</button> </span> </div> </div> <dt> <ul class="tabs"> <li class="menu"> <a ng-class="{true: \'active\'}[current_type==\'all\']" href="javascript:;" ng-click="js_filter_result(\'all\')"> å¨é¨ </a> </li> <li class="menu" > <a ng-class="{true: \'active\'}[current_type == \'task\']" href="javascript:;" ng-click="js_filter_result(\'task\')"> ä»»å¡ </a> </li> <li class="menu" > <a ng-class="{true: \'active\'}[current_type == \'file\']" href="javascript:;" ng-click="js_filter_result(\'file\')"> æä»¶ </a> </li> <li class="menu"> <a ng-class="{true: \'active\'}[current_type == \'post\']" href="javascript:;" ng-click="js_filter_result(\'post\')"> è¯é¢ </a> </li> <li class="menu" > <a ng-class="{true: \'active\'}[current_type == \'page\']" href="javascript:;" ng-click="js_filter_result(\'page\')"> ææ¡£ </a> </li> </ul> </dt> <dd> <div class="empty-panel height-nonav" ng-show="show_empty && !loading_result && global.loading_done" ng-cloak> <i class="icon-search"></i><br/> <span>æ²¡ææç´¢ç»æ</span> </div> <div class="part-loading" data-ng-show="loading_result"></div> <div class="group-list" data-ng-hide="loading_result || show_empty"> <div class="group-item" data-ng-show="tasks.length > 0 && (current_type == \'all\' || current_type == \'task\')"> <div class="group-header"> <span>ä»»å¡</span> <span class="badge ml_20">{{ {true: (tasks | filter: {archived:0}).length, false: tasks.length}[!!is_hide_archived] }}</span> </div> <div class="group-tasks-list"> <div class="group-task-item slide-trigger" ng-click="locator.to_task(task.pid, task.tid, true)" ng-repeat="task in tasks" ng-hide="task.archived == 1 && !!is_hide_archived"> <div class="task-main"> <a href="javascript:;" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title" ng-bind-html="task.name | highlight:keywords:caseSensitive"></span> </div> </div> </div> </div> <div class="group-item" data-ng-show="files.length > 0 && (current_type == \'all\' || current_type == \'file\')"> <div class="group-header"> <span>æä»¶</span> <span class="badge ml_20">{{files.length}}</span> </div> <div class="group-tasks-list"> <div class="group-task-item slide-trigger" ng-click="js_show_file(file)" ng-repeat="file in files"> <div class="task-main"> <a href="javascript:;" class="task-check"> <i ng-class="{true:\'icon-file\',false:\'icon-folder-close-alt\'}[(file.type | isFile)]"></i> </a> <span class="task-title" > <span ng-bind-html="file.name | highlight:keywords:caseSensitive"></span> <span ng-if="!(file.type | isFile)">{{file.project_name}}</span> </span> </div> </div> </div> </div> <div class="group-item" data-ng-show="posts.length > 0 && (current_type == \'all\' || current_type == \'post\')"> <div class="group-header"> <span>è¯é¢</span> <span class="badge ml_20">{{posts.length}}</span> </div> <div class="group-tasks-list"> <div class="group-task-item slide-trigger" ng-click="locator.to_post(post.pid, post.post_id, true)" ng-repeat="post in posts"> <div class="task-main"> <a href="javascript:;" class="task-check"> <i class="icon-list-alt"></i> </a> <span class="task-title" ng-bind-html-unsafe="post.name | highlight:keywords:caseSensitive"></span> </div> </div> </div> </div> <div class="group-item" data-ng-show="pages.length > 0 && (current_type == \'all\' || current_type == \'page\')"> <div class="group-header"> <span>ææ¡£</span> <span class="badge ml_20">{{pages.length}}</span> </div> <div class="group-tasks-list"> <div class="group-task-item slide-trigger" ng-click="locator.to_page(page.pid, page.page_id, true)" ng-repeat="page in pages"> <div class="task-main"> <a href="javascript:;" class="task-check"> <i class="icon-file-text-alt"></i> </a> <span class="task-title" ng-bind-html-unsafe="page.name | highlight:keywords:caseSensitive"></span> </div> </div> </div> </div> </div> </dd> </dl> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/dashboard/tasks.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/tasks.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-check mr_10"></i>æçä»»å¡</h3> </div> <div class="main"> <div class="pull-right"> <div class="btn-group"> <button class="btn" ng-class="{\'date\': \'active\'}[my_task_view]" wt-tracker="Tasks Page|Nav|Sort By-Time" tooltip-placement="bottom" tooltip="æ¶é´åç»" ng-click="js_task_view_toggle(\'date\')"> <i class="icon-time"></i> </button> <button class="btn" ng-class="{\'prj\': \'active\'}[my_task_view]" wt-tracker="Tasks Page|Nav|Sort By-Project" tooltip-placement="bottom" tooltip="é¡¹ç®åç»" ng-click="js_task_view_toggle(\'prj\')"> <i class="icon-inbox"></i> </button> </div> </div> </div> </div> </div> <div class="rightpanel-wrapper"> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ul class="tabs"> <li> <a href="/tasks" class="active">å¾å®æä»»å?</a> </li> <li> <a href="/tasks/expired">è¿æä»»å¡</a> </li> <li> <a href="/tasks/completed">å·²å®æä»»å?</a> </li> </ul> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="empty-panel" ng-show="my_tasks.length == 0 && global.loading_done" ng-cloak> <i class="icon-check"></i><br/> <span>æ²¡ææªå®æçä»»å¡</span> </div> <div class="task-list-panel"> <div class="group-list"> <hr/> <div class="group-item" ng-repeat="group in my_tasks"> <div class="group-header"> <span ng-show="my_task_view==\'date\'">{{group.phase}}</span> <a href="/project/{{group.project.pid}}/task" ng-show="my_task_view==\'prj\'"> <i ng-style="{color:group.project.bg}" class="{{group.project.pic}} mr_5"></i> {{ group.project.name}} </a> <span class="badge ml_20">{{group.tasks.length}}</span> </div> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, true)" ng-repeat="task in group.tasks"> <div class="task-main"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> </div> <wt-badges task="task"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"></wt-avatar> </div> </div> </div> </div> </div> </div> </dd> </dl> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/dashboard/tasks_completed.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/tasks_completed.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-check mr_10"></i>æçä»»å¡</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ul class="tabs"> <li> <a href="/tasks">å¾å®æä»»å?</a> </li> <li> <a href="/tasks/expired">è¿æä»»å¡</a> </li> <li> <a class="active" href="/tasks/completed">å·²å®æä»»å?</a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="tasks.length == 0 && !loading_tasks" ng-cloak> <i class="icon-check"></i><br/> <span>æ²¡æå·²å®æçä»»å¡</span> </div> <div class="task-list-panel"> <div class="group-list" ng-show="tasks.length > 0"> <hr/> <div class="group-item" ng-repeat="task in tasks"> <div class="group-header" ng-show="task.is_show_date"> <span> {{ task.completed_date | dateFormatZHCN}}</span> </div> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, true)"> <div class="task-main"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> </div> <wt-badges task="task"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"></wt-avatar> </div> </div> </div> </div> <div class="loading-more-panel"> <button ng-show="!has_no_more && !loading_tasks && global.loading_done == true" class="btn" ng-click="load_tasks_more()" data-loading-text="å è½½ä¸?..." loading-status="loading_tasks">å è½½æ´å¤... </button> <div class="load-more part-loading" ng-show="!has_no_more && loading_tasks"></div> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/dashboard/tasks_expired.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/tasks_expired.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-check mr_10"></i>æçä»»å¡</h3> </div> <div class="main"> <div class="pull-right"> <div class="btn-group"> </div> </div> </div> </div> </div> <div class="rightpanel-wrapper"> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ul class="tabs"> <li> <a href="/tasks">å¾å®æä»»å?</a> </li> <li> <a class="active" href="/tasks/expired">è¿æä»»å¡</a> </li> <li> <a href="/tasks/completed">å·²å®æä»»å?</a> </li> </ul> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="empty-panel noborder" data-ng-show="expired_tasks.length == 0"> <i class="icon-check"></i><br> <span>æ²¡æè¿æçä»»å?</span> </div> <div class="task-list-panel"> <div class="group-list" ng-show="expired_tasks.length > 0"> <hr/> <div class="group-item" ng-repeat="task in expired_tasks"> <div class="group-header" ng-show="$index==0"> <span>è¿æä»»å¡</span> <span class="badge ml_20">{{expired_tasks.length}}</span> </div> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, true)"> <div class="task-main"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> </div> <wt-badges task="task"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"></wt-avatar> </div> </div> </div> </div> </div> </div> </dd> </dl> </div> </div> </div> </div>')
}]),angular.module("/ycjs/tpl/dashboard/tasks_graph.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/tasks_graph.html",' <div class="layout_content"> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-bar-chart mr_10"></i>ä»»å¡ç®æ?</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="rightpanel-wrapper task-graph-panel" ng-show="global.loading_done"> <div class="height-nonav" wt-scroll> <div class="tasks-graph-overview"> <h4>æçä»»å¡ç®æ?</h4> <ul> <li class="tasks-total"> <span class="count">{{user_graph.overview.total}}</span> <span class="text">æ»ä»»å?</span> </li> <li class="tasks-completed"> <span class="count">{{user_graph.overview.completed}}</span> <span class="text">å®æä»»å¡</span> </li> <li class="tasks-uncompleted"> <span class="count">{{user_graph.overview.uncompleted}}</span> <span class="text">æªå®æä»»å?</span> </li> <li class="tasks-expired noborder"> <span class="count">{{user_graph.overview.expired}}</span> <span class="text">è¿æä»»å¡</span> </li> </ul> </div> <div class="graph-panel"> <div class="graph-list"> <div class="graph-item"> <h4>ä»æ¥å®æä»»å¡</h4> <div class="graph-container"> <div class="entry-tasks"> <wt-task ng-repeat="task in user_graph.daily" task="task" class="slide-trigger" hide-action="true" task-entry-id="{{task.entry_id}}" ng-click="locator.to_task(task.pid, task.tid, true)"></wt-task> <div class="graph-empty-panel noborder" ng-show="user_graph.daily.length==0"> <i class="icon-check"></i><br/> <span>æ²¡æå®æä»»å¡</span> </div> </div> </div> </div> <div class="graph-item" ng-show="part_loading_done"> <h4>æ¬å¨ä»»å¡è¿å±</h4> <div class="btn-group title"> <a title="ä¸ä¸å?" href="javascript:;" ng-click="to_prev_week()"><i class="icon-chevron-left"></i></a> <span>{{graph_week_date}}</span> <a title="ä¸ä¸å?" href="javascript:;" ng-disabled="disable_next_week" ng-click="to_next_week()"><i class="icon-chevron-right"></i></a> </div> <div class="graph-container" id=\'week_tasks_graph\'></div> </div> <div class="part-loading h_38" ng-show="!part_loading_done"></div> </div> </div> </div> </div> </div> <div class="layout_content_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/dashboard/tasks_left_menu.html\'"></ng-include> </div> </div>')}]),angular.module("/ycjs/tpl/dashboard/tasks_left_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/dashboard/tasks_left_menu.html",'<div wt-scroll=\'{"scrollButtons":{"enable":true}}\' class="height-nonav"> <ul class="nav_listmenu"> <li class="menu" ng-class="{true: \'active\'}[current_type==\'tasks\']"> <a href="/tasks"> <i class="icon-check mr_5"></i>æçä»»å¡ </a> </li> <li class="menu" ng-class="{true: \'active\'}[current_type==\'completed\']"> <a href="/tasks/completed"> <i class="icon-check-sign mr_5"></i>å·²å®æä»»å? </a> </li> <li class="menu" ng-class="{true: \'active\'}[current_type==\'graph\']"> <a href="/tasks/graph"> <i class="icon-bar-chart mr_5"></i>ä»»å¡ç®æ? </a> </li> </ul> </div>')}]),angular.module("/ycjs/tpl/directive/activity.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/activity.html",'<div> <div class="activity-day" ng-show="activity.is_show_date"> <span class="year">{{[activity.published,\'YYYY\'] | momentFormat}}å¹?<br/></span> <strong>{{[activity.published,\'MM/DD\'] | momentFormat}}<br/></strong> <span class="weekday">{{[activity.published,\'ddd\'] | momentFormat}}</span> </div> <div class="activity-icon"> <i ng-class="activity.verb | activityIcon"></i> </div> <div class="activity-meta"> <span class="date" wt-title="[activity.published,\'HH:mm\'] | momentFormat">{{[activity.published,\'HH:mm\'] | momentFormat}}</span> </div> <wt-avatar member="activity.actor" size="30" class="activity-avatar"></wt-avatar> <div class="activity-itemwarp"> <span class="activity"> <span class="actor">{{activity.actor.display_name}}</span> <span class="verb" ng-bind-html-unsafe="verb"></span> <a class="target" title="{{display_entity.name}}" href="javascript:;" ng-click="js_to_entity(display_entity)"> {{display_entity.name}} </a> </span> </div> </div>')}]),angular.module("/ycjs/tpl/directive/avatar.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/avatar.html",'<a class="avatar"> <span class="avatar-face"> </span> </a> ')}]),angular.module("/ycjs/tpl/directive/avatar_pop.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/avatar_pop.html",'<div class="popbox-avatar"> <div class="avatar-body"> <button class="cancel icon-remove" ng-click="js_close()"></button> <wt-avatar member="member" size="56"></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading">{{member.display_name}}</h4> <p>@{{member.name}}</p> </div> </div> <div class="avatar-footer"> <button class="btn btn-danger">DD</button> </div> </div>')}]),angular.module("/ycjs/tpl/directive/badges.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/badges.html",'<div class="task-badges"></div>')}]),angular.module("/ycjs/tpl/directive/confirm_password.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/confirm_password.html",'<div class="confirm-password"> <span class="caption">è¾å¥å¸å·å¯ç </span> <form class="wt-form" wt-form-validate="{blurTrig:false,showMsg:false}" name="confirm_password_form" role="form" novalidate> <wt-avatar member="global.me" name="true" namebr="true" atname="true" size="80"></wt-avatar> <br/> <span class="text"> ç¡®è®¤æ¯æ¨æ¬äººæä½ï¼è¯·è¾å¥å½åå¸æ·å¯ç å¹¶ç»§ç»? </span> <div class="form-group"> <input name="confirm_password" ng-model="confirm_password" class="form-control" type="password" autofocus="autofocus" required="" placeholder="è¾å¥å½åå¸æ·å¯ç "/> </div> <div class="form-group" ng-show="confirm_password_form.$errors.length > 0"> <div class="alert alert-danger"> <i class="icon-remove-sign"></i> {{confirm_password_form.$errors[0]}} </div> </div> <div class="form-group"> <a class="btn btn-success btn-block" wt-form-submit="js_confirm_password(confirm_password_form)" data-loading-text="ç¡®è®¤ä¸?..." loading-status="confirming">ç¡®è®¤å¹¶ç»§ç»?</a> </div> <div class="form-group clearfix"> <a data-ng-click="js_forgot_password()" href="javascript:;" class="pull-left">å¿è®°å¯ç ?</a> <a data-ng-click="js_cancel_option()" href="javascript:;" class="pull-right">åæ¶</a> </div> </form> </div> ')}]),angular.module("/ycjs/tpl/directive/datepicker.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/datepicker.html",'<div> <ul class="list-inline m_0"> <li> <a href="javascript:;" ng-click="js_set_date_inner(\'today\')">ä»å¤©</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_date_inner(\'tomorrow\')">æå¤©</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_date_inner(\'week\')">æ¬å¨</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_date_inner(\'next_week\')">ä¸å¨</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_date_inner(\'month\')">æ¬æ</a> </li> </ul> <div class="wtdate"></div> </div>')}]),angular.module("/ycjs/tpl/directive/feed.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/feed.html",'<div class="feed-item-inner slide-trigger" ng-click="js_click_feed()"> <div class="column column-actor"> <wt-avatar member="feed.actor" name="true" size="30"></wt-avatar> </div> <div class="column column-action"> <h4>{{action}}</h4> <span class="entity"> <i class="{{type_icon.icon}}"></i> <span ng-bind-html-unsafe="display_entity.name"></span> </span> </div> <div class="column column-datetime"> <span>{{feed.published | fromNow}}</span> </div> </div> ')}]),angular.module("/ycjs/tpl/directive/new_comment.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/new_comment.html",'<wt-avatar member="$root.global.me" size="40" class="new-comment-avatar"></wt-avatar> <div class="new-comment-edit"> <textarea wt-ctrl-enter="$js_save_comment($event,$comment)" wt-comment-atwho="atwho_members" placeholder="è¯´ç¹ä»ä¹?(æCtrl + åè½¦é®æäº?)" ng-model="$comment.temp_message" ></textarea> <div class="add-controls"> <a ng-click="$js_pop_emojis($event, comment)" wt-tracker="Comment Panel|Top|Add Comment-Emojis" class="js-popbox mr_10" data-placement="top" href="javascript:;"> <i class="icon-smile"></i></a> <a ng-click="$js_metion_member($event, comment)" wt-tracker="Comment Panel|Top|Add Comment-AtPeople" class="js-popbox mr_10" data-placement="right" data-align="bottom" href="javascript:;">@</a> <button class="btn btn-success pull-right" data-loading-text="ä¿å­ä¸?..." loading-status="$comment.is_saving" wt-tracker="Comment Panel|Top|Add Comment-Save" ng-click="$js_save_comment($event,$comment)">{{ {true:\'åè¡¨è¯è®º\',false:\'ä¿å­\'}[comment.cid == null] }} </button> </div> </div>')}]),angular.module("/ycjs/tpl/directive/notice.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/notice.html",'<div class="notice-item-inner slide-trigger" ng-click="js_click_notice()"> <div class="column column-read"> <a href="javascript:;" ng-show="!notice.is_read" class="icon-envelope" title="æ ä¸ºå·²è¯»" ng-click="js_set_notice_read($event,notice)"> </a> <a href="javascript:;" ng-show="notice.is_read" class="icon-envelope-alt" title="æ¶æ¯å·²è¯»"> </a> </div> <div class="column column-sender"> <wt-avatar member="notice.sender" name="true" size="30"></wt-avatar> </div> <div class="column column-action"> <h4>{{action}}</h4> <span class="entity"> <i class="{{type_icon.icon}}"></i> <span ng-bind-html-unsafe="display_entity.name"></span> </span> </div> <div class="column column-datetime"> <span>{{notice.published | fromNow}}</span> </div> </div>')}]),angular.module("/ycjs/tpl/directive/pop_datepicker.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/pop_datepicker.html",' <div class="popbox-body"> <wt-full-datepicker default-date="default_date" set-date="js_set_date(date)" min-date="min_date"></wt-full-datepicker> </div> <div class="popbox-footer" data-ng-show="need_sure"> <a class="btn btn-success mr_15" wt-tracker="Pop Datepicker|Footer|OK" ng-click="js_set_date()">ç¡®å®</a> <a class="btn" wt-tracker="Pop Datepicker|Footer|Cancel" ng-click="js_cancel()">åæ¶</a> </div> ')}]),angular.module("/ycjs/tpl/directive/task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/task.html",'<div id="task_main_{{ task.tid }}" task-id="{{task.tid}}" class="task task_style"> <div class="entry-task-labels"></div> <div class="entry-task-main" ng-class="{1:\'task-main-completed\'}[task.completed]"> <a class="entry-task-check" id="task_check_{{ task.tid }}" wt-click="js_complete_task($event, entry, task)"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <a class="entry-task-title" href="javascript:;">{{task.name}}</a> <div ng-hide="hide_action"> <a href="javascript:;" id="icon_action_task_{{ task.tid }}" class="js-popbox entry-task-menu" wt-permission="[permission,project.info.curr_role,1,2]" data-placement="right" data-align="middle" data-auto-adapt="true" wt-click="js_show_task_menu($event, entry, task)"> <i class="icon-play-circle"></i> </a> </div> </div> <wt-badges task="task"></wt-badges> <div class="entry-task-members" ng-show="task.members !=null && task.members.length > 0"> <wt-avatar ng-repeat="member in task.members" class="js-popbox member" member="member" size="30" click="js_show_member($event, task, member)"></wt-avatar> </div> </div> ')}]),angular.module("/ycjs/tpl/directive/task.html.bak",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/task.html.bak",'<div id="task_main_{{ task.tid }}" ng-mouseleave="js_mouseleave_task($event,task)" class="task task_style slide-trigger" ng-class="{\'task-selected\':task.selected == true}" droppable="member_drop_options" task-entry-id="{{task.entry_id}}" task-pos="{{task.pos}}" ng-click="locator.to_task(task.pid, task.tid, false)" > <div class="entry-task-labels"> <div class="task-label {{label.name}}-label" title="{{label.desc}}" ng-repeat="label in task.labels"></div> </div> <div class="entry-task-main" ng-class="{1:\'task-main-completed\'}[task.completed]"> <a class="entry-task-check" id="task_check_{{ task.tid }}" wt-click="js_complete_task($event, entry, task)"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <a class="entry-task-title" href="javascript:;">{{task.name}}</a> <a href="javascript:;" id="icon_action_task_{{ task.tid }}" class="js-popbox entry-task-menu" wt-permission-hide="permission" data-placement="right" data-align="middle" wt-click="js_show_task_menu($event, entry, task)"> <i class="icon-play-circle"></i> </a> </div> <wt-badges badges="task.badges"></wt-badges> <div class="entry-task-members" ng-show="task.members !=null && task.members.length > 0"> <wt-avatar ng-repeat="member in task.members" class="js-popbox member" member="member" size="30" click="js_show_member($event, task, member)"></wt-avatar> </div> </div> ')}]),angular.module("/ycjs/tpl/directive/task_composer.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/directive/task_composer.html",'<div class="entry-task-composer"> <div class="composer-body composer-body-focus" ng-click="focus_textarea($event)"> <div class="entry-task-labels"> <div data-ng-repeat="label in new_task.labels" class="task-label {{label.name}}-label"></div> </div> <textarea class="form-control help-block mb_0" ng-model="new_task.temp_name" wt-enter="js_add_task($event, new_task, entry, 0)"></textarea> <div class="composer-body-footer"> <div class="task-badges" task="task"> <span ng-show="new_task.expire_date !=null && new_task.expire_date!=0" class="task-badge icon icon-time " title="æªæ­¢æ¶é´ï¼{{new_task.expire_date | shortTimeFormat}}">{{new_task.expire_date | shortTimeFormat}}</span> </div> <div class="entry-task-members" ng-show="new_task.members !=null && new_task.members.length > 0"> <wt-avatar ng-repeat="member in new_task.members" class="js-popbox member" member="member" size="30" click="js_show_member($event, new_task, member)"></wt-avatar> </div> </div> </div> <div class="composer-footer"> <button ng-click="js_task_save($event, new_task, entry);" class="btn btn-success confirm mr_10" data-loading-text="ä¿å­ä¸?..." wt-tracker="Project Task Page|Main-Entry|Footer Add Task-OK" loading-status="is_task_adding">ä¿å­ </button> <button ng-click="js_cancel(entry,new_task)" class="btn" wt-tracker="Project Task Page|Main-Entry|Footer Add Task-Cancel">åæ¶</button> <a href="javascript:;" class="js-popbox icon-play-circle action-icon " data-placement="right" data-align="middle" wt-click="js_show_task_menu($event, entry, new_task)"> </a> </div> </div>')}]),angular.module("/ycjs/tpl/entity/event.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/entity/event.html",'<div data-ng-controller="entity_event_ctrl" class="entity-panel event-panel height-noheader" wt-scroll=\'{"advanced":{"autoScrollOnFocus":false}}\' wt-dragfile="dragfile_option"> <div class="part-loading mt_60" wt-loading-done="section_loading_done"></div> <div class="entity-panel-wrapper" ng-show="section_loading_done"> <div class="right-entry-header"> <button class="close mr_15" ng-click="js_close()">&times;</button> </div> <div class="alert alert-danger wt-alert" ng-show="permission==16"> <i class="icon-info-sign"></i> æ¥ç¨å·²ç»äº? {{event.update_date | timeFormatZHCN}} å é¤äº? </div> <div class="entity-panel-header" ng-show="locator.show_prj"> <a href="javascript:;" ng-click="locator.to_project(project.info.pid)" wt-tracker="Event Panel|Main|Goto Project"> <i class="{{project.info.pic}} mr_10" ng-style="{color:project.info.bg}"></i> {{project.info.name}} </a> </div> <div class="entity-panel-body"> <div class="content-panel"> <div class="content-module editable-module"> <div ng-hide="event.is_edit"> <div class="entity-title"> <h2 ng-click="js_show_editor(event)" class="ng-binding" wt-tracker="Event Panel|Main|Edit Event"> {{event.name}} </h2> </div> <div class="event-datetime"> <span>å¼å§?</span>ï¼{{event.show_start_date}} </div> <div class="event-datetime"> <span>ç»æ</span>ï¼{{event.show_end_date}} </div> <div class="event-location" ng-if="event.location.length > 0"> <span>ä½ç½®</span>ï¼{{event.location || "æ?"}} </div> <div class="event-summary"> <div class="event-summary-text markdown" wt-markdown=\'event.summary\'></div> </div> </div> <div class="edit-section" ng-show="event.is_edit"> <div> <input type="text" ng-model="temp_event.name" wt-enter="js_set_update($event, event)" class="form-control help-block" placeholder="æ¥ç¨åç§°" required> <div class="input-section"> <span class="input-label">å¼å§ï¼</span> <input wt-pop-full-datepicker="start_date_options" type="text" ng-model="temp_event.start_date" class="form-control date js-popbox" data-placement="bottom" readonly required> <select ng-model="temp_event.start_hour" ng-options="time for time in start_hour_sections" class="form-control hour"></select> <span class="separation">:</span> <select ng-model="temp_event.start_minute" ng-options="time for time in start_minute_sections" class="form-control minute"></select> </div> <div class="input-section"> <span class="input-label">ç»æï¼?</span> <input type="text" ng-model="temp_event.end_date" wt-pop-full-datepicker="end_date_options" class="form-control date js-popbox" data-placement="bottom" readonly required> <select ng-model="temp_event.end_hour" ng-options="time for time in end_hour_sections" class="form-control hour"></select> <span class="separation">:</span> <select ng-model="temp_event.end_minute" ng-options="time for time in end_minute_sections" class="form-control minute"></select> </div> <div class="input-section"> <span class="input-label">ä½ç½®ï¼?</span> <input type="text" ng-model="temp_event.location" class="form-control location" placeholder="ä½ç½®(å¯é?)"> </div> <textarea ng-model="temp_event.summary" type="text" wt-ctrl-enter="js_set_update($event, event,temp_event)" wt-editor placeholder="æ·»å æ¥ç¨æè¿°(æCtrl + åè½¦é®æäº?)"></textarea> </div> <div class="form-group"> <button ng-click="js_set_update($event, event,temp_event)" data-loading-text="ä¿å­ä¸?..." loading-status="event.is_saving" class="btn btn-success mr_15" wt-tracker="Event Panel|Main|Edit Event-Save" >ä¿å­ </button> <button ng-click="js_cancel_editor(event)" class="btn" wt-tracker="Event Panel|Main|Edit Event-Cancel">åæ¶ </button> </div> </div> </div> <div class="content-module dragfile-hover-show" ng-show="event.files.length > 0 || global_fileupload_queue().length>0"> <h4><i class="icon-paper-clip"></i>éä»¶</h4> <div class="entity-attachments"> <ul> <li class="attachment-item" ng-repeat="file in event.files"> <a class="file-picfile fancybox-file" data-fancybox-group="filegroup" data-fancybox-href="{{file | wtBoxView}}" data-fancybox-type="image" title="{{ file.name }}"> <img ng-if="!file.preview" ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> <div ng-if="file.preview" class="preview" data-file-upload-preview="file"></div> </a> <a class="file-name" href="javascript:;" ng-click="js_goto_file(event.pid, file.fid)" wt-tracker="Event Panel|Main|Goto Attachments File"> {{file.name}} </a> <span class="file-size">{{file.size | fileSize}}</span> <a class="file-down file-action mr_15" ng-href="{{file | wtBoxDownload}}"> <i class="icon-download mr_5"></i>ä¸è½½ </a> <a class="file-del file-action mr_15" href="javascript:;" wt-tracker="Event Panel|Main|Delete Attachments Link" ng-click="js_del_attachment($event, file)" wt-permission="[permission,project.info.curr_role,1,2]"> <i class="icon-trash mr_5"></i>å é¤ </a> </li> <li class="attachment-item attachment-item-queue" ng-repeat="file in global_fileupload_queue()"> <a class="file-picfile" data-fancybox-group="filegroup" data-fancybox-href="{{file | wtBoxView}}" data-fancybox-type="image" title="{{ file.name }}"> <span ng-show="file.error"> <span class="label label-danger">{{ file.error | fileuploadErrorInfo }}</span> </span> <img ng-if="!file.preview" ng-src="{{file.name | getExtIcon}}" alt="{{ file.name }}"/> <div ng-if="file.preview" class="preview" data-file-upload-preview="file"></div> </a> <span class="file-name"> {{file.name}} </span> <span class="file-size">{{file.size | fileSize}}</span> <a href="javascript:;" class="pull-left mr_15" ng-click="file.$cancel()" ng-hide="!file.$cancel"> <i class="icon-cancel mr_5"></i>åæ¶ </a> <div ng-hide="file.error" class="pull-left mr_15 progress progress-striped active" data-ng-class="{pending: \'in\'}[file.$state()]" data-file-upload-progress="file.$progress()"> <div class="progress-bar progress-bar-success" data-ng-style="{width: num + \'%\'}"> </div> </div> </li> <li class="attachment-item dragfile-hover-placeholder"> <span class="name">&nbsp; <i class="icon-upload-alt"></i> æ¾å¼ä¸ä¼ æä»¶</span> </li> </ul> </div> </div> <div class="content-module" id="events_tab_module" ng-cloak class="ng-cloak"> <ng-include src="\'/ycjs/tpl/common/tab_comment_activity.html\'"></ng-include> </div> </div> <div class="sidebar-panel" data-minheight="120"> <div class="sidebar-module" ng-hide="event.members.length==0 && (project.info.curr_role==3 || project.info.archived==1 || permission==32 || permission==16)"> <h4>åä¸äº?</h4> <div class="entity-members" droppable="attendees_droppable_options"> <ul> <li ng-repeat="attendee in event.attendees"> <wt-avatar member="attendee" class="js-popbox" click="js_show_attendee($event, attendee)" data-placement="left"></wt-avatar> </li> <li wt-permission="[permission,project.info.curr_role,1,2]"> <a class="avatar-add js-popbox" href="javascript:;" wt-tracker="Event Panel|Right|Add Attendees" ng-click="js_assign_attendees($event, event)" data-placement="left"> <span class="o"> <i class="icon-ex-user-add"></i> </span> </a> </li> </ul> </div> </div> <div class="sidebar-module" wt-permission="[permission,project.info.curr_role,1,2]"> <h4>æä½</h4> <div class="entity-actions"> <div class="btn-group js-popbox mb_10" data-placement="left" data-align="top"> <span class="btn fileinput-button w_165" wt-tracker="Event Panel|Right|UploadFile From Local"> <i class="icon-paper-clip"></i>æ·»å éä»¶ <input type="file" name="files[]" title="æ·»å éä»¶" multiple wt-uploadfile="file_upload_option"/> </span> <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;" wt-tracker="Event Panel|Right|UploadFile-More"> <i class="icon-caret-down"></i> </a> <ul class="dropdown-menu pull-right"> <li> <a href="javascript:;" ng-click="js_trigger_upload($event)" wt-tracker="Event Panel|Right|UploadFile-More-Form Local"> <i class="icon-xx"></i> æ¬å°ä¸ä¼ </a> </li> <li> <a href="javascript:;" ng-click="js_show_attach($event, event)" wt-tracker="Event Panel|Right|UploadFile-More-From Exists"> <i class="icon-xx"></i> ä»å·²ææä»¶éæ© </a> </li> </ul> </div> <button class="btn btn-block mb_10" ng-click="js_show_editor(event)" wt-permission="[permission,project.info.curr_role,1,2]"> <i class="icon-pencil"></i>ç¼è¾ </button> <button class="btn btn-block js-popbox" wt-tracker="Event Panel|Right|Delete" data-placement="left" ng-click="js_show_trash($event, event)"> <i class="icon-trash"></i>å é¤ </button> </div> </div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/entity/file.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/entity/file.html",'<div data-ng-controller="entity_file_ctrl" class="entity-panel file-panel height-noheader" wt-scroll=\'{"advanced":{"autoScrollOnFocus":false}}\' wt-dragfile="dragfile_option"> <div class="part-loading mt_60" wt-loading-done="section_loading_done"></div> <div class="entity-panel-wrapper" ng-show="section_loading_done"> <div class="right-entry-header"> <button class="close mr_15" ng-click="js_close()">&times;</button> </div> <div class="alert alert-danger wt-alert" ng-show="permission==16"> <i class="icon-info-sign"></i> æä»¶å·²ç»äº? {{file.update_date | timeFormatZHCN}} å é¤äº? </div> <div class="entity-panel-header" ng-show="locator.show_prj"> <a href="javascript:;" ng-click="locator.to_project(project.info.pid)"> <i class="{{project.info.pic}} mr_10" ng-style="{color:project.info.bg}"></i> {{project.info.name}} </a> </div> <div class="entity-panel-body"> <div class="content-panel"> <div class="content-module editable-module"> <div ng-hide="file.is_edit"> <div class="entity-title"> <h2 ng-click="js_show_editor(file)"> {{file.name}} </h2> </div> <div class="entity-meta"> <wt-avatar member="file.update_user" name="true" size="40"></wt-avatar> <span>ä¸ä¼ äº?&nbsp;{{file.update_date | fromNow}}</span> </div> <div> <div class="markdown" wt-markdown=\'file.desc\'></div> </div> </div> <div class="edit-section" ng-show="file.is_edit"> <div> <input type="text" wt-enter="js_set_update($event, file)" autofocus ng-model="file.temp_name" class="form-control help-block" placeholder="æä»¶åç§°" required> <textarea ng-model="file.temp_desc" type="text" wt-ctrl-enter="js_set_update($event, file)" wt-editor placeholder="æ·»å æä»¶æè¿°"></textarea> </div> <div class="form-group"> <button ng-click="js_set_update($event, file)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15">ä¿å­ </button> <button ng-click="js_cancel_editor(file)" class="btn">åæ¶</button> </div> </div> </div> <div class="dragfile-hover-placeholder"> <i class="icon-upload-alt icon-4x"></i> <br/> æ¾å¼ä¸ä¼ æä»¶æ°çæ? </div> <div class="content-module file-icon dragfile-hover-hide" ng-hide="file.is_edit"> <div ng-hide="global_fileupload_queue().length>0 || file.path.length==0" ng-class="{true:\'fancybox-file\'}[file.is_img]" data-fancybox-group="file_detail" href="{{file | wtBoxView}}" data-fancybox-type="image"> <img ng-src="{{file | wtBoxView}}" alt="{{ file.name }}"/> </div> <div class="file-icon-queue" ng-show="global_fileupload_queue().length>0"> <div ng-repeat="file in global_fileupload_queue()"> <div data-file-upload-preview="file"></div> <span class="error" ng-show="file.error"> <span class="label label-danger">{{ file.error | fileuploadErrorInfo }}</span> <br/> <br/> </span> <a href="javascript:;" class="cancel" ng-click="file.$cancel()" ng-hide="!file.$cancel"> åæ¶ </a> <div ng-hide="file.error" class="progress progress-striped active" ng-class="{pending: \'in\'}[file.$state()]" file-upload-progress="file.$progress()"> <div class="progress-bar progress-bar-success" ng-style="{width: num + \'%\'}"> </div> </div> </div> </div> </div> <div class="content-module" ng-show="file.link_count > 0"> <h4><i class="icon-link"></i>ç¸å³é¾æ¥</h4> <div class="entity-links"> <ul> <li class="link-item" ng-repeat="task in file.tasks"> <i class="icon-check"></i> <a href="javascript:;" ng-click="js_goto_task(file.pid, task.tid)">{{task.name}}</a> </li> <li class="link-item" ng-repeat="post in file.posts"> <i class="icon-list-alt"></i> <a href="javascript:;" ng-click="js_goto_post(file.pid, post.post_id)">{{post.name}}</a> </li> </ul> </div> </div> <div class="content-module" ng-show="versions.length > 0"> <h4><i class="icon-time"></i>åå²çæ¬</h4> <div class="file-versions"> <div class="wt-row file-version-item" ng-repeat="version in versions"> <div class="column column-version"> #{{version.version}} </div> <div class="column column-owner"> <wt-avatar member="version.owner" size="30" name="true"></wt-avatar> </div> <div class="column column-date"> {{version.create_date | fromNow}} </div> <div class="column column-download"> <a ng-href="{{version | wtBoxDownload}}" target="_blank"> <i class="icon-download-alt mr_5"></i>ä¸è½½ </a> </div> </div> </div> </div> <div class="content-module" id="files_tab_module" ng-cloak class="ng-cloak"> <ng-include src="\'/ycjs/tpl/common/tab_comment_activity.html\'"></ng-include> </div> </div> <div class="sidebar-panel" data-minheight="120"> <div class="sidebar-module"> <h4>å³æ³¨</h4> <div class="entity-members" droppable="watcher_droppable_options"> <ul> <li ng-repeat="member in file.watchers"> <wt-avatar member="member" class="js-popbox" click="js_show_watcher($event, member)" data-placement="left"></wt-avatar> </li> <li wt-permission="[permission,project.info.curr_role,1,3]"> <a class="avatar-add js-popbox" href="javascript:;" ng-click="js_watch_file($event, file)" data-placement="left"> <span class="o"> <i class="icon-ex-user-add"></i> </span> </a> </li> </ul> </div> </div> <div class="sidebar-module" wt-permission="[permission,project.info.curr_role,1,2]"> <h4>æä½</h4> <div class="entity-actions"> <a class="btn btn-block mb_10" ng-href="{{file | wtBoxDownload}}"> <i class="icon-download-alt"></i>ä¸è½½æä»¶ ({{file.size | fileSize}}) </a> <span class="btn fileinput-button mb_10"> <i class="icon-upload-alt"></i>ä¸ä¼ æ°çæ? <input wt-uploadfile="file_upload_new_option" multiple type="file" name="files[]" title="æ·»å æä»¶"/> </span> <button class="btn btn-block mb_10" ng-click="js_show_editor(file)" wt-permission="[permission,project.info.curr_role,1,2]"> <i class="icon-pencil"></i>ç¼è¾ </button> <button class="btn btn-block js-popbox" data-placement="left" ng-click="js_move($event, file)"> <i class="icon-share-alt"></i>ç§»å¨ </button> <button class="btn btn-block js-popbox" data-placement="left" ng-click="js_trash($event, file)"> <i class="icon-trash"></i>å é¤ </button> </div> </div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/entity/page.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/entity/page.html",'<div data-ng-controller="entity_page_ctrl" class="entity-panel page-panel height-noheader" wt-scroll=\'{"advanced":{"autoScrollOnFocus":false}}\'> <div class="part-loading mt_60" wt-loading-done="section_loading_done"></div> <div class="entity-panel-wrapper" ng-show="section_loading_done"> <div class="right-entry-header"> <button class="close" ng-click="js_close()">&times;</button> </div> <div class="alert alert-danger wt-alert" ng-show="permission==16"> <i class="icon-info-sign"></i> ææ¡£å·²ç»äº? {{page.update_date | timeFormatZHCN}} å é¤äº? </div> <div class="entity-panel-header" ng-show="locator.show_prj"> <a href="javascript:;" ng-click="locator.to_project(project.info.pid)"> <i class="{{project.info.pic}} mr_10" ng-style="{color:project.info.bg}"></i> {{project.info.name}} </a> </div> <div class="entity-panel-body"> <div class="entity-page-header"> <h2>{{page.name}} <a href="/project/{{page.pid}}/page/{{page.page_id}}/edit" wt-permission="[permission,project.info.curr_role,1,2]"> ç¼è¾</a> </h2> <span ng-hide="page.parent_id == \'\'"><a href="javascript:;" ng-click="js_goto_page(page.pid, page.parent_id)"> <i class="icon-double-angle-left mr_5"></i> {{page.parent_name}}</a> </span> </div> <div class="entity-page-content"> <div class="page-content markdown" wt-markdown=\'page.content\'> </div> </div> <div class="entity-page-footer"> <div class="entity-meta"> <wt-avatar member="page.last_updator" name="true" size="40"></wt-avatar> <span>&nbsp;æåä¿å­äº{{page.update_date | fromNow}}ï¼?</span> <span>&nbsp;å½åçæ¬ï¼?&nbsp;#{{page.version}}</span> </div> <div> <div class="content-module"> <h4>å³æ³¨</h4> <div class="entity-members" droppable="watcher_droppable_options"> <ul> <li ng-repeat="member in page.watchers"> <wt-avatar member="member" class="js-popbox" click="js_show_watcher($event, member)" data-placement="bottom" data-align="left"> </wt-avatar> </li> <li wt-permission="[permission,project.info.curr_role,1,2]"> <a class="avatar-add js-popbox" href="javascript:;" ng-click="js_show_page_watch_pop($event, page)" data-placement="right"> <span class="o"> <i class="icon-ex-user-add"></i> </span> </a> </li> </ul> </div> </div> <div class="content-module" ng-show="page.parent_id==\'\'"> <h4>å­ææ¡?</h4> <div class="sub-pages"> <ul class="pages-list clearfix"> <li ng-repeat="subpage in page.sub_pages"> <a href="javascript:;" ng-click="js_goto_page(page.pid, subpage.page_id)"> <i class="icon-file-text-alt mr_5"></i> {{subpage.name}} </a> </li> <li wt-permission="[permission,project.info.curr_role,1,3]"> <a href="/project/{{page.pid}}/page/add/{{page.page_id}}"> <i class="icon-plus-sign mr_5"></i>æ·»å å­ææ¡? </a> </li> </ul> </div> </div> <div class="content-module" id="pages_tab_module" ng-cloak class="ng-cloak"> <ng-include src="\'/ycjs/tpl/common/tab_comment_activity.html\'"></ng-include> </div> </div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/entity/post.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/entity/post.html",'<div data-ng-controller="entity_post_ctrl" class="entity-panel post-panel height-noheader" wt-scroll=\'{"advanced":{"autoScrollOnFocus":false}}\' wt-dragfile="dragfile_option"> <div class="part-loading mt_60" wt-loading-done="section_loading_done"></div> <div class="entity-panel-wrapper" ng-show="section_loading_done"> <div class="right-entry-header"> <button class="close mr_15" ng-click="js_close()">&times;</button> </div> <div class="alert alert-danger wt-alert" ng-show="permission==16"> <i class="icon-info-sign"></i> è¯é¢å·²ç»äº? {{post.update_date | timeFormatZHCN}} å é¤äº? </div> <div class="entity-panel-header" ng-show="locator.show_prj"> <a href="javascript:;" ng-click="locator.to_project(project.info.pid)"> <i class="{{project.info.pic}} mr_10" ng-style="{color:project.info.bg}"></i> {{project.info.name}} </a> </div> <div class="entity-panel-body"> <div class="content-panel"> <div class="content-module editable-module"> <div ng-hide="post.is_edit"> <div class="entity-title"> <h2 ng-click="js_show_editor(post)"> {{post.name}} </h2> </div> <div class="entity-meta"> <wt-avatar member="post.owner" name="true" size="40"></wt-avatar> <span>&nbsp;{{post.create_date | fromNow}}</span> <span class="comment_count_style icon-stack pull-right" title="è¯é¢æ{{ post.comment_count }}ä¸ªè¯è®?"> <i class="icon-comment"></i> <i class="icon-stack-base">{{post.comment_count}}</i> </span> </div> <div class="post-desc"> <div class="markdown" wt-markdown=\'post.content\'></div> </div> </div> <div class="edit-section" ng-show="post.is_edit"> <div> <input type="text" autofocus ng-model="post.temp_name" wt-enter="js_set_content(post)" class="form-control help-block" placeholder="è¯é¢åç§°" required> <textarea wt-ctrl-enter="js_update_post(post)" ng-model="post.temp_content" type="text" wt-editor placeholder="è¯´ç¹ä»ä¹?(æCtrl + åè½¦é®æäº?)"></textarea> </div> <div class="form-group"> <button ng-click="js_update_post(post)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15" loading-status="is_setting_content">ä¿å­ </button> <button ng-click="js_cancel_editor(post)" class="btn">åæ¶</button> </div> </div> </div> <div class="content-module dragfile-hover-show" ng-show="post.files.length > 0 || global_fileupload_queue().length>0"> <h4><i class="icon-paper-clip"></i>éä»¶</h4> <div class="entity-attachments"> <ul> <li class="attachment-item" ng-repeat="file in post.files"> <a class="file-picfile fancybox-file" data-fancybox-group="filegroup" data-fancybox-href="{{file | wtBoxView}}" data-fancybox-type="image" title="{{ file.name }}"> <img ng-if="!file.preview" ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> <div ng-if="file.preview" class="preview" data-file-upload-preview="file"></div> </a> <a class="file-name" href="javascript:;" ng-click="js_goto_file(task.pid, file.fid)" wt-tracker="Task Panel|Main|Goto Attachments File"> {{file.name}} </a> <span class="file-size">{{file.size | fileSize}}</span> <a class="file-down file-action mr_15" ng-href="{{file | wtBoxDownload}}"> <i class="icon-download mr_5"></i>ä¸è½½ </a> <a class="file-del file-action mr_15" href="javascript:;" wt-tracker="Task Panel|Main|Delete Attachments Link" ng-click="js_del_attachment($event, file)" wt-permission="[permission,project.info.curr_role,1,2]"> <i class="icon-trash mr_5"></i>å é¤ </a> </li> <li class="attachment-item attachment-item-queue" ng-repeat="file in global_fileupload_queue()"> <a class="file-picfile" data-fancybox-group="filegroup" data-fancybox-href="{{file | wtBoxView}}" data-fancybox-type="image" title="{{ file.name }}"> <span ng-show="file.error"> <span class="label label-danger">{{ file.error | fileuploadErrorInfo }}</span> </span> <img ng-if="!file.preview" ng-src="{{file.name | getExtIcon}}" alt="{{ file.name }}"/> <div ng-if="file.preview" class="preview" data-file-upload-preview="file"></div> </a> <span class="file-name"> {{file.name}} </span> <span class="file-size">{{file.size | fileSize}}</span> <a href="javascript:;" class="pull-left mr_15" ng-click="file.$cancel()" ng-hide="!file.$cancel"> <i class="icon-cancel mr_5"></i>åæ¶ </a> <div ng-hide="file.error" class="pull-left mr_15 progress progress-striped active" data-ng-class="{pending: \'in\'}[file.$state()]" data-file-upload-progress="file.$progress()"> <div class="progress-bar progress-bar-success" data-ng-style="{width: num + \'%\'}"> </div> </div> </li> <li class="attachment-item dragfile-hover-placeholder"> <span class="name">&nbsp; <i class="icon-upload-alt"></i> æ¾å¼ä¸ä¼ æä»¶</span> </li> </ul> </div> </div> <div class="content-module" id="posts_tab_module" ng-cloak class="ng-cloak"> <ng-include src="\'/ycjs/tpl/common/tab_comment_activity.html\'"></ng-include> </div> </div> <div class="sidebar-panel" data-minheight="120"> <div class="sidebar-module"> <h4>å³æ³¨</h4> <div class="entity-members" droppable="watcher_droppable_options"> <ul> <li ng-repeat="member in post.watchers"> <wt-avatar member="member" class="js-popbox" click="js_show_watcher($event, member)" data-placement="left"></wt-avatar> </li> <li wt-permission="[permission,project.info.curr_role,1,3]"> <a class="avatar-add js-popbox" href="javascript:;" ng-click="js_show_post_watch_pop($event, post)" data-placement="left"> <span class="o"> <i class="icon-ex-user-add"></i> </span> </a> </li> </ul> </div> </div> <div class="sidebar-module" wt-permission="[permission,project.info.curr_role,1,2]"> <h4>æä½</h4> <div class="entity-actions"> <div class="btn-group js-popbox mb_10" data-placement="left"> <span class="btn fileinput-button w_165"> <i class="icon-paper-clip"></i>æ·»å éä»¶ <input type="file" name="files[]" title="æ·»å éä»¶" multiple wt-uploadfile="file_upload_option"/> </span> <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;"> <i class="icon-caret-down"></i> </a> <ul class="dropdown-menu pull-right"> <li><a href="javascript:;" ng-click="js_trigger_upload($event)"><i class="icon-xx"></i> æ¬å°ä¸ä¼ </a></li> <li><a href="javascript:;" ng-click="js_show_attach($event, post)"><i class="icon-xx"></i> ä»å·²ææä»¶éæ©</a></li> </ul> </div> <button class="btn btn-block mb_10" ng-click="js_show_editor(post)" ng-show="post.owner.uid == global.me.uid" wt-permission="[permission,project.info.curr_role,1,2]"> <i class="icon-pencil"></i>ç¼è¾ </button> <button class="btn btn-block js-popbox" data-placement="left" ng-click="js_trash($event, post)"> <i class="icon-trash"></i>å é¤ </button> </div> </div> </div> </div> </div> </div>')
}]),angular.module("/ycjs/tpl/entity/task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/entity/task.html",'<div data-ng-controller="entity_task_ctrl" class="entity-panel task-panel height-noheader" wt-scroll=\'{"advanced":{"autoScrollOnFocus":false}}\' wt-dragfile="dragfile_option"> <div class="part-loading mt_60" wt-loading-done="section_loading_done"></div> <div class="entity-panel-wrapper" ng-show="section_loading_done"> <div class="right-entry-header"> <button class="close mr_15" ng-click="js_close()">&times;</button> </div> <div class="alert alert-danger wt-alert" ng-show="permission==16"> <i class="icon-info-sign"></i> ä»»å¡å·²ç»äº? {{task.update_date | timeFormatZHCN}} å é¤äº? </div> <div class="alert alert-success wt-alert" ng-show="permission==32"> <i class="icon-info-sign"></i> ä»»å¡å·²ç»äº? {{task.update_date | timeFormatZHCN}} å½æ¡£äº? </div> <div class="entity-panel-header" ng-show="locator.show_prj"> <a href="javascript:;" ng-click="locator.to_project(project.info.pid)" wt-tracker="Task Panel|Main|Goto Project"> <i class="{{project.info.pic}} mr_10" ng-style="{color:project.info.bg}"></i> {{project.info.name}} </a> </div> <div class="entity-panel-body"> <div class="content-panel"> <div class="content-module editable-module"> <div ng-hide="task.is_edit"> <div class="entity-title"> <a class="task_check" ng-click="js_complete_task(task)" wt-tracker="Task Panel|Main|Edit Task-Toggle Complete"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <h2 ng-click="js_show_editor(task)" class="ng-binding" wt-tracker="Task Panel|Main|Edit Task"> {{task.name}} </h2> </div> <wt-badges task="task"></wt-badges> <div class="task-desc-add" ng-hide="task.is_edit || task.desc.length>0 || permission==4"> <a href="javascript:;" ng-click="js_show_editor(task)">ç¹å»æ·»å ä»»å¡æè¿°</a> </div> <div class="task-desc"> <div class="task-desc-text markdown" wt-markdown=\'task.desc\'></div> </div> </div> <div class="edit-section" ng-show="task.is_edit"> <div> <input type="text" autofocus ng-model="task.temp_name" wt-enter="js_set_update($event, task)" class="form-control help-block" placeholder="ä»»å¡åç§°" required> <textarea ng-model="task.temp_desc" type="text" wt-ctrl-enter="js_set_update($event, task)" wt-editor placeholder="æ·»å ä»»å¡æè¿°(æCtrl + åè½¦é®æäº?)"></textarea> </div> <div class="form-group"> <button ng-click="js_set_update($event, task)" data-loading-text="ä¿å­ä¸?..." loading-status="task.is_saving" class="btn btn-success mr_15" wt-tracker="Task Panel|Main|Edit Task-Save" >ä¿å­</button> <button ng-click="js_cancel_editor(task)" class="btn" wt-tracker="Task Panel|Main|Edit Task-Cancel">åæ¶</button> </div> </div> </div> <div class="content-module" ng-show="task.is_todo_edit || task.todos.length > 0"> <h4><i class="icon-th-list"></i>æ£æ¥é¡¹</h4> <div class="progress-warp"> <span ng-bind="task.percentage+\'%\'"></span> <progress percent="task.percentage"></progress> </div> <div class="task-todos"> <ul class="sortable" sortable="todo_sort_options"> <li class="todo-item" ng-repeat="todo in task.todos" pos="{{ todo.pos }}" todo-id="{{ todo.todo_id }}"> <a class="todo-item-check" ng-click="js_complete_todo(task, todo)" wt-tracker="Task Panel|Main|Edit Attachments-Toggle Complete"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[todo.checked]"></i> </a> <div class="todo-item-edit editable"> <p ng-hide="todo.is_todo_edit" ng-click="js_show_todo_editor(todo)" wt-tracker="Task Panel|Main|Edit Attachments"> {{todo.name}}</p> <div class="edit" ng-show="todo.is_todo_edit" wt-show-edit="todo.is_todo_edit"> <div class="todo-edit-control"> <input ng-model="todo.name" type="text" class="form-control" ui-keyup="{\'esc\':\'js_keyup_todo($event, task, todo)\'}" wt-enter="js_save_todo(null, todo)" /> </div> <button ng-click="js_save_todo($event,todo)" wt-tracker="Task Panel|Main|Edit Attachments-Save" data-loading-text="ä¿å­" loading-status="todo.is_saving" class="btn btn-success todo-save">ä¿å­ </button> <button class="btn btn-link todo-del" wt-tracker="Task Panel|Main|Edit Attachments-Delete" ng-click="js_del_todo(task, todo)"> å é¤ </button> </div> </div> </li> </ul> </div> <div class="new-todo" wt-permission="[permission,project.info.curr_role,1,2]"> <a href="javascript:;" ng-click="js_show_add_todo_editor(task)" wt-tracker="Task Panel|Main|Add Attachments" ng-hide="task.is_add_todo_edit"> æ·»å æ£æ¥é¡¹ </a> <div class="new-todo-control" ng-show="task.is_add_todo_edit" wt-show-edit="task.is_add_todo_edit"> <div> <input type="text" class="new-todo-text form-control" ng-model="todo.temp_name" ui-keyup="{\'esc\':\'js_keyup_add_todo($event, task, todo)\' }" wt-enter="js_add_todo(task, todo)" placeholder="è¾å¥æ£æ¥é¡¹åå®¹" /> </div> <button class="btn btn-success" data-loading-text="æ·»å " loading-status="todo.is_saving" wt-tracker="Task Panel|Main|Add Attachments-Add" ng-click="js_add_todo(task, todo)">æ·»å  </button> <button class="btn btn-link todo-del" wt-tracker="Task Panel|Main|Add Attachments-Cancel" ng-click="js_cancel_add_todo_editor(task)"> åæ¶ </button> </div> </div> </div> <div class="content-module dragfile-hover-show" ng-show="task.files.length > 0 || global_fileupload_queue().length>0"> <h4><i class="icon-paper-clip"></i>éä»¶</h4> <div class="entity-attachments"> <ul> <li class="attachment-item" ng-repeat="file in task.files"> <a class="file-picfile {{[file.ext,\'fancybox-file\'] | ifImgExtSetClass}}" data-fancybox-group="filegroup" data-fancybox-href="{{file | wtBoxView}}" data-fancybox-type="image" title="{{ file.name }}"> <img ng-if="!file.preview" ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> <div ng-if="file.preview" class="preview" data-file-upload-preview="file"></div> </a> <a class="file-name" href="javascript:;" ng-click="js_goto_file(task.pid, file.fid)" wt-tracker="Task Panel|Main|Goto Attachments File"> {{file.name}} </a> <span class="file-size">{{file.size | fileSize}}</span> <a class="file-down file-action mr_15" ng-href="{{file | wtBoxDownload}}"> <i class="icon-download mr_5"></i>ä¸è½½ </a> <a class="file-del file-action mr_15" href="javascript:;" wt-tracker="Task Panel|Main|Delete Attachments Link" ng-click="js_del_attachment($event, file)" wt-permission="[permission,project.info.curr_role,1,2]"> <i class="icon-trash mr_5"></i>å é¤ </a> </li> <li class="attachment-item attachment-item-queue" ng-repeat="file in global_fileupload_queue()"> <a class="file-picfile" data-fancybox-group="filegroup" data-fancybox-href="{{file | wtBoxView}}" data-fancybox-type="image" title="{{ file.name }}"> <span ng-show="file.error" > <span class="label label-danger">{{ file.error | fileuploadErrorInfo }}</span> </span> <img ng-if="!file.preview" ng-src="{{file.name | getExtIcon}}" alt="{{ file.name }}"/> <div ng-if="file.preview" class="preview" data-file-upload-preview="file"></div> </a> <span class="file-name"> {{file.name}} </span> <span class="file-size">{{file.size | fileSize}}</span> <a href="javascript:;" class="pull-left mr_15" ng-click="file.$cancel()" ng-hide="!file.$cancel"> <i class="icon-cancel mr_5"></i>åæ¶ </a> <div ng-hide="file.error" class="pull-left mr_15 progress progress-striped active" data-ng-class="{pending: \'in\'}[file.$state()]" data-file-upload-progress="file.$progress()"> <div class="progress-bar progress-bar-success" data-ng-style="{width: num + \'%\'}"> </div> </div> </li> <li class="attachment-item dragfile-hover-placeholder"> <span class="name">&nbsp; <i class="icon-upload-alt"></i> æ¾å¼ä¸ä¼ æä»¶</span> </li> </ul> </div> </div> <div class="content-module" id="tasks_tab_module" ng-cloak class="ng-cloak"> <ng-include src="\'/ycjs/tpl/common/tab_comment_activity.html\'"></ng-include> </div> </div> <div class="sidebar-panel" data-minheight="120"> <div class="sidebar-module" ng-hide="task.labels.length==0 && (project.info.curr_role==3 || project.info.archived==1 || permission==32 || permission==16)"> <h4>æ ç­¾</h4> <div class="task-labels"> <ul> <li class="task-label {{label.name}}-label" ng-repeat="label in task.labels"> {{label.desc}} <a class="icon-action icon-remove" href="javascript:;" data-ng-click="js_remove_label(label)" title="ç§»é¤è¯¥æ ç­?"></a> </li> </ul> <button class="btn btn-block js-popbox" wt-tracker="Task Panel|Right|Setting Label" wt-permission="[permission,project.info.curr_role,1,2]" ng-click="js_assign_label($event, task)" data-placement="left"><i class="icon-tag"></i>è®¾ç½®æ ç­¾</button> </div> </div> <div class="sidebar-module" ng-hide="task.members.length==0 && (project.info.curr_role==3 || project.info.archived==1 || permission==32 || permission==16)"> <h4>åé</h4> <div class="entity-members" droppable="member_droppable_options"> <ul> <li ng-repeat="member in task.members"> <wt-avatar member="member" class="js-popbox" click="js_show_member($event, member)" data-placement="left"></wt-avatar> </li> <li wt-permission="[permission,project.info.curr_role,1,2]"> <a class="avatar-add js-popbox" href="javascript:;" wt-tracker="Task Panel|Right|Add Assign" ng-click="js_assign_member($event, task)" data-placement="left"> <span class="o"> <i class="icon-ex-user-add"></i> </span> </a> </li> </ul> </div> </div> <div class="sidebar-module"> <h4>å³æ³¨</h4> <div class="entity-members" droppable="watcher_droppable_options"> <ul> <li ng-repeat="member in task.watchers"> <wt-avatar member="member" class="js-popbox" click="js_show_watcher($event, member)" data-placement="left"></wt-avatar> </li> <li wt-permission="[permission,project.info.curr_role,1,3]"> <a class="avatar-add js-popbox" href="javascript:;" wt-tracker="Task Panel|Right|Add Watch" ng-click="js_watch_task($event, task)" data-placement="left"> <span class="o"> <i class="icon-ex-user-add"></i> </span> </a> </li> </ul> </div> </div> <div class="sidebar-module" wt-permission="[permission,project.info.curr_role,1,2]"> <h4>æä½</h4> <div class="entity-actions"> <button class="btn btn-block js-popbox" data-placement="left" wt-tracker="Task Panel|Right|Setting Expire Date" ng-click="js_show_datepicker($event, task)"> <i class="icon-time"></i>è®¾ç½®æªæ­¢æ¶é´ </button> <button class="btn btn-block" ng-click="js_show_todo(task)" wt-tracker="Task Panel|Right|Setting Todo List"> <i class="icon-th-list"></i>æ·»å æ£æ¥é¡¹ </button> <div class="btn-group js-popbox mb_10" data-placement="left" data-align="bottom"> <span class="btn fileinput-button w_165" wt-tracker="Task Panel|Right|UploadFile From Loacl"> <i class="icon-paper-clip"></i>æ·»å éä»¶ <input type="file" name="files[]" title="æ·»å éä»¶" multiple wt-uploadfile="file_upload_option" /> </span> <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;" wt-tracker="Task Panel|Right|UploadFile-More"> <i class="icon-caret-down"></i> </a> <ul class="dropdown-menu pull-right"> <li> <a href="javascript:;" ng-click="js_trigger_upload($event)" wt-tracker="Task Panel|Right|UploadFile-More-Form Local"> <i class="icon-xx"></i> æ¬å°ä¸ä¼ </a> </li> <li> <a href="javascript:;" ng-click="js_show_attach($event, task)" wt-tracker="Task Panel|Right|UploadFile-More-From Exists"> <i class="icon-xx"></i> ä»å·²ææä»¶éæ© </a> </li> </ul> </div> <button class="btn btn-block mb_10" ng-click="js_show_editor(task)" permission="[permission,project.info.curr_role,1,2]"> <i class="icon-pencil"></i>ç¼è¾ </button> <button class="btn btn-block js-popbox" wt-tracker="Task Panel|Right|Archive" data-placement="left" ng-click="js_archive($event, task)"> <i class="icon-archive"></i>å½æ¡£ </button> <button class="btn btn-block" ng-click="js_show_more($event)" ng-hide="is_show_more"> <i class="icon-ellipsis-horizontal"></i>æ´å¤æä½ </button> <button class="btn btn-block js-popbox" wt-tracker="Task Panel|Right|Move" data-placement="left" ng-click="js_move($event, task)" ng-show="is_show_more"> <i class="icon-share-alt"></i>ç§»å¨ </button> <button class="btn btn-block js-popbox" wt-tracker="Task Panel|Right|Move" data-placement="left" ng-click="js_show_copy($event, task)" ng-show="is_show_more"> <i class="icon-copy"></i>æ·è´ </button> <button class="btn btn-block js-popbox" wt-tracker="Task Panel|Right|Delete" data-placement="left" ng-click="js_trash($event, task)" ng-show="is_show_more"> <i class="icon-trash"></i>å é¤ </button> </div> </div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/forum/forum_index.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/forum/forum_index.html",'<div class="page_navbar"> <div class="page-navbar-warp"> <div class="title"> <h3> <a href="/forum"> <i class="icon-group mr_10"></i>ç¨æ·ç¤¾åº </a> </h3> </div> <div class="main"> <div class="toolbar_panel pull-right"> <button class="btn btn-danger">åè¡¨æ°å¸</button> </div> </div> </div> </div> <div class="content-panel forum-panel height-nonav" wt-scroll> <div class="content-container"> <div class="content"> <div class="content-wrapper"> </div> </div> <div class="sidebar"> <div class="sidebar-widget"> <h4>ç¤¾åºå¯è¯­</h4> <div class="widget-text"> æ¬¢è¿æ¥å°Worktileç¨æ·ç¤¾åºï¼è¿éæ¯å¹¿å¤§Worktileç¨æ·çäºå¨äº¤æµç¤¾åºï¼å¨è¿éä½ å¯ä»¥ä¸å¶ä»ç¨æ·åäº«Worktileä½¿ç¨æå·§ãç»éªï¼ä¸æä»¬äº§åå¼åå¢éäº¤æµæ²éï¼æä»¬æ¿ä¸å¹¿å¤§ç¨æ·ä¸èµ·æé ä¸æ¬¾ç®åå¥½ç¨çå¢éååå·¥å·ã? </div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/header/header.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/header/header.html",'<nav id="header_inner" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-header-collapse" wt-tracker="Header|Collapse|Toggle Navbar"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a id="header_logo" href="/dashboard" wt-tracker="Header|Logo|Goto Dashboard"> Worktile </a> </div> <div class="collapse navbar-collapse navbar-header-collapse"> <div id="header_search" class="navbar-left js-popbox" data-placement="bottom" data-offset="-13" data-align="left" ng-include="\'/ycjs/tpl/header/header_search.html\'"></div> <ul class="nav navbar-nav navbar-right" ng-controller="user_ctrl" id="header_me"> <li class="divider-vertical hidden-xs"></li> <li> <wt-avatar member="global.me" size="30" class="js-popbox pr_0" name="true" append=\'<span class="avatar-caret icon-caret-down ml_5"></span>\' wt-tracker="Header|Avatar|Open Pop User Setting" click="js_pop_user_setting($event)" data-placement="bottom" data-align="right"> </wt-avatar> </li> </ul> <div id="header_menu" ng-controller="header_menu" ng-include="\'/ycjs/tpl/header/header_menu.html\'"></div> <div id="wohoo-warp" class="navbar-right" data-ng-controller="new_feature_ctrl" ng-if="global.wohoo_show"> <div class="wohoo-inner js-popbox" data-placement="bottom" ng-click="js_show_new_feature($event)" tooltip-placement="left" tooltip-trigger="mouseenter" tooltip="æ°åè?"> <div class="wohoo"> <div class="wohoo-neck"></div> <div class="wohoo-head"></div> </div> </div> </div> </div> </nav> ')}]),angular.module("/ycjs/tpl/header/header_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/header/header_menu.html",'<ul class="nav navbar-nav navbar-right" ng-click="js_change_header_menu($event)"> <li class="divider-vertical hidden-xs"></li> <li> <a wt-tracker="Header|Menu|ButtonAdd" href="javascript:;" class="js-popbox" data-placement="bottom" ng-click="js_pop_new_menu($event)"> <i class="icon-plus mr_5"></i> æ°å»º </a> </li> <li class="divider-vertical hidden-xs"></li> <li> <a wt-tracker="Header|Menu|Goto Inbox" ng-href="/inbox" class="notice-menu"> <i class="icon-bell-alt mr_5"></i> <span class="label label-default" ng-class="{\'label-danger\':notice_count>0}"> {{notice_count}} </span> </a> </li> </ul>')}]),angular.module("/ycjs/tpl/header/header_search.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/header/header_search.html",'<form class="navbar-form" role="search" ng-controller="search_ctrl"> <input type="text" value="" class="js-popbox typeahead" wt-up-down-enter="js_up_down_enter($event,keyCode)" autocomplete="off" placeholder="æç´¢..." ng-model="keywords" wt-tracker="Header|Search|Focus Search Input" /> <button class="icon-search hide" ng-click="js_show_pop_search_result($event)"></button> </form>')}]),angular.module("/ycjs/tpl/header/pop_global_fileupload.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/header/pop_global_fileupload.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ä¸ä¼ åè¡¨</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body pop_global_file_upload"> <table class="table files mb_0 ng-cloak" data-toggle="modal-gallery" data-target="#modal-gallery"> <tr ng-repeat="file in pop_data.scope.queue" ng-class="{\'first\':$first}"> <td> <p class="name"> <span>{{file.name}}</span> <span class="size">{{file.size | formatFileSize}}</span> </p> <div ng-show="file.error"><span class="label label-danger">{{file.error | fileuploadErrorInfo}}</span> </div> <div ng-hide="file.error" class="progress progress-striped active fade" ng-class="{pending: \'in\'}[file.$state()]" file-upload-progress="file.$progress()"> <div class="progress-bar progress-bar-success" data-ng-style="{width: num + \'%\'}"></div> </div> </td> <td class="action"> <br> <a href="javascript:;" ng-click="file.$cancel()" ng-hide="!file.$cancel"> åæ¶ </a> </td> </tr> </table> </div> </div> ')}]),angular.module("/ycjs/tpl/header/pop_new_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/header/pop_new_menu.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3> æ°å»º</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a href="/project/add"> <i class="icon-inbox"></i> æ°å»ºé¡¹ç®<br> <span class="text-muted"> é¡¹ç®æ¯ä»»å¡ãæä»¶ãè¯é¢ãææ¡£ãæ¥ç¨ä»¥åäººåçéåï¼æ¯ä½æåé½åªè½çå°èªå·±åä¸çé¡¹ç®ã? </span> </a> </li> <li class="divider"></li> <li> <a href="/teams/add"> <i class="icon-sitemap"></i> æ°å»ºå¢é <br> <span class="text-muted"> å¢éæ¯Worktileä¸­æé¡¶çº§çç»ç»ååï¼ä½¿ç¨å¢éç»ç»é¡¹ç®åæåï¼æ¯ä¸ªæåå¯ä»¥å å¥å¤ä¸ªå¢éã? </span> </a> </li> </ul> </div> ')}]),angular.module("/ycjs/tpl/header/pop_search.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/header/pop_search.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æç´¢ç»æ</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body fixed-width"> <ul class="popbox-menu"> <li ng-repeat="project in filter_projects"> <a data-ng-class="{true:\'active\'}[$index == current_index]" ng-href="/project/{{project.pid}}/task"> <span ng-bind-html="project.name | highlight:keywords:caseSensitive"></span> </a> </li> <li class="divider" ng-show="filter_projects.length>0"></li> <li> <a href="javascript:;" data-ng-click="js_to_search_result()"><i class="icon-xxx"></i>æ¾ç¤ºå¨é¨æç´¢ç»æ</a> </li> </ul> </div> </div> ')}]),angular.module("/ycjs/tpl/project/pop_project_info.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/pop_project_info.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>é¡¹ç®ä¿¡æ¯</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body fixed-width"> <ul class="popbox-menu"> <li> <a href="/project/{{project.info.pid}}/setting"> <i class="icon-cog"></i> é¡¹ç®è®¾ç½® </a> </li> <li class="divider"></li> <li> <a href="/teams/{{project.info.team_id}}"> <i class="icon-sitemap"></i> æå±å¢é? <br/> <span class="color_gray pl_20">{{project.info.team.name}}</span> <span class="edition in-list" ng-class="{1:\'edition-free\', 2:\'edition-business\', 3:\'edition-nonprofit\'}[project.info.team.edition]"> {{project.info.team.edition | teamEdition }} </span> </a> </li> <li class="divider"></li> <li> <a href="javascript:;"> <i class="icon-user"></i> é¡¹ç®è§è² <br/> <span class="color_gray pl_20"> {{ {1:\'è´è´£äºº\', 2:\'æå\', 3:\'è®¿å®¢\' }[project.info.curr_role] }} </span> </a> </li> <li class="divider"></li> <li> <a href="javascript:;"> <i class="icon-info-sign"></i> é¡¹ç®æè¿° <br/> <span class="color_gray pl_20">{{ {true:\'é¡¹ç®æ²¡ææè¿°\', false: project.info.desc }[project.info.desc==\'\'] }}</span> </a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/prj_not_found.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/prj_not_found.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar"> <dl class="frame" data-minheight="90"> <dt> <span class="title">åºéå?</span> </dt> <dd> <div class="error-panel"> <i class="icon-inbox"></i><br/> <span>é¡¹ç®ä¸å­å¨æèä½ æ²¡ææéè®¿é®å½åé¡¹ç®</span><br/> <a class="btn btn-danger" href="/projects">åå°é¡¹ç®åè¡¨</a> </div> </dd> </dl> </div> </div>')}]),angular.module("/ycjs/tpl/project/prj_right_sidebar.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/prj_right_sidebar.html",'<div class="content_sidebar height-noheader" wt-sidebar-toggle="global.right_sidebar_is_fold" data-ng-controller="prj_sidebar_ctrl"> <div class="content_sidebar_header collapse_show"> <ul class="list-inline"> <li ng-class="{\'active\':(global.project_sidebar_foldview==\'module\')}"> <a href="javascript:;" ng-click="global.project_sidebar_foldview = \'module\'" title="åè½æ¨¡å"> <i class="icon-th-large"></i> </a> </li> <li ng-class="{\'active\':(global.project_sidebar_foldview==\'member\')}"> <a href="javascript:;" ng-click="global.project_sidebar_foldview = \'member\'" title="é¡¹ç®æå"> <i class="icon-user"></i> </a> </li> </ul> <div class="hr"></div> </div> <div class="content_sidebar_main" data-height="119"> <div data-maxheight="168" data-scrollnoheight="168" wt-scroll ng-show="(global.right_sidebar_is_fold==false) || global.right_sidebar_is_fold==true && global.project_sidebar_foldview==\'module\'"> <ul class="content_sidebar_module"> <li ng-class="{\'active\':global.project_iconmenu==\'task\'}"> <a ng-href="/project/{{pid}}/task" wt-tracker="RightSidebar|Module|Goto Task" title="ä»»å¡(Shift+T)"> <i class="icon-check"></i><br/>ä»»å¡</a> </li> <li ng-class="{\'active\':global.project_iconmenu==\'event\'}"> <a ng-href="/project/{{pid}}/event" wt-tracker="RightSidebar|Module|Goto Calendar" title="æ¥å(Shift+E)"> <i class="icon-calendar"></i><br/>æ¥å</a></li> <li ng-class="{\'active\':global.project_iconmenu==\'file\'}"> <a ng-href="/project/{{pid}}/file" wt-tracker="RightSidebar|Module|Goto File" title="æä»¶(Shift+F)"> <i class="icon-file"></i><br/>æä»¶</a> </li> <li ng-class="{\'active\':global.project_iconmenu==\'post\'}"> <a ng-href="/project/{{pid}}/post" wt-tracker="RightSidebar|Module|Goto Post" title="è¯é¢(Shift+C)"> <i class="icon-list-alt"></i><br/>è¯é¢</a> </li> <li ng-class="{\'active\':global.project_iconmenu==\'page\'}"> <a ng-href="/project/{{pid}}/page" wt-tracker="RightSidebar|Module|Goto Page" title="ææ¡£(Shift+D)"> <i class="icon-file-text-alt"></i><br/>ææ¡£</a> </li> <li ng-class="{\'active\':global.project_iconmenu==\'graph\'}"> <a ng-href="/project/{{pid}}/graph" wt-tracker="RightSidebar|Module|Goto Graph" title="ç®æ?(Shift+G)"> <i class="icon-bar-chart"></i><br/>ç®æ?</a> </li> </ul> </div> <div class="hr collapse_hide"></div> <div class="content_sidebar_header2 collapse_hide"> <ul> <li ng-class="{\'active\':(global.project_sidebar_view==\'member\')}"> <a href="javascript:;" ng-click="global.project_sidebar_view = \'member\'" title="é¡¹ç®æå"> æå </a> </li> <li ng-class="{\'active\':(global.project_sidebar_view==\'chat\')}"> <a href="javascript:;" ng-click="js_change_prj_sidebar_view(\'chat\');" title="å¨çº¿èå¤©"> èå¤© </a> </li> <li class="collapse_hide"> <a href="javascript:;" class="js-popbox" data-placement="left" title="æ·»å æå" ng-click="js_add_prj_member_pop($event)"> <i class="icon-ex-user-add"></i> </a> </li> </ul> <div class="hr"></div> </div> <div class="prj_sidebar_body"> <div ng-show="(global.project_sidebar_view == \'member\' && global.right_sidebar_is_fold==false) || global.right_sidebar_is_fold==true && global.project_sidebar_foldview==\'member\'" class="prj_member_list" wt-scroll ng-class="{true:\'fold\'}[global.right_sidebar_is_fold]" ng-controller="prj_member_ctrl" data-height="{{{true:\'154\',false:\'289\'}[global.right_sidebar_is_fold]}}" wt-scroll> <ul> <li ng-repeat="member in project.members"> <div ng-click="js_prj_member_pop($event,member)" wt-tracker="Project Task Page|Right|Open Pop Member Card" class="js-popbox member" data-placement="left" ng-class="{true: \'member-pendding\'}[[(member.status==2 || member.status==3)]]" title="{{ {2:\'æåè¿æªæ¥åéè¯·\', 3: \'æåå·²ç»éåºå¢é\'}[member.status] }}"> <wt-avatar member="member" status="true" name="true" drag="{true: $parent.draggable_options}[member.status==1 && project.info.curr_role!=3]"></wt-avatar> <i class="icon-user member-admin hide_fold" title="{{ {1:\'è´è´£äºº\', 3:\'è®¿å®¢\'}[member.role] }}" ng-class="{1:\'member-admin\', 3:\'member-guest\'}[member.role]" ng-show="member.role==1 || member.role==3"></i> </div> </li> <li wt-permission="[permission,project.info.curr_role,1,1]"> <div class="js-popbox member" ng-click="js_add_prj_member_pop($event)" wt-tracker="Project Task Page|Right|Open Pop Member Add User" data-placement="left" data-align="auto"> <a class="avatar-add" href="javascript:;"> <span class="o"> <i class="icon-ex-user-add"></i> </span> </a> <span class="hide_fold">æ·»å æå</span> </div> </li> </ul> </div> <div class="prj-chat-panel" ng-show="global.project_sidebar_view == \'chat\' && !global.right_sidebar_is_fold" data-height="289" data-ng-controller="prj_chat_ctrl"> <div class="chat-messages-list" data-height="{{409+(global_fileupload_queue().length*50)}}" wt-scroll> <div class="clearfix"> <div class="part-loading" data-ng-hide="loading_chat_done"></div> <a class="sidebar_view_more" ng-if="loading_chat_done && has_more_chat" href="/project/{{pid}}/chat">æ´å¤èå¤©è®°å½</a> <div class="chat-message-item" data-ng-repeat="message in messages" data-ng-class="{true:\'me\',false:\'member\'}[message.is_me]"> <div ng-if="message.show_date || message.show_time" class="date-time"> <span class="data-time-inner"> <span ng-if="message.show_date">{{message.create_date | dateFormat}}</span> {{message.create_date | timeFormat}} </span> </div> <wt-avatar member="message.from" size="30" wt-disable-drag></wt-avatar> <div class="chat-message-panel"> <div class="chat-message-body"> <div class="chat-message-arraw border"></div> <div class="chat-message-arraw bg"></div> <div class="chat-message-content markdown-chat" ng-if="message.body.type == 1" wt-markdown="message.body.content"> </div> <div class="chat-message-content markdown-chat" ng-if="message.body.type == 3"> <div class="chat-message-upload"> <div class="preview-icon" ng-class="{true:\'fancybox-file\'}[message.body.content.isImg]" data-fancybox-group="chatgroup" data-fancybox-href="{{message.body.content | wtBoxView}}" data-fancybox-type="image"> <img ng-src="{{message.body.content.icon | wtBox}}" alt="{{ message.body.content.name }}"/> </div> <div class="file-name" ng-click="js_navigate_detail($event,message.body.content)" title="{{message.body.content.name}}">{{message.body.content.name}} </div> <div class="file-size">{{message.body.content.size | fileSize}}</div> </div> </div> </div> </div> </div> <span class="alert alert-danger" data-ng-show="limit_error"> <i class="icon-remove-sign"></i> è¯·è¾å¥å°äº?200ä¸ªå­ç¬?</span> </div> </div> <div class="chat-send-panel"> <div class="chat-upload-queue"> <div class="chat-upload-item" ng-repeat="file in global_fileupload_queue()"> <div class="file-name" title="{{file.name}}">{{file.name}}</div> <span class="error" ng-show="file.error"> <span class="label label-danger">{{ file.error | fileuploadErrorInfo }}</span> <br/> </span> <div ng-hide="file.error" class="progress progress-striped active" ng-class="{pending: \'in\'}[file.$state()]" file-upload-progress="file.$progress()"> <div class="progress-bar progress-bar-success" ng-style="{width: num + \'%\'}"></div> </div> <span href="javascript:;" class="cancel" ng-click="file.$cancel()" ng-hide="!file.$cancel"> åæ¶ </span> </div> </div> <textarea class="form-control" ng-change="js_change_message()" wt-ctrl-enter="js_send_message()" wt-comment-atwho="atwho_members" wt-comment-atwho="atwho_members" rows="3" type="text" ng-model="input_message" placeholder="æ? Ctrl+åè½¦é? åé?"></textarea> <div class="chat-send-bar"> <div class="chat-send-ex"> <a href="javascript:;" class="js-popbox" data-placement="left" data-align="bottom" wt-pop-emoji="js_insert_emoji(emoji)"><i class="icon-smile"></i></a> <a href="javascript:;" class="icon-file" ng-click="js_chat_upload_files($event)"></a> <input wt-uploadfile="file_upload_option" class="hide" multiple type="file" name="files[]" title="æ·»å æä»¶"/> </div> <button class="btn btn-success btn-sm" type="button" data-ng-click="js_send_message()">åé? </button> </div> </div> </div> </div> </div> <div class="hr content_sidebar_footer_hr"></div> <ul class="content_sidebar_footer"> <li> <a href="javascript:;" data-ng-click="js_right_sidebar_toggle()" tooltip-placement="top" tooltip="{{{true:\'å±å¼\',false:\'æå \'}[global.right_sidebar_is_fold]}}"> <i class="{{{true:\'icon-step-backward\',false:\'icon-step-forward\'}[global.right_sidebar_is_fold]}}"></i> </a> </li> <li class="collapse_hide"> <a href="/project/{{pid}}/setting" tooltip-placement="top" tooltip="è®¾ç½®"> <i class="icon-cog"></i></a> </li> <li class="collapse_hide"> <a href="/project/{{pid}}/trash" tooltip-placement="top" tooltip="åæ¶ç«?"> <i class="icon-trash"></i></a> </li> </ul> </div> ')}]),angular.module("/ycjs/tpl/project/prj_title_panel.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/prj_title_panel.html",'<div class="title" ng-controller="prj_info_ctrl"> <h3> <a href="javascript:;" class="js-popbox" data-placement="bottom" data-align="left" ng-click="js_view_prj_info($event)" title="æ¥çé¡¹ç®ä¿¡æ¯"> <i class="{{project.info.pic}} mr_10"></i> {{project.info.name}}<i class="icon-cog ml_20"></i> </a> </h3> </div>')}]),angular.module("/ycjs/tpl/project/project_add.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/project_add.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3 ng-if="current_menu == \'all\'"><i class="icon-inbox mr_10"></i>æ°å»ºé¡¹ç®</h3> <h3 ng-if="current_menu != \'all\'"><i class="icon-sitemap mr_10"></i>{{current_team.name}}</h3> </div> <div class="main"> </div> </div> </div> <div class="height-nonav main-content" wt-scroll ng-hide="permission == 64"> <dl class="frame" data-minheight="160" data-ng-show="global.loading_done"> <dt> <span class="title">æ°å»ºé¡¹ç®</span> <ul class="tabs"> </ul> </dt> <dd> <div class="panel-section"> <form ng-show="is_add_team" name="team_add_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="form-horizontal wt-form" novalidate> <div class="form-group"> <label class="col-xs-2 control-label">å¢éåç§°ï¼?</label> <div class="col-xs-10"> <input name="team_name" ng-model="team_name" placeholder="å¢éåç§°" type="text" class="form-control" required autofocus/> </div> </div> <div class="form-group" ng-show="team_add_form.$errors.length > 0"> <div class="col-xs-2"></div> <div class="col-xs-10"> <div class="alert alert-danger"> <i class="icon-remove-sign"></i> {{team_add_form.$errors[0]}} </div> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label"></label> <div class="col-xs-10"> <button wt-form-submit="js_add_team(team_add_form, team_name)" class="btn btn-success mr_15" data-loading-text="ä¿å­ä¸?..." loading-status="is_saving_team">åå»ºæ°å¢é? </button> <button ng-click="js_cancel_add_team()" class="btn btn-cancel">åæ¶</button> </div> </div> </form> <form ng-hide="is_add_team" name="add_prj_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="form-horizontal wt-form" novalidate> <div class="form-group"> <label class="col-xs-2 control-label pt_0">æå±å¢éï¼</label> <div class="col-xs-10"> <a class="dropdown-toggle" data-toggle="dropdown" href="javascript:;"> <i class="icon-sitemap mr_5"></i>{{current_team.name}} <span class="caret"></span> </a> <ul class="dropdown-menu clearfix"> <li ng-repeat="team in owner_teams"> <a href="javascript:;" ng-click="js_change_team(add_prj_form,team)"><i class="icon-sitemap mr_5"></i>{{team.name}}</a> </li> <li class="divider" ng-hide="teams.length==0"></li> <li> <a href="javascript:;" ng-click="js_open_add_team()"> <i class="icon-plus-sign mr_5"></i>æ°å»ºå¢é</a> </li> </ul> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label">é¡¹ç®åç§°ï¼?</label> <div class="col-xs-10"> <input name="prj_name" ng-model="name" placeholder="é¡¹ç®åç§°" class="form-control" type="text" autofocus="" required/> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label">é¡¹ç®æè¿°ï¼?</label> <div class="col-xs-10"> <textarea ng-model="desc" placeholder="ä¸ºé¡¹ç®æ·»å ç®ç­æè¿°ï¼å¯éï¼" rows="4" class="form-control "/> </div> </div> <div class="form-group" ng-show="add_prj_form.$errors.length > 0"> <div class="col-xs-2"></div> <div class="col-xs-10"> <div class="alert alert-danger"> <i class="icon-remove-sign"></i> {{add_prj_form.$errors[0]}} </div> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label"></label> <div class="col-xs-10"> <button wt-form-submit="js_add_prj(add_prj_form, name, desc)" class="btn btn-success mr_15" data-loading-text="ä¿å­ä¸?..." loading-status="is_saving_project">åå»ºæ°é¡¹ç? </button> <button ng-click="js_cancel()" class="btn float_left">åæ¶</button> </div> </div> </form> </div> </dd> </dl> </div> </div> </div> ')
}]),angular.module("/ycjs/tpl/project/chat/project_chats.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/chat/project_chats.html",'<div class="layout_content prj_panel"> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right" ng-show="global.loading_done"> </div> </div> </div> </div> <div class="height-nonav" wt-scroll ng-show="global.loading_done"> <dl class="frame" data-minheight="160"> <dt> <span class="title">èå¤©è®°å½</span> </dt> <dd> <div class="empty-panel" ng-show="chat != null && chat.messages.length == 0"> <i class="icon-comment"></i><br/> <span>è¿æ²¡æä»»ä½èå¤©è®°å½?</span> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div> <div class="post-panel"> <div class="chat-list" ng-if="global.loading_done"> <div class="part-loading" data-ng-show="!loading_chat_done"></div> <table class="table table-bordered" data-ng-show="loading_chat_done"> <thead> </thead> <tbody> <tr ng-class="{true:\'me\'}[message.from.uid == global.me.uid]" data-ng-repeat="message in chat.messages"> <td class="date" ng-class="{false:\'hide-both\', true:\'hide-bottom\'}[message.is_show_date]"> <span data-ng-show="message.is_show_date">{{message.create_date | dateFormatZHCN}}</span> </td> <td class="member"> <wt-avatar name="true" member="message.from" size="30" wt-disable-drag></wt-avatar> </td> <td class="content"> <div class="markdown-chat" ng-if="message.body.type == 1" wt-markdown="message.body.content"></div> <div class="chat-message-upload" ng-if="message.body.type == 3"> <div class="preview-icon" ng-class="{true:\'fancybox-file\'}[message.body.content.isImg]" data-fancybox-group="chathistory" data-fancybox-href="{{message.body.content | wtBoxView}}" data-fancybox-type="image"> <img ng-src="{{message.body.content.icon | wtBox}}" alt="{{ message.body.content.name }}"/> </div> <div class="file-name" title="{{message.body.content.name}}"> <a href="javascript:;" ng-click="locator.to_file(message.body.content.pid, message.body.content.fid, false);">{{message.body.content.name}}</a> </div> <div class="file-size">{{message.body.content.size | fileSize}}</div> </div> </td> <td class="time"> {{message.create_date | timeFormat}} </td> </tr> </tbody> </table> <br> <div class="pull-right" data-ng-show="loading_chat_done" wt-pagination="chats_pagination_opts"></div> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/project/prj_right_sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div>')}]),angular.module("/ycjs/tpl/project/common/pop_edit_watchers.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/common/pop_edit_watchers.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ·»å å³æ³¨</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus="" ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block" /> <br/> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_member(member)"> <i ng-class="{true: \'icon-ok\', false: \'icon-xx\'}[member.watched]" class="color_gray"></i> <wt-avatar member="member" name="true" faceclass="plr_5" atname="true" size="30"></wt-avatar> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_watch_all(xEntity)" class="ng-binding"><i class="icon-xx"></i> <span ng-bind="{true:\'æ·»å å¨é¨æå\',false:\'æææåå·²å³æ³¨\'}[xEntity.watchers.length < members.length]"></span> ({{ xEntity.watchers.length }}/{{ members.length }})</a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/common/pop_watch_member.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/common/pop_watch_member.html",'<div class="popbox-avatar"> <div class="avatar-body"> <button class="cancel icon-remove" ng-click="js_close()"></button> <wt-avatar member="member" size="56"></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading">{{member.display_name}}</h4> <p>@{{member.name}}</p> </div> </div> <div class="avatar-footer"> <button ng-click="js_unwatch_member(member)" class="btn btn-danger" data-loading-text="åæ¶ä¸?..." loading-status="is_cancel_ing">åæ¶å³æ³¨</button> </div> </div>')}]),angular.module("/ycjs/tpl/project/event/pop_add_event.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/event/pop_add_event.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ°å»ºæ¥ç¨</h3> </div> <div class="popbox-body" ng-if="selected_projects.length == 0 && show_project_select"> <div class="alert alert-warning"> ä½ è¿æ²¡æåä¸ä»»ä½é¡¹ç®ã? </div> </div> <form ng-if="selected_projects.length > 0 || !show_project_select" name="new_event_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate role="form"> <div class="popbox-body pop-add-event"> <textarea wt-enter="js_save_event(new_event_form)" name="event_name" ng-model="new_event.name" placeholder="æ°çæ¥ç¨å®æ" class="form-control" required autofocus/> <div class="section-group" ng-if="show_project_select"> <lable>é¡¹ç®ï¼?</lable> <select ng-change="js_change_project()" ng-model="new_event.pid" class="form-control project-select" ng-options="project.pid as project.name for project in selected_projects"></select> </div> <div class="section-group"> <lable>å¼å§ï¼</lable> <input name="start_date" ng-model="new_event.start_date" placeholder="" type="text" class="form-control control-first" data-ng-click="js_to_set_date(\'start_date\')" readonly required/> <select ng-model="new_event.start_hour" ng-options="time for time in start_hour_sections" class="form-control hour-select"></select> <span class="separation">:</span> <select ng-model="new_event.start_minute" ng-options="time for time in start_minute_sections" class="form-control minute-select"></select> </div> <div class="section-group" ng-show="new_event.show_end_date"> <lable class="">ç»æï¼?</lable> <input name="end_date" ng-model="new_event.end_date" placeholder="" type="text" class="form-control control-first" data-ng-click="js_to_set_date(\'end_date\')" readonly required/> <select ng-model="new_event.end_hour" ng-options="time for time in end_hour_sections" class="form-control hour-select"></select> <span class="separation">:</span> <select ng-model="new_event.end_minute" ng-options="time for time in end_minute_sections" class="form-control minute-select"></select> </div> <div class="section-group" ng-show="new_event.show_location"> <lable>ä½ç½®ï¼?</lable> <input name="event_location" ng-model="new_event.location" placeholder="ä½ç½®(å¯é?)" type="text" class="form-control location-input"/> </div> <div class="section-group switches"> <a href="javascript:;" data-ng-click="new_event.show_end_date = !new_event.show_end_date"> {{{true:\'å é¤ç»ææ¶é´\',false:\'æ·»å ç»ææ¶é´\'}[new_event.show_end_date == true]}}</a> <a href="javascript:;" data-ng-click="new_event.show_location = !new_event.show_location"> {{{true:\'å é¤ä½ç½®\',false:\'æ·»å ä½ç½®\'}[new_event.show_location == true]}}</a> </div> <div class="section-group"> <lable>åä¸äººï¼</lable> <ul class="entity-members"> <li class="" data-ng-repeat="member in new_event.attendees"> <a href="javascript:;"> <wt-avatar member="member" faceclass="plr_5" size="40"></wt-avatar> </a> </li> <li> <a class="avatar-add js-popbox" href="javascript:;" wt-tracker="Task Panel|Right|Add Assign" ng-click="js_to_attendee($event)" data-placement="left"> <span class="o"> <i class="icon-ex-user-add"></i> </span> </a> </li> </ul> </div> <div class="section-group"> <button wt-form-submit="js_save_event(new_event_form)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15" loading-status="is_saving">ç¡®å® </button> <button ng-click="js_close()" class="btn">åæ¶</button> </div> </div> </form> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>{{set_date_title}}</h3> </div> <div class="popbox-body"> <wt-full-datepicker default-date="current_date" set-date="js_set_date(date)" min-date="min_date"></wt-full-datepicker> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>åä¸äº?</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus="" ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block"/> <br> <div class="part-loading" ng-show="loading_members"></div> <ul class="popbox-menu" data-ng-hide="loading_members"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_member(member)"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[member.assigned]" class="color_gray"></i> <wt-avatar member="member" name="true" faceclass="plr_5" atname="true" size="30"></wt-avatar> </a> </li> <li class="divider"></li> <li> <a class="text-center" href="javascript:;" ng-click="js_step(0)"> <span>ç¡®å®</span> ({{ new_event.attendees.length }}/{{ members.length }})</a> </li> </ul> </div> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/event/pop_delete_event.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/event/pop_delete_event.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å é¤æ¥ç¨</h3> </div> <div class="popbox-body"> <span>æ¥ç¨å é¤åæ æ³æ¢å¤ï¼ç¡®è®¤è¦å é¤è¯¥æ¥ç¨åï¼</span> </div> <div class="popbox-footer"> <button ng-click="js_delete_event()" data-loading-text="å é¤ä¸?..." loading-status="is_deleting" class="btn btn-danger float_left">ç¡®å®å é¤</button> </div>')}]),angular.module("/ycjs/tpl/project/event/pop_event_member.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/event/pop_event_member.html",'<div class="popbox-avatar"> <div class="avatar-body"> <button class="cancel icon-remove" ng-click="js_close()"></button> <wt-avatar member="member" size="56"></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading">{{member.display_name}}</h4> <p>@{{member.name}}</p> </div> </div> <div class="avatar-footer"> <button ng-click="js_remove_attendee()" class="btn btn-danger" data-loading-text="ç§»é¤ä¸?..." loading-status="removing_attendee">ç§»é¤</button> </div> </div>')}]),angular.module("/ycjs/tpl/project/event/pop_event_more_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/event/pop_event_more_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ´å¤éé¡¹</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="js_step(2)"> <i class="icon-filter"></i> ææåç­éä»»å? </a> </li> <li> <a href="javascript:;" ng-click="js_step(1)"> <i class="icon-xx"></i> æ¾ç¤ºå·²å®æä»»å? <span class="text-muted small-tip"> {{{1: \'å¼å¯\', 0: \'å³é­\'}[project.info.show_completed]}} </span> </a> </li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ¾ç¤ºå·²å®æä»»å?</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a ng-click="js_prefs_show_completed()"> <i class="color_gray" ng-class="{1:\'icon-ok\',0:\'icon-xx\'}[project.info.show_completed]"></i> <strong>å¼å?</strong> <br/> <span class="text-muted pl_20">ä»»å¡å®æåï¼å¨æ¥åä¸­æ¾ç¤º</span> </a> </li> <li class="divider"></li> <li> <a ng-click="js_prefs_show_completed()"> <i class="color_gray" ng-class="{0:\'icon-ok\',1:\'icon-xx\'}[project.info.show_completed]"></i> <strong>å³é­</strong> <br/> <span class="text-muted pl_20">ä»»å¡å®æåï¼å¨æ¥åä¸­éè</span> </a> </li> </ul> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ææåç­éä»»å?</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="js_change_member(\'all\')"> <i ng-class="{false: \'icon-xx\', true: \'icon-ok\'}[member_id == \'all\']" class="color_gray"></i> å¨é¨æå</a> </li> <li class="divider"></li> <li class="member-item"> <a href="javascript:;" tabindex="-1" ng-click="js_change_member(self.uid)"> <i ng-class="{false: \'icon-xx\', true: \'icon-ok\'}[member_id == self.uid]" class="color_gray"></i> <wt-avatar member="self" name="true" faceclass="plr_5" atname="true" size="30"> </wt-avatar> </a> </li> <li class="member-item" ng-repeat="member in members"> <a href="javascript:;" tabindex="-1" ng-click="js_change_member(member.uid)"> <i ng-class="{false: \'icon-xx\', true: \'icon-ok\'}[member_id == member.uid]" class="color_gray"></i> <wt-avatar member="member" name="true" faceclass="plr_5" atname="true" size="30"> </wt-avatar> </a> </li> </ul> </div> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/event/project_events.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/event/project_events.html",'<div class="prj_panel layout_content"> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main text-center"> <span id="loading_calendar" data-ng-class="{true:\'done\',false:\'\'}[loading_calendar_done]"> <a href="javascript:;" ng-click="prev()" wt-tracker="Project Event Page|Nav|Goto Prev"> <i class="icon-chevron-left"></i> </a> <h4 id="calendar_title" class="help-inline p_0"></h4> <a href="javascript:;" ng-click="next()" wt-tracker="Project Event Page|Nav|Goto Next"> <i class="icon-chevron-right"></i> </a> </span> <div class="toolbar_panel pull-right"> <div class="btn-group js-popbox mr_15" data-placement="bottom" data-align="right" wt-permission="[permission,project.info.curr_role,1,2]"> <button class="btn btn-danger" id="btn_new_event" wt-tracker="Project Event Page|Nav|Open Pop Add Task" wt-new-event="js_new_event_success(event)">æ°å»ºæ¥ç¨ </button> <a class="btn btn-danger dropdown-toggle" data-toggle="dropdown" wt-tracker="Project Event Page|Nav|Add Event-More"> <i class="icon-caret-down"></i> </a> <ul class="dropdown-menu pull-right"> <li> <a href="javascript:;" wt-new-event="js_new_event_success(event)" wt-tracker="Project Event Page|Nav|Add Event-More-Event"> <i class="icon-xx"></i> æ°å»ºæ¥ç¨</a> </li> <li> <a href="javascript:;" id="btn_new_task" wt-click="js_show_task_pop($event)" wt-tracker="Project Event Page|Nav|Add Event-More-Task"> <i class="icon-xx"></i> æ°å»ºä»»å¡</a> </li> </ul> </div> <div class="btn-group mr_15"> <button class="btn" ng-class="{true: \'active\'}[calendar_view==\'month\']" ng-click="changeView(\'month\')" wt-tracker="Project Event Page|Nav|Switch View Month">æ? </button> <button class="btn" ng-class="{true: \'active\'}[calendar_view==\'basicWeek\']" ng-click="changeView(\'basicWeek\')" wt-tracker="Project Event Page|Nav|Switch View Week">å? </button> </div> <button class="btn js-popbox" data-placement="bottom" data-align="right" wt-permission="[permission,project.info.curr_role,1,2]" wt-tracker="Project Event Page|Nav|Toggle Pop More" ng-click="js_show_more_menu($event)"> æ´å¤&nbsp;<i class="icon-caret-down"></i> </button> </div> </div> </div> </div> <div class="event-panel height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <div id="calendar" calendar="myCalendar" ui-calendar="calendarConfig" ng-model="calendarEventSources"> </div> </dl> </div> </div> <div class="layout_right_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/project/prj_right_sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div> ')}]),angular.module("/ycjs/tpl/project/file/pop_add_folder.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_add_folder.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ°å»ºæä»¶å¤?</h3> </div> <form name="add_folder_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate> <div class="popbox-body"> <div> <input name="file_name" ng-model="name" placeholder="æä»¶å¤¹å" class="form-control help-block" type="text" autofocus="" required/> </div> </div> <div class="popbox-footer"> <button wt-form-submit="js_add_folder(add_folder_form, name)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15" loading-status="is_save_ing">ç¡®å® </button> <button ng-click="js_close(result)" class="btn float_left">åæ¶</button> </div> </form> ')}]),angular.module("/ycjs/tpl/project/file/pop_attach.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_attach.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ä»å·²ææä»¶éæ©</h3> </div> <div class="popbox-bodywrapper fixed-width" wt-scroll> <div class="popbox-body"> <div class="part-loading" ng-hide="prj_files_loaded"></div> <ul class="popbox-menu"> <li ng-repeat="file in files" ng-click="js_attach(file)"> <a class="file-item-li-menu" ng-class="{0:\'file-picfile\', 1:\'file-picfolder\'}[file.type]" href="javascript:;"> <img ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> <span class="file-name">{{file.name}}</span> </a> </li> <li ng-show="files.length == 0 && prj_files_loaded"> <div class="empty-menu">æ²¡ææä»¶</div> </li> </ul> </div> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ä»å·²ææä»¶éæ©</h3> </div> <div class="popbox-bodywrapper fixed-width" wt-scroll> <div class="popbox-body"> <div class="part-loading" ng-hide="prj_files_loaded"></div> <ul class="popbox-menu"> <li ng-repeat="file in sub_files" ng-click="js_attach(file)"> <a class="file-item-li-menu" ng-class="{0:\'file-picfile\',1:\'file-picfolder\'}[file.type]" href="javascript:;"> <img ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> <span class="file-name">{{file.name}}</span> </a> </li> <li ng-show="sub_files.length == 0 && prj_files_loaded"> <div class="empty-menu">æ²¡ææä»¶</div> </li> </ul> </div> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/file/pop_attachment_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_attachment_menu.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>éä»¶éé¡¹</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a ng-href="{{file.path | wtBox}}" target="_blank"><i class="icon-xx"></i> ä¸è½½</a></li> <li><a href="/project/{{file.pid}}/file/{{file.fid}}"><i class="icon-xx"></i> æ¥ç</a></li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_del_file()"><i class="icon-xx"></i> ç§»é¤éä»¶</a> </li> </ul> </div>')}]),angular.module("/ycjs/tpl/project/file/pop_delete_file.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_delete_file.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å é¤æä»¶</h3> </div> <div class="popbox-body"> <span>æä»¶å é¤åä¼æ¾å¨åæ¶ç«ï¼å¯ä»¥å¨åæ¶ç«éæ©<br/>æ¢å¤æèå½»åºå é¤ã?</span> </div> <div class="popbox-footer"> <button ng-click="js_del_file()" class="btn btn-danger" data-loading-text="å é¤ä¸?..." loading-status="is_deleting">ç¡®å®å é¤</button> </div>')}]),angular.module("/ycjs/tpl/project/file/pop_file_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_file_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æä»¶éé¡¹</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_step(1)"><i class="icon-eye-open"></i> æ·»å å³æ³¨</a></li> <li class="divider"></li> <li><a ng-href="{{file | wtBoxDownload}}"><i class="icon-download-alt"></i> ä¸è½½</a></li> <li class="divider"></li> <li><a ng-click="js_step(2)" href="javascript:;"><i class="icon-share-alt"></i> ç§»å¨å?...</a></li> <li><a ng-click="js_step(3)" href="javascript:;"><i class="icon-trash"></i> å é¤</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ·»å å³æ³¨</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block" /> <br/> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_watch(member)"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[member.is_watch]" class="color_gray"></i> <wt-avatar member="member" faceclass="plr_5" name="true" size="30"></wt-avatar> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_watch_all()"> <i class="icon-xx"></i> <span ng-bind="{true:\'æ·»å å¨é¨æå\',false:\'æææåå·²å³æ³¨\'}[file.watchers.length < members.length]"></span> ({{ file.watchers.length }}/{{ members.length }})</a> </li> </ul> </div> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ç§»å¨æä»¶å?</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-repeat="folder in folders"> <a href="javascript:;" ng-click="js_move_to(folder)"> <span class="icon" ng-class="{true:\'icon-ok\',false:\'\'}[folder.selected == 1]"></span> <span>{{folder.name}}</span> </a> </li> <li ng-show="folders==0"> <div class="empty-menu">æ²¡æå¶å®æä»¶å¤?</div></li> </ul> </div> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å é¤æä»¶</h3> </div> <div class="popbox-body"> <span>æä»¶å é¤åä¼æ¾å¨åæ¶ç«ï¼å¯ä»¥å¨åæ¶ç«éæ©<br/>æ¢å¤æèå½»åºå é¤ã?</span> </div> <div class="popbox-footer"> <button ng-click="js_del_file()" class="btn btn-danger">ç¡®å®å é¤</button> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/file/pop_file_more_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_file_more_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ´å¤éé¡¹</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_step(3)"> <i class="icon-share"></i> æ°æ®å¯¼åº</a> </li> <li class="divider"></li> <li><a href="javascript:;" ng-click="js_step(2)"><i class="icon-envelope"></i> è½¬åé®ä»¶å°æä»?</a></li> </ul> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è½¬åé®ä»¶å°æä»?</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="javascript:;"> è½¬åé®ä»¶å°ä»¥ä¸å°å <input type="text" ng-model="email" class="form-control help-block" wt-click-select readonly="readonly"/> </a> </li> <li> <a href="javascript:;"> <span class="text-muted">å¦æéè¦æé®ä»¶å±äº«ç»é¡¹ç®æåï¼å¯ä»¥ç´æ¥è½¬åé®ä»¶å°ä¸é¢çé®ä»¶å°åã?</span> </a> </li> <li> <a href="/guide" target="_blank"> <i class="icon-question-sign"></i> æ¥çæ´å¤å¸®å© </a> </li> </ul> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ°æ®å¯¼åº</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="/api/projects/{{project.info.pid}}/files/exports?format=json" target="_blank"> <i class="icon-code"></i> JSONæ°æ® </a> </li> </ul> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/file/pop_file_watcher.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_file_watcher.html",'<div class="popbox-avatar"> <div class="avatar-body"> <button class="cancel icon-remove" ng-click="js_close()"></button> <wt-avatar member="member" size="56"></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading">{{member.display_name}}</h4> <p>@{{member.name}}</p> </div> </div> <div class="avatar-footer"> <button ng-click="js_unwatch_member()" class="btn btn-danger">åæ¶å³æ³¨</button> </div> </div>')}]),angular.module("/ycjs/tpl/project/file/pop_files.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_files.html",'<div class="modal upload-modal"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" ng-click="js_close(result)" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> <h3>ä»å·²ææä»¶éæ©</h3> </div> <div class="modal-body upload-body"> <div class="pop-left-right"> <div class="file-panel height-nonav" wt-scroll> <ul class="file-items"> <li class="file-item" ng-repeat="file in files" ng-click="js_attach(file)" wt-title="{ 0:file.name + \'\\nå¤§å°ï¼\' + file.size + \'\\nä¿®æ¹æ¶é´ï¼\' + (file.update_date | timeFormatZHCN), 1:file.name + \'\\nä¿®æ¹æ¶é´ï¼\' + (file.update_date | timeFormatZHCN)} [file.type]"> <a class="file-pic" ng-class="{0:\'file-picfile\',1:\'file-picfolder\'}[file.type]" href="javascript:;"> <img ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> </a> <div class="file-name">{{file.name}}</div> </li> </ul> </div> </div> </div> <div class="modal-footer"> <button type="button" ng-click="js_ok()" class="btn btn-success float_left" aria-hidden="true">ç¡®å® </button> <button type="button" ng-click="js_close()" class="btn float_left" data-dismiss="modal" aria-hidden="true">åæ¶ </button> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/project/file/pop_folder_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_folder_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æä»¶å¤¹éé¡¹</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_step(1)"><i class="icon-xx"></i> éå½å?</a></li> <li class="divider"></li> <li><a href="javascript:;" ng-click="js_step(3)"><i class="icon-xx"></i> è®¾ç½®å¾æ </a></li> <li class="divider"></li> <li><a ng-click="js_step(2)" href="javascript:;"><i class="icon-trash"></i> å é¤</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>éå½åæä»¶å¤¹</h3> </div> <form name="edit_folder_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate> <div class="popbox-body"> <input name="folder_name" type="text" class="form-control help-block" ng-model="folder_name" placeholder="æä»¶å¤¹å" autofocus required/> </div> <div class="popbox-footer"> <button wt-form-submit="js_change_name(edit_folder_form, folder_name)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15" loading-status="is_save_ing">ç¡®å® </button> <button ng-click="js_close(result)" class="btn">åæ¶</button> </div> </form> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å é¤æä»¶å¤?</h3> </div> <div class="popbox-body"> <span>æä»¶å¤¹åå¶æä»¶å é¤åä¼æ¾å¨åæ¶ç«ï¼å¯ä»¥å¨åæ¶ç«?<br/>éæ©æ¢å¤æèå½»åºå é¤ã?</span> </div> <div class="popbox-footer"> <button ng-click="js_del_folder()" class="btn btn-danger">ç¡®å®å é¤</button> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è®¾ç½®å¾æ </h3> </div> <div class="popbox-bodywrapper"> <div class="popbox-body"> <div class="part-loading" ng-show="prj_files_loading"></div> <ul class="popbox-menu"> <li ng-repeat="folder_icon in folder_icons" ng-click="js_set_folder_icon(folder_icon)"> <a class="folder-item-li-menu" href="javascript:;"> <img ng-src="{{folder_icon.path | wtBox}}"/> <span class="text-muted small-tip" ng-if="folder_icon.ext == folder.ext"> <i class="color_gray icon-ok"></i> </span> </a> </li> </ul> </div> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/file/pop_move_file.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_move_file.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ç§»å¨æä»¶å?</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li ng-repeat="folder in folders"> <a href="javascript:;" ng-click="js_move_to(folder)"> <span class="icon" ng-class="{true:\'icon-ok\',false:\'\'}[folder.selected == 1]"></span> <span>{{folder.name}}</span> </a> </li> <li ng-show="folders==0"> <div class="empty-menu">æ²¡æå¶å®æä»¶å¤?</div></li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/file/pop_watch_file.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/pop_watch_file.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ·»å å³æ³¨</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus="" ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block" /> <br/> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_watch(member)"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[member.is_watch]" class="color_gray"></i> <wt-avatar member="member" faceclass="plr_5" name="true" size="30"></wt-avatar> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_watch_all()"> <i class="icon-xx"></i> <span ng-bind="{true:\'æ·»å å¨é¨æå\',false:\'æææåå·²å³æ³¨\'}[file.watchers.length < members.length]"></span> ({{ file.watchers.length }}/{{ members.length }})</a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/file/project_files.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/file/project_files.html",'<div class="prj_panel layout_content"> <div class="layout_content_main"> <div class="mod_navbar"> <div class="mod_warp"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right" ng-show="global.loading_done"> <div class="btn-group js-popbox" wt-permission="[permission,project.info.curr_role,1,2]"> <span class="btn fileinput-button btn-danger"> <span ng-show="upload_enabled">æ·»å æä»¶ <input wt-uploadfile="file_upload_option" multiple type="file" name="files[]" title="æ·»å æä»¶" /></span> </span> <button type="button" class="btn btn-danger dropdown-toggle mr_15" data-toggle="dropdown"> <i class="icon-caret-down"></i> </button> <ul class="dropdown-menu pull-right"> <li> <a href="javascript:;" ng-click="js_trigger_upload($event)" wt-tracker="Task Panel|Right|UploadFile-More-Form Local"> <i class="icon-xx"></i> æ¬å°ä¸ä¼ æä»¶</a> </li> <li> <a href="javascript:;" ng-show="!is_folder" ng-click="js_add_folder_pop($event)" wt-tracker="File List|Right|Create New Folder"> <i class="icon-xx"></i> æ°å»ºæä»¶å¤? </a> </li> </ul> </div> <div class="btn-group mr_15"> <button class="btn" ng-class="{\'active\':view_type==\'grid\'}" ng-click="set_view_type(\'grid\')"> <i class="icon-th-large"></i> </button> <button class="btn" ng-class="{\'active\':view_type==\'list\'}" ng-click="set_view_type(\'list\')"> <i class="icon-list"></i> </button> </div> <button class="btn js-popbox" data-placement="bottom" data-align="right" wt-tracker="Project File Page|Nav|Toggle Pop More" ng-click="js_show_more_menu($event)" wt-permission="[permission,project.info.curr_role,1,2]"> æ´å¤&nbsp;<i class="icon-caret-down"></i> </button> </div> </div> </div> </div> <div class="height-nonav" wt-scroll wt-dragfile="dragfile_option"> <dl class="frame dragfile-hover-placeholder"> <i class="icon-upload-alt mr_10"></i><span>æ¾å¼ä¸ä¼ æä»¶</span> </dl> <dl class="frame" data-minheight="160" ng-show="global.loading_done" > <dt> <span class="title"> <a href="javascript:history.go(-1);" ng-if="is_folder"><i class="icon-folder-open mr_10"></i></a>{{folder_name}} </span> <ul class="tabs"> <li > <a data-ng-class="{\'active\':current_tab == 0}" href="javascript:;" ng-click="js_change_tab(0)">å¨é¨</a> </li> <li > <a data-ng-class="{\'active\':current_tab == 1}" href="javascript:;" ng-click="js_change_tab(1)">æä¸ä¼ ç</a> </li> <li > <a data-ng-class="{\'active\':current_tab == 2}" href="javascript:;" ng-click="js_change_tab(2)">æå³æ³¨ç</a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="(files | filter:{is_hide:\'!true\'}).length == 0 && global_fileupload_queue().length == 0"> <i class="icon-file"></i><br/> <span>è¿æ²¡æä»»ä½æä»?</span> </div> <div class="file-panel"> <ul class="file-items" ng-show="view_type == \'grid\'"> <li class="file-item right_click_trigger file-item-mark js-popbox" data-placement="bottom" data-align="left" ng-click="js_navigate($event,file)" ng-repeat="file in files_grid" file-id="{{file.fid}}" data-ng-hide="file.is_hide" droppable="{true:folder_droppable_options,false:null}[(file.type | isFolder)]" draggable="{true:file_draggable_options,false:null}[(file.type | isFile)]" wt-title="{ 0:file.name + \'\\nå¤§å°ï¼\' + (file.size | fileSize) + \'\\nä¿®æ¹æ¶é´ï¼\' + (file.update_date | timeFormatZHCN), 1:file.name + \'\\nä¿®æ¹æ¶é´ï¼\' + (file.update_date | timeFormatZHCN)} [file.type]"> <a href="javascript:;" class="file-menu js-popbox" wt-permission="[permission,project.info.curr_role,1,2]" data-placement="right" data-align="auto" ng-click="js_show_menu($event, file)"> <i class="icon-play-circle"></i> </a> <a class="file-pic" ng-class="{0:\'file-picfile fancybox-file\',1:\'file-picfolder\'}[file.type]" data-fancybox-group="filegroup" data-fancybox-href="{{file | wtBoxView}}" data-fancybox-type="image" title="{{ file.name }}"> <img ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> </a> <div class="file-name"><a class="slide-trigger" ng-click="js_navigate_detail($event,file)" href="javascrpt:;">{{file.name}}</a></div> </li> <li class="file-item" ng-repeat="file in global_fileupload_queue()"> <a class="file-pic file-pic-queue" title="{{ file.name }}"> <img ng-if="!file.preview" ng-src="{{file.name | getExtIcon}}" alt="{{ file.name }}"/> <div ng-if="file.preview" class="preview" data-file-upload-preview="file"></div> <span class="error" ng-show="file.error" > <span class="label label-danger">{{ file.error | fileuploadErrorInfo }}</span> <br/> <br/> </span> <span href="javascript:;" class="cancel" ng-click="file.$cancel()" ng-hide="!file.$cancel"> åæ¶ </span> <div ng-hide="file.error" class="progress progress-striped active" ng-class="{pending: \'in\'}[file.$state()]" file-upload-progress="file.$progress()"> <div class="progress-bar progress-bar-success" ng-style="{width: num + \'%\'}"></div> </div> </a> <div class="file-name">{{file.name}}</div> </li> </ul> <div class="file-list-view" ng-show="view_type == \'list\' && files_list.length > 0"> <div class="wt-row right_click_trigger file-item-view file-item-mark js-popbox" data-placement="bottom" data-align="left" ng-class="{\'border-notop\':$index == 0,\'active\':file.fid == locator.show_detail_file_id}" ng-repeat="file in files_list" file-id="{{file.fid}}" data-ng-hide="file.is_hide"> <div class="column column-pic slide-trigger" ng-click="js_navigate($event,file)"> <img class="pic" ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> </div> <div class="column column-name slide-trigger" ng-click="js_navigate($event,file)"> <a class="name" href="javascript:;">{{file.name }}</a> </div> <div class="column column-size"> &nbsp;{{(file.size | fileSize) || ""}} </div> <div class="column column-update"> <wt-avatar member="file.update_user" name="false" size="30"></wt-avatar> </div> <div class="column column-date"> <span class="date">{{file.update_date | fromNow}}</span> </div> <div class="column column-meta"> <a href="javascript:;" class="post-action js-popbox" data-placement="auto" wt-permission="[permission,project.info.curr_role,1,2]" ng-click="js_show_menu($event,file)"> <i class="icon-play-circle"></i> </a> </div> </div> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/project/prj_right_sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div>')
}]),angular.module("/ycjs/tpl/project/graph/project_graphs.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/graph/project_graphs.html",'<div class="layout_content prj_panel"> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main text-center"> <span class="center-select" data-ng-show="graph_type == \'pulse\' && global.loading_done"> <a title="ä¸ä¸å?" href="javascript:;" ng-click="to_pulse_prev_week()"><i class="icon-chevron-left"></i></a> <h4 class="center_title help-inline p_0">{{pulse_graph_date}}</h4> <a title="ä¸ä¸å?" href="javascript:;" ng-disabled="disable_pulse_next" ng-click="to_pulse_next_week()"><i class="icon-chevron-right"></i></a> </span> <span class="center-select" ng-show="graph_type == \'daily\' && global.loading_done"> <a title="åä¸å¤?" href="javascript:;" ng-click="js_to_prev_daily()"><i class="icon-chevron-left"></i></a> <h4 class="center_title help-inline p_0">{{daily_end | dateFormatZHCN}}</h4> <a href="javascript:;" title="åä¸å¤?" ng-disabled="disable_daily_next" ng-click="js_to_next_daily()"><i class="icon-chevron-right"></i></a> </span> <div class="toolbar_panel pull-right"> <div class="btn-group"> <button class="btn" ng-class="{true:\'active\'}[graph_type==\'overview\']" ng-click="js_to_overview()"> è¿åº¦ </button> <button class="btn" ng-class="{true:\'active\'}[graph_type==\'pulse\']" ng-click="js_to_pulse()"> å¨æ¥ </button> <button class="btn" ng-click="js_to_daily()" ng-class="{true:\'active\'}[graph_type==\'daily\']"> æ¥æ¥ </button> <a class="btn" href="/project/{{project.info.pid}}/activity">æ´»å¨</a> </div> </div> </div> </div> </div> <div class="graph-panel height-nonav" wt-scroll> <div> <dl class="frame" data-minheight="160" ng-show="graph_type == \'overview\'"> <dt> <span class="title">é¡¹ç®è¿åº¦</span> <ul class="tabs"> <li> <a ng-class="{\'active\':tab_index == \'1\'}" href="javascript:;" ng-click="js_change_tab(\'1\')">é¡¹ç®æå</a> </li> <li> <a ng-class="{\'active\':tab_index == \'2\'}" href="javascript:;" ng-click="js_change_tab(\'2\')">ä»»å¡åè¡¨</a> </li> <li> <a ng-class="{\'active\':tab_index == \'3\'}" href="javascript:;" ng-click="js_change_tab(\'3\')">ä»»å¡æ ç­¾</a> </li> </ul> </dt> <dd> <div class="part-loading h_38" ng-show="!part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="graph-container" id=\'members_task_graph\' ng-show="tab_index == \'1\'"></div> <div class="graph-container" id=\'entry_task_graph\' ng-show="tab_index == \'2\'"></div> <div class="graph-container" id=\'labels_task_graph\' ng-show="tab_index == \'3\'"></div> </div> </dd> </dl> <dl class="frame" data-minheight="160" ng-show="graph_type == \'pulse\'"> <dt> <span class="title">é¡¹ç®å¨æ¥</span> <ul class="tabs"> <li> <a ng-class="{\'active\':tab_index == \'4\'}" href="javascript:;" ng-click="js_change_tab(\'4\')">é¡¹ç®æå</a> </li> <li> <a ng-class="{\'active\':tab_index == \'5\'}" href="javascript:;" ng-click="js_change_tab(\'5\')">æ¬å¨è¿åº¦</a> </li> </ul> </dt> <dd> <div class="part-loading h_38" ng-show="!part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="graph-container" id=\'pulse_member_graph\' ng-show="tab_index == \'4\'"></div> <div class="graph-container" id=\'pulse_weekly_graph\' ng-show="tab_index == \'5\'"></div> </div> </dd> </dl> <dl class="frame" data-minheight="160" ng-show="graph_type == \'daily\'"> <dt> <span class="title">é¡¹ç®æ¥æ¥</span> <ul class="tabs"> <li> <a ng-class="{\'active\':tab_index == \'8\'}" href="javascript:;" ng-click="js_change_tab(\'8\')">é¡¹ç®æå</a> </li> <li> <a ng-class="{\'active\':tab_index == \'9\'}" href="javascript:;" ng-click="js_change_tab(\'9\')">å®æä»»å¡</a> </li> <li> <a ng-class="{\'active\':tab_index == \'10\'}" href="javascript:;" ng-click="js_change_tab(\'10\')">æ°å¢ä»»å¡</a> </li> </ul> </dt> <dd> <div class="part-loading h_38" ng-show="!part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="graph-container" id=\'daily_task_graph\' ng-show="tab_index == \'8\'"></div> <div class="graph-container" ng-show="tab_index == \'9\'"> <div class="entry-tasks"> <wt-task ng-repeat="task in daily_completed_tasks" task="task" class="slide-trigger" hide-action="true" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" task-entry-id="{{task.entry_id}}" ng-click="locator.to_task(task.pid, task.tid, false)"></wt-task> <div class="graph-empty-panel" ng-show="daily_completed_tasks.length==0"> <i class="icon-check"></i><br/> <span>æ²¡æå®æä»»å¡</span> </div> </div> </div> <div class="graph-container" ng-show="tab_index == \'10\'"> <div class="entry-tasks"> <wt-task ng-repeat="task in daily_created_tasks" task="task" class="slide-trigger" hide-action="true" task-entry-id="{{task.entry_id}}" ng-click="locator.to_task(task.pid, task.tid, false)"></wt-task> <div class="graph-empty-panel noborder" ng-show="daily_created_tasks.length==0"> <i class="icon-check"></i><br/> <span>æ²¡ææ°å¢ä»»å¡</span> </div> </div> </div> </div> </dd> </dl> </div> </div> </div> <div class="layout_right_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/project/prj_right_sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div>')}]),angular.module("/ycjs/tpl/project/member/pop_add_prj_member.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/member/pop_add_prj_member.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ·»å æå</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input autofocus="" type="text" class="form-control help-block" ng-model="search_user_input" placeholder="æç´¢æå" ng-change="js_search_user(search_user_input)"/> <br/> <div class="part-loading" wt-loading-done="members_loading_done"></div> <ul class="popbox-menu" ng-show="show_members.length == 0"> <li> <div class="empty-menu-nomin-h">æ²¡æå¯ä»¥æ·»å çæå?</div> </li> </ul> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in show_members"> <a href="javascript:;" tabindex="-1" ng-click="js_add_prj_member(member)"> <wt-avatar member="member" size="30" faceclass="plr_5" name="true" atname="true"></wt-avatar> <span class="action color_gray" ng-click="js_go_to_set_role($event,member)"><i class="icon-chevron-right"></i></span> </a> </li> </ul> </div> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>éæ©è§è²</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a ng-click="js_add_user_as_admin()"> <strong>è´è´£äº?</strong> <br/> <span class="text-muted pl_20">å¯ä»¥ç®¡çé¡¹ç®æåï¼å¯¹é¡¹ç®è¿è¡è®¾ç½®</span> </a> </li> <li class="divider"></li> <li> <a ng-click="js_add_user_as_member()"> <strong>æå</strong> <br/> <span class="text-muted pl_20">éç¨æ§æä½ï¼å¦åå»ºä»»å¡ãä¸ä¼ æä»¶ç­</span> </a> </li> <li class="divider"></li> <li> <a ng-click="js_add_user_as_guest()"> <strong>è®¿å®¢</strong> <br/> <span class="text-muted pl_20">åªè½æ¥çé¡¹ç®åå®¹ãåè¡¨è¯è®ºãå³æ³?</span> </a> </li> </ul> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/project/member/pop_user_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/member/pop_user_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-avatar"> <div class="avatar-body" ng-class="{true: \'member-pendding\'}[[(selected_member.status==2 || selected_member.status==3)]]"> <button class="cancel icon-remove" ng-click="js_close()"></button> <wt-avatar member="selected_member" size="56"></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading help-inline">{{selected_member.display_name}}</h4> <span class="text-muted pl_15">{{selected_member.role | prj_role}}</span> <p> <span class="help-inline">@{{selected_member.name}}</span> </p> </div> <div class="member_desc ng-scope"> <span class="text-muted ng-binding">{{ selected_member.desc || "ä»å¾æï¼è¿æ²¡æä¸ªäººè¯´æ?" }}</span> </div> </div> <div class="avatar-footer" ng-hide="project.info.curr_role != 1"> <div class="pull-left color_gray"> {{ {2:\'æåè¿æªæ¥åéè¯·\', 3: \'æåå·²ç»éåºå¢é\'}[selected_member.status] }} </div> <div ng-hide="!can_change"> &nbsp; <button ng-click="js_step(1)" class="btn btn-danger mr_15" ng-show="(project.info.curr_role | is_admin) && permission!=4 && selected_member.status==1">è®¾ç½®æé</button> <button ng-click="js_step(2)" class="btn" ng-show="can_change && ((project.info.curr_role | is_admin) && permission!=4)">ç§»é¤</button> </div> <div ng-show="!can_change" class="text-left"> <div ng-hide="project.info.curr_role != 1"> <span class="text-muted">ä½ ä¸è½ä¿®æ¹å½åæåæéï¼æ¯ä¸ªé¡¹ç®è³å°éè¦ä¸åè´è´£äºº</span> </div> </div> </div> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è®¾ç½®æé</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="js_set_user_as_admin()"> <i class="color_gray" ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[selected_member.role==1]"></i> <strong>è´è´£äº?</strong> <br/> <span class="text-muted pl_20">å¯ä»¥ç®¡çé¡¹ç®æåï¼å¯¹é¡¹ç®è¿è¡è®¾ç½®</span> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_set_user_as_member()"> <i class="color_gray" ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[selected_member.role==2]"></i> <strong>æå</strong> <br/> <span class="text-muted pl_20">éç¨æ§æä½ï¼å¦åå»ºä»»å¡ãä¸ä¼ æä»¶ç­</span> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_add_user_as_guest()"> <i class="color_gray" ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[selected_member.role==3]"></i> <strong>è®¿å®¢</strong> <br/> <span class="text-muted pl_20">åªè½æ¥çé¡¹ç®åå®¹ãåè¡¨è¯è®ºãå³æ³?</span> </a> </li> </ul> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ç§»é¤æå</h3> </div> <div class="popbox-body"> <span>è¢«ç§»é¤çæåï¼å°ä¸è½åè®¿é®è¯¥é¡¹ç®çä¿¡æ¯ï¼ä½?<br/>ç¸å³çæ°æ®ä¸ä¼è¢«å é¤ã?</span> </div> <div class="popbox-footer"> <button ng-click="js_delete_prj_member(selected_member)" class="btn btn-danger">ç¡®å®ç§»é¤</button> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/page/add_or_edit_page.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/add_or_edit_page.html",'<div class="prj_panel layout_content"> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right"> <button data-ng-show="!is_add && global.loading_done" ng-click="js_pop_delete($event)" class="btn mr_15 js-popbox" data-placement="bottom" data-align="right" wt-pop-delete-before="js_show_pop_delete_before()"> å é¤</button> <button class="btn" data-ng-show="global.loading_done" ng-click="js_cancel_edit()"> éåºç¼è¾? </button> </div> </div> </div> </div> <div class="container-fluid height-nonav" wt-scroll=\'{"advanced":{"autoScrollOnFocus":false}}\'> <dl class="frame" data-minheight="160"> <form name="page_form" class="wt-form" wt-form-validate="{blurTrig:false,showMsg:false}" novalidate=""> <div class="edit-container" ng-show="page"> <input type="text" autofocus name="page_title" ng-model="page.name" class="form-control help-block" placeholder="è¾å¥ææ¡£æ é¢" required=""> <textarea type="text" ng-model="page.content" name="page_content" data-minheight="270" wt-ctrl-enter="js_save_page(page_form,true)" placeholder="ç¼åææ¡£åå®¹(æCtrl + åè½¦é®æäº?)" wt-full-editor></textarea> </div> <div class="edit-sidebar" ng-show="page"><div class="edit-box" wt-scroll-fixed> <div class="edit-sidebar-body"> <div class="alert alert-danger wt-alert" ng-show="!is_add && page.locked==1 && (page.locked_by.uid != global.me.uid)"> <i class="icon-info-sign"></i> ææ¡£æ­£å¨è¢? <strong>{{page.locked_by.display_name}}</strong> éå®ç¼è¾ä¸­ï¼ä½ æ æ³ç¼è¾è¯¥ææ¡£ </div> <input type="text" autofocus name="page_message" ng-model="page.message" class="form-control help-block" placeholder="{{ page.placeholder }}" > <label class="checkbox" ng-hide="is_add == true"> <input type="checkbox" ng-model="page.is_notify"> åééç¥ç»å³æ³¨çæå </label> <div class="page-bar"> <button class="btn btn-success mr_15" wt-form-submit="js_save_page(page_form,true)" data-loading-text="ä¿å­å¹¶ç»§ç»?" loading-status="is_saving" ng-disabled="page.locked==1 && (page.locked_by.uid != global.me.uid)">ä¿å­å¹¶ç»§ç»? </button> <button class="btn" wt-form-submit="js_save_page(page_form,false)" data-loading-text="ä¿å­" loading-status="is_saving" ng-disabled="page.locked==1 && (page.locked_by.uid != global.me.uid)">ä¿å­ </button> </div> </div> </div></div> </form> </dl> </div> </div> <div class="layout_right_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/project/prj_right_sidebar.html\'"></ng-include> </div> </div>')}]),angular.module("/ycjs/tpl/project/page/pop_delete_page.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/pop_delete_page.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å é¤ææ¡£</h3> </div> <div class="popbox-body"> <span>ææ¡£å é¤åä¼æ¾å¨åæ¶ç«ï¼å¯ä»¥å¨åæ¶ç«éæ©<br/>æ¢å¤æèå½»åºå é¤ã?</span> </div> <div class="popbox-footer"> <button ng-click="js_delete()" class="btn btn-danger float_left">ç¡®å®å é¤</button> </div>')}]),angular.module("/ycjs/tpl/project/page/pop_page_action.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/pop_page_action.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ææ¡£éé¡¹</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-show="show_sub_menu"><a href="/project/{{pid}}/page/add/{{page.page_id}}"> <i class="icon-file-text-alt"></i> æ·»å å­ææ¡? </a> </li> <li><a ng-click="js_step(1)" href="javascript:;"><i class="icon-eye-open"></i> æ·»å å³æ³¨</a></li> <li class="divider"></li> <li><a ng-href="/project/{{ pid }}/page/{{ page.page_id }}/edit"><i class="icon-pencil"></i> ç¼è¾</a></li> <li><a ng-click="js_step(2)" href="javascript:;"><i class=" icon-trash"></i> å é¤</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ·»å å³æ³¨</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus="" ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block"/> <br/> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_member(member)"> <i ng-class="{true: \'icon-ok\', false: \'icon-xx\'}[member.watched]" class="color_gray"></i> <wt-avatar member="member" name="true" faceclass="plr_5" atname="true" size="30"></wt-avatar> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_watch_all(page)" class="ng-binding"> <i class="icon-xx"></i> <span ng-bind="{true:\'æ·»å å¨é¨æå\',false:\'æææåå·²å³æ³¨\'}[page.watchers.length < members.length]"></span> ({{page.watchers.length }}/{{ members.length }})</a> </li> </ul> </div> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å é¤</h3> </div> <div class="popbox-body"> <span> ææ¡£å é¤åä¼æ¾å¨åæ¶ç«ï¼å¯ä»¥å¨åæ¶ç«éæ©<br/>æ¢å¤æèå½»åºå é¤ã?<br/> </span> </div> <div class="popbox-footer"> <button ng-click="js_delete_page(page)" class="btn btn-danger" data-loading-text="å é¤ä¸?..." loading-status="is_deleting">ç¡®å®å é¤ </button> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/page/pop_pages_more_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/pop_pages_more_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ´å¤éé¡¹</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_step(3)"> <i class="icon-share"></i> æ°æ®å¯¼åº</a> </li> <li class="divider"></li> <li><a href="javascript:;" ng-click="js_step(1)"><i class="icon-envelope"></i> éè¿é®ä»¶åå»ºææ¡£</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>éè¿é®ä»¶åå»ºææ¡£</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="javascript:;"> åéé®ä»¶å°ä»¥ä¸å°å <input type="text" ng-model="email" class="form-control help-block" wt-click-select readonly="readonly"/> </a> </li> <li> <a href="javascript:;"> <strong>é®ä»¶æ é¢</strong> <br/> <span class="text-muted pl_20">ææ¡£ï¼è¿éåææ¡£çæ é¢?</span> </a> </li> <li> <a href="javascript:;"> <strong>é®ä»¶æ­£æ</strong> <br/> <span class="text-muted pl_20">ææ¡£åå®¹ï¼æ¯æmarkdownè¯­æ³</span> </a> </li> <li> <a href="/guide" target="_blank"> <i class="icon-question-sign"></i> æ¥çæ´å¤å¸®å© </a> </li> </ul> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ°æ®å¯¼åº</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="/api/projects/{{project.info.pid}}/pages/exports?format=json" target="_blank"> <i class="icon-code"></i> JSONæ°æ® </a> </li> </ul> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/page/pop_parents_page.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/pop_parents_page.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>éæ©ç¶ææ¡?</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-repeat="page in pages"> <a href="/project/{{ pid }}/page/add/{{page.page_id}}"> <i class="icon-file-text-alt"></i> {{page.name}} </a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/page/project_pages.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/page/project_pages.html",'<div class="layout_content prj_panel"> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right" ng-show="global.loading_done"> <div class="btn-group js-popbox mr_15" data-placement="bottom" data-align="right" wt-permission="[permission,project.info.curr_role,1,2]"> <button class="btn btn-danger" wt-tracker="Project Page Page|Nav|Open Add Page" wt-go-to="/project/{{ pid }}/page/add">æ°å»ºææ¡£ </button> <a class="btn btn-danger dropdown-toggle" data-toggle="dropdown" wt-tracker="Project Page Page|Nav|Add Page-More"> <i class="icon-caret-down"></i> </a> <ul class="dropdown-menu pull-right"> <li> <a href="javascript:;" ng-click="js_add_subpage_pop($event)" wt-tracker="Project Page Page|Nav|Add Page-Sub-Page"> <i class="icon-xx"></i> æ°å»ºå­ææ¡?</a> </li> </ul> </div> <div class="btn-group mr_15"> <button class="btn" ng-class="{\'active\':view_type==\'grid\'}" ng-click="set_view_type(\'grid\')" tooltip="åçº§å±ç¤º" tooltip-placement="bottom"> <i class="icon-indent-right"></i> </button> <button class="btn" ng-class="{\'active\':view_type==\'list\'}" ng-click="set_view_type(\'list\')" tooltip="å¹³çº§å±ç¤º" tooltip-placement="bottom"> <i class="icon-list"></i> </button> </div> <button class="btn js-popbox" data-placement="bottom" data-align="right" ng-click="js_show_more_menu($event)" wt-permission="[permission,project.info.curr_role,1,2]"> æ´å¤&nbsp;<i class="icon-caret-down"></i> </button> </div> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160" ng-show="global.loading_done"> <dt> <span class="title">ææ¡£</span> <ul class="tabs"> <li > <a data-ng-class="{\'active\':current_tab == 1}" href="javascript:;" ng-click="js_change_tab(1)">å¨é¨</a> </li> <li > <a data-ng-class="{\'active\':current_tab == 2}" href="javascript:;" ng-click="js_change_tab(2)">æåå»ºç</a> </li> <li > <a data-ng-class="{\'active\':current_tab == 3}" href="javascript:;" ng-click="js_change_tab(3)">æå³æ³¨ç</a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="pages != null && pages.length == 0"> <i class="icon-file-text-alt"></i><br/> <span>è¿æ²¡æåå»ºææ¡?</span> </div> <div class="page-panel"> <div class="page-list-view" ng-show="view_type == \'grid\' && pages"> <div class="wt-row right_click_trigger page-item-view page-item-mark js-popbox" data-placement="bottom" data-align="left" ng-class="{\'border-notop\':$index == 0,\'active\':page.page_id == locator.show_detail_page_id}" ng-repeat="page in pages" page-id="{{page.page_id}}" data-ng-hide="page.is_hide"> <div class="column column-main"> <h4 ng-click="locator.to_page(page.pid, page.page_id, false)"> <i class="icon-file-text-alt mr_5"></i> <a class="name slide-trigger" href="javascript:;">{{page.name }}</a> </h4> <ul class="sub-item-view"> <li data-ng-repeat="sub_page in page.sub_pages"> <i class="icon-file-text-alt mr_5"></i> <a class="slide-trigger" ng-click="locator.to_page(sub_page.pid, sub_page.page_id, false)" href="javascript:;">{{sub_page.name}}</a> </li> </ul> </div> <div class="column column-owner"> <wt-avatar member="page.last_updator" name="true" size="30"></wt-avatar> </div> <div class="column column-date"> <span class="date">{{page.update_date | fromNow}}</span> </div> <div class="column column-meta"> <a href="javascript:;" class="post-action js-popbox" data-placement="auto" wt-permission="[permission,project.info.curr_role,1,2]" ng-click="js_show_menu($event,page)"> <i class="icon-play-circle"></i> </a> </div> </div> </div> <div class="page-list-view" ng-show="view_type == \'list\' && pages"> <div class="wt-row right_click_trigger page-item-view page-item-mark js-popbox" data-placement="bottom" data-align="left" ng-class="{0:\'border-notop\'}[$index]" ng-repeat="page in pages" page-id="{{page.page_id}}" data-ng-hide="page.is_hide"> <div class="column column-main slide-trigger" ng-click="locator.to_page(page.pid, page.page_id, false)"> <h4> <i class="icon-file-text-alt mr_5"></i> <a class="name" href="javascript:;">{{page.name }}</a> </h4> </div> <div class="column column-owner"> <wt-avatar member="page.last_updator" name="true" size="30"></wt-avatar> </div> <div class="column column-date"> <span class="date">{{page.update_date | fromNow}}</span> </div> <div class="column column-meta"> <a href="javascript:;" class="post-action js-popbox" data-placement="auto" wt-permission="[permission,project.info.curr_role,1,2]" ng-click="js_show_menu($event,page)"> <i class="icon-play-circle"></i> </a> </div> </div> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/project/prj_right_sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div>')}]),angular.module("/ycjs/tpl/project/post/add_or_edit_post.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/post/add_or_edit_post.html",'<dl class="frame add_edit_panel" > <div class="post-edit-container"> <form name="post_form" class="wt-form" wt-form-validate="{blurTrig:false,showMsg:false}" novalidate=""> <input type="text" id="new_post_title" autofocus name="post_title" ng-model="edit_post.name" class="form-control help-block" placeholder="è¯é¢åç§°" required=""> <textarea type="text" ng-model="edit_post.content" name="post_content" wt-ctrl-enter="js_save_post(post_form)" placeholder="è¯´ç¹ä»ä¹?(æCtrl + åè½¦é®æäº?)" wt-editor></textarea> <div class="post_watch_bar"> <button class="btn btn-success mr_15" wt-form-submit="js_save_post(post_form)" data-loading-text="ä¿å­ä¸?..." loading-status="is_saving">ä¿å­</button> <button class="btn btn-cancel" ng-click="js_cancel_edit_post()">åæ¶</button> <div class="pull-right"> <button class="btn js-popbox" data-placement="bottom" ng-click="js_add_post_watchers_pop($event,edit_post)"> <i class="icon-eye-open"></i>æ·»å å³æ³¨ </button> <ul> <li ng-repeat="member in edit_post.watchers"> <wt-avatar member="member" click="js_toggle_member(member)" size="30"></wt-avatar> </li> </ul> </div> </div> </form> </div> </dl>')}]),angular.module("/ycjs/tpl/project/post/pop_delete_post.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/post/pop_delete_post.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å é¤è¯é¢</h3> </div> <div class="popbox-body"> <span>è¯é¢å é¤åä¼æ¾å¨åæ¶ç«ï¼å¯ä»¥å¨åæ¶ç«éæ©<br/>æ¢å¤æèå½»åºå é¤ã?</span> </div> <div class="popbox-footer"> <button ng-click="js_del_post()" class="btn btn-danger float_left">ç¡®å®å é¤</button> </div>')}]),angular.module("/ycjs/tpl/project/post/pop_edit_post_watchers.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/post/pop_edit_post_watchers.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ·»å å³æ³¨</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus="" ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block" /> <br/> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_member(member)"> <i ng-class="{true: \'icon-ok\', false: \'icon-xx\'}[member.watched]" class="color_gray"></i> <wt-avatar member="member" name="true" faceclass="plr_5" atname="true" size="30"></wt-avatar> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_watch_all(edit_post)" class="ng-binding"><i class="icon-xx"></i> <span ng-bind="{true:\'æ·»å å¨é¨æå\',false:\'æææåå·²å³æ³¨\'}[edit_post.watchers.length < members.length]"></span> ({{ edit_post.watchers.length }}/{{ members.length }})</a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/post/pop_post_action.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/post/pop_post_action.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è¯é¢éé¡¹</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a ng-click="js_step(1)"><i class="icon-eye-open"></i> æ·»å å³æ³¨</a></li> <li><a ng-click="js_step(2)"><i class=" icon-trash"></i> å é¤</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ·»å å³æ³¨</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus="" ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block" /> <br/> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_member(member)"> <i ng-class="{true: \'icon-ok\', false: \'icon-xx\'}[member.watched]" class="color_gray"></i> <wt-avatar member="member" name="true" faceclass="plr_5" atname="true" size="30"></wt-avatar> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_watch_all(edit_post)" class="ng-binding"> <i class="icon-xx"></i> <span ng-bind="{true:\'æ·»å å¨é¨æå\',false:\'æææåå·²å³æ³¨\'}[edit_post.watchers.length < members.length]"></span> ({{edit_post.watchers.length }}/{{ members.length }})</a> </li> </ul> </div> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å é¤</h3> </div> <div class="popbox-body"> <span> è¯é¢å é¤åä¼æ¾å¨åæ¶ç«ï¼å¯ä»¥å¨åæ¶ç«éæ©<br/>æ¢å¤æèå½»åºå é¤ã?<br/> </span> </div> <div class="popbox-footer"> <button ng-click="js_delete_post(edit_post)" class="btn btn-danger" data-loading-text="å é¤ä¸?..." loading-status="is_deleting">ç¡®å®å é¤ </button> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/post/pop_posts_more_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/post/pop_posts_more_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ´å¤éé¡¹</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_step(3)"> <i class="icon-share"></i> æ°æ®å¯¼åº</a> </li> <li class="divider"></li> <li><a href="javascript:;" ng-click="js_step(1)"><i class="icon-envelope"></i> éè¿é®ä»¶åå»ºè¯é¢</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>éè¿é®ä»¶åå»ºè¯é¢</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="javascript:;"> åéé®ä»¶å°ä»¥ä¸å°å <input type="text" ng-model="email" class="form-control help-block" wt-click-select readonly="readonly"/> </a> </li> <li> <a href="javascript:;"> <strong>é®ä»¶æ é¢</strong> <br/> <span class="text-muted pl_20">è¯é¢ï¼è¿éåè¯é¢çæ é¢?</span> </a> </li> <li> <a href="javascript:;"> <strong>é®ä»¶æ­£æ</strong> <br/> <span class="text-muted pl_20">è¯é¢åå®¹ï¼æ¯æMarkdownè¯­æ³</span> </a> </li> <li> <a href="/guide" target="_blank"> <i class="icon-question-sign"></i> æ¥çæ´å¤å¸®å© </a> </li> </ul> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ°æ®å¯¼åº</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="/api/projects/{{project.info.pid}}/posts/exports?format=json" target="_blank"> <i class="icon-code"></i> JSONæ°æ® </a> </li> </ul> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/post/pop_watch_member.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/post/pop_watch_member.html",'<div class="popbox-avatar"> <div class="avatar-body"> <button class="cancel icon-remove" ng-click="js_close()"></button> <wt-avatar member="member" size="56"></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading">{{member.display_name}}</h4> <p>@{{member.name}}</p> </div> </div> <div class="avatar-footer"> <button ng-click="js_unwatch_member(member,post)" class="btn btn-danger" data-loading-text="åæ¶ä¸?..." loading-status="is_cancel_ing">åæ¶å³æ³¨</button> </div> </div>')}]),angular.module("/ycjs/tpl/project/post/project_posts.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/post/project_posts.html",'<div class="layout_content prj_panel"> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right" ng-show="global.loading_done"> <button class="btn btn-danger mr_15" ng-click="js_show_add_post()" type="button" wt-permission="[permission,project.info.curr_role,1,2]">æ°å»ºè¯é¢ </button> <div class="btn-group" ng-controller="post_filter_ctrl"> <button class="btn"> <i class="icon-sort-by-alphabet-alt"></i> </button> <a class="btn dropdown-toggle mr_15" data-toggle="dropdown" href="javascript:;"><i class="icon-caret-down"></i></a> <ul class="dropdown-menu pull-right"> <li ng-repeat="item in filter_items"><a href="" ng-click="js_select_filter(item)"> <i class="{{ {true:\'color_gray icon-ok\',false:\'icon-xx\'}[item.is_selected]}}"></i>{{ item.name }}</a> </li> </ul> </div> <button class="btn js-popbox" data-placement="bottom" data-align="right" ng-click="js_show_more_menu($event)" wt-permission="[permission,project.info.curr_role,1,2]"> æ´å¤&nbsp;<i class="icon-caret-down"></i> </button> </div> </div> </div> </div> <div class="height-nonav" wt-scroll> <div wt-slide-show="show_add_post" slide-change="js_slide_change(value)"> <ng-include src="\'/ycjs/tpl/project/post/add_or_edit_post.html\'"></ng-include> </div> <dl class="frame" data-minheight="160" ng-show="global.loading_done"> <dt> <span class="title">è¯é¢</span> <ul class="tabs"> <li> <a data-ng-class="{\'active\':current_tab == 0}" href="javascript:;" ng-click="js_change_tab(0)">å¨é¨</a> </li> <li> <a data-ng-class="{\'active\':current_tab == 1}" href="javascript:;" ng-click="js_change_tab(1)">æåèµ·ç</a> </li> <li> <a data-ng-class="{\'active\':current_tab == 2}" href="javascript:;" ng-click="js_change_tab(2)">æå³æ³¨ç</a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="part_loading_done && posts != null && posts.length == 0 && !show_add_post_empty"> <i class="icon-list-alt"></i><br/> <span>è¿æ²¡æä»»ä½è¯é¢?</span> </div> <div class="post-panel"> <div class="post-list"> <div class="wt-row right_click_trigger post-item js-popbox" data-placement="bottom" data-align="left" ng-class="{\'border-notop\':$index == 0,\'active\':post.post_id == locator.show_detail_post_id}" ng-repeat="post in posts" post-id="{{post.post_id}}"> <div class="column column-owner"> <wt-avatar member="post.owner" size="30" name="true" class="post-avatar"></wt-avatar> </div> <div class="column column-main slide-trigger" ng-click="locator.to_post(post.pid, post.post_id, false)"> <h4><a class="name" href="javascript:;">{{ post.name }}<i class="icon-paper-clip" ng-show="post.attachments_count > 0"></i></a></h4> </span> </div> <div class="column column-badges"> <span class="comment_count_style icon-stack" title="è¯é¢æ{{ post.comment_count }}ä¸ªè¯è®?"> <i class="icon-comment"></i> <i class="icon-stack-base">{{post.comment_count}}</i> </span> </div> <div class="column column-date"> <span class="date">{{post.create_date | fromNow}}</span> </div> <div class="column column-meta"> <a href="javascript:;" class="post-action js-popbox" wt-permission="[permission,project.info.curr_role,1,2]" ng-click="js_show_post_menu($event,post)" data-placement="left" data-align="auto"> <i ng-class="{true:\'icon-play-circle\',false:\'icon-xx\'}[post.owner.uid == global.me.uid]" class="icon-play-circle"></i> </a> </div> </div> </div> <div class="loading-more-panel"> <div class="part-loading" data-ng-hide="part_loading_done"> </div> <button class="btn" ng-show="has_more && part_loading_done" wt-tracker="Post Page|Main|Load More" ng-click="js_load_more($event);"> å è½½æ´å¤ </button> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/project/prj_right_sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div>')
}]),angular.module("/ycjs/tpl/project/setting/project_setting.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/setting/project_setting.html",'<div class="layout_content prj_panel"> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right"> </div> </div> </div> </div> <div class="split-panel setting-panel height-nonav" wt-scroll ng-show="global.loading_done"> <dl class="frame" data-minheight="160"> <dt> <ul class="tabs"> <li> <a href="javascript:;" ng-class="{true:\'active\'}[step==2]" ng-show="project.info.curr_role==1&&project.info.archived==0" ng-click="js_step(2)"> åºæ¬ä¿¡æ¯ </a> </li> <li> <a href="javascript:;" ng-class="{true:\'active\'}[step==3]" ng-show="project.info.curr_role==1&&project.info.archived==0" ng-click="js_step(3)"> é¡¹ç®æ è¯ </a> </li> <li> <a href="javascript:;" ng-class="{true:\'active\'}[step==1]" ng-show="project.info.archived==0" ng-click="js_step(1)"> é®ä»¶éç¥ </a> </li> <li> <a href="javascript:;" ng-class="{true:\'active\'}[step==5]" ng-show="project.info.curr_role==1&&project.info.archived==0" ng-click="js_step(5)"> å½æ¡£é¡¹ç® </a> </li> <li> <a href="javascript:;" ng-class="{true:\'active\'}[step==7]" ng-show="project.info.curr_role==1&&project.info.archived==1" ng-click="js_step(7)"> æ¿æ´»é¡¹ç? </a> </li> <li> <a href="javascript:;" ng-class="{true:\'active\'}[step==4]" ng-click="js_step(4)"> éåºé¡¹ç? </a> </li> <li> <a href="javascript:;" ng-class="{true:\'active\'}[step==6]" ng-show="project.info.curr_role==1&&project.info.archived==0" ng-click="js_step(6)"> å é¤é¡¹ç® </a> </li> </ul> </dt> <dd> <div class="split-panel-right"> <div class="stand-panel" ng-show="step == 1"> <div class="stand-panel-body"> <div ng-show="project.info.is_notify==1&&project.info.archived==0"> <span>å½åé®ä»¶éç¥å¼å¯ï¼æ¨å°æ¶å°å³äºè¯¥é¡¹ç®çææé®ä»¶éç¥ãå¯ä»¥éæ©å³é­é®ä»¶éç¥ï¼æ¨å°ä¸ä¼æ¶å°é®ä»¶éç¥ã?</span><br/><br/> <button class="btn btn-success" ng-click="js_prj_unnotify()"><i class="icon-off"></i> å³é­é®ä»¶éç¥</button> </div> <div ng-show="project.info.is_notify==0&&project.info.archived==0"> <span>å½åé®ä»¶éç¥å³é­ï¼æ¨å°ä¸ä¼æ¶å°å³äºè¯¥é¡¹ç®çææé®ä»¶éç¥ãå¯ä»¥éæ©åæ¬¡å¯ç¨é®ä»¶éç¥ã?</span><br/><br/> <button class="btn btn-success" ng-click="js_prj_notify()"><i class="icon-bell"></i> æå¼é®ä»¶éç¥</button> </div> </div> </div> <div class="stand-panel" ng-show="step == 2"> <div class="stand-panel-body"> <form name="prj_update_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form form-horizontal" role="form" novalidate> <div class="form-group"> <label class="col-xs-3 control-label">é¡¹ç®åç§°ï¼?</label> <div class="col-xs-9"> <input type="text" ng-model="project.new_name" placeholder="é¡¹ç®åç§°" name="prj_name" autofocus required class="form-control"/> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">é¡¹ç®æè¿°ï¼?</label> <div class="col-xs-9"> <textarea ng-model="project.new_desc" placeholder="ä¸ºé¡¹ç®æ·»å ç®ç­æè¿°ï¼å¯éï¼" name="prj_desc" rows="4" class="form-control"/> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label"></label> <div class="col-xs-9"> <button wt-form-submit="js_prj_update(prj_update_form)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15" loading-status="is_prj_saveing">ç¡®å®</button> </div> </div> </form> </div> </div> <div class="stand-panel" ng-show="step == 3"> <div class="stand-panel-body"> <form name="prj_logo_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate> <div class="prj-colors"> <ul class="list-inline"> <li ng-repeat="prj_color in prj_colors"> <span ng-click="js_color_select(prj_color)" class="prj_color" ng-style="{backgroundColor:prj_color}"> <i class="icon-white icon-ok" ng-show=prj_color==project.info.bg></i> </span> </li> </ul> </div> <div class="prj-icons"> <ul class="list-inline"> <li ng-repeat="prj_icon in prj_icons"> <span ng-click="js_icon_select(prj_icon)" class="prj_icon" ng-style="{color:project.info.bg}"> <i class="{{prj_icon}}"></i> </span> </li> </ul> </div> <button wt-form-submit="js_prj_set_logo(prj_logo_form)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15" loading-status="is_logo_saving">ç¡®å®</button> </form> </div> </div> <div class="stand-panel" ng-show="step == 4"> <div class="stand-panel-body"> <div ng-hide="project.info.curr_role==1&&project.admins.length==1"> <span> éåºé¡¹ç®åï¼ä½ å°æ æ³åè®¿é®è¯¥é¡¹ç®åå®¹ï¼ä½ç¸å³çæ°æ®ä¸ä¼è¢«å é¤ãè¯·è¾å¥é¡¹ç®çå®æ´åç§°ï¼ç¡®è®¤è¦éåºè¯¥é¡¹ç®ï¼?<br/><br/> </span> <input type="text" class="form-control" ng-model="prj_name" placeholder="é¡¹ç®åç§°"> <br/> </div> <span ng-show="project.info.curr_role==1&&project.admins.length==1"> æ¨æ¯é¡¹ç®å¯ä¸è´è´£äººï¼å æ­¤ä¸è½éåºé¡¹ç®ã?<br/><br/> </span> <button ng-click="js_prj_quit(prj_name)" ng-disabled="prj_name != project.info.name" class="btn btn-danger" data-loading-text="éåºä¸­..." loading-status="is_quiting">ç¡®å®éå?</button> </div> </div> <div class="stand-panel" ng-show="step == 5"> <div class="stand-panel-body"> <span>é¡¹ç®å½æ¡£åï¼é¡¹ç®åå®¹å°æåªè¯»ï¼ä¸è½è¢«æ´æ°ãéæ©éæ°æ¿æ´»åï¼é¡¹ç®å°æ¢å¤æ­£å¸¸<br/><br/></span> <button ng-click="js_prj_archive()" data-loading-text="å½æ¡£ä¸?..." loading-status="is_archiving" class="btn btn-success">ç¡®å®å½æ¡£</button> </div> </div> <div class="stand-panel" ng-show="step == 6"> <div class="stand-panel-body"> <span> å é¤é¡¹ç®åï¼ææçåå®¹é½å°è¢«å é¤ï¼å¹¶ä¸ä¸è½æ¢å¤ãè¯·è¾å¥é¡¹ç®çå®æ´åç§°ï¼ç¡®è®¤è¦å é¤è¯¥é¡¹ç®ï¼?<br/><br/> </span> <input type="text" class="form-control" ng-model="prj_name" wt-enter="js_prj_del(prj_name)" placeholder="é¡¹ç®åç§°"> <br/> <button ng-click="js_prj_del(prj_name)" ng-disabled="prj_name != project.info.name" class="btn btn-danger" data-loading-text="å é¤ä¸?..." loading-status="is_deleting">ç¡®è®¤å¹¶å é?</button> </div> </div> <div class="stand-panel" ng-show="step == 7"> <div class="stand-panel-body"> <span>æ¿æ´»é¡¹ç®åï¼é¡¹ç®æåå¯ä»¥æ­£å¸¸è®¿é®åæä½é¡¹ç®åå®¹<br/><br/></span> <button ng-click="js_prj_unarchive()" data-loading-text="æ¿æ´»ä¸­..." loading-status="is_unarchiving" class="btn btn-success">ç¡®å®æ¿æ´?</button> </div> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/project/prj_right_sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div>')}]),angular.module("/ycjs/tpl/project/task/pop_add_entry.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_add_entry.html",' <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ°å»ºåè¡¨</h3> </div> <form name="add_entry_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate> <div class="popbox-body w_300"> <input name="entry_name" ng-model="name" placeholder="åè¡¨å?" type="text" class="form-control w_260" required autofocus/> </div> <div class="popbox-footer"> <button wt-form-submit="js_add_entry(add_entry_form, name)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15" loading-status="is_save_ing">ç¡®å® </button> <button ng-click="js_close(result)" class="btn">åæ¶</button> </div> </form> ')}]),angular.module("/ycjs/tpl/project/task/pop_add_task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_add_task.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ°å»ºä»»å¡</h3> </div> <form name="add_task_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate role="form"> <div class="popbox-body w_300"> <div class="form-group" ng-show="entries.length > 0"> <div> <textarea class="js-task-name form-control ng-pristine ng-valid" autofocus="" placeholder="è¾å¥ä»»å¡åå®¹" required ng-model="new_task.temp_name" wt-enter="js_add_task(add_task_form, new_task)"></textarea> </div> </div> <div class="form-group" ng-show="entries.length > 0"> <label>åè¡¨ï¼?</label> <select class="form-control" ng-model="new_task.entry" required="" ng-options="entry as entry.name for entry in entries"> </select> </div> <div ng-show="entries.length == 0"> <p class="alert alert-info">å¿é¡»åå»ºåè¡¨åæå¯ä»¥åå»ºä»»å¡å¦ï¼ </p> <button href="javascript:;" class="btn btn-success" ng-click="js_to_add_entry_pop()">å¼å§æ·»å åè¡?</button> </div> </div> <div class="popbox-footer" ng-show="entries.length > 0"> <button wt-form-submit="js_add_task(add_task_form, new_task)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15" loading-status="is_save_ing">ä¿å­ </button> <button ng-click="js_close(result)" class="btn">åæ¶</button> </div> </form>')}]),angular.module("/ycjs/tpl/project/task/pop_add_task_entry.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_add_task_entry.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ°å»ºä»»å¡</h3> </div> <form name="add_task_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate role="form"> <div class="popbox-body w_300 pb_0" ng-if="entries.length > 0"> <div class="form-group"> <div> <textarea class="js-task-name form-control ng-pristine ng-valid" autofocus="" placeholder="è¾å¥ä»»å¡åå®¹" required name="task_name" ng-model="new_task.name" wt-enter="js_add_task(add_task_form, new_task)"> </textarea> </div> </div> <div class="form-group"> <label>åè¡¨ï¼?</label> <div> <select class="form-control" name="entry_select" ng-model="new_task.entry" required="" ng-options="entry as entry.name for entry in entries"> </select> </div> </div> <div class="form-group"> <label>æªæ­¢æ¶é´ï¼?</label> <div> <input type="text" class="form-control" required="" ng-model="new_task.expire_date" readonly ng-click="js_step(1)" > </div> </div> <div class="form-group" ng-show="add_task_form.$errors.length > 0"> <div> <div class="alert alert-danger"> <i class="icon-remove-sign"></i> {{add_task_form.$errors[0]}} </div> </div> </div> <div class="form-group"> <div> <button wt-form-submit="js_add_task(add_task_form, new_task)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15" loading-status="is_saving_task">ä¿å­ </button> <button ng-click="js_close(result)" class="btn">åæ¶</button> </div> </div> </div> <div class="popbox-body w_300 part-loading" data-ng-if="loading_entries"></div> <div class="popbox-body w_300 pb_0" data-ng-if="entries.length == 0"> <div ng-show="entries.length == 0"> <p class="alert alert-info">å¿é¡»åå»ºåè¡¨åæå¯ä»¥åå»ºä»»å¡å¦ï¼ </p> </div> </div> </form> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è®¾ç½®æªæ­¢æ¶é´</h3> </div> <div class="popbox-body"> <ul class="list-inline m_0"> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'today\')">ä»å¤©</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'tomorrow\')">æå¤©</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'week\')">æ¬å¨</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'next_week\')">ä¸å¨</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'month\')">æ¬æ</a> </li> </ul> <div wt-datepicker="new_task.expire_date" select="js_step(0)"></div> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/project/task/pop_archive_entry_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_archive_entry_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>åè¡¨éé¡¹</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_unarchive_entry()"><i class="icon-xx"></i>éæ°æ¿æ´»åè¡?</a></li> </ul> </div> </li> </ul> ')}]),angular.module("/ycjs/tpl/project/task/pop_assign_label.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_assign_label.html",' <ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è®¾ç½®æ ç­¾</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li class="label-item" ng-repeat="label in labels"> <a href="javascript:;" class="js-toggle-label-filter" ng-click="js_toggle_label(label)"> <span class="task-label {{label.name}}-label text-center"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[label.assigned]" class="icon-white"></i> </span> <span class="label-name">{{label.desc}}</span> </a> </li> <li ng-show="labels==0"> <div class="empty-menu">è¿æªå®ä¹æ ç­¾</div></li> <li class="divider"></li> <li><a ng-click="js_goto_set_labels()"><i class="icon-tags"></i> å®ä¹æ ç­¾</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(2)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å®ä¹æ ç­¾</h3> </div> <ng-include src="\'/ycjs/tpl/project/task/pop_mod_set_labels.html\'"></ng-include> </li> </ul> ')}]),angular.module("/ycjs/tpl/project/task/pop_assign_member.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_assign_member.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>{{ title || \'åéä»»å¡\'}}</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus="" ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block" /> <br> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_member(member)"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[member.assigned]" class="color_gray"></i> <wt-avatar member="member" name="true" faceclass="plr_5" atname="true" size="30"></wt-avatar> </a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/task/pop_copy_task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_copy_task.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ·è´ä»»å¡</h3> </div> <div class="popbox-body w_300"> <div class="form-group"> <div> <textarea class="js-task-name form-control ng-pristine ng-valid" placeholder="è¾å¥ä»»å¡åå®¹" required ng-model="new_task.name" wt-enter="js_copy_task(add_task_form, new_task)"></textarea> </div> </div> <div ng-if="new_task.show_keeps">ä¿ç...<br/></div> <div class="checkbox" ng-if="new_task.label_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_labels"> æ ç­¾ ({{new_task.label_count}}) </label> </div> <div class="checkbox" ng-if="new_task.member_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_members"> æå ({{new_task.member_count}}) </label> </div> <div class="checkbox" ng-if="new_task.watcher_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_watchers"> å³æ³¨ ({{new_task.watcher_count}}) </label> </div> <div class="checkbox" ng-if="new_task.todo_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_todos"> æ£æ¥é¡¹ ({{new_task.todo_count}}) </label> </div> <div class="checkbox" ng-if="new_task.file_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_attachments"> éä»¶ ({{new_task.file_count}}) </label> </div> <div class="checkbox" ng-if="new_task.comment_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_comments"> è¯è®º ({{new_task.comment_count}}) </label> </div> </div> <div class="popbox-footer"> <button wt-form-submit="js_copy_task(new_task)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15" loading-status="is_copying">ä¿å­ </button> <button ng-click="js_close()" class="btn">åæ¶</button> </div> ')}]),angular.module("/ycjs/tpl/project/task/pop_delete_task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_delete_task.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å é¤ä»»å¡</h3> </div> <div class="popbox-body"> <span>ä»»å¡å é¤åä¼æ¾å¨åæ¶ç«ï¼å¯ä»¥å¨åæ¶ç«éæ©<br/>æ¢å¤æèå½»åºå é¤ã?</span> </div> <div class="popbox-footer"> <button ng-click="js_delete_task()" class="btn btn-danger float_left">ç¡®å®å é¤</button> </div>')}]),angular.module("/ycjs/tpl/project/task/pop_entry_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_entry_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>åè¡¨éé¡¹</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="js_top_open_add_task_composer($event)"> <i class="icon-xx"></i> æ°å»ºä»»å¡ </a> </li> <li> <a ng-click="js_step(6)"> <i class="icon-xx"></i> æ¹éæä½ä»»å¡ </a> </li> <li> <a ng-click="js_archived_all()"> <i class="icon-archive"></i> å½æ¡£å®æä»»å¡ </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_step(1)"> <i class="icon-xx"></i> éå½å? </a> </li> <li> <a ng-click="js_step(5)" href="javascript:;"> <i class="icon-trash"></i> å é¤ </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_step(11)"> <i class="icon-ellipsis-horizontal"></i> æ´å¤æä½ </a> </li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>éå½ååè¡?</h3> </div> <form name="edit_entry_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate> <div class="popbox-body"> <input name="entry_name" type="text" ng-model="entry_name" placeholder="åè¡¨å?" class="w_260 form-control" required autofocus/> </div> <div class="popbox-footer"> <button wt-form-submit="js_change_name(edit_entry_form, entry_name)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15" loading-status="is_save_ing">ç¡®å® </button> <button ng-click="js_close(result)" class="btn float_left">åæ¶</button> </div> </form> </li> <li ng-switch-when="4" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(11)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å½æ¡£åè¡¨</h3> </div> <div class="popbox-body"> <span>åè¡¨å½æ¡£åä»»å¡ä¸è½åè¢«ä¿®æ¹ï¼<br>å¯ä»¥å¨å½æ¡£é¡¹ä¸­éæ°æå¼</span> </div> <div class="popbox-footer"> <button ng-click="js_archive_entry()" class="btn btn-success">ç¡®å®å½æ¡£</button> </div> </li> <li ng-switch-when="5" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å é¤åè¡¨</h3> </div> <div class="popbox-body"> <span>åè¡¨å é¤åä¼æ¾å¨åæ¶ç«ï¼å¯ä»¥å¨åæ¶ç«éæ©<br/>æ¢å¤æèå½»åºå é¤ã?</span> </div> <div class="popbox-footer"> <button ng-click="js_del_entry()" class="btn btn-danger">ç¡®å®å é¤</button> </div> </li> <li ng-switch-when="6" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ¹éæä½</h3> </div> <div class="popbox-body"> <ul class="popbox-menu" ng-hide="entry.tasks.length == 0"> <li> <a href="javascript:;" ng-click="js_to_move()"> <i class="icon-share-alt"></i> ç§»å¨ä»»å¡ </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_to_assign()"> <i class="icon-user"></i> åéä»»å¡ </a> </li> <li> <a href="javascript:;" ng-click="js_to_set_label()"> <i class="icon-tag"></i> è®¾ç½®æ ç­¾ </a> </li> <li> <a href="javascript:;" ng-click="js_step(10)"> <i class="icon-time"></i> è®¾ç½®æªè³æ¶é´ </a> </li> </ul> <ul class="popbox-menu" ng-show="entry.tasks.length == 0"> <li> <div class="empty-menu-nomin-h">è¯¥åè¡¨ä¸æ²¡æå¯æä½çä»»å¡</div> </li> </ul> </div> </li> <li ng-switch-when="7" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(6)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ç§»å¨ä»»å¡å?</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-repeat="entry in entries"> <a href="javascript:;" ng-click="js_move_to(entry)"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[entry.move_selected == 1]" class="color_gray"></i> <span>{{entry.name}}</span> </a> </li> <li ng-show="entries.length == 0"> <div class="empty-menu-nomin-h">æ²¡æå¯ä»¥ç§»å¨çåè¡?</div> </li> </ul> </div> </div> </li> <li ng-switch-when="8" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(6)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>åéä»»å¡</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block"/> <br> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_member(member)"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[member.assigned_all]" class="color_gray"></i> <wt-avatar member="member" name="true" atname="true" faceclass="plr_5" size="30"></wt-avatar> </a> </li> </ul> </div> </div> </li> <li ng-switch-when="9" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(6)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è®¾ç½®æ ç­¾</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li class="label-item" ng-repeat="label in labels"> <a href="javascript:;" tabindex="-1" class="js-toggle-label-filter" ng-click="js_toggle_label(label)"> <span class="task-label {{label.name}}-label text-center"> <i ng-class="icon-xx" class="icon-white"></i> </span> <span class="label-name">{{label.desc}}</span> </a> </li> <li ng-show="labels==0"> <div class="empty-menu">è¿æªå®ä¹æ ç­¾</div> </li> <li class="divider"></li> <li><a ng-click="js_to_set_labels()"><i class="icon-tags"></i> å®ä¹æ ç­¾</a></li> </ul> </div> </li> <li ng-switch-when="9.1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(9)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å®ä¹æ ç­¾</h3> </div> <ng-include src="\'/ycjs/tpl/project/task/pop_mod_set_labels.html\'"></ng-include> </li> <li ng-switch-when="10" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(6)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è®¾ç½®æªæ­¢æ¶é´</h3> </div> <div class="popbox-body"> <input ng-model="task.expire_date" type="hidden"/> <ul class="list-inline m_0"> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'today\')">ä»å¤©</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'tomorrow\')">æå¤©</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'week\')">æ¬å¨</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'next_week\')">ä¸å¨</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_set_expire_date(\'month\')">æ¬æ</a> </li> </ul> <div wt-datepicker="expire_date"></div> </div> <div class="popbox-footer"> <a class="btn btn-success mr_15" ng-click="js_set_expire(expire_date)">ç¡®å®</a> </div> </li> <li ng-switch-when="11" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ´å¤æä½</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="js_to_copy_entry()"> <i class="icon-copy"></i> æ·è´ </a> </li> <li> <a href="javascript:;" ng-click="js_step(4)"> <i class="icon-archive"></i> å½æ¡£ </a> </li> </ul> </div> </li> <li ng-switch-when="12" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(11)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ·è´åè¡¨</h3> </div> <div class="popbox-body w_300"> <input name="entry_name" wt-enter="js_copy_entry(new_entry)" ng-model="new_entry.name" placeholder="åè¡¨å?" type="text" class="form-control w_260" required autofocus/> </div> <div class="popbox-footer"> <a class="btn btn-success mr_15" ng-click="js_copy_entry(new_entry)" data-loading-text="æ­£å¨åå»º..." loading-status="is_copying">ç¡®å®</a> <a class="btn" ng-click="js_step(11)">åæ¶</a> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/task/pop_entry_more_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_entry_more_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ´å¤éé¡¹</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="js_step(4)"> <i class="icon-tags"></i> å®ä¹æ ç­¾</a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_archived_all()" ><i class="icon-archive"></i> å½æ¡£ææå®æä»»å?</a></li> <li> <a href="javascript:;" ng-click="js_step(1)"> <i class="icon-xx"></i> èªå¨å½æ¡£å®æçä»»å? <span class="text-muted small-tip"> {{{1: \'å¼å¯\', 0: \'å³é­\'}[project.info.auto_archived]}} </span> </a> </li> <li><a href="/project/{{pid}}/archive"><i class="icon-xx"></i> æ¥çå½æ¡£ä»»å¡</a></li> <li class="divider"></li> <li><a href="javascript:;" ng-click="js_step(3)"> <i class="icon-share"></i> æ°æ®å¯¼åº</a> </li> <li class="divider"></li> <li><a href="javascript:;" ng-click="js_step(2)"><i class="icon-envelope"></i> éè¿é®ä»¶åå»ºä»»å¡</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>èªå¨å½æ¡£å®æçä»»å?</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a ng-click="js_prefs_auto_archived()"> <i class="color_gray" ng-class="{1:\'icon-ok\',0:\'icon-xx\'}[project.info.auto_archived]"></i> <strong>å¼å?</strong> <br/> <span class="text-muted pl_20">ä»»å¡å®æåï¼èªå¨è¿è¡å½æ¡£</span> </a> </li> <li class="divider"></li> <li> <a ng-click="js_prefs_auto_archived()"> <i class="color_gray" ng-class="{0:\'icon-ok\',1:\'icon-xx\'}[project.info.auto_archived]"></i> <strong>å³é­</strong> <br/> <span class="text-muted pl_20">ä»»å¡å®æåï¼ä¸èªå¨å½æ¡?</span> </a> </li> </ul> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>éè¿é®ä»¶åå»ºä»»å¡</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="javascript:;"> åéé®ä»¶å°ä»¥ä¸å°å <input type="text" ng-model="email" class="form-control help-block" wt-click-select readonly="readonly"/> </a> </li> <li> <a href="javascript:;"> <strong>é®ä»¶æ é¢</strong> <br/> <span class="text-muted pl_20">ä»»å¡ï¼è¿éåä»»å¡åè¡¨åç§°</span> </a> </li> <li> <a href="javascript:;"> <strong>é®ä»¶æ­£æ</strong> <br/> <span class="text-muted pl_20">ç?*å·åå²æ¯ä¸é¡¹ä»»å?</span> </a> </li> <li> <a href="/guide/task/create#bymail" target="_blank"> <i class="icon-question-sign"></i> æ¥çæ´å¤å¸®å© </a> </li> </ul> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ°æ®å¯¼åº</h3> </div> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li> <a href="/api/projects/{{project.info.pid}}/tasks/exports?format=json" target="_blank"> <i class="icon-code"></i> JSONæ°æ® </a> </li> </ul> </div> </li> <li ng-switch-when="4" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å®ä¹æ ç­¾</h3> </div> <ng-include src="\'/ycjs/tpl/project/task/pop_mod_set_labels.html\'"></ng-include> </li> </ul>')}]),angular.module("/ycjs/tpl/project/task/pop_mod_set_labels.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_mod_set_labels.html",'<div class="popbox-body"> <form class="form-horizontal labels" role="form" wt-enter="js_set_lables(blue, green, orange, purple, red, yellow)"> <div class="form-group"> <label for="blue" class="col-xs-2 control-label"> <span class="task-label blue-label" for="blue"></span> </label> <div class="col-xs-10"> <input type="text" autofocus="" ng-model="blue" class="js-label-title form-control" id="blue" name="blue" placeholder="æªå®ä¹æ ç­?"> </div> </div> <div class="form-group"> <label for="blue" class="col-xs-2 control-label"> <span class="task-label green-label" for="green"></span> </label> <div class="col-xs-10"> <input type="text" autofocus="" ng-model="green" class="js-label-title form-control" id="green" name="green" placeholder="æªå®ä¹æ ç­?"> </div> </div> <div class="form-group"> <label for="blue" class="col-xs-2 control-label"> <span class="task-label orange-label" for="orange"></span> </label> <div class="col-xs-10"> <input type="text" autofocus="" ng-model="orange" class="js-label-title form-control" id="orange" name="orange" placeholder="æªå®ä¹æ ç­?"> </div> </div><div class="form-group"> <label for="blue" class="col-xs-2 control-label"> <span class="task-label purple-label" for="blue"></span> </label> <div class="col-xs-10"> <input type="text" autofocus="" ng-model="purple" class="js-label-title form-control" id="purple" name="purple" placeholder="æªå®ä¹æ ç­?"> </div> </div><div class="form-group"> <label for="blue" class="col-xs-2 control-label"> <span class="task-label red-label" for="blue"></span> </label> <div class="col-xs-10"> <input type="text" autofocus="" ng-model="red" class="js-label-title form-control" id="red" name="red" placeholder="æªå®ä¹æ ç­?"> </div> </div><div class="form-group"> <label for="blue" class="col-xs-2 control-label"> <span class="task-label yellow-label" for="yellow"></span> </label> <div class="col-xs-10"> <input type="text" autofocus="" ng-model="yellow" class="js-label-title form-control" id="yellow" name="yellow" placeholder="æªå®ä¹æ ç­?"> </div> </div> </form> </div> <div class="popbox-footer"> <button ng-click="js_set_lables(blue, green, orange, purple, red, yellow)" class="btn btn-success mr_15" data-loading-text="ä¿å­ä¸?..." loading-status="is_save_ing">ç¡®å®</button> <button ng-click="js_step(0)" class="btn">åæ¶</button> </div>')}]),angular.module("/ycjs/tpl/project/task/pop_move_task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_move_task.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ç§»å¨ä»»å¡å?</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body fixed-width-260"> <ul class="popbox-menu"> <li ng-repeat="entry in entries"> <a href="javascript:;" ng-click="js_move_to(entry)"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[entry.move_selected == 1]" class="color_gray"></i> <span>{{entry.name}}</span> </a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/task/pop_task_filter.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_task_filter.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ä»»å¡ç­é?</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body task-filter"> <div class="row"> <div class="col-xs-8 pr_0"> <input type="text" class="form-control" ng-model="task_filter_text" placeholder="è¾å¥æ¥è¯¢æ¡ä»¶" autofocus/> </div> <div class="col-xs-4"> <button ng-click="js_clear(result)" class="btn btn-success">æ¸é¤</button> </div> </div> <dl class="js-task-labelfilter"> <dt>ææ ç­¾ç­é?</dt> <dd> <ul class="label-list task-filter-checkable list-col-2"> <li class="label-item" ng-repeat="label in labels" > <a href="javascript:;" class="js-toggle-label-filter" ng-click="js_filter_label(label)"> <span class="task-label {{label.name}}-label"> <i class="icon-ok icon-white" ng-show="[task_filters.labels,label] | indexOf"></i> </span> <span class="label-name help-inline">{{label.desc}}</span> </a> </li> </ul> </dd> </dl> <dl class="js-task-memberfilter"> <dt>ææåç­é?</dt> <dd> <ul class="member-list task-filter-checkable list-col-2"> <li class="member-item" ng-repeat="member in members" ng-class="{\'selected\':([task_filters.members,member] | indexOf)}"> <wt-avatar member="member" name="true" size="30" click="js_filter_member(member)"></wt-avatar> </li> </ul> </dd> </dl> <dl class="js-task-datefilter"> <dt>ææªæ­¢æ¥æç­é?</dt> <dd> <ul class="datefilter-list task-filter-checkable list-col-3"> <li> <a ng-class="{true:\'selected\'}[task_filters.date == \'today\']" ng-click="js_filter_date(\'today\')">ä»å¤©</a> </li> <li> <a ng-class="{true:\'selected\'}[task_filters.date == \'tomorrow\']" ng-click="js_filter_date(\'tomorrow\')">æå¤©</a> </li> <li> <a ng-class="{true:\'selected\'}[task_filters.date == \'week\']" ng-click="js_filter_date(\'week\')">æ¬å¨</a> </li> <li> <a ng-class="{true:\'selected\'}[task_filters.date == \'nextweek\']" ng-click="js_filter_date(\'nextweek\')">ä¸å¨</a> </li> <li> <a ng-class="{true:\'selected\'}[task_filters.date == \'month\']" ng-click="js_filter_date(\'month\')">æ¬æ</a> </li> <li> <a ng-class="{true:\'selected\'}[task_filters.date == \'due\']" ng-click="js_filter_date(\'due\')">å·²è¿æ?</a> </li> </ul> </dd> </dl> </div> </div>')
}]),angular.module("/ycjs/tpl/project/task/pop_task_member.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_task_member.html",'<div class="popbox-avatar"> <div class="avatar-body"> <button class="cancel icon-remove" ng-click="js_close()"></button> <wt-avatar member="member" size="56"></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading">{{member.display_name}}</h4> <p>@{{member.name}}</p> </div> </div> <div class="avatar-footer"> <button ng-click="js_remove_member()" class="btn btn-danger" data-loading-text="ç§»é¤ä¸?..." loading-status="removing_member">ä»ä»»å¡ç§»é?</button> </div> </div>')}]),angular.module("/ycjs/tpl/project/task/pop_task_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_task_menu.html",'<ul class="popbox-step" ng-switch on="step" wt-stop-propagation=""> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ä»»å¡éé¡¹</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_step(2)"><i class="icon-tag"></i> è®¾ç½®æ ç­¾</a></li> <li><a href="javascript:;" ng-click="js_step(1)"><i class="icon-user"></i> åéä»»å¡</a></li> <li data-ng-hide="is_add_task"><a href="javascript:;" ng-click="js_step(4)"><i class="icon-eye-open"></i> æ·»å å³æ³¨</a></li> <li><a ng-click="js_step(3)"><i class="icon-time"></i> è®¾ç½®æªæ­¢æ¶é´</a></li> <li data-ng-hide="is_add_task" class="divider"></li> <li data-ng-hide="is_add_task"><a ng-click="js_step(40)"><i class="icon-paper-clip"></i> æ·»å éä»¶</a></li> <li data-ng-hide="is_add_task" class="divider"></li> <li data-ng-hide="is_add_task"><a ng-click="js_archive_task()"><i class="icon-archive"></i> å½æ¡£</a></li> <li data-ng-hide="is_add_task"><a ng-click="js_step(30)"><i class="icon-ellipsis-horizontal"></i> æ´å¤æä½</a> </li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>åéä»»å¡</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block"/> <br> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_member(member)"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[member.assigned]" class="color_gray"></i> <wt-avatar member="member" name="true" atname="true" faceclass="plr_5" size="30"></wt-avatar> </a> </li> </ul> </div> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è®¾ç½®æ ç­¾</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li class="label-item" ng-repeat="label in labels"> <a href="javascript:;" tabindex="-1" class="js-toggle-label-filter" ng-click="js_toggle_label(label)"> <span class="task-label {{label.name}}-label text-center"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[label.assigned]" class="icon-white"></i> </span> <span class="label-name">{{label.desc}}</span> </a> </li> <li ng-show="labels==0"> <div class="empty-menu">è¿æªå®ä¹æ ç­¾</div> </li> <li class="divider"></li> <li><a ng-click="js_goto_set_labels()"><i class="icon-tags"></i> å®ä¹æ ç­¾</a></li> </ul> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è®¾ç½®æªæ­¢æ¶é´</h3> </div> <div class="popbox-body"> <input ng-model="task.expire_date" type="hidden"/> <ul class="list-inline m_0"> <li> <a href="javascript:;" ng-click="js_today()">ä»å¤©</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_tomorrow()">æå¤©</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_week()">æ¬å¨</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_next_week()">ä¸å¨</a> </li> <li>|</li> <li> <a href="javascript:;" ng-click="js_month()">æ¬æ</a> </li> </ul> <div wt-datepicker="task.expire_date_temp"></div> </div> <div class="popbox-footer"> <a class="btn btn-success mr_15" ng-click="js_set_expire(task.expire_date_temp)">ç¡®å®</a> <a class="btn" ng-click="js_cancel_expire()">åæ¶æªæ­¢æ¶é´</a> </div> </li> <li ng-switch-when="4" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ·»å å³æ³¨</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block"/> <br/> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in watchers | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_watch(member)"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[member.is_watch]" class="color_gray"></i> <wt-avatar member="member" name="true" faceclass="plr_5" atname="true" size="30"></wt-avatar> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_watch_all(task)"> <i class="icon-xx"></i> <span ng-bind="{true:\'æ·»å å¨é¨æå\',false:\'æææåå·²å³æ³¨\'}[task.watchers.length < members.length]"></span> ({{ task.watchers.length }}/{{ members.length }})</a> </li> </ul> </div> </div> </li> <li ng-switch-when="5" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(30)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ç§»å¨ä»»å¡å?</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-repeat="entry in entries"> <a href="javascript:;" ng-click="js_move_to(entry)"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[entry.move_selected == 1]" class="color_gray"></i> <span>{{entry.name}}</span> </a> </li> </ul> </div> </div> </li> <li ng-switch-when="6" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(30)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å é¤</h3> </div> <div class="popbox-body"> <span>ä»»å¡å é¤åä¼æ¾å¨åæ¶ç«ï¼å¯ä»¥å¨åæ¶ç«éæ©<br/>æ¢å¤æèå½»åºå é¤ã?</span> </div> <div class="popbox-footer"> <button ng-click="js_del_task()" class="btn btn-danger">ç¡®å®å é¤</button> </div> </li> <li ng-switch-when="21" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(2)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å®ä¹æ ç­¾</h3> </div> <ng-include src="\'/ycjs/tpl/project/task/pop_mod_set_labels.html\'"></ng-include> </li> <li ng-switch-when="30" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ´å¤æä½</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li data-ng-hide="is_add_task"><a ng-click="js_step(5)"><i class="icon-share-alt"></i> ç§»å¨</a></li> <li data-ng-hide="is_add_task"><a ng-click="js_to_copy_task()"><i class="icon-copy"></i> æ·è´</a></li> <li data-ng-hide="is_add_task"> <a ng-click="js_step(6)" href="javascript:;"><i class="icon-trash"></i> å é¤</a> </li> </ul> </div> </li> <li ng-switch-when="31" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(30)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ·è´ä»»å¡</h3> </div> <form name="copy_task_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form" novalidate role="form"> <div class="popbox-body w_300"> <div class="form-group"> <div> <textarea class="js-task-name form-control ng-pristine ng-valid" placeholder="è¾å¥ä»»å¡åå®¹" required ng-model="new_task.name" wt-enter="js_copy_task(add_task_form, new_task)"></textarea> </div> </div> <div ng-if="new_task.show_keeps">ä¿ç...<br/></div> <div class="checkbox" ng-if="new_task.label_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_labels"> æ ç­¾ ({{new_task.label_count}}) </label> </div> <div class="checkbox" ng-if="new_task.member_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_members"> æå ({{new_task.member_count}}) </label> </div> <div class="checkbox" ng-if="new_task.watcher_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_watchers"> å³æ³¨ ({{new_task.watcher_count}}) </label> </div> <div class="checkbox" ng-if="new_task.todo_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_todos"> æ£æ¥é¡¹ ({{new_task.todo_count}}) </label> </div> <div class="checkbox" ng-if="new_task.file_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_attachments"> éä»¶ ({{new_task.file_count}}) </label> </div> <div class="checkbox" ng-if="new_task.comment_count > 0"> <label> <input type="checkbox" ng-model="new_task.keep_comments"> è¯è®º ({{new_task.comment_count}}) </label> </div> </div> <div class="popbox-footer"> <button wt-form-submit="js_copy_task(copy_task_form, new_task)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15" loading-status="is_copying">ä¿å­ </button> <button ng-click="js_close(result)" class="btn">åæ¶</button> </div> </form> </li> <li ng-switch-when="40" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ·»å éä»¶</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a href="javascript:;" ng-click="js_to_upload_files($event)"> <i class="icon-xx"></i> æ¬å°ä¸ä¼  </a> <input wt-uploadfile="file_upload_option" class="hide" multiple type="file" name="files[]" title="æ·»å æä»¶" /> </li> <li><a href="javascript:;" ng-click="js_to_select_files()"><i class="icon-xx"></i> ä»å·²ææä»¶éæ©</a></li> </ul> </div> </li> <li ng-switch-when="41" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(40)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ä»å·²ææä»¶éæ©</h3> </div> <div class="popbox-bodywrapper fixed-width" wt-scroll> <div class="popbox-body"> <div class="part-loading" ng-show="prj_files_loading"></div> <ul class="popbox-menu"> <li ng-repeat="file in files" ng-click="js_attach(file)"> <a class="file-item-li-menu" ng-class="{0:\'file-picfile\', 1:\'file-picfolder\'}[file.type]" href="javascript:;"> <img ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> <span class="file-name">{{file.name}}</span> </a> </li> <li ng-show="files.length == 0 && prj_files_loaded"> <div class="empty-menu">æ²¡ææä»¶</div> </li> </ul> </div> </div> </li> <li ng-switch-when="42" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(41)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ä»å·²ææä»¶éæ©</h3> </div> <div class="popbox-bodywrapper fixed-width" wt-scroll> <div class="popbox-body"> <div class="part-loading" ng-show="prj_files_loading"></div> <ul class="popbox-menu"> <li ng-repeat="file in sub_files" ng-click="js_attach(file)"> <a class="file-item-li-menu" ng-class="{0:\'file-picfile\',1:\'file-picfolder\'}[file.type]" href="javascript:;"> <img ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"/> <span class="file-name">{{file.name}}</span> </a> </li> <li ng-show="sub_files.length == 0 && prj_files_loaded"> <div class="empty-menu">æ²¡ææä»¶</div> </li> </ul> </div> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/task/pop_task_watcher.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_task_watcher.html",'<div class="popbox-avatar"> <div class="avatar-body"> <button class="cancel icon-remove" ng-click="js_close()"></button> <wt-avatar member="member" size="56"></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading">{{member.display_name}}</h4> <p>@{{member.name}}</p> </div> </div> <div class="avatar-footer"> <button ng-click="js_unwatch_member()" class="btn btn-danger">åæ¶å³æ³¨</button> </div> </div>')}]),angular.module("/ycjs/tpl/project/task/pop_unarchive_task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_unarchive_task.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ¿æ´»ä»»å?</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body fixed-width-260"> <div class="part-loading" ng-if="entries == null"></div> <ul class="popbox-menu"> <li ng-repeat="entry in entries"> <a href="javascript:;" ng-click="js_unarchive_task(entry)"> <i ng-class="{true:\'icon-ok\',false:\'icon-columns\'}[entry.selected == 1]" class="color_gray"></i> <span>{{entry.name}}</span> </a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/task/pop_watch_task.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/pop_watch_task.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ·»å å³æ³¨</h3> </div> <div class="popbox-bodywrapper" wt-scroll> <div class="popbox-body"> <input type="text" autofocus="" ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block" /> <br/> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_toggle_watch(member)"> <i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[member.is_watch]" class="color_gray"></i> <wt-avatar member="member" name="true" faceclass="plr_5" atname="true" size="30"></wt-avatar> </a> </li> <li class="divider"></li> <li> <a href="javascript:;" ng-click="js_watch_all()"> <i class="icon-xx"></i> <span ng-bind="{true:\'æ·»å å¨é¨æå\',false:\'æææåå·²å³æ³¨\'}[task.watchers.length < members.length]"></span> ({{ task.watchers.length }}/{{ members.length }})</a> </li> </ul> </div> </div>')}]),angular.module("/ycjs/tpl/project/task/project_archive_tasks.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/project_archive_tasks.html",'<div class="layout_content prj_panel"> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right"> <a href="/project/{{pid}}/task" class="btn" wt-tracker="Project Archive Page|Nav|GoBack Task"> <i class="icon-caret-left mr_5"></i>è¿å </a> </div> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame archive" data-minheight="160"> <dt> <span class="title">å½æ¡£ä»»å¡</span> <ul class="tabs"> <li> <a ng-class="{\'task\': \'active\'}[archived_view]" href="javascript:;" ng-click="js_archive_view_toggle(\'task\')"> ä»»å¡ </a> </li> <li> <a ng-class="{\'entry\': \'active\'}[archived_view]" href="javascript:;" ng-click="js_archive_view_toggle(\'entry\')"> åè¡¨ </a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="archived_view == \'task\' && tasks.length == 0 && global.loading_done"> <i class="icon-check"></i><br/> <span>è¿æ²¡æå½æ¡£ä»»å?</span> </div> <div class="empty-panel" ng-show="archived_view == \'entry\' && entries.length == 0 && global.loading_done"> <i class="icon-columns"></i><br/> <span>è¿æ²¡æå½æ¡£åè¡?</span> </div> <div class="archived_panel"> <div class="archived_entries_panel" ng-show="archived_view == \'entry\'"> <div class="wt-row" ng-repeat="entry in entries" wt-tracker="Project Archive Page|Main|View Archive Task"> <div class="column column-icon"> <i class="icon-columns"></i> </div> <div class="column column-name"> {{entry.name}} </div> <div class="column column-date"> {{entry.update_date | timeFormatZHCN}} </div> <div class="column column-action"> <a href="javascript:;" ng-click="js_unarchive_entry($event, entry.entry_id)" wt-permission="[permission,project.info.curr_role,1,2]" title="æ¿æ´»åè¡?" tooltip="æ¿æ´»åè¡?" tooltip-placement="bottom"> <i class="icon-mail-reply"></i> </a> </div> </div> </div> <div class="task-list-panel" ng-show="archived_view == \'task\'"> <div class="group-list" ng-show="tasks.length > 0"> <hr/> <div class="group-item" ng-repeat="task in tasks"> <div class="group-header" ng-show="task.is_show_date"> <span>{{task.update_date | dateFormatZHCN}}</span> </div> <div class="group-task-item slide-trigger" ng-class="{true: \'active\'}[task.tid==locator.show_detail_task_id]" ng-click="locator.to_task(task.pid, task.tid, false)"> <div class="task-main"> <a href="javascript:;" ng-click="js_complete_task($event, task)" class="task-check"> <i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[task.completed]"></i> </a> <span class="task-title">{{task.name}}</span> <a class="js-popbox task-action" href="javascript:;" ng-click="js_show_entry_menu($event, task)" data-placement="left" wt-permission="[permission,project.info.curr_role,1,2]" tooltip="æ¿æ´?" tooltip-placement="bottom"> <i class="icon-mail-reply"></i> </a> </div> <wt-badges task="task"></wt-badges> <div class="task-members"> <wt-avatar ng-repeat="member in task.members" class="mr_5" member="member" size="30"></wt-avatar> </div> </div> </div> </div> <div class="loading-more-panel"> <button ng-show="!has_no_more && !loading_tasks && global.loading_done == true" class="btn" ng-click="load_archived_tasks_more()" data-loading-text="å è½½ä¸?..." loading-status="loading_notice">å è½½æ´å¤... </button> <div class="load-more part-loading" ng-show="!has_no_more && loading_tasks"></div> </div> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/project/prj_right_sidebar.html\'"></ng-include> </div> </div> ')}]),angular.module("/ycjs/tpl/project/task/project_tasks.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/task/project_tasks.html",' <div class="prj_panel layout_content"> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right" ng-show="global.loading_done"> <div class="btn-group js-popbox mr_15" data-placement="bottom" data-align="right" wt-permission="[permission,project.info.curr_role,1,2]"> <button class="btn btn-danger" wt-tracker="Project Task Page|Nav|Open Add Task" ng-click="js_add_task_pop($event)">æ°å»ºä»»å¡ </button> <a class="btn btn-danger dropdown-toggle" data-toggle="dropdown" wt-tracker="Project Task Page|Nav|Add Task-More"> <i class="icon-caret-down"></i> </a> <ul class="dropdown-menu pull-right"> <li> <a href="javascript:;" id="btn_new_task" wt-click="js_add_task_pop($event)" wt-tracker="Project Task Page|Nav|Add Task-More-Task"> <i class="icon-xx"></i> æ°å»ºä»»å¡</a> </li> <li> <a href="javascript:;" id="btn_new_entry" wt-click="js_add_entry_pop($event)" wt-tracker="Project Task Page|Nav|Add Task-More-Entry"> <i class="icon-xx"></i> æ°å»ºåè¡¨</a> </li> </ul> </div> <div class="btn-group js-popbox mr_15"> <button class="btn" ng-click="js_filter_pop($event)"> <span class="color_main" ng-show="filter_turn_on">å¼å?</span> <span ng-hide="filter_turn_on">ç­é?</span> </button> <a class="btn dropdown-toggle" href="javascript:;" data-toggle="dropdown" > <i class="icon-caret-down"></i> </a> <ul class="dropdown-menu pull-right"> <li><a href="javascript:;" ng-click="js_show_assign_me_tasks()"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[current_filter_type == \'assign_me\']"></i> åéç»æçä»»å? </a> </li> <li><a href="javascript:;" ng-click="js_show_my_watch_tasks()"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[current_filter_type == \'my_watch\']"></i> æå³æ³¨çä»»å¡ </a> </li> <li><a href="javascript:;" ng-click="js_show_my_create_tasks()"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[current_filter_type == \'my_create\']"></i> æåå»ºçä»»å¡ </a> </li> <li class="divider"></li> <li><a href="javascript:;" ng-click="js_filter_pop($event)"> <i class="icon-xx"></i> ä»»å¡ç­é? </a> </li> </ul> </div> <button class="btn" wt-go-to="/project/{{pid}}/archive" data-ng-show="permission==4"> æ¥çå½æ¡£ä»»å¡ </button> <button class="btn js-popbox" data-placement="bottom" data-align="right" wt-tracker="Project Task Page|Nav|Toggle Pop More" ng-click="js_show_more_menu($event)" wt-permission="[permission,project.info.curr_role,1,2]"> æ´å¤&nbsp;<i class="icon-caret-down"></i> </button> </div> </div> </div> </div> <div class="entries_panel js-sortable" data-height="118" ng-mouseover="js_mouseover_entries_panel($event)" ng-mousemove="js_mousemove_entries_panel($event)" wt-scroll=\'{"horizontalScroll":true,"advanced":{"autoExpandHorizontalScroll":true,"autoScrollOnFocus":false}}\'> <div class="entries_panel_sortarea" sortable="entries_sort_options"> <div id="entry_main_{{ entry.entry_id }}" class="entry" ng-class="{\'entry-selected\':entry.selected == true}" ng-repeat="entry in entries track by entry.entry_id" entry-id="{{entry.entry_id}}" pos="{{ entry.pos }}"> <div class="entry_header"> <div class="entry_header_title js-editable"> <h2>{{entry.name}}</h2> </div> <a href="javascript:;" class="js-popbox entry_header_menu" wt-permission="[permission,project.info.curr_role,1,2]" ng-click="js_show_entry_menu($event,entry)" wt-tracker="Project Task Page|Main-Entry|Open Pop Entry Menu" data-placement="bottom" data-align="left"> <i class="icon-play-circle"></i> </a> </div> <div class="entry-task-panel" wt-scroll data-scrollnoheight="250"> <wt-task-composer class="entry-add-top-composer" task-save="js_add_task($event, new_task, entry, 1);" composer-show="entry.task_top_enabled"></wt-task-composer> <div class="entry-tasks js-sortable" sortable="tasks_sort_options"> <wt-task ng-repeat="task in entry.tasks" task="task" ng-hide="task.is_filter" class="right_click_trigger slide-trigger js-popbox" data-placement="bottom" data-align="left" ng-mouseleave="js_mouseleave_task($event,task)" ng-class="{\'task-selected\':task.selected == true,\'task-first\':$first,\'task-last\':$last,\'task-last-nocomposer\':($last&&(project.info.archived==1||project.info.curr_role==3)) }" droppable="member_drop_options" task-entry-id="{{task.entry_id}}" task-pos="{{task.pos}}" ng-click="js_open_task_detail(task)"> </wt-task> </div> <wt-task-composer class="entry-add-bottom-composer" task-save="js_add_task($event, new_task, entry, 0);" composer-show="entry.task_bottom_enabled"></wt-task-composer> </div> <div class="entry-task-footer" wt-permission="[permission,project.info.curr_role,1,2]"> <a href="javascript:;" class="js-add-task-composer" ng-click="js_open_add_task_composer($event, entry)" wt-tracker="Project Task Page|Main-Entry|Footer Add Task" ng-hide="entry.task_bottom_enabled | filter:false">æ°å»ºä»»å¡</a> </div> </div> </div> <div class="entry-new" ng-show="global.loading_done" ng-class="{true:\'entry-add\'}[!is_show_add_entry]"> <a ng-hide="is_show_add_entry" href="javascript:;" ng-click="is_show_add_entry = !is_show_add_entry" ng-class="{true:\'entry-add\'}[!is_show_add_entry]" wt-tracker="Project Task Page|Main|Add Entry" wt-permission="[permission,project.info.curr_role,1,2]"> <i class="icon-plus"></i> æ°å»ºåè¡¨ </a> <div class="m_10" ng-show="is_show_add_entry" wt-show-edit="is_show_add_entry"> <div class="form-group"> <input name="entry_name" ng-model="entry_name" placeholder="åè¡¨å?" wt-enter="js_add_entry(entry_name)" type="text" class="form-control" required autofocus/> </div> <div class="form-group"> <button ng-click="js_add_entry(entry_name)" data-loading-text="ä¿å­ä¸?..." class="btn btn-success mr_15" wt-tracker="Project Task Page|Main|Add Entry-OK" loading-status="is_adding_entry">ç¡®å® </button> <button ng-click="is_show_add_entry = false" class="btn" wt-tracker="Project Task Page|Main|Add Entry-Cancel" >åæ¶</button> </div> </div> </div> </div> </div> <div class="layout_right_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/project/prj_right_sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div>')}]),angular.module("/ycjs/tpl/project/trash/pop_empty_trash.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/trash/pop_empty_trash.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ¸ç©ºåæ¶ç«?</h3> </div> <div class="popbox-body"> <span>åæ¶ç«éçæ°æ®å°ä¼æ°¸ä¹å é¤ï¼å¹¶ä¸æ æ³æ¢å¤ã?<br/>ç¡®è®¤è¦æ¸ç©ºåæ¶ç«ï¼?</span> </div> <div class="popbox-footer"> <button ng-click="js_empty_trash()" class="btn btn-danger">ç¡®å®æ¸ç©º</button> </div>')}]),angular.module("/ycjs/tpl/project/trash/pop_trash_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/trash/pop_trash_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>éé¡¹</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li><a href="javascript:;" ng-click="js_restore()" ng-show="entity.etype != \'task\'"><i class="icon-undo"></i> æ¢å¤</a></li> <li><a href="javascript:;" ng-click="js_step(1)" ng-show="entity.etype == \'task\'"><i class="icon-undo"></i> æ¢å¤</a></li> <li wt-permission="[permission,project.info.curr_role,1,1]"><a href="javascript:;" ng-click="js_destory()"><i class="icon-trash"></i> å½»åºå é¤</a></li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æ¢å¤ä»»å¡å?</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-repeat="entry in entries"> <a href="javascript:;" ng-click="js_restore_task(entry)"> <span class="icon" ng-class="{true:\'icon-ok\',false:\'\'}[entry.selected == 1]"></span> <span>{{entry.name}}</span> </a> </li> </ul> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/project/trash/project_trash.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/project/trash/project_trash.html",'<div class="layout_content prj_panel"> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <ng-include src="\'/ycjs/tpl/project/prj_title_panel.html\'"></ng-include> <div class="main"> <div class="toolbar_panel pull-right"> <button class="btn btn-danger js-popbox" ng-click="js_clear_trash($event)" type="button" wt-permission="[permission,project.info.curr_role,1,1]">æ¸ç©ºåæ¶ç«? </button> </div> </div> </div> </div> <div class="height-nonav" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <span class="title"> åæ¶ç«? </span> <ul class="tabs"> <li> <a ng-class="{true: \'active\'}[filter_type==0]" href="javascript:;" ng-click="js_filter(0)"> å¨é¨ </a> </li> <li> <a ng-class="{true: \'active\'}[filter_type==1]" href="javascript:;" ng-click="js_filter(1)"> ä»»å¡ </a> </li> <li> <a ng-class="{true: \'active\'}[filter_type==3]" href="javascript:;" ng-click="js_filter(3)"> æä»¶ </a> </li> <li> <a ng-class="{true: \'active\'}[filter_type==2]" href="javascript:;" ng-click="js_filter(2)"> è¯é¢ </a> </li> <li> <a ng-class="{true: \'active\'}[filter_type==4]" href="javascript:;" ng-click="js_filter(4)"> ææ¡£ </a> </li> </ul> </dt> <dd> <div class="empty-panel" ng-show="wtobjs != null && wtobjs.length == 0" ng-cloak> <i class="icon-trash"></i><br/> <span>åæ¶ç«æ²¡æåå®?</span> </div> <div class="trash-panel"> <div class="prj-trash" ng-show="wtobjs.length > 0"> <div class="wt-row" ng-repeat="wtobj in wtobjs"> <div class="column column-icon"> <i ng-class="{ \'task\': \'icon-check\', \'entry\': \'icon-columns\', \'file\': \'icon-file\', \'folder\': \'icon-folder-close\', \'page\': \'icon-file-text\', \'event\': \'icon-calendar\', \'post\': \'icon-list-alt\' }[wtobj.entity.etype]"></i> </div> <div class="column column-name"> <span class="name">{{wtobj.entity.name}}</span> </div> <div class="column column-actor"> <wt-avatar member="wtobj.actor" name="true" faceclass="plr_5" size="30"></wt-avatar> </div> <div class="column column-date"> <span> {{wtobj.delete_date | timeFormatZHCN}} </span> </div> <div class="column column-menu"> <a href="javascript:;" class="js-popbox trash-item-menu" wt-permission="[permission,project.info.curr_role,1,2]" ng-click="js_show_trash_menu($event, wtobj)"> <i class="icon-play-circle"></i> </a> </div> </div> </div> </div> </dd> </dl> </div> </div> <div class="layout_right_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/project/prj_right_sidebar.html\'"></ng-include> </div> </div> <div class="stamp-project" ng-cloak ng-show="permission==4"></div>')}]),angular.module("/ycjs/tpl/team/free_apply.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/free_apply.html",'<div class="page_navbar"> <div class="page-navbar-warp"> <div class="title"> <h3> <i class="icon-heart mr_10"></i>ç³è¯·å¬çç? </h3> </div> </div> </div> <div class="content-support-panel feedback-panel height-nonav" wt-scroll> <div class="content-container"> <div class="content"> <div class="content-wrapper"> <div class="content-title"> ç³è¯·å¬çç? </div> <div ng-hide="apply_success || !global.loading_done" class="mt_12"> <form class="form-horizontal wt-form" wt-form-validate="{blurTrig:false,showMsg:false}" name="free_apply_form" novalidate> <div class="form-group"> <label class="col-xs-2 control-label">å¢éç±»åï¼?</label> <div class="col-xs-10"> <div class="radio radio-inline"> <label> <input type="radio" name="team_type" ng-model="team_type" value="1" checked>å¬çç»ç» </label> </div> <div class="radio radio-inline"> <label> <input type="radio" name="team_type" ng-model="team_type" value="2">å­¦çç¤¾å¢ </label> </div> <div class="radio radio-inline"> <label> <input type="radio" name="team_type" ng-model="team_type" value="3">å¼æºé¡¹ç®å¢é? </label> </div> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label">ç³è¯·å¢éï¼?</label> <div class="col-xs-10"> <select name="selected_team" class="form-control" required="" ng-model="selected_team" ng-options="t.name for t in owner_teams"> <option value="">-- éæ©å¢é --</option> </select> <p class="alert alert-info mb_0 mt_12" data-ng-show="owner_teams && owner_teams.length == 0"> <i class="icon icon-info-sign mr_5"></i>ä½ è¿æ²¡æèªå·±çå¢éï¼ç«å³ <a href="/teams/add">åå»ºå¢éå?</a>ï¼? </p> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label">ç®åæè¿°ï¼</label> <div class="col-xs-10"> <textarea wt-editor name="apply_team_desc" ng-model="team_desc" class="form-control" required="" placeholder="ä¸ºä½ çå¢éåä¸ªç®åçä»ç»ï¼æå¥½æä¾å¢éçå®æ¹å¾®åæç½ç«ã?" rows="5"></textarea> </div> </div> <div class="form-group" ng-show="free_apply_form.$errors.length > 0"> <div class="col-xs-2"></div> <div class="col-xs-10"> <div class="alert alert-danger mb_0"> <i class="icon-remove-sign"></i> {{free_apply_form.$errors[0]}} </div> </div> </div> <div class="form-group"> <div class="col-xs-2"></div> <div class="col-xs-10"> <button type="button" wt-form-submit="js_free_apply(free_apply_form)" data-loading-text="ç³è¯·ä¸?..." loading-status="is_applying" class="btn btn-success btn-sure">ç«å³ç³è¯· </button> </div> </div> </form> </div> <div class="success-panel" ng-show="apply_success"> <i class="imgicon-success"></i><br/><br/> <span>éå¸¸æè°¢ä½ å¯¹Worktileçå³æ³¨ï¼ä½ çå¬ççç³è¯·å·²ç»æ¶å°ï¼æä»¬ä¼å°½å¿«å®¡æ ?</span> </div> </div> </div> <div class="sidebar"> <div class="sidebar-widget"> <h4>å¸¸è§é®é¢</h4> <ul> <li> 1. å¬ççåè´¹æé?1å¹´ï¼å°æåéè¦éæ°æäº¤ç³è¯? </li> <li> 2. å¬çççå¢éæåäººæ°ä¸éæ?100äº? </li> <li> 3. å¬ççç®åæ¯æå­¦çç¤¾å¢ãå¬çç»ç»åå¼æºå¢é? </li> <li> 4. è¯·å°½éæä¾å®æ¹å¾®åæå®æ¹ç½ç« </li> </ul> </div> <div class="sidebar-widget"> <h4>æ¯æ</h4> <ul> <li> <i class="icon-weibo"></i> <a href="http://weibo.com/worktile"> å¾®åï¼@Worktile </a> </li> <li> <i class="icon-envelope-alt"></i> <a href="mailto:support@worktile.com"> é®ç®±ï¼support@worktile.com </a> </li> <li> <i class="icon-phone"></i> <a href="javascript:;"> çµè¯ï¼?400-805-6966 </a> </li> <li> <i class="icon-linux"></i> <a href="javascript:;"> QQç¾¤ï¼110257147 </a> </li> </ul> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/pop_member_menu.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/pop_member_menu.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-avatar"> <div class="avatar-body" ng-class="{true: \'member-pendding\'}[[(selected_member.status==2 || selected_member.status==3)]]"> <button class="cancel icon-remove" ng-click="js_close()"></button> <wt-avatar member="selected_member" size="56"></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading help-inline">{{selected_member.display_name}}</h4> <span class="text-muted pl_15">{{selected_member.role | role}}</span> <p> <span class="help-inline">@{{selected_member.name}}</span> </p> </div> <div class="member_desc ng-scope"> <span class="text-muted ng-binding">{{ selected_member.desc || "ä»å¾æï¼è¿æ²¡æä¸ªäººè¯´æ?" }}</span> </div> </div> <div class="avatar-footer" ng-hide="!current_team.is_owner && !(current_team.curr_role | is_admin) && selected_member.uid != current_team.owner.uid"> <div class="pull-left color_gray" ng-if="selected_member.uid == current_team.owner.uid"> å¢éææè? </div> <section ng-hide="selected_member.uid == current_team.owner.uid || !(current_team.curr_role | is_admin)"> <div ng-show="(current_team.curr_role | is_admin) && selected_member.status | is_pending"> <button ng-click="js_view_invite_code()" class="btn btn-danger mr_15">åééè¯·é¾æ?</button> <button ng-click="js_step(4)" class="btn">ç§»é¤</button> </div> <div ng-show="(current_team.curr_role | is_admin) && !(selected_member.status | is_pending)"> <button ng-click="js_step(5);" class="btn btn-danger mr_15">è®¾ç½®æé</button> <button ng-click="js_step(2)" class="btn">ç§»é¤</button> </div> </section> </div> </div> </li> <li ng-switch-when="10" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æåè®¾ç½®</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-hide="selected_member.uid == team.owner.uid" class="mr_15"> <a ng-click="js_step(5);"><i class="icon-xx"></i> è®¾ç½®æé</a> </li> <li ng-show="(!(selected_member.status | is_pending)) && (selected_member.uid != team.owner.uid)"> <a ng-click="js_step(2)"><i class="icon-trash"></i> ä»å¢éç§»é?</a> </li> <li ng-show="(selected_member.status | is_pending)" class="divider"></li> <li ng-show="(selected_member.status | is_pending)"> <a ng-click="js_view_invite_code()"><i class="icon-xx"></i>åééè¯·é¾æ?</a> </li> <li ng-show="(selected_member.status | is_pending)"> <a ng-click="js_step(4)"><i class="icon-xx"></i> åæ¶éè¯?</a> </li> </ul> </div> </li> <li ng-switch-when="1" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è®¾ç½®åç»</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li ng-repeat="group in team.groups"> <a href="javascript:;" tabindex="-1" ng-click="js_set_group(selected_member, group)"> <i ng-class="{false: \'icon-xx\', true: \'icon-ok\'}[selected_member.group_id==group.group_id]" class="color_gray"></i> <span class="pl_5">{{group.name}}</span> </a> </li> <li ng-show="team.groups==0"> <div class="empty-menu">è¿æªæ°å»ºåç»</div> </li> </ul> </div> </li> <li ng-switch-when="2" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>ç§»é¤æå</h3> </div> <div class="popbox-body"> <div class="part-loading" data-ng-hide="loading_unique_admin_prjs_done"></div> <div class="alert alert-info" data-ng-show="loading_unique_admin_prjs_done && unique_admin_prjs.length == 0">è¢«ç§»é¤çæåï¼å°ä¸è½åè®¿é®è¯¥å¢éçä»»ä½ä¿¡æ¯ï¼ä½ç¸å³çæ°æ®ä¸ä¼è¢«å é¤ã?</div> <div class="alert alert-warning" data-ng-show="loading_unique_admin_prjs_done && unique_admin_prjs.length > 0"> è¯¥æåå¨å½åå¢éä¸­æ{{unique_admin_prjs.length}}ä¸ªé¡¹ç®æ¯å¯ä¸è´è´£äººï¼å é¤åï¼è¿äºé¡¹ç®å°æ²¡æè´è´£äººã? </div> <button data-ng-show="loading_unique_admin_prjs_done" ng-click="js_delete_member(selected_member)" class="btn btn-danger" data-loading-text="å é¤ä¸?..." loading-status="is_deleting_member">ç¡®å®ç§»é¤ </button> </div> </li> <li ng-switch-when="3" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>{{selected_member.display_name}}</h3> </div> <div class="popbox-body" wt-scroll> <ul class="popbox-menu"> <li ng-repeat="member_project in member_projects_auth"> <a href=""> <span class="pull-left text-muted">{{member_project.name}}</span> <span class="pull-right">{{member_project.curr_role | role}}</span> </a> </li> </ul> <span ng-show="member_projects_auth != null && member_projects_auth.length == 0">æ²¡æåä¸çé¡¹ç?</span> </div> </li> <li ng-switch-when="4" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>åæ¶éè¯?</h3> </div> <div class="popbox-body"> <div class="alert alert-info">åæ¶éè¯·åï¼åéç»è¯¥æåçéè¯·é¾æ¥å°ä¼å¤±æï¼æåå å¥è¯¥å¢ééè¦ä½ åæ¬¡åééè¯·ã?</div> <button class="btn btn-danger" ng-click="js_cancel_invite(selected_member)" data-loading-text="åæ¶ä¸?..." loading-status="is_canceling_invite">åæ¶éè¯? </button> </div> </li> <li ng-switch-when="5" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>è®¾ç½®æé</h3> </div> <div class="popbox-body"> <ul class="popbox-menu"> <li> <a ng-click="js_set_user_as_admin()"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[(selected_member.role | is_admin)]" class="color_gray"></i> <strong>ç®¡çå?</strong> <br/> <span class="text-muted pl_20">å¯ä»¥åå»ºé¡¹ç®ï¼éè¯·æåå å¥å¢é?</span> </a> </li> <li class="divider"></li> <li> <a ng-click="js_set_user_as_member()"> <i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[!(selected_member.role | is_admin)]" class="color_gray"></i> <strong>æå</strong> <br/> <span class="text-muted pl_20">è®¿é®åæä½èªå·±åä¸çé¡¹ç®</span> </a> </li> </ul> </div> </li> <li ng-switch-when="6" class="popbox-step-li"> <div class="popbox-header"> <button class="back icon-chevron-left" ng-click="js_step(0)"></button> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>åééè¯·é¾æ?</h3> </div> <div class="popbox-body"> <div class="alert alert-info">å¦æ <strong>{{ selected_member.display_name }}</strong> æ²¡ææ¶å°éè¯·é®ä»¶ï¼å¯ä»¥æä¸é¢çéè¯·é¾æ¥ç´æ¥åç»ä»ï¼? </div> <input class="input form-control help-block" wt-click-select type="text" ng-model="selected_member.invite_url" readonly="readonly"> </div> </li> </ul>')
}]),angular.module("/ycjs/tpl/team/pop_team_list.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/pop_team_list.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>æçå¢é</h3> </div> <div class="popbox-avatar"> <div class="avatar-body fixed-width"> <ul class="popbox-menu"> <li ng-repeat="team in teams"> <a href="/teams/{{team.team_id}}"> {{team.name}} <span class="edition in-list" ng-class="{1:\'edition-free\', 2:\'edition-business\', 3:\'edition-nonprofit\'}[team.edition]"> {{team.edition | teamEdition }} </span> </a> </li> </ul> </div> <div class="avatar-footer"> <a href="/account/teams"><i class="icon-sitemap mr_5"></i>å¢éç®¡ç</a> </div> </div>')}]),angular.module("/ycjs/tpl/team/pop_transfer_team.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/pop_transfer_team.html",'<ul class="popbox-step" ng-switch on="step"> <li ng-switch-default class="popbox-step-li"> <div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>éæ©è½¬è®©çæå?</h3> </div> <div class="popbox-body"> <input type="text" autofocus="" ng-model="search_user_input" placeholder="æç´¢æå" class="form-control help-block"/> <br> <div class="part-loading" wt-loading-done="members_loading_done"></div> <ul class="popbox-menu"> <li class="member-item" ng-repeat="member in team_members | filterMembers:search_user_input"> <a href="javascript:;" tabindex="-1" ng-click="js_to_transfer_confirm(member)"> <wt-avatar member="member" name="true" atname="true" size="30" faceclass="plr_5"></wt-avatar> </a> </li> <li class="empty-menu-nomin-h" ng-show="members_loading_done && (team_members | isNullOrEmpty)"> æ²¡æå¯ä»¥è½¬è®©çå¢éæå? </li> </ul> </div> </li> </ul>')}]),angular.module("/ycjs/tpl/team/team.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team.html",'<div class="layout_content" ng-hide="permission == 64"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-sitemap mr_10"></i>{{current_team.name}}</h3> </div> <div class="main"> <div class="pull-right"> <a href="/project/add?team_id={{current_team.team_id}}" ng-if="current_team.is_owner || (current_team.curr_role | is_admin)" class="btn btn-danger" data-ng-class="{1:\'mr_15\'}[current_team.is_owner]">æ°å»ºé¡¹ç® </a> <a href="/teams/{{current_team.team_id}}/admin" class="btn" ng-if="current_team.is_owner"> <i class="icon-cog mr_5"></i>å¢éè®¾ç½® </a> </div> </div> </div> </div> <div class="height-nonav" wt-scroll> <div class="main-content" data-ng-show="global.loading_done"> <div class="center-right-panel team-panel"> <div class="center-panel"> <div class="center-panel-inner"> <dl class="frame" data-minheight="160"> <dt> <span class="title">æåä¸çé¡¹ç®</span> </dt> <dd> <div class="empty-panel" ng-show="team_projects.length == 0 && global.loading_done" ng-cloak> <i class="icon-inbox"></i><br/> <span>è¿æ²¡æåä¸ä»»ä½é¡¹ç?</span> </div> <div class="project-list project-panel"> <div class="wt-row" ng-repeat="project in team_projects" wt-go-to="/project/{{project.pid}}" data-ng-class="{1:\'show-star\'}[project.is_star]"> <div class="column column-star"> <a href="javascript:;" ng-class="{1: \'star-started\', 0: \'\'}[project.is_star]" ng-click="js_star_toggle($event,project)" class="star" title="{{ {1: \'ä»å¸¸ç¨é¡¹ç®ç§»é¤\', 0: \'è®¾ç½®ä¸ºå¸¸ç¨é¡¹ç®\'}[project.is_star] }}" ng-hide="project.archived == \'1\'"> <i ng-class="{1: \'icon-star\', 0: \'icon-star-empty\'}[project.is_star]"></i> </a> &nbsp; </div> <div class="column column-icon"> <i ng-class="project.pic" ng-style="{color:project.bg}"></i> </div> <div class="column column-name"> <h4>{{project.name}}</h4> </div> <div class="column column-admin"> &nbsp; </div> <div class="column column-member"> <i class="icon-user mr_5"></i>{{project.member_count}} </div> </div> </div> </dd> </dl> </div> </div> <div class="right-panel"> <div class="box-panel" data-minheight="160"> <div class="box-panel-header"> <h4>å¢éæå</h4> </div> <div class="box-panel-body"> <ul class="member-list"> <li ng-repeat="member in members"> <wt-avatar member="member" size="56" name="true" namebr="true" click="js_show_member_menu($event,member)" class="js-popbox" data-placement="right" data-align="top"></wt-avatar> <i class="icon-user" title="ç®¡çå?" ng-show="member.role | is_admin"></i> </li> <li ng-show="current_team.curr_role | is_admin"> <a class="avatar-add avatar-56" href="/teams/{{current_team.team_id}}/invite"> <span class="o"> <i class="icon-ex-user-add"></i> </span> <br> éè¯·æå? </a> </li> </ul> </div> </div> </div> </div> </div> </div> </div> </div> <ng-include src="\'/ycjs/tpl/team/team_not_found.html\'"></ng-include>')}]),angular.module("/ycjs/tpl/team/team_add.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_add.html",' <div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-sitemap mr_10"></i>æ°å»ºå¢é</h3> </div> <div class="main"> </div> </div> </div> <div class="height-nonav main-content" wt-scroll> <dl class="frame" data-minheight="160" data-ng-show="global.loading_done"> <dt> <span class="title">æ°å»ºå¢é</span> <ul class="tabs"> </ul> </dt> <dd> <div class="panel-section"> <form name="add_team_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="form-horizontal wt-form" novalidate> <div class="form-group"> <label class="col-xs-2 control-label">å¢éåç§°ï¼?</label> <div class="col-xs-10"> <input name="team_name" ng-model="name" placeholder="å¢éåç§°" class="form-control" type="text" autofocus="" required/> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label">å¢éæè¿°ï¼?</label> <div class="col-xs-10"> <textarea ng-model="desc" placeholder="ä¸ºå¢éæ·»å ç®ç­æè¿°ï¼å¯éï¼" rows="4" class="form-control"/> </div> </div> <div class="form-group" ng-show="add_team_form.$errors.length > 0"> <label class="col-xs-2 control-label"></label> <div class="col-xs-10"> <div class="alert alert-danger"> <i class="icon-remove-sign"></i> {{add_team_form.$errors[0]}} </div> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label"></label> <div class="col-xs-10"> <button wt-form-submit="js_add_team(add_team_form, name, desc)" class="btn btn-success mr_15" data-loading-text="ä¿å­ä¸?..." loading-status="is_saving_team">åå»ºæ°å¢é? </button> <button ng-click="js_cancel()" class="btn float_left">åæ¶</button> </div> </div> </form> </div> </dd> </dl> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/team/team_admin_basic.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_basic.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="rightpanel-wrapper height-nonav" wt-scroll> <div class="center-panel-container" data-ng-show="global.loading_done"> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="basic_setting"> <div class="panel-section"> <h4>ä¿®æ¹åºæ¬ä¿¡æ¯</h4> </div> <div class="panel-section"> <form name="team_set_form" wt-form-validate="{blurTrig:false,showMsg:false}" class="wt-form form-horizontal w_660" novalidate> <div class="form-group"> <label class="col-xs-2 control-label">å¢éåç§°ï¼?</label> <div class="col-xs-10"> <input name="team_name" type="text" ng-model="name" placeholder="å¢éåç§°" class="form-control" required autofocus/> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label">å¢éæè¿°ï¼?</label> <div class="col-xs-10"> <textarea rows="4" ng-model="desc" class="form-control" placeholder="ä¸ºå¢éæ·»å ç®ç­æè¿°ï¼å¯éï¼"></textarea> </div> </div> <div class="form-group"> <label class="col-xs-2 control-label"></label> <div class="col-xs-10"> <button data-loading-text="ä¿å­ä¸?..." wt-form-submit="js_set_team(team_set_form, name, desc, url)" class="btn btn-success" loading-status="is_team_saveing">ç¡®å® </button> </div> </div> </form> <hr/> </div> </div> <div class="transfer"> <div data-ng-switch="transfer_step"> <div class="panel-section" data-ng-switch-when="1"> <div class="title"> <h4>è½¬è®©å¢é</h4> </div> <div class="form-group"> <span>å½åå¢éææèï¼</span> <wt-avatar member="team.owner" name="true" atname="true" size="30" faceclass="plr_5"></wt-avatar> </div> <div class="alert alert-warning w_660"> <span><i class="icon icon-info-sign mr_5"></i> è½¬è®©åä½ å°æ²¡ææéç®¡çè¯¥å¢éï¼å¢éå¸æ·ä¸­çä½é¢å°ä¼ä¸èµ·è½¬è®©ã?</span> <br/> </div> <div class="form-group"> <button class="btn btn-danger float_left js-popbox" data-placement="right" data-align="top" ng-click="js_transfer_pop($event)">è½¬è®©å½åå¢é </button> </div> <hr/> </div> <div class="panel-section" data-ng-switch-when="2"> <div class="title"> <h4>è¾å¥å¸æ·å¯ç </h4> </div> <wt-confirm-password class="w_360" confirm-cancel="js_transfer_step(1)" confirm-success="js_transfer_step(3)"></wt-confirm-password> </div> <div class="panel-section" data-ng-switch-when="3"> <div class="title"> <h4>ç¡®è®¤è½¬è®©å½åå¢é</h4> </div> <div class="alert alert-info w_660"> <span><i class="icon icon-info-sign mr_5"></i> ç¡®è®¤è¦æå½åå¢éè½¬è®©ç»? {{ selected_member.display_name }} ä¹ï¼</span> </div> <div class="form-group"> <button class="btn btn-danger float_left mr_15" data-loading-text="æ­£å¨è½¬è®©ä¸?..." loading-status="is_transferring" ng-click="js_transfer()">ç¡®è®¤è½¬è®© </button> <button class="btn float_left" ng-click="js_transfer_step(1)">åæ¶ </button> </div> </div> </div> </div> <div class="dismiss"> <div data-ng-switch="dismiss_step"> <div class="panel-section" data-ng-switch-when="1"> <div class="title"> <h4>è§£æ£å¢é</h4> </div> <div class="alert alert-warning w_660"> <span><i class="icon icon-info-sign mr_5"></i> è¯¥æä½ä¸å¯æ¤éï¼è§£æ£å¢éåï¼å¢éæåå°ä¸è½è®¿é®è¯¥å¢éçä¸åæ°æ®ï¼è¯·è°¨ææä½ã?</span> <br/> </div> <div class="form-group"> <button class="btn btn-danger float_left" data-placement="right" data-align="top" ng-click="js_dismiss_step(2)">è§£æ£å½åå¢é </button> </div> </div> <div class="panel-section" data-ng-switch-when="2"> <div class="title"> <h4>è¾å¥å¸æ·å¯ç </h4> </div> <wt-confirm-password class="w_360" confirm-cancel="js_dismiss_step(1)" confirm-success="js_dismiss_step(3)"></wt-confirm-password> </div> <div class="panel-section" data-ng-switch-when="3"> <div class="title"> <h4>ç¡®è®¤è§£æ£å½åå¢é</h4> </div> <div class="alert alert-info w_660"> <span><i class="icon icon-info-sign mr_5"></i>è§£æ£å¢éåï¼å¢éæåå°ä¸è½è®¿é®è¯¥å¢éçä¸åæ°æ®ãç¡®è®¤è§£æ£å½åå¢éåï¼?</span> </div> <div class="form-group"> <button class="btn btn-danger float_left mr_15" data-loading-text="æ­£å¨è§£æ£ä¸?..." loading-status="is_dismissing" ng-click="js_dismiss()">ç¡®è®¤è§£æ£ </button> <button class="btn float_left" ng-click="js_dismiss_step(1)">åæ¶ </button> </div> </div> </div> </div> </div> </dd> </dl> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_billing.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_billing.html",'<div class="layout_content"> <div class="layout_content_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/team/team_admin_sidebar.html\'"></ng-include> </div> <div class="layout_content_main height-noheader" wt-scroll> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container" data-ng-show="global.loading_done"> <div class="panel-section"> <h4>è´¦åè®°å½</h4> <div class="option-block"> <div class="account-info mr_15">ç´¯è®¡æ£è´¹ï¼?<span class="number">ï¿¥{{sub.fee}}</span></div> </div> </div> <div class="panel-section table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>æ¥æ</th> <th>è´¦åå?</th> <th>æåäººæ°</th> <th>ä»·æ ¼</th> <th>éé¢</th> </tr> </thead> <tbody> <tr data-ng-repeat="billing in billings"> <td>{{billing.transaction_date | timeFormatZHCN}}</td> <td>{{billing.billing_no}}</td> <td>{{billing.quantily}}</td> <td>{{billing.price | currency:"ï¿?"}}</td> <td>{{billing.amount | currency:"ï¿?"}}</td> </tr> <tr data-ng-show="billings.length == 0"> <td colspan="5"> è¿æ²¡æè´¦åè®°å½?</td> </tr> </tbody> </table> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_billing_details.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_billing_details.html","")}]),angular.module("/ycjs/tpl/team/team_admin_change_quota.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_change_quota.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container"> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div class="panel-section" data-ng-show="part_loading_done"> <div class="center-box normal-box"> <i class="center-box-icon icon-group"></i> <h5>ä¿®æ¹å¢éæåéé¢</h5> <input wt-enter="js_change_team_quota()" wt-focus-event="js_team_quota_focus()" ng-model="team_quota" type="text" class="form-control" placeholder="è¯·è¾å¥å¢ééé¢äººæ?"/> <p class="alert alert-danger" data-ng-show="change_quota_error.length > 0"> <i class="icon-remove-sign"></i> {{change_quota_error}} </p> <button class="btn btn-success btn-upgrade btn-block" ng-click="js_change_team_quota()" data-loading-text="ä¿®æ¹..." loading-status="is_changing">ä¿®æ¹éé¢ </button> <span class="tips">å¦éå¸®å©ï¼è¯·æ¨æ 010-84787492 èç³»æä»¬</span> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_consultant.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_consultant.html",' <div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container height-nonav" ng-show="global.loading_done" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <ng-include src="\'/ycjs/tpl/team/team_mask_panel.html\'"></ng-include> <div class="panel-section" data-ng-show="part_loading_done && team.edition==2"> <table class="table table-striped table-bordered"> <tbody> <tr> <td>å®¢æå?</td> <td><span class="em">{{sub.support_no}}å?</span></td> </tr> <tr> <td>QQå?</td> <td>{{sub.support_qq}}</td> </tr> <tr> <td>çµè¯</td> <td>010-84787492</td> </tr> <tr> <td>é®ç®±</td> <td><a href="mailto:wow@worktile.com">wow@worktile.com</a></td> </tr> <tr> <td>å¾®ä¿¡å®¢æ</td> <td> <img ng-src="/img/index/contact-code.png{{global.config.version}}" alt="getworktile"> <br/> <br/> æ«æä¸é¢çäºç»´ç ææç´¢å¾®ä¿¡å·ï¼?<span class="em">getworktile</span> </td> </tr> </tbody> </table> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_degrade.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_degrade.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container"> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div class="panel-section" data-ng-show="part_loading_done"> <div class="center-box normal-box"> <i class="center-box-icon icon-sitemap"></i> <h5>éçº§å°åè´¹ç</h5> <p class="alert alert-danger" data-ng-show="degrade_error.length > 0"> <i class="icon-remove-sign"></i> {{degrade_error}} </p> <button ng-disabled="degrade_disabled" class="btn btn-success btn-block" ng-click="js_degrade_team()" data-loading-text="æ­£å¨éçº§..." loading-status="is_degrading">ç¡®è®¤éçº§å°åè´¹ç </button> <span class="tips">å¦éå¸®å©ï¼è¯·æ¨æ 400-805-6966 èç³»æä»¬</span> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_export.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_export.html",' <div class="layout_content"> <div class="layout_content_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/team/team_admin_sidebar.html\'"></ng-include> </div> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> <button data-ng-click="js_export_data()" class="btn btn-danger" data-loading-text="æäº¤ä¸?..." loading-status="bulk_exporting" ng-show="global.loading_done && team.edition==2">å¯¼åºæ°æ® </button> </div> </div> </div> </div> <ng-include src="\'/ycjs/tpl/team/team_mask_panel.html\'"></ng-include> <div class="center-panel-container height-nonav" ng-show="global.loading_done && team.edition==2" wt-scroll> <div class="panel-section"> <h4>æ°æ®å¯¼åº</h4> <div class="option-block meta-desc"> <i class="icon-info-sign mr_5"></i>æ°æ®å¯¼åºéè¦åæäº¤ï¼åå¤å°±ç»ªåæå¯ä»¥ä¸è½½ã? </div> </div> <div class="panel-section inner"> <table class="table table-hover table-bordered"> <thead> <tr> <th>è¯·æ±æ¶é´</th> <th>æ ¼å¼</th> <th>ç¶æ?</th> <th>æä½</th> </tr> </thead> <tbody> <tr data-ng-repeat="export in bulkexports"> <td> {{export.request_date | timeFormatZHCN}} </td> <td> {{{1:\'JSON\'}[export.download_format]}} </td> <td>{{export.status | exportStatus}}</td> <td> æ? </td> </tr> <tr data-ng-show="bulkexports.length == 0"> <td colspan="4"> è¿æ²¡ææ°æ®å¯¼åºè®°å½? </td> </tr> <tr data-ng-show="!loading_export_done"> <td colspan="4" align="center"> <div class="part-loading mb_0"></div> </td> </tr> </tbody> </table> <div class="pull-right" wt-pagination="exports_pagination_opts"></div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_members.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_members.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> <a href="/teams/{{team_id}}/invite" class="btn btn-danger">éè¯·æå?</a> <a href="/teams/{{team_id}}/admin/quota" ng-show="team.edition==2" class="btn ml_15">ä¿®æ¹æåéé¢</a> </div> </div> </div> </div> <div class="center-panel-container height-nonav" ng-show="global.loading_done" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="panel-section"> <div class="progress-warp"> <progress percent="stacked"></progress> </div> <ul class="inline-items clearfix"> <li><span class="number member-count"> </span><span class="text">{{team.member_count}} ä½æ´»å¨æå?</span> </li> <li><span class="number invite-count"> </span><span class="text">åé? {{team.invite_count}} ä¸ªéè¯?</span></li> <li><span class="number other-count"> </span><span class="text">{{sub.quota - team.member_count - team.invite_count}} ä¸ªå¯ç¨éé¢?</span> </li> </ul> </div> <br/> <div class="panel-section table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>æå</th> <th>é®ç®±</th> <th>å å¥æ¥æ</th> <th>è§è²</th> <th>ç¶æ?</th> <th>é¡¹ç®æ?</th> <th>è®¾ç½®</th> </tr> </thead> <tbody> <tr data-ng-repeat="member in account_members"> <td> <wt-avatar member="member" name="true" size="30"></wt-avatar> </td> <td>{{member.email}}</td> <td>{{member.join_date | timeFormatZHCN}}</td> <td>{{member.role | role}}</td> <td>{{member.status | memberStatus}}</td> <td>{{member.prj_count}}</td> <td><a class="js-popbox" href="javascript:;" data-placement="left" data-align="middle" data-ng-click="js_show_member_menu($event,member,team)">è®¾ç½®</a></td> </tr> <tr data-ng-if="account_members.length == 0"> <td colspan="7"> è¿æ²¡æå¢éæå? </td> </tr> <tr data-ng-show="!account_members"> <td colspan="7" align="center"> <div class="part-loading mb_0"></div> </td> </tr> </tbody> </table> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_pay_coupon.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_pay_coupon.html",' <div class="layout_content"> <div class="layout_content_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/team/team_admin_sidebar.html\'"></ng-include> </div> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container" data-ng-show="team"> <div class="panel-section"> <div class="center-box normal-box"> <i class="center-box-icon icon-gift"></i> <h5>ä½¿ç¨ä»£éå¸åå?</h5> <input wt-enter="js_redeem_coupon()" wt-focus-event="js_redeem_coupon_focus()" ng-model="coupon_code" type="text" class="form-control" placeholder="è¯·è¾å¥ä»£éå¸åºåå?"/> <p class="alert alert-danger" data-ng-show="redeem_coupon_error.length > 0"> <i class="icon-remove-sign"></i> {{redeem_coupon_error}} </p> <button class="btn btn-success btn-block" ng-click="js_redeem_coupon()" data-loading-text="æ­£å¨åå?..." loading-status="is_redeeming">ç¡®è®¤åå? </button> <span class="tips">å¦éå¸®å©ï¼è¯·æ¨æ 010-84787492 èç³»æä»¬</span> </div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_pay_online.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_pay_online.html",' <div class="layout_content"> <div class="layout_content_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/team/team_admin_sidebar.html\'"></ng-include> </div> <div class="layout_content_main height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container" data-ng-show="team"> <div class="panel-section"> <h4>å¨çº¿åå?</h4> <ul class="pay-online"> <li> <span class="pay-number">1</span> è´­ä¹°äººæ°: <span class="pay-people"><i class="icon-ex-users"></i> {{sub.quota}} ä¸ªäºº </span> <span class="pay-people-tooltip text-muted">(ï¿?10æ?/äº?)</span> </li> <li class="pay-amount-list"> <span class="pay-number">2</span> åå¼éé¢?:<br/> <div class="pay-amount" data-ng-class="{true:\'active\'}[selected_amount.month_count == pay_amount.month_count]" data-ng-click="js_selected_amount(pay_amount,pay_form)" data-ng-repeat="pay_amount in pay_amounts"> <span class="pay-amount-time">{{pay_amount.display_time}}</span> <span class="pay-amount-number">ï¿? <b>{{pay_amount.amount}}</b> </span> <span class="icon-ok-sign" ng-show="{true:\'active\'}[selected_amount.month_count == pay_amount.month_count]"></span> <span class="pay-amount-send" data-ng-show="pay_amount.presentation > 0"> <i class="icon-gift"></i> éï¼ï¿¥{{pay_amount.presentation}} </span> </div> </li> <li> <span class="pay-number">3</span> æ¯ä»æ¹å¼ï¼?<br/> <div class="radio"> <label> <input type="radio" name="pay_type" value="1" checked="checked" /> <img ng-src="/img/alipay.png{{global.config.version}}" width="135" height="45" /> </label> </div> </li> <li> <p class="alert alert-info"> è´­ä¹°äººæ°ï¼{{sub.quota}}äº?<br/> åå¼éé¢ï¼ï¿¥{{selected_amount.amount || 0}} <br/> æ¯ä»æ¹å¼ï¼æ¯ä»å®<br/> </p> </li> <li data-ng-show="pay_form.$errors.length > 0"> <p class="alert alert-danger"> <i class="icon-remove-sign"></i> {{pay_form.$errors[0]}} </p> </li> <li> <form name="pay_form" action="/pay/online/alipay" method="post" target="_blank"> <input hidden="" name="payment_no" ng-model="payment_no"> <input hidden="" name="amount" ng-model="selected_amount.amount"> <input hidden="" name="team_id" ng-model="team_id"> <button class="btn btn-success" type="submit" data-ng-click="js_pay(pay_form)"> æ¯ä»</button> </form> </li> </ul> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_payment.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_payment.html",' <div class="layout_content"> <div class="layout_content_sidebar height-noheader"> <ng-include src="\'/ycjs/tpl/team/team_admin_sidebar.html\'"></ng-include> </div> <div class="layout_content_main height-noheader" wt-scroll> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container" data-ng-show="global.loading_done"> <div class="panel-section"> <h4>ä»è´¹ç®¡ç</h4> <div class="option-block"> <div class="account-info mr_15">è´¦æ·ä½é¢ï¼?<span class="number">ï¿¥{{sub.balance}}</span></div> <a href="/teams/{{team_id}}/pay" class="btn btn-danger mr_15">å¨çº¿åå?</a> <a href="/teams/{{team_id}}/pay_coupon" class="btn">ä»£éå¸åå?</a> </div> </div> <div class="panel-section table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>æ¥æ</th> <th>åå¼æ¹å¼?</th> <th>éé¢</th> <th>ç¶æ?</th> <th>æä½</th> </tr> </thead> <tbody> <tr data-ng-repeat="payment in payments"> <td>{{payment.transaction_date | timeFormatZHCN}}</td> <td>{{payment.type | payType}}</td> <td ng-class="{1:\'pay-unpaid\',2:\'pay-success\',3:\'pay-failed\'}[payment.status]"> ï¿¥{{payment.amount}} </td> <td>{{payment.status | payStatus}} </td> <td> <div data-ng-hide="(payment.status | payStatusIsSuccess)"> <a href="/pay/online/alipay?team_id={{team_id}}&payment_no={{payment.payment_no}}" target="_blank">ç»§ç»­æ¯ä»</a> | <a href="javascript:;" data-ng-click="js_cancel_payment(payment)">åæ¶æ¯ä»</a> </div> <div data-ng-show="(payment.status | payStatusIsSuccess)"> æ? </div> </td> </tr> <tr data-ng-show="payments.length == 0"> <td colspan="5">è¿æ²¡æä»è´¹è®°å½?</td> </tr> </tbody> </table> <div class="pull-right" wt-pagination="payments_pagination_opts"></div> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_projects.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_projects.html",' <div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> <a href="/project/add?team_id={{team_id}}" class="btn btn-danger">æ°å»ºé¡¹ç®</a> </div> </div> </div> </div> <div class="center-panel-container height-nonav" ng-show="global.loading_done" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="panel-section"> <div class="progress-warp"> <progress percent="stacked"></progress> </div> <ul class="inline-items clearfix"> <li><span class="number active-count"> </span><span class="text">{{team.active_count}} ä¸ªæ´»å¨é¡¹ç?</span></li> <li><span class="number archived-count"> </span><span class="text">{{team.archived_count}} ä¸ªå½æ¡£é¡¹ç?</span></li> </ul> </div> <br/> <div class="panel-section table-list"> <table class="table table-hover table-bordered"> <thead> <tr> <th>é¡¹ç®åç§°</th> <th>è´è´£äº?</th> <th>æåäººæ°</th> <th>ç¶æ?</th> <th>åå»ºæ¶é´</th> </tr> </thead> <tbody> <tr data-ng-repeat="project in account_projects"> <td>{{project.name}}</td> <td> <wt-avatar ng-repeat="admin in project.admins" member="admin" name="true" size="30" class="mr_15"></wt-avatar> </td> <td>{{project.member_count}}</td> <td>{{project.archived | projectStatus}}</td> <td>{{project.create_date | timeFormatZHCN}}</td> </tr> <tr data-ng-if="account_projects.length == 0"> <td colspan="5"> è¿æ²¡æä»»ä½é¡¹ç? </td> </tr> <tr data-ng-show="!account_projects"> <td colspan="5" align="center"> <div class="part-loading mb_0"></div> </td> </tr> </tbody> </table> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_security.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_security.html",' <div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container height-nonav" ng-show="global.loading_done" wt-scroll> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <ng-include src="\'/ycjs/tpl/team/team_mask_panel.html\'"></ng-include> <div class="panel-section inner" data-ng-show="part_loading_done && team.edition==2"> <table class="table table-hover table-bordered pt_15"> <thead> <tr> <th>æä½äº?</th> <th>è¡ä¸º</th> <th>IPå°å</th> <th>æ¶é´</th> </tr> </thead> <tbody> <tr data-ng-repeat="history in histories"> <td> <wt-avatar member="history.actor" name="true" size="30"></wt-avatar> </td> <td style="width: 40%">{{history.verb_display}} <wt-avatar member="history.member" name="true" size="30"></wt-avatar> </td> <td>{{history.location + \'ï¼\'+ history.ipaddress + \'ï¼\'}}</td> <td>{{history.published | timeFormatZHCN}}</td> </tr> <tr data-ng-show="histories.length == 0"> <td colspan="4"> è¿æ²¡æå®å¨æ¥å¿? </td> </tr> <tr data-ng-show="!loading_histories_done"> <td colspan="4" align="center"> <div class="part-loading mb_0"></div> </td> </tr> </tbody> </table> <div class="pull-right" wt-pagination="security_pagination_opts"></div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_admin_sidebar.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_sidebar.html",'<div wt-scroll=\'{"scrollButtons":{"enable":true}}\' data-scrollnoheight="160"> <ul class="nav_listmenu"> <li class="menu" ng-class="{true: \'active\'}[current_menu == \'basic\']"> <a href="/teams/{{team_id}}/admin/basic"> <i class="icon-cog mr_5"></i>åºæ¬è®¾ç½® </a> </li> <li class="menu" ng-class="{true: \'active\'}[current_menu == \'members\']"> <a href="/teams/{{team_id}}/admin/members"> <i class="icon-user mr_5"></i>æåç®¡ç </a> </li> <li class="menu" ng-class="{true: \'active\'}[current_menu == \'projects\']"> <a href="/teams/{{team_id}}/admin/projects"> <i class="icon-inbox mr_5"></i>é¡¹ç®ç®¡ç </a> </li> <li class="menu" ng-class="{true: \'active\'}[current_menu == \'security\']"> <a href="/teams/{{team_id}}/admin/security"> <i class="icon-shield mr_5"></i>å®å¨æ¥å¿ </a> </li> <li class="menu" ng-class="{true: \'active\'}[current_menu == \'consultant\']"> <a href="/teams/{{team_id}}/admin/consultant"> <i class="icon-female mr_5"></i>ä¸å±é¡¾é® </a> </li> </ul> </div> ')}]),angular.module("/ycjs/tpl/team/team_admin_summary.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_summary.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="rightpanel-wrapper height-nonav" wt-scroll> <div class="center-panel-container"> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div data-ng-show="part_loading_done"> <div class="panel-section"> <h4>å¢éä¿¡æ¯</h4> </div> <div class="panel-section"> <table class="table table-striped table-bordered"> <tbody> <tr> <td>å¢éåç§°</td> <td>{{team.name}}</td> </tr> <tr> <td>åå»ºæ¶é´</td> <td>{{team.create_date | dateFormatZHCN}}</td> </tr> <tr> <td>å¢éçæ¬</td> <td><span class="edition mr_45" ng-class="{1:\'edition-free\', 2:\'edition-business\', 3:\'edition-nonprofit\'}[team.edition]"> {{ team.edition | teamEdition}} </span> <a href="/teams/{{team_id}}/upgrade" ng-show="team.edition == 1 || team.edition == 3" class="btn btn-danger">åçº§ä¸ºåä¸ç</a> <a href="/teams/{{team_id}}/degrade" data-ng-show="team.edition == 2" class="btn">éçº§å°åè´¹ç</a> </td> </tr> <tr ng-show="team.edition == 2 || team.edition == 3"> <td>åè´¹æªæ­¢æ¥æ</td> <td>{{sub.expire_date | dateFormatZHCN}}</td> </tr> </tbody> </table> </div> <div class="panel-section"> <h4>é¡¹ç®ä¸æå?</h4> </div> <div class="panel-section"> <table class="table table-bordered"> <tbody> <tr> <td>å¢éæå</td> <td> <div class="progress-warp"> <progress percent="member_stacked"></progress> </div> <ul class="inline-items clearfix"> <li><span class="number member-count"> </span><span class="text">{{team.member_count}} ä½æ´»å¨æå?</span> </li> <li><span class="number invite-count"> </span><span class="text">åé? {{team.invite_count}} ä¸ªéè¯?</span></li> <li><span class="number other-count"> </span><span class="text">{{sub.quota - team.member_count - team.invite_count}} ä¸ªå¯ç¨éé¢?</span> </li> </ul> </td> </tr> <tr> <td>å¢éé¡¹ç®</td> <td> <div class="progress-warp"> <progress percent="project_stacked"></progress> </div> <ul class="inline-items clearfix"> <li><span class="number active-count"> </span><span class="text">{{team.active_count}} ä¸ªæ´»å¨é¡¹ç?</span></li> <li><span class="number archived-count"> </span><span class="text">{{team.archived_count}} ä¸ªå½æ¡£é¡¹ç?</span></li> </ul> </td> </tr> </tbody> </table> </div> </div> </dd> </dl> </div> </div> </div> </div>')
}]),angular.module("/ycjs/tpl/team/team_admin_tabs.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_tabs.html",'<ul class="tabs"> <li> <a ng-class="{true: \'active\'}[current_menu == \'summary\']" href="/teams/{{team_id}}/admin/summary"> æè¦ </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'basic\']" href="/teams/{{team_id}}/admin/basic"> åºæ¬è®¾ç½® </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'members\']" href="/teams/{{team_id}}/admin/members"> æåç®¡ç </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'projects\']" href="/teams/{{team_id}}/admin/projects"> é¡¹ç®ç®¡ç </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'security\']" href="/teams/{{team_id}}/admin/security"> å®å¨æ¥å¿ </a> </li> <li> <a ng-class="{true: \'active\'}[current_menu == \'consultant\']" href="/teams/{{team_id}}/admin/consultant"> ä¸å±é¡¾é® </a> </li> </ul>')}]),angular.module("/ycjs/tpl/team/team_admin_upgrade.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_admin_upgrade.html",'<div class="layout_content"> <div class="layout_content_main no_sidebar height-noheader" wt-scroll> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-cogs mr_10"></i>å¢éè®¾ç½®</h3> <span class="color_gray ml_15">{{team.name}}</span> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="center-panel-container"> <dl class="frame" data-minheight="160"> <dt> <ng-include src="\'/ycjs/tpl/team/team_admin_tabs.html\'"></ng-include> </dt> <dd> <div class="part-loading mt_20" data-ng-hide="part_loading_done"></div> <div class="panel-section" data-ng-show="part_loading_done"> <div class="center-box normal-box"> <i class="center-box-icon icon-briefcase"></i> <h5>åçº§å¢éå°åä¸ç</h5> <input wt-enter="js_upgrade_team()" wt-focus-event="js_team_quota_focus()" ng-model="team_quota" type="text" class="form-control" placeholder="è¾å¥å¢éæåäººæ°"/> <p class="alert alert-danger" data-ng-show="upgrade_error.length > 0"> <i class="icon-remove-sign"></i> {{upgrade_error}} </p> <button class="btn btn-success btn-block" ng-click="js_upgrade_team()" data-loading-text="æ­£å¨åçº§..." loading-status="is_upgrading">é©¬ä¸åçº§ </button> <span class="tips">å¦éå¸®å©ï¼è¯·æ¨æ 400-805-6966 èç³»æä»¬</span> </div> </div> </dd> </dl> </div> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_mask_panel.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_mask_panel.html",'<div class="mask-panel" ng-show="team.edition==1 || team.edition==3" ng-cloak> <i class="icon-briefcase"></i><br/> <span>åä¸çå¢éæå¯äº«åæ­¤åè½</span><br/><br/> <a href="/teams/{{team_id}}/upgrade" class="btn btn-danger btn-lg">åçº§å°åä¸ç</a> </div>')}]),angular.module("/ycjs/tpl/team/team_member_invite.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_member_invite.html",'<div class="layout_content height-noheader" ng-hide="permission == 64"> <div class="layout_content_main no_sidebar"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-sitemap mr_10"></i>{{current_team.name}}</h3> </div> <div class="main"> </div> </div> </div> <div class="height-nonav" wt-scroll> <div class="main-content" data-ng-show="global.loading_done"> <dl class="frame" data-minheight="160"> <dt> <span class="title">éè¯·æå?</span> <ul class="tabs"> </ul> </dt> <dd> <form class="form-horizontal" role="form" name="invite_member_form" novalidate wt-form-validate="{blurTrig:false,showMsg:false}" wt-enter="js_invite_enter($event,invite_member_form)"> <div class="panel-section"> <div class="section-header"> <h4>è¾å¥æåé®ç®±</h4> </div> <div class="section-body pl_20"> <div ng-repeat="member in invite_members"> <div class="form-group"> <div class="col-xs-8"> <span ng-show="false">{{member.index = $index}}</span> <div class="input-group"> <input type="email" class="form-control col-xs-3" ui-event="{ focus : \'js_email_focus(invite_member_form)\' }" placeholder="è¾å¥é®ç®±å°å" ng-model="member.email" name="member_email" type="email"> <div class="input-group-btn"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"> {{member.role | role}} <span class="caret"></span> </button> <ul class="dropdown-menu pull-right" role="menu"> <li ng-repeat="r in invite_member_roles"> <a href="javascript:;" ng-click="member.role = r.role">{{r.name}}</a> </li> </ul> </div> </div> </div> <span ng-show="invite_members.length > 1" class="delete col-xs-2" style="line-height:33px;"> <a href="javascript:;" ng-click="js_delete_member($event,member)">å é¤</a> </span> </div> </div> <a href="javascript:;" class="btn" ng-click="js_add_invite_member()">åæ·»å ä¸ä¸?</a> <br/> <br/> </div> </div> <div class="panel-section"> <div class="section-header"> <h4>è¯´ç¹ä»ä¹?</h4> </div> <div class="clearfix ml_15"> <div class="col-xs-8 pl_0"> <textarea class="message form-control help-block" rows="4" ng-init="invite_message=\'Worktileæ¯ä¸ä¸ªç®åå¥½ç¨çå¢éååå·¥å·ï¼éè¿å®å¯ä»¥å¸®å©æä»¬å¢éæé«æçï¼æ ç¼æ²éãèµæºå±äº«åå¸®å©è®°å½ãå¤§å®¶èµ¶å¿«å å¥å§ã\'" ng-model="invite_message"> </textarea> </div> </div> <div class="alert alert-danger ml_15 mt_12 mb_0 w_678" ng-show="invite_member_form.$errors.length > 0"> <i class="icon-remove-sign"></i> <span ng-bind-html-unsafe="invite_member_form.$errors[0]"></span> </div> </div> <div class="panel-section ml_15"> <div class="section-body"> <button ng-click="js_invite_members(invite_member_form)" type="button" class="btn btn-success mr_15" data-loading-text="åéä¸­..." loading-status="is_sending"> åééè¯? </button> <button ng-click="js_cancel_invite()" class="btn btn-cancel">åæ¶</button> </div> </div> </form> </dd> </dl> </div> </div> </div> </div> <ng-include src="\'/ycjs/tpl/team/team_not_found.html\'"></ng-include> ')}]),angular.module("/ycjs/tpl/team/team_not_found.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_not_found.html",'<div class="layout_content prj_panel" ng-show="permission == 64"> <div class="layout_content_main no_sidebar"> <dl class="frame" data-minheight="90"> <dt> <span class="title">åºéå?</span> </dt> <dd> <div class="error-panel"> <i class="icon-sitemap"></i><br/> <span>å¢éä¸å­å¨æèä½ ä¸æ¯å½åå¢éæå</span><br/> <a class="btn btn-danger" href="/account/teams">ç®¡çæçå¢é</a> </div> </dd> </dl> </div> </div>')}]),angular.module("/ycjs/tpl/team/team_setting.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/team/team_setting.html",'<div class="layout_content" ng-hide="permission == 64"> <div class="layout_content_main no_sidebar height-noheader"> <div class="mod_navbar"> <div class="mod_warp"> <div class="title"> <h3><i class="icon-sitemap mr_10"></i>{{team.name}}</h3> </div> <div class="main"> <div class="pull-right"> </div> </div> </div> </div> <div class="rightpanel-wrapper height-nonav" wt-scroll> <div class="center-panel-container" data-ng-show="global.loading_done"> <dl class="frame" data-minheight="160"> <dt> <span class="title">éåºå¢é?</span> </dt> <dd> <div class="single-panel-section"> <div class="single-panel-section-content"> <form class="wt-form" name="quit_team_form" wt-form-validate="{blurTrig:false,showMsg:false}" style="margin:0"> <div class="form-group"> è¯¥æä½ä¸å¯æ¤éï¼éåºå¢éåï¼æ¨å°ä¸è½è®¿é®è¯¥å¢éçä¸åæ°æ®ï¼è¯·è°¨ææä½ï¼è¾å¥å¢éå®æ´åç§°ç¡®è®¤ã? </div> <div class="form-group alert alert-warning" data-ng-show="unique_admin_prjs.length > 0"> æ¨å¨å½åå¢éä¸­æ{{unique_admin_prjs.length}}ä¸ªé¡¹ç®æ¯å¯ä¸è´è´£äººï¼å¦ææ¨éåºå½åå¢éï¼è¿äºé¡¹ç®å°æ²¡æè´è´£äººã? </div> <div class="form-group"> <input name="quit_team_input_name" type="text" class="form-control w_360 help-block" ng-model="temp_name" placeholder="è¾å¥å¢éå®æ´åç§°" wt-enter="js_quit_team(quit_team_form,name, temp_name)"> </div> <div class="form-group"> <button class="btn btn-danger float_left" ng-disabled="temp_name != name" wt-form-submit="js_quit_team(quit_team_form,name, temp_name)" data-loading-text="éåºä¸­..." loading-status="is_quiting">ç¡®è®¤å¹¶éåºå¢é? </button> </div> </form> </div> </div> </dd> </dl> </div> </div> </div> </div> <ng-include src="\'/ycjs/tpl/team/team_not_found.html\'"></ng-include>')}]),angular.module("/ycjs/tpl/user/help.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/user/help.html",'<div class="page_navbar"> <div class="page-navbar-warp"> <div class="title"> <h3><i class="icon-question-sign mr_10"></i>å¸®å©ä¸­å¿</h3> </div> </div> </div> <div class="content-support-panel help-panel height-nonav" wt-scroll> <div class="content-container"> <div class="content"> <div class="content-wrapper"> <div class="manual-list"> <div class="manual-item"> <a href="/guide" target="_blank"> <i class="icon-book"></i> <h4> ç¨æ·æå </h4> <span> ä»ä¹æ¯å¢éï¼å¦ä½éè¯·æåï¼æéå¦ä½æ§å¶ï¼ä¸åé®é¢é½è½å¨è¿éæ¾å°ç­æ¡ã? </span> </a> </div> <div class="manual-item"> <a href="/shortcuts" target="_blank"> <i class="icon-keyboard"></i> <h4> é®çå¿«æ·é? </h4> <span> é«æçå·¥ä½ï¼ä»ä½¿ç¨å¿«æ·é®å¼å§ãå¨ä»»ä½é¡µé¢ï¼æ¨åªè¦æï¼é®å³å¯æå¼å¿«æ·é®åè¡¨ã? </span> </a> </div> <div class="manual-item"> <a href="/videos" target="_blank"> <i class="icon-facetime-video"></i> <h4> å¸®å©è§é¢ </h4> <span> éè¿è§é¢å¿«éäºè§£å¦ä½ä½¿ç¨Worktileï¼åæ¬å¿«éå¥é¨ä»¥åWorktileçè¿é¶æå·? </span> </a> </div> <div class="manual-item"> <a href="/blog" target="_blank"> <i class="icon-rss"></i> <h4> å®æ¹åå®¢ </h4> <span> å¨è¿éä½ å¯ä»¥æ¾å°äº§åæ´æ°æ¥å¿ï¼ä½¿ç¨æå·§ï¼ç¨æ·æäºç­ç­ï¼ççåè¡ä»¬å¦ä½éè¿Worktileæåå·¥ä½æçã? </span> </a> </div> <div class="manual-item"> <a href="/mobile" target="_blank"> <i class="icon-mobile-phone icon-large"></i> <h4> ç§»å¨ç? </h4> <span> åæ¶æ¯æiPhoneçåAndroidçï¼è®©ååæ å¤ä¸å¨ï¼éæ¶éå°ä¸å¢éä¸èµ·å·¥ä½ã? </span> </a> </div> <div class="manual-item"> <a href="/feedback" target="_blank"> <i class="icon-comment"></i> <h4> å¨çº¿åé¦ </h4> <span> æåæ¹ä¹ï¼æ åå åï¼æ¬¢è¿æ¨éè¿å·¦ä¾§çèç³»æ¹å¼æå¨çº¿åé¦ä¸æä»¬èç³»ã? </span> </a> </div> </div> </div> </div> <div class="sidebar"> <div class="sidebar-widget"> <h4>å¾®ä¿¡å®¢æ</h4> <div class="contact-code"> <img src="/img/index/contact-code.png?ver=<%-config.version%>"> </div> </div> <div class="sidebar-widget"> <h4>æ¯æ</h4> <ul> <li> <i class="icon-weibo"></i> <a href="http://weibo.com/worktile"> å¾®åï¼@Worktile </a> </li> <li> <i class="icon-envelope-alt"></i> <a href="mailto:support@worktile.com"> é®ç®±ï¼support@worktile.com </a> </li> <li> <i class="icon-phone"></i> <a href="javascript:;"> çµè¯ï¼?400-805-6966 </a> </li> <li> <i class="icon-linux"></i> <a href="javascript:;"> QQç¾¤ï¼110257147 </a> </li> </ul> </div> </div> </div> </div>')}]),angular.module("/ycjs/tpl/user/pop_user_setting.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/user/pop_user_setting.html",'<div class="popbox-header"> <button class="cancel icon-remove" ng-click="js_close()"></button> <h3>å¸æ·</h3> </div> <div class="popbox-avatar"> <div class="avatar-body"> <div class="clearfix"> <wt-avatar member="global.me" size="56" wt-disable-drag></wt-avatar> <div class="avatar-right"> <h4 class="avatar-heading help-inline mr_15">{{global.me.display_name}}</h4> <span class="help-inline color_gray">@{{global.me.name}}</span> <p> <span class="help-inline">{{global.me.email}}</span> </p> </div> </div> <ul class="popbox-menu" style="margin-top: 15px;"> <li class="divider"></li> <li><a href="/account/settings"><i class="icon-user mr_5"></i>å¸æ·è®¾ç½®</a></li> <li><a href="/account/teams"><i class="icon-sitemap mr_5"></i>å¢éç®¡ç</a></li> <li class="divider"></li> <li><a href="/share"><i class="icon-thumbs-up-alt mr_5"></i>æ¨èç»å¥½å?</a></li> <li><a href="javascript:;" ng-click="goto_shortcuts()"><i class="icon-keyboard mr_5"></i>é®çå¿«æ·é?</a></li> <li><a href="/help"><i class="icon-question-sign mr_5"></i>å¸®å©ä¸­å¿</a></li> </ul> </div> <div class="avatar-footer"> <button ng-click="js_user_logout()" class="btn btn-danger">éå?</button> </div> </div> ')}]),angular.module("/ycjs/tpl/user/share.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/user/share.html",' <div class="single-panel height-noheader" wt-scroll data-scrollnoheight="1"> <div class="share-panel"> <br/><br/> <h3 class="mb_100">æ¨è <span>Worktile</span> ç»ä½ çå°ä¼ä¼´ä»?</h3> <div id="share-wohoo"></div> <div class="share-section weixin-share"> <h4>å¾®ä¿¡åäº«</h4> <div> <p>ç¨å¾®ä¿¡æ«æå³ä¾§äºç»´ç  <br/> åäº«å°æåå</p></div> </div> <div class="share-section social-share"> <h4>å¾®ååäº«</h4> <div> <a target="_blank" class="btn btn-danger btn-lg" href="http://v.t.sina.com.cn/share/share.php?appkey=worktile-appkey&title=Worktileæ¯ä¸æ¬¾ç®åå¥½ç¨çå¢éååãé¡¹ç®ç®¡çå·¥å·ï¼ä¸ºå¢éååèæé ï¼ä½¿ç¨å®å¯ä»¥æ¹ä¾¿çè¿è¡é¡¹ç®ç®¡çï¼æé«å¢éå·¥ä½æçï¼å¢éæåä¹é´æ ç¼æ²éï¼æ´ææä»¶å±äº«åå¨çº¿ææ¡£åä½ãäºè§£æ´å¤è¯·ç¹å» http://worktile.com @Worktile&pic=http://wt-all.oss-cn-hangzhou.aliyuncs.com/blog/worktile.jpg"> <i class="icon-weibo"></i> æ°æµªå¾®å </a> &nbsp; &nbsp; <a target="_blank" class="btn btn-primary btn-lg" href="http://share.v.t.qq.com/index.php?c=share&a=index&url=http://worktile.com&pic=http://wt-all.oss-cn-hangzhou.aliyuncs.com/blog/worktile.jpg&appkey=801421649&title=Worktileæ¯ä¸æ¬¾ç®åå¥½ç¨çå¢éååãé¡¹ç®ç®¡çå·¥å·ï¼ä¸ºå¢éååèæé ï¼ä½¿ç¨å®å¯ä»¥æ¹ä¾¿çè¿è¡é¡¹ç®ç®¡çï¼æé«å¢éå·¥ä½æçï¼å¢éæåä¹é´æ ç¼æ²éï¼æ´ææä»¶å±äº«åå¨çº¿ææ¡£åä½ãäºè§£æ´å¤è¯·ç¹å» http://worktile.com @Worktile"> <img src="/img/share/share-qqweibo-logo.png" width="25" height="25"/> è¾è®¯å¾®å </a> </div> </div> <div class="share-section mail-share"> <h4>åéé®ä»¶ç»ä½ çå°ä¼ä¼?</h4> <div class="pt_45 clearfix"> <form class="form-horizontal wt-form" role="form" name="share_friend_form" novalidate wt-form-validate="{blurTrig:false,showMsg:false}" wt-enter="js_invite_enter($event,invite_member_form)"> <div class="form-group"> <div class="col-xs-8"> <input type="email" required="" class="form-control col-xs-3" placeholder="è¾å¥é®ç®±å°å" ng-model="share_email" name="share_email" type="email"> </div> <div class="col-xs-4"> <button wt-form-submit="js_send_share_email(share_friend_form)" type="button" class="btn btn-success mr_15" data-loading-text="åéä¸­..." loading-status="is_sending"> åééè¯? </button> </div> </div> <dl> <dt> é®ä»¶é¢è§ </dt> <dd> <div class="col-xs-8 pl_0"> <textarea required="" class="message form-control help-block" rows="4" ng-model="share_desc" name="share_desc"> </textarea> </div> </dd> <dd> <div class="col-xs-8 pl_0"> <div class="alert alert-danger mt_12" ng-show="share_friend_form.$errors.length > 0"> <i class="icon-remove-sign"></i> <span ng-bind="share_friend_form.$errors[0]"></span> </div> </div> </dd> </dl> </form> </div> </div> </div> </div> ')}]),angular.module("/ycjs/tpl/user/user_profile.html",[]).run(["$templateCache",function(e){e.put("/ycjs/tpl/user/user_profile.html","")}]),angular.module("ui.date",[]).constant("uiDateConfig",{}).directive("uiDate",["uiDateConfig",function(e){"use strict";var t;return t={},angular.extend(t,e),{require:"?ngModel",link:function(t,n,i,a){var s=function(){return angular.extend({},e,t.$eval(i.uiDate))},o=function(){var e=!1,i=s();if(a){var o=i.onSelect||angular.noop;i.onSelect=function(i,s){t.$apply(function(){e=!0,a.$setViewValue(n.datepicker("getDate")),o(i,s),n.blur()})},i.beforeShow=function(){e=!0},i.onClose=function(){e=!1},n.on("blur",function(){e||t.$apply(function(){n.datepicker("setDate",n.datepicker("getDate")),a.$setViewValue(n.datepicker("getDate"))})}),a.$render=function(){var e=a.$viewValue;if(angular.isDefined(e)&&null!==e&&!angular.isDate(e))throw new Error("ng-Model value must be a Date object - currently it is a "+typeof e+" - use ui-date-format to convert it from a string");n.datepicker("setDate",e)}}n.datepicker("destroy"),n.datepicker(i),a&&a.$render()};t.$watch(s,o,!0)}}}]).constant("uiDateFormatConfig","").directive("uiDateFormat",["uiDateFormatConfig",function(e){var t={require:"ngModel",link:function(t,n,i,a){var s=i.uiDateFormat||e;s?(a.$formatters.push(function(e){return angular.isString(e)?jQuery.datepicker.parseDate(s,e):null}),a.$parsers.push(function(e){return e?jQuery.datepicker.formatDate(s,e):null})):(a.$formatters.push(function(e){return angular.isString(e)?new Date(e):null}),a.$parsers.push(function(e){return e?e.toISOString():null}))}};return t}]),angular.module("ui.calendar",[]).constant("uiCalendarConfig",{}).controller("uiCalendarCtrl",["$scope","$timeout",function(e,t){var n=1,i=1,a=e.eventSources,s=e.calendarWatchEvent?e.calendarWatchEvent:angular.noop,o=function(e){var n;return e&&(n=function(){var n=arguments;t(function(){e.apply(this,n)})}),n};this.eventsFingerprint=function(e){return e.__uiCalId||(e.__uiCalId=i++),""+e.__uiCalId+(e.id||"")+(e.title||"")+(e.url||"")+(+e.start||"")+(+e.end||"")+(e.allDay||"")+(e.className||"")+s(e)||""},this.sourcesFingerprint=function(e){return e.__id||(e.__id=n++)},this.allEvents=function(){for(var e=[],t=0,n=a.length;n>t;t++){var i=a[t];if(angular.isArray(i))e.push(i);else if(angular.isObject(i)&&angular.isArray(i.events)){var s={};for(var o in i)"_uiCalId"!==o&&"events"!==o&&(s[o]=i[o]);for(var r=0;i.events.length>r;r++)angular.extend(i.events[r],s);e.push(i.events)}}return Array.prototype.concat.apply([],e)},this.changeWatcher=function(e,t){var n,i=function(){for(var a,o,n=angular.isFunction(e)?e():e,i=[],r=0,l=n.length;l>r;r++)o=n[r],a=t(o),s[a]=o,i.push(a);return i},a=function(e,t){var a,s,n=[],i={};for(a=0,s=t.length;s>a;a++)i[t[a]]=!0;for(a=0,s=e.length;s>a;a++)i[e[a]]||n.push(e[a]);return n},s={},o=function(e,i){var o,r,l,c,d={},u=a(i,e);for(o=0,r=u.length;r>o;o++){var p=u[o];l=s[p],delete s[p];var f=t(l);f===p?n.onRemoved(l):(d[f]=p,n.onChanged(l))}var h=a(e,i);for(o=0,r=h.length;r>o;o++)c=h[o],l=s[c],d[c]||n.onAdded(l)};return n={subscribe:function(e,t){e.$watch(i,function(e,n){t&&t(e,n)===!1||o(e,n)},!0)},onAdded:angular.noop,onChanged:angular.noop,onRemoved:angular.noop}},this.getFullCalendarConfig=function(e,t){var n={};return angular.extend(n,t),angular.extend(n,e),angular.forEach(n,function(e,t){"function"==typeof e&&(n[t]=o(n[t]))}),n}}]).directive("uiCalendar",["uiCalendarConfig","$locale",function(e,t){var n=function(e){var t,n;t=[];for(n in e)t[n]=e[n];return t},i=t.DATETIME_FORMATS;return e=angular.extend({monthNames:n(i.MONTH),monthNamesShort:n(i.SHORTMONTH),dayNames:n(i.DAY),dayNamesShort:n(i.SHORTDAY)},e||{}),{restrict:"A",scope:{eventSources:"=ngModel",calendarWatchEvent:"&"},controller:"uiCalendarCtrl",link:function(t,n,i,a){function d(){var o,n=i.uiCalendar?t.$parent.$eval(i.uiCalendar):{};o=a.getFullCalendarConfig(n,e),c={eventSources:s},angular.extend(c,o);var r={};for(var l in c)"eventSources"!==l&&(r[l]=c[l]);return JSON.stringify(r)}var s=t.eventSources,o=!1,r=a.changeWatcher(s,a.sourcesFingerprint),l=a.changeWatcher(a.allEvents,a.eventsFingerprint),c=null;t.destroy=function(){t.calendar=i.calendar?t.$parent[i.calendar]=n.html(""):n.html("")},t.init=function(){t.calendar.fullCalendar(c)},r.onAdded=function(e){t.calendar.fullCalendar("addEventSource",e),o=!0},r.onRemoved=function(e){t.calendar.fullCalendar("removeEventSource",e),o=!0},l.onAdded=function(e){t.calendar.fullCalendar("renderEvent",e,!0)},l.onRemoved=function(e){t.calendar.fullCalendar("removeEvents",function(t){return t===e})},l.onChanged=function(e){t.calendar.fullCalendar("updateEvent",e)},r.subscribe(t),l.subscribe(t,function(){return o===!0?(o=!1,!1):void 0}),t.$watch(d,function(){t.destroy(),t.init()})}}}]),function(e){e.Jcrop=function(t,n){function l(e){return Math.round(e)+"px"}function c(e){return i.baseClass+"-"+e}function d(){return e.fx.step.hasOwnProperty("backgroundColor")}function u(t){var n=e(t).offset();return[n.left,n.top]}function p(e){return[e.pageX-a[0],e.pageY-a[1]]}function f(t){"object"!=typeof t&&(t={}),i=e.extend(i,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof i[t]&&(i[t]=function(){})})}function h(e,t,n){if(a=u(E),tt.setCursor("move"===e?e:e+"-resize"),"move"===e)return tt.activateHandlers(_(t),w,n);var i=Z.getFixed(),s=g(e),o=Z.getCorner(g(s));Z.setPressed(Z.getCorner(s)),Z.setCurrent(o),tt.activateHandlers(m(e,i),w,n)}function m(e,t){return function(n){if(i.aspectRatio)switch(e){case"e":n[1]=t.y+1;break;case"w":n[1]=t.y+1;break;case"n":n[0]=t.x+1;break;case"s":n[0]=t.x+1}else switch(e){case"e":n[1]=t.y2;break;case"w":n[1]=t.y2;break;case"n":n[0]=t.x2;break;case"s":n[0]=t.x2}Z.setCurrent(n),et.update()}}function _(e){var t=e;return nt.watchKeys(),function(e){Z.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,et.update()}}function g(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function v(e){return function(t){return i.disabled?!1:"move"!==e||i.allowMove?(a=u(E),X=!0,h(e,p(t)),t.stopPropagation(),t.preventDefault(),!1):!1}}function b(e,t,n){var i=e.width(),a=e.height();i>t&&t>0&&(i=t,a=t/e.width()*e.height()),a>n&&n>0&&(a=n,i=n/e.height()*e.width()),U=e.width()/i,B=e.height()/a,e.width(i).height(a)}function y(e){return{x:e.x*U,y:e.y*B,x2:e.x2*U,y2:e.y2*B,w:e.w*U,h:e.h*B}}function w(){var t=Z.getFixed();t.w>i.minSelect[0]&&t.h>i.minSelect[1]?(et.enableHandles(),et.done()):et.release(),tt.setCursor(i.allowSelect?"crosshair":"default")}function k(e){if(i.disabled)return!1;if(!i.allowSelect)return!1;X=!0,a=u(E),et.disableHandles(),tt.setCursor("crosshair");var t=p(e);return Z.setPressed(t),et.update(),tt.activateHandlers(x,w,"touch"===e.type.substring(0,5)),nt.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function x(e){Z.setCurrent(e),et.update()}function j(){var t=e("<div></div>").addClass(c("tracker"));return o&&t.css({opacity:0,backgroundColor:"white"}),t}function it(e){M.removeClass().addClass(c("holder")).addClass(e)}function at(e,t){function b(){window.setTimeout(y,u)}var n=e[0]/U,a=e[1]/B,s=e[2]/U,o=e[3]/B;if(!G){var r=Z.flipCoords(n,a,s,o),l=Z.getFixed(),c=[l.x,l.y,l.x2,l.y2],d=c,u=i.animationDelay,p=r[0]-c[0],f=r[1]-c[1],h=r[2]-c[2],m=r[3]-c[3],_=0,g=i.swingSpeed;n=d[0],a=d[1],s=d[2],o=d[3],et.animMode(!0);var y=function(){return function(){_+=(100-_)/g,d[0]=Math.round(n+_/100*p),d[1]=Math.round(a+_/100*f),d[2]=Math.round(s+_/100*h),d[3]=Math.round(o+_/100*m),_>=99.8&&(_=100),100>_?(ot(d),b()):(et.done(),et.animMode(!1),"function"==typeof t&&t.call(gt))}}();b()}}function st(e){ot([e[0]/U,e[1]/B,e[2]/U,e[3]/B]),i.onSelect.call(gt,y(Z.getFixed())),et.enableHandles()}function ot(e){Z.setPressed([e[0],e[1]]),Z.setCurrent([e[2],e[3]]),et.update()}function rt(){return y(Z.getFixed())}function lt(){return Z.getFixed()}function ct(e){f(e),_t()}function dt(){i.disabled=!0,et.disableHandles(),et.setCursor("default"),tt.setCursor("default")}function ut(){i.disabled=!1,_t()}function pt(){et.done(),tt.activateHandlers(null,null)}function ft(){M.remove(),C.show(),C.css("visibility","visible"),e(t).removeData("Jcrop")}function ht(e,t){et.release(),dt();var n=new Image;n.onload=function(){var a=n.width,s=n.height,o=i.boxWidth,r=i.boxHeight;E.width(a).height(s),E.attr("src",e),P.attr("src",e),b(E,o,r),T=E.width(),z=E.height(),P.width(T).height(z),N.width(T+2*F).height(z+2*F),M.width(T).height(z),J.resize(T,z),ut(),"function"==typeof t&&t.call(gt)},n.src=e}function mt(e,t,n){var a=t||i.bgColor;i.bgFade&&d()&&i.fadeTime&&!n?e.animate({backgroundColor:a},{queue:!1,duration:i.fadeTime}):e.css("backgroundColor",a)}function _t(e){i.allowResize?e?et.enableOnly():et.enableHandles():et.disableHandles(),tt.setCursor(i.allowSelect?"crosshair":"default"),et.setCursor(i.allowMove?"move":"default"),i.hasOwnProperty("trueSize")&&(U=i.trueSize[0]/T,B=i.trueSize[1]/z),i.hasOwnProperty("setSelect")&&(st(i.setSelect),et.done(),delete i.setSelect),J.refresh(),i.bgColor!=H&&(mt(i.shade?J.getShades():M,i.shade?i.shadeColor||i.bgColor:i.bgColor),H=i.bgColor),L!=i.bgOpacity&&(L=i.bgOpacity,i.shade?J.refresh():et.setBgOpacity(L)),R=i.maxSize[0]||0,q=i.maxSize[1]||0,W=i.minSize[0]||0,Y=i.minSize[1]||0,i.hasOwnProperty("outerImage")&&(E.attr("src",i.outerImage),delete i.outerImage),et.refresh()}var a,i=e.extend({},e.Jcrop.defaults),s=navigator.userAgent.toLowerCase(),o=/msie/.test(s),r=/msie [1-6]\./.test(s);"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof n&&(n={}),f(n);var $={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},C=e(t),S=!0;if("IMG"==t.tagName){if(0!=C[0].width&&0!=C[0].height)C.width(C[0].width),C.height(C[0].height);else{var D=new Image;D.src=C[0].src,C.width(D.width),C.height(D.height)}var E=C.clone().removeAttr("id").css($).show();E.width(C.width()),E.height(C.height()),C.after(E).hide()}else E=C.css($).show(),S=!1,null===i.shade&&(i.shade=!0);b(E,i.boxWidth,i.boxHeight);var T=E.width(),z=E.height(),M=e("<div />").width(T).height(z).addClass(c("holder")).css({position:"relative",backgroundColor:i.bgColor}).insertAfter(C).append(E);i.addClass&&M.addClass(i.addClass);var P=e("<div />"),A=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),O=e("<div />").width("100%").height("100%").css("zIndex",320),I=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=Z.getFixed();i.onDblClick.call(gt,e)}).insertBefore(E).append(A,O);S&&(P=e("<img />").attr("src",E.attr("src")).css($).width(T).height(z),A.append(P)),r&&I.css({overflowY:"hidden"});var R,q,W,Y,U,B,X,G,K,F=i.boundary,N=j().width(T+2*F).height(z+2*F).css({position:"absolute",top:l(-F),left:l(-F),zIndex:290}).mousedown(k),H=i.bgColor,L=i.bgOpacity;a=u(E);var Q=function(){function e(){var i,e={},t=["touchstart","touchmove","touchend"],n=document.createElement("div");try{for(i=0;t.length>i;i++){var a=t[i];a="on"+a;var s=a in n;s||(n.setAttribute(a,"return;"),s="function"==typeof n[a]),e[t[i]]=s}return e.touchstart&&e.touchend&&e.touchmove}catch(o){return!1}}function t(){return i.touchSupport===!0||i.touchSupport===!1?i.touchSupport:e()}return{createDragger:function(e){return function(t){return i.disabled?!1:"move"!==e||i.allowMove?(a=u(E),X=!0,h(e,p(Q.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1):!1}},newSelection:function(e){return k(Q.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:t()}}(),Z=function(){function r(i){i=f(i),n=e=i[0],a=t=i[1]}function l(e){e=f(e),s=e[0]-n,o=e[1]-a,n=e[0],a=e[1]}function c(){return[s,o]}function d(i){var s=i[0],o=i[1];0>e+s&&(s-=s+e),0>t+o&&(o-=o+t),a+o>z&&(o+=z-(a+o)),n+s>T&&(s+=T-(n+s)),e+=s,n+=s,t+=o,a+=o}function u(e){var t=p();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function p(){if(!i.aspectRatio)return m();var g,v,b,y,s=i.aspectRatio,o=i.minSize[0]/U,r=i.maxSize[0]/U,l=i.maxSize[1]/B,c=n-e,d=a-t,u=Math.abs(c),p=Math.abs(d),f=u/p;return 0===r&&(r=10*T),0===l&&(l=10*z),s>f?(v=a,b=p*s,g=0>c?e-b:b+e,0>g?(g=0,y=Math.abs((g-e)/s),v=0>d?t-y:y+t):g>T&&(g=T,y=Math.abs((g-e)/s),v=0>d?t-y:y+t)):(g=n,y=u/s,v=0>d?t-y:t+y,0>v?(v=0,b=Math.abs((v-t)*s),g=0>c?e-b:b+e):v>z&&(v=z,b=Math.abs(v-t)*s,g=0>c?e-b:b+e)),g>e?(o>g-e?g=e+o:g-e>r&&(g=e+r),v=v>t?t+(g-e)/s:t-(g-e)/s):e>g&&(o>e-g?g=e-o:e-g>r&&(g=e-r),v=v>t?t+(e-g)/s:t-(e-g)/s),0>g?(e-=g,g=0):g>T&&(e-=g-T,g=T),0>v?(t-=v,v=0):v>z&&(t-=v-z,v=z),_(h(e,t,g,v))}function f(e){return 0>e[0]&&(e[0]=0),0>e[1]&&(e[1]=0),e[0]>T&&(e[0]=T),e[1]>z&&(e[1]=z),[Math.round(e[0]),Math.round(e[1])]}function h(e,t,n,i){var a=e,s=n,o=t,r=i;return e>n&&(a=n,s=e),t>i&&(o=i,r=t),[a,o,s,r]}function m(){var o,i=n-e,s=a-t;return R&&Math.abs(i)>R&&(n=i>0?e+R:e-R),q&&Math.abs(s)>q&&(a=s>0?t+q:t-q),Y/B&&Y/B>Math.abs(s)&&(a=s>0?t+Y/B:t-Y/B),W/U&&W/U>Math.abs(i)&&(n=i>0?e+W/U:e-W/U),0>e&&(n-=e,e-=e),0>t&&(a-=t,t-=t),0>n&&(e-=n,n-=n),0>a&&(t-=a,a-=a),n>T&&(o=n-T,e-=o,n-=o),a>z&&(o=a-z,t-=o,a-=o),e>T&&(o=e-z,a-=o,t-=o),t>z&&(o=t-z,a-=o,t-=o),_(h(e,t,n,a))}function _(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var s,o,e=0,t=0,n=0,a=0;return{flipCoords:h,setPressed:r,setCurrent:l,getOffset:c,moveOffset:d,getCorner:u,getFixed:p}}(),J=function(){function s(e,t){a.left.css({height:l(t)}),a.right.css({height:l(t)})}function o(){return r(Z.getFixed())}function r(e){a.top.css({left:l(e.x),width:l(e.w),height:l(e.y)}),a.bottom.css({top:l(e.y2),left:l(e.x),width:l(e.w),height:l(z-e.y2)}),a.right.css({left:l(e.x2),width:l(T-e.x2)}),a.left.css({width:l(e.x)})}function c(){return e("<div />").css({position:"absolute",backgroundColor:i.shadeColor||i.bgColor}).appendTo(n)}function d(){t||(t=!0,n.insertBefore(E),o(),et.setBgOpacity(1,0,1),P.hide(),u(i.shadeColor||i.bgColor,1),et.isAwake()?f(i.bgOpacity,1):f(1,1))}function u(e,t){mt(m(),e,t)}function p(){t&&(n.remove(),P.show(),t=!1,et.isAwake()?et.setBgOpacity(i.bgOpacity,1,1):(et.setBgOpacity(1,1,1),et.disableHandles()),mt(M,0,1))}function f(e,a){t&&(i.bgFade&&!a?n.animate({opacity:1-e},{queue:!1,duration:i.fadeTime}):n.css({opacity:1-e}))}function h(){i.shade?d():p(),et.isAwake()&&f(i.bgOpacity)}function m(){return n.children()}var t=!1,n=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),a={top:c(),left:c().height(z),right:c().height(z),bottom:c()};return{update:o,updateRaw:r,getShades:m,setBgColor:u,enable:d,disable:p,resize:s,refresh:h,opacity:f}}(),et=function(){function d(t){var n=e("<div />").css({position:"absolute",opacity:i.borderOpacity}).addClass(c(t));return A.append(n),n}function u(t,n){var i=e("<div />").mousedown(v(t)).css({cursor:t+"-resize",position:"absolute",zIndex:n}).addClass("ord-"+t);return Q.support&&i.bind("touchstart.jcrop",Q.createDragger(t)),O.append(i),i}function p(e){var t=i.handleSize,a=u(e,n++).css({opacity:i.handleOpacity}).addClass(c("handle"));return t&&a.width(t).height(t),a}function f(e){return u(e,n++).addClass("jcrop-dragbar")}function h(e){var t;for(t=0;e.length>t;t++)o[e[t]]=f(e[t])}function m(e){var t,n;for(n=0;e.length>n;n++){switch(e[n]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline"}a[e[n]]=d(t)}}function _(e){var t;for(t=0;e.length>t;t++)s[e[t]]=p(e[t])}function g(e,t){i.shade||P.css({top:l(-t),left:l(-e)}),I.css({top:l(t),left:l(e)})}function b(e,t){I.width(Math.round(e)).height(Math.round(t))}function w(){var e=Z.getFixed();Z.setPressed([e.x,e.y]),Z.setCurrent([e.x2,e.y2]),k()}function k(e){return t?x(e):void 0}function x(e){var n=Z.getFixed();b(n.w,n.h),g(n.x,n.y),i.shade&&J.updateRaw(n),t||C(),e?i.onSelect.call(gt,y(n)):i.onChange.call(gt,y(n))}function $(e,n,a){(t||n)&&(i.bgFade&&!a?E.animate({opacity:e},{queue:!1,duration:i.fadeTime}):E.css("opacity",e))}function C(){I.show(),i.shade?J.opacity(L):$(L,!0),t=!0}function S(){z(),I.hide(),i.shade?J.opacity(1):$(1),t=!1,i.onRelease.call(gt)}function D(){r&&O.show()}function T(){return r=!0,i.allowResize?(O.show(),!0):void 0}function z(){r=!1,O.hide()}function M(e){e?(G=!0,z()):(G=!1,T())}function F(){M(!1),w()}var t,n=370,a={},s={},o={},r=!1;i.dragEdges&&e.isArray(i.createDragbars)&&h(i.createDragbars),e.isArray(i.createHandles)&&_(i.createHandles),i.drawBorders&&e.isArray(i.createBorders)&&m(i.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var N=j().mousedown(v("move")).css({cursor:"move",position:"absolute",zIndex:360});return Q.support&&N.bind("touchstart.jcrop",Q.createDragger("move")),A.append(N),z(),{updateVisible:k,update:x,release:S,refresh:w,isAwake:function(){return t},setCursor:function(e){N.css("cursor",e)},enableHandles:T,enableOnly:function(){r=!0},showHandles:D,disableHandles:z,animMode:M,setBgOpacity:$,done:F}}(),tt=function(){function s(t){N.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",d).bind("touchend.jcrop",u):a&&e(document).bind("mousemove.jcrop",r).bind("mouseup.jcrop",l)}function o(){N.css({zIndex:290}),e(document).unbind(".jcrop")}function r(e){return t(p(e)),!1}function l(e){return e.preventDefault(),e.stopPropagation(),X&&(X=!1,n(p(e)),et.isAwake()&&i.onSelect.call(gt,y(Z.getFixed())),o(),t=function(){},n=function(){}),!1}function c(e,i,a){return X=!0,t=e,n=i,s(a),!1}function d(e){return t(p(Q.cfilter(e))),!1}function u(e){return l(Q.cfilter(e))}function f(e){N.css("cursor",e)}var t=function(){},n=function(){},a=i.trackDocument;return a||N.mousemove(r).mouseup(l).mouseout(l),E.before(N),{activateHandlers:c,setCursor:f}}(),nt=function(){function a(){i.keySupport&&(t.show(),t.focus())}function s(){t.hide()}function o(e,t,n){i.allowMove&&(Z.moveOffset([t,n]),et.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function l(e){if(e.ctrlKey||e.metaKey)return!0;K=e.shiftKey?!0:!1;var t=K?10:1;switch(e.keyCode){case 37:o(e,-t,0);break;case 39:o(e,t,0);break;case 38:o(e,0,-t);break;case 40:o(e,0,t);break;case 27:i.allowSelect&&et.release();break;case 9:return!0}return!1}var t=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),n=e("<div />").css({position:"absolute",overflow:"hidden"}).append(t);
return i.keySupport&&(t.keydown(l).blur(s),r||!i.fixedSupport?(t.css({position:"absolute",left:"-20px"}),n.append(t).insertBefore(E)):t.insertBefore(E)),{watchKeys:a}}();Q.support&&N.bind("touchstart.jcrop",Q.newSelection),O.hide(),_t(!0);var gt={setImage:ht,animateTo:at,setSelect:st,setOptions:ct,tellSelect:rt,tellScaled:lt,setClass:it,disable:dt,enable:ut,cancel:pt,release:et.release,destroy:ft,focus:nt.watchKeys,getBounds:function(){return[T*U,z*B]},getWidgetSize:function(){return[T,z]},getScaleFactor:function(){return[U,B]},getOptions:function(){return i},ui:{holder:M,selection:I}};return o&&M.bind("selectstart",function(){return!1}),C.data("Jcrop",gt),gt},e.fn.Jcrop=function(t,n){var i;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),i=e.Jcrop(this,t),e.isFunction(n)&&n.call(i)}):(e(this).css({display:"block",visibility:"hidden"}),i=e.Jcrop(this,t),e.isFunction(n)&&n.call(i))}),this},e.Jcrop.Loader=function(t,n,i){function o(){s.complete?(a.unbind(".jcloader"),e.isFunction(n)&&n.call(s)):window.setTimeout(o,50)}var a=e(t),s=a[0];a.bind("load.jcloader",o).bind("error.jcloader",function(){a.unbind(".jcloader"),e.isFunction(i)&&i.call(s)}),s.complete&&e.isFunction(n)&&(a.unbind(".jcloader"),n.call(s))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(e){"use strict";var t=function(e,n,i){var s,o,a=document.createElement("img");if(a.onerror=n,a.onload=function(){!o||i&&i.noRevoke||t.revokeObjectURL(o),n&&n(t.scale(a,i))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))s=o=t.createObjectURL(e),a._type=e.type;else{if("string"!=typeof e)return!1;s=e,i&&i.crossOrigin&&(a.crossOrigin=i.crossOrigin)}return s?(a.src=s,a):t.readFile(e,function(e){var t=e.target;t&&t.result?a.src=t.result:n&&n(e)})},n=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},t.transformCoordinates=function(){},t.getTransformedOptions=function(e){return e},t.renderImageToCanvas=function(e,t,n,i,a,s,o,r,l,c){return e.getContext("2d").drawImage(t,n,i,a,s,o,r,l,c),e},t.hasCanvasOption=function(e){return e.canvas||e.crop},t.scale=function(e,n){n=n||{};var c,d,u,p,f,h,m,_,g,i=document.createElement("canvas"),a=e.getContext||t.hasCanvasOption(n)&&i.getContext,s=e.naturalWidth||e.width,o=e.naturalHeight||e.height,r=s,l=o,v=function(){var e=Math.max((u||r)/r,(p||l)/l);e>1&&(r=Math.ceil(r*e),l=Math.ceil(l*e))},b=function(){var e=Math.min((c||r)/r,(d||l)/l);1>e&&(r=Math.ceil(r*e),l=Math.ceil(l*e))};return a&&(n=t.getTransformedOptions(n),m=n.left||0,_=n.top||0,n.sourceWidth?(f=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(m=s-f-n.right)):f=s-m-(n.right||0),n.sourceHeight?(h=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(_=o-h-n.bottom)):h=o-_-(n.bottom||0),r=f,l=h),c=n.maxWidth,d=n.maxHeight,u=n.minWidth,p=n.minHeight,a&&c&&d&&n.crop?(r=c,l=d,g=f/h-c/d,0>g?(h=d*f/c,void 0===n.top&&void 0===n.bottom&&(_=(o-h)/2)):g>0&&(f=c*h/d,void 0===n.left&&void 0===n.right&&(m=(s-f)/2))):((n.contain||n.cover)&&(u=c=c||u,p=d=d||p),n.cover?(b(),v()):(v(),b())),a?(i.width=r,i.height=l,t.transformCoordinates(i,n),t.renderImageToCanvas(i,e,m,_,f,h,0,0,r,l)):(e.width=r,e.height=l,e)},t.createObjectURL=function(e){return n?n.createObjectURL(e):!1},t.revokeObjectURL=function(e){return n?n.revokeObjectURL(e):!1},t.readFile=function(e,t,n){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,n=n||"readAsDataURL",i[n])return i[n](e),i}return!1},"function"==typeof define&&define.amd?define(function(){return t}):e.loadImage=t}(this),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,n,i){i=i||{};var a=this,s=i.maxMetaDataSize||262144,o={},r=!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice);(r||!e.readFile(e.blobSlice.call(t,0,s),function(t){var u,p,f,h,s=t.target.result,r=new DataView(s),l=2,c=r.byteLength-4,d=l;if(65496===r.getUint16(0)){for(;c>l&&(u=r.getUint16(l),u>=65504&&65519>=u||65534===u);){if(p=r.getUint16(l+2)+2,l+p>r.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(f=e.metaDataParsers.jpeg[u])for(h=0;f.length>h;h+=1)f[h].call(a,r,l,p,o,i);l+=p,d=l}!i.disableImageHead&&d>6&&(o.imageHead=s.slice?s.slice(0,d):new Uint8Array(s).subarray(0,d))}else console.log("Invalid JPEG file: Missing JPEG marker.");n(o)},"readAsArrayBuffer"))&&n(o)}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,n){var i,a,s;if(!n||t+n>e.byteLength)return console.log("Invalid Exif data: Invalid thumbnail data."),void 0;for(i=[],a=0;n>a;a+=1)s=e.getUint8(t+a),i.push((16>s?"0":"")+s.toString(16));return"data:image/jpeg,%"+i.join("%")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,n,i,a,s,o){var l,c,d,u,p,f,r=e.exifTagTypes[a];if(!r)return console.log("Invalid Exif data: Invalid tag type."),void 0;if(l=r.size*s,c=l>4?n+t.getUint32(i+8,o):i+8,c+l>t.byteLength)return console.log("Invalid Exif data: Invalid data offset."),void 0;if(1===s)return r.getValue(t,c,o);for(d=[],u=0;s>u;u+=1)d[u]=r.getValue(t,c+u*r.size,o);if(r.ascii){for(p="",u=0;d.length>u&&(f=d[u],"\0"!==f);u+=1)p+=f;return p}return d},e.parseExifTag=function(t,n,i,a,s){var o=t.getUint16(i,a);s.exif[o]=e.getExifValue(t,n,i,t.getUint16(i+2,a),t.getUint32(i+4,a),a)},e.parseExifTags=function(e,t,n,i,a){var s,o,r;if(n+6>e.byteLength)return console.log("Invalid Exif data: Invalid directory offset."),void 0;if(s=e.getUint16(n,i),o=n+2+12*s,o+4>e.byteLength)return console.log("Invalid Exif data: Invalid directory size."),void 0;for(r=0;s>r;r+=1)this.parseExifTag(e,t,n+2+12*r,i,a);return e.getUint32(o,i)},e.parseExifData=function(t,n,i,a,s){if(!s.disableExif){var r,l,c,o=n+10;if(1165519206===t.getUint32(n+4)){if(o+8>t.byteLength)return console.log("Invalid Exif data: Invalid segment size."),void 0;if(0!==t.getUint16(n+8))return console.log("Invalid Exif data: Missing byte alignment offset."),void 0;switch(t.getUint16(o)){case 18761:r=!0;break;case 19789:r=!1;break;default:return console.log("Invalid Exif data: Invalid byte alignment marker."),void 0}if(42!==t.getUint16(o+2,r))return console.log("Invalid Exif data: Missing TIFF marker."),void 0;l=t.getUint32(o+4,r),a.exif=new e.ExifMap,l=e.parseExifTags(t,o,o+l,r,a),l&&!s.disableExifThumbnail&&(c={exif:{}},l=e.parseExifTags(t,o,o+l,r,c),c.exif[513]&&(a.exif.Thumbnail=e.getExifThumbnail(t,o+c.exif[513],c.exif[514]))),a.exif[34665]&&!s.disableExifSub&&e.parseExifTags(t,o,o+a.exif[34665],r,a),a.exif[34853]&&!s.disableExifGps&&e.parseExifTags(t,o,o+a.exif[34853],r,a)}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],e):e(window.loadImage)}(function(e){"use strict";var t,n,i;e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},t=e.ExifMap.prototype.tags,n=e.ExifMap.prototype.map;for(i in t)t.hasOwnProperty(i)&&(n[t[i]]=i);e.ExifMap.prototype.getAll=function(){var n,i,e={};for(n in this)this.hasOwnProperty(n)&&(i=t[n],i&&(e[i]=this.getText(i)));return e}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(e){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,n;return e.width*e.height>1048576?(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,-e.width+1,0),0===n.getImageData(0,0,1,1).data[3]):!1},e.detectVerticalSquash=function(e,t){var s,o,r,l,c,n=e.naturalHeight||e.height,i=document.createElement("canvas"),a=i.getContext("2d");for(t&&(n/=2),i.width=1,i.height=n,a.drawImage(e,0,0),s=a.getImageData(0,0,1,n).data,o=0,r=n,l=n;l>o;)c=s[4*(l-1)+3],0===c?r=l:o=l,l=r+o>>1;return l/n||1},e.renderImageToCanvas=function(n,i,a,s,o,r,l,c,d,u){if("image/jpeg"===i._type){var _,g,v,b,p=n.getContext("2d"),f=document.createElement("canvas"),h=1024,m=f.getContext("2d");if(f.width=h,f.height=h,p.save(),_=e.detectSubsampling(i),_&&(a/=2,s/=2,o/=2,r/=2),g=e.detectVerticalSquash(i,_),_||1!==g){for(s*=g,d=Math.ceil(h*d/o),u=Math.ceil(h*u/r/g),c=0,b=0;r>b;){for(l=0,v=0;o>v;)m.clearRect(0,0,h,h),m.drawImage(i,a,s,o,r,-v,-b,o,r),p.drawImage(f,0,0,h,h,l,c,d,u),v+=h,l+=d;b+=h,c+=u}return p.restore(),n}}return t(n,i,a,s,o,r,l,c,d,u)}}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=e.hasCanvasOption;e.hasCanvasOption=function(e){return t(e)||e.orientation},e.transformCoordinates=function(e,t){var n=e.getContext("2d"),i=e.width,a=e.height,s=t.orientation;if(s)switch(s>4&&(e.width=a,e.height=i),s){case 2:n.translate(i,0),n.scale(-1,1);break;case 3:n.translate(i,a),n.rotate(Math.PI);break;case 4:n.translate(0,a),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-a);break;case 7:n.rotate(.5*Math.PI),n.translate(i,-a),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-i,0)}},e.getTransformedOptions=function(e){if(!e.orientation||1===e.orientation)return e;var n,t={};for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);switch(e.orientation){case 2:t.left=e.right,t.right=e.left;break;case 3:t.left=e.right,t.top=e.bottom,t.right=e.left,t.bottom=e.top;break;case 4:t.top=e.bottom,t.bottom=e.top;break;case 5:t.left=e.top,t.top=e.left,t.right=e.bottom,t.bottom=e.right;break;case 6:t.left=e.top,t.top=e.right,t.right=e.bottom,t.bottom=e.left;break;case 7:t.left=e.bottom,t.top=e.right,t.right=e.top,t.bottom=e.left;break;case 8:t.left=e.bottom,t.top=e.left,t.right=e.top,t.bottom=e.right}return e.orientation>4&&(t.maxWidth=e.maxHeight,t.maxHeight=e.maxWidth,t.minWidth=e.minHeight,t.minHeight=e.minWidth,t.sourceWidth=e.sourceHeight,t.sourceHeight=e.sourceWidth),t}}),function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),i=n&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),a=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,s=(n||a)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,s,o,r,l,c;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),s=new ArrayBuffer(t.length),o=new Uint8Array(s),r=0;t.length>r;r+=1)o[r]=t.charCodeAt(r);return l=e.split(",")[0].split(":")[1].split(";")[0],n?new Blob([i?o:s],{type:l}):(c=new a,c.append(s),c.getBlob(l))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,n,i){i&&t.toDataURL&&s?e(s(this.toDataURL(n,i))):e(this.mozGetAsFile("blob",n))}:t.toDataURL&&s&&(t.toBlob=function(e,t,n){e(s(this.toDataURL(t,n)))})),"function"==typeof define&&define.amd?define(function(){return s}):e.dataURLtoBlob=s}(this),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var a,s,o,i=n.initialIframeSrc||"javascript:false;";return{send:function(r,l){a=e('<form style="display:none;"></form>'),a.attr("accept-charset",n.formAcceptCharset),o=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+o+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+o+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+o+"_method=PATCH",n.type="POST"),t+=1,s=e('<iframe src="'+i+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(n.paramName)?n.paramName:[n.paramName];s.unbind("load").bind("load",function(){var t;try{if(t=s.contents(),!t.length||!t[0].firstChild)throw new Error}catch(n){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+i+'"></iframe>').appendTo(a),window.setTimeout(function(){a.remove()},0)}),a.prop("target",s.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(a)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",o[t]||n.paramName)}),a.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),a.submit(),t&&t.length&&n.fileInput.each(function(n,i){var a=e(t[n]);e(i).prop("name",a.prop("name")),a.replaceWith(i)})}),a.append(s).appendTo(document.body)},abort:function(){s&&s.unbind("load").prop("src",i),a&&a.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){(n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=8*(t-this.loaded)*(1e3/i),this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(e,t){if(e.lengthComputable){var i,n=Date.now?Date.now():(new Date).getTime();if(t._time&&t.progressInterval&&t.progressInterval>n-t._time&&e.loaded!==e.total)return;t._time=n,i=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0),this._progress.loaded+=i-t._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(n,this._progress.loaded,t.bitrateInterval),t._progress.loaded=t.loaded=i,t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(n,i,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)}),t.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,n=this,a=t.files[0],s=t.multipart||!e.support.xhrFileUpload,o=t.paramName[0];t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),s&&!t.blob&&this._isInstanceOf("File",a)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(a.name)+'"'),s?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:o,value:t.blob}):e.each(t.files,function(e,n){i.push({name:t.paramName[e]||o,value:n})})):(n._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(o,t.blob,a.name):e.each(t.files,function(e,a){(n._isInstanceOf("File",a)||n._isInstanceOf("Blob",a))&&i.append(t.paramName[e]||o,a,a.name)})),t.data=i):(t.contentType=a.type,t.data=t.blob||a),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",a=(t.prop("files")||[1]).length;a;)i.push(n),a-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var a=e.Deferred(),s=a.promise();return n=n||this.options.context||s,t===!0?a.resolveWith(n,i):t===!1&&a.rejectWith(n,i),s.abort=a.promise,this._enhancePromise(s)},_addConvenienceMethods:function(t,n){var i=this,a=function(t){return e.Deferred().resolveWith(i,[t]).promise()};n.process=function(e,t){return(e||t)&&(n._processQueue=this._processQueue=(this._processQueue||a(this)).pipe(e,t)),this._processQueue||a(this)},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=i._trigger("submit",t,this)!==!1&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():i._getXHRPromise()},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var u,p,i=this,a=t.files[0],s=a.size,o=t.uploadedBytes,r=t.maxChunkSize||s,l=this._blobSlice,c=e.Deferred(),d=c.promise();return this._isXHRUpload(t)&&l&&(o||s>r)&&!t.data?n?!0:o>=s?(a.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",a.error])):(p=function(){var n=e.extend({},t),d=n._progress.loaded;n.blob=l.call(a,o,o+r,a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+o+"-"+(o+n.chunkSize-1)+"/"+s,i._initXHRData(n),i._initProgressListener(n),u=(i._trigger("chunksend",null,n)!==!1&&e.ajax(n)||i._getXHRPromise(!1,n.context)).done(function(a,r,l){o=i._getUploadedBytes(l)||o+n.chunkSize,d+n.chunkSize-n._progress.loaded&&i._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o-n.uploadedBytes,total:o-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=o,n.result=a,n.textStatus=r,n.jqXHR=l,i._trigger("chunkdone",null,n),i._trigger("chunkalways",null,n),s>o?p():c.resolveWith(n.context,[a,r,l])}).fail(function(e,t,a){n.jqXHR=e,n.textStatus=t,n.errorThrown=a,i._trigger("chunkfail",null,n),i._trigger("chunkalways",null,n),c.rejectWith(n.context,[e,t,a])})},this._enhancePromise(d),d.abort=function(){return u.abort()},p(),d):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,i,a){var s=a._progress.total,o=a._response;s>a._progress.loaded&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),a),o.result=a.result=t,o.textStatus=a.textStatus=n,o.jqXHR=a.jqXHR=i,this._trigger("done",null,a)},_onFail:function(e,t,n,i){var a=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),a.jqXHR=i.jqXHR=e,a.textStatus=i.textStatus=t,a.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(e,t,n,i){this._trigger("always",null,i)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var a,s,o,r,i=this,l=i._getAJAXSettings(n),c=function(){return i._sending+=1,l._bitrateTimer=new i._BitrateTimer,a=a||((s||i._trigger("send",t,l)===!1)&&i._getXHRPromise(!1,l.context,s)||i._chunkedUpload(l)||e.ajax(l)).done(function(e,t,n){i._onDone(e,t,n,l)}).fail(function(e,t,n){i._onFail(e,t,n,l)}).always(function(e,t,n){if(i._onAlways(e,t,n,l),i._sending-=1,i._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>i._sending)for(var a=i._slots.shift();a;){if("pending"===i._getDeferredState(a)){a.resolve();break}a=i._slots.shift()}0===i._active&&i._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this._sending>=this.options.limitConcurrentUploads?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),r=o.pipe(c)):(this._sequence=this._sequence.pipe(c,c),r=this._sequence),r.abort=function(){return s=[,"abort","abort"],a?a.abort():(o&&o.rejectWith(l.context,s),c())},this._enhancePromise(r)):c()},_onAdd:function(t,n){var l,c,d,u,i=this,a=!0,s=e.extend({},this.options,n),o=s.limitMultiFileUploads,r=this._getParamName(s);if((s.singleFileUploads||o)&&this._isXHRUpload(s))if(!s.singleFileUploads&&o)for(d=[],l=[],u=0;n.files.length>u;u+=o)d.push(n.files.slice(u,u+o)),c=r.slice(u,u+o),c.length||(c=r),l.push(c);
else l=r;else d=[n.files],l=[r];return n.originalFiles=n.files,e.each(d||n.files,function(s,o){var r=e.extend({},n);return r.files=d?o:[o],r.paramName=l[s],i._initResponseObject(r),i._initProgressObject(r),i._addConvenienceMethods(t,r),a=i._trigger("add",t,r)}),a},_replaceFileInput:function(t){var n=t.clone(!0);e("<form></form>").append(n)[0].reset(),t.after(n).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,i){return i===t[0]?n[0]:i}),t[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,n){var o,i=this,a=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),a.resolve([e])};return n=n||"",t.isFile?t._file?(t._file.relativePath=n,a.resolve(t._file)):t.file(function(e){e.relativePath=n,a.resolve(e)},s):t.isDirectory?(o=t.createReader(),o.readEntries(function(e){i._handleFileTreeEntries(e,n+t.name+"/").done(function(e){a.resolve(e)}).fail(s)},s)):a.resolve([]),a.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,a,n=t.prop("webkitEntries")||t.prop("entries");if(n&&n.length)return this._handleFileTreeEntries(n);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(a=t.prop("value"),!a)return e.Deferred().resolve([]).promise();i=[{name:a.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(e){i.files=e,n.options.replaceFileInput&&n._replaceFileInput(i.fileInput),n._trigger("change",t,i)!==!1&&n._onAdd(t,i)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};return n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)}),this._trigger("paste",t,i)===!1||this._onAdd(t,i)===!1)?!1:void 0},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var t=this,n=e.dataTransfer,i={};n&&n.files&&n.files.length&&(e.preventDefault(),this._getDroppedFiles(n).always(function(n){i.files=n,t._trigger("drop",e,i)!==!1&&t._onAdd(e,i)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=t.dataTransfer;if(n){if(this._trigger("dragover",t)===!1)return!1;-1!==e.inArray("Files",n.types)&&(n.dropEffect="copy",t.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var i=-1!==e.inArray(t,this._specialOptions);i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),function(e,i){t._isRegExpOption(e,i)&&(i=t._getRegExp(i)),n[e]=i})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var s,o,n=this,i=e.Deferred(),a=i.promise();return a.abort=function(){return o=!0,s?s.abort():(i.reject(null,"abort","abort"),a)},this._getFileInputFiles(t.fileInput).always(function(e){if(!o){if(!e.length)return i.reject(),void 0;t.files=e,s=n._onSend(null,t).then(function(e,t,n){i.resolve(e,t,n)},function(e,t,n){i.reject(e,t,n)})}}),this._enhancePromise(a)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function(e){"use strict";var t=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(n,i){var a=e(this);i.process(function(){return a.fileupload("process",i)}),t.call(this,n,i)}},processActions:{},_processFile:function(t){var n=this,i=e.Deferred().resolveWith(n,[t]),a=i.promise();return this._trigger("process",null,t),e.each(t.processQueue,function(e,t){var i=function(e){return n.processActions[t.action].call(n,e,t)};a=a.pipe(i,t.always&&i)}),a.done(function(){n._trigger("processdone",null,t),n._trigger("processalways",null,t)}).fail(function(){n._trigger("processfail",null,t),n._trigger("processalways",null,t)}),a},_transformProcessQueue:function(t){var n=[];e.each(t.processQueue,function(){var i={},a=this.action,s=this.prefix===!0?a:this.prefix;e.each(this,function(n,a){i[n]="string"===e.type(a)&&"@"===a.charAt(0)?t[a.slice(1)||(s?s+n.charAt(0).toUpperCase()+n.slice(1):n)]:a}),n.push(i)}),t.processQueue=n},processing:function(){return this._processing},process:function(t){var n=this,i=e.extend({},this.options,t);return i.processQueue&&i.processQueue.length&&(this._transformProcessQueue(i),0===this._processing&&this._trigger("processstart"),e.each(t.files,function(t){var a=t?e.extend({},i):i,s=function(){return n._processFile(a)};a.index=t,n._processing+=1,n._processingQueue=n._processingQueue.pipe(s,s).always(function(){n._processing-=1,0===n._processing&&n._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],e):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",disabled:"@disableImageResize"},{action:"saveImage",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(n,i){if(i.disabled)return n;var a=this,s=n.files[n.index],o=e.Deferred();return"number"===e.type(i.maxFileSize)&&s.size>i.maxFileSize||i.fileTypes&&!i.fileTypes.test(s.type)||!t(s,function(e){e.src&&(n.img=e),o.resolveWith(a,[n])},i)?n:o.promise()},resizeImage:function(n,i){if(i.disabled)return n;var r,l,c,a=this,s=e.Deferred(),o=function(e){n[e.getContext?"canvas":"img"]=e,s.resolveWith(a,[n])};return i=e.extend({canvas:!0},i),n.exif&&(i.orientation===!0&&(i.orientation=n.exif.get("Orientation")),i.thumbnail&&(r=n.exif.get("Thumbnail")))?(t(r,o,i),s.promise()):(l=i.canvas&&n.canvas||n.img,l&&(c=t.scale(l,i),c.width!==l.width||c.height!==l.height)?(o(c),s.promise()):n)},saveImage:function(t,n){if(!t.canvas||n.disabled)return t;var i=this,a=t.files[t.index],s=a.name,o=e.Deferred(),r=function(e){e.name||(a.type===e.type?e.name=a.name:a.name&&(e.name=a.name.replace(/\..+$/,"."+e.type.substr(6)))),t.files[t.index]=e,o.resolveWith(i,[t])};if(t.canvas.mozGetAsFile)r(t.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(a.type)&&s||(s&&s.replace(/\..+$/,"")||"blob")+".png",a.type));else{if(!t.canvas.toBlob)return t;t.canvas.toBlob(r,a.type)}return o.promise()},loadImageMetaData:function(n,i){if(i.disabled)return n;var a=this,s=e.Deferred();return t.parseMetaData(n.files[n.index],function(t){e.extend(n,t),s.resolveWith(a,[n])},i),s.promise()},saveImageMetaData:function(e,t){if(!(e.imageHead&&e.canvas&&e.canvas.toBlob)||t.disabled)return e;var n=e.files[e.index],i=new Blob([e.imageHead,this._blobSlice.call(n,20)],{type:n.type});return i.name=n.name,e.files[e.index]=i,e},setImage:function(e,t){var n=e.canvas||e.img;return n&&!t.disabled&&(e.files[e.index][t.name||"preview"]=n),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],e):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(n,i){if(i.disabled)return n;var s,o,a=n.files[n.index];return this._audioElement.canPlayType&&this._audioElement.canPlayType(a.type)&&("number"!==e.type(i.maxFileSize)||i.maxFileSize>=a.size)&&(!i.fileTypes||i.fileTypes.test(a.type))&&(s=t.createObjectURL(a))?(o=this._audioElement.cloneNode(!1),o.src=s,o.controls=!0,n.audio=o,n):n},setAudio:function(e,t){return e.audio&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.audio),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],e):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(n,i){if(i.disabled)return n;var s,o,a=n.files[n.index];return this._videoElement.canPlayType&&this._videoElement.canPlayType(a.type)&&("number"!==e.type(i.maxFileSize)||i.maxFileSize>=a.size)&&(!i.fileTypes||i.fileTypes.test(a.type))&&(s=t.createObjectURL(a))?(o=this._videoElement.cloneNode(!1),o.src=s,o.controls=!0,n.video=o,n):n},setVideo:function(e,t){return e.video&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.video),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],e):e(window.jQuery)}(function(e){"use strict";e.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{getNumberOfFiles:e.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(t,n){if(n.disabled)return t;var i=e.Deferred(),a=this.options,s=t.files[t.index];return"number"===e.type(n.maxNumberOfFiles)&&(a.getNumberOfFiles()||0)+t.files.length>n.maxNumberOfFiles?s.error=a.i18n("maxNumberOfFiles"):!n.acceptFileTypes||n.acceptFileTypes.test(s.type)||n.acceptFileTypes.test(s.name)?n.maxFileSize&&s.size>n.maxFileSize?s.error=a.i18n("maxFileSize"):"number"===e.type(s.size)&&n.minFileSize>s.size?s.error=a.i18n("minFileSize"):delete s.error:s.error=a.i18n("acceptFileTypes"),s.error||t.files.error?(t.files.error=!0,i.rejectWith(this,[t])):i.resolveWith(this,[t]),i.promise()}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","angular","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],e):e()}(function(){"use strict";angular.module("blueimp.fileupload",[]).provider("fileUpload",function(){var t,e=function(){var e=angular.element(this).fileupload("option","scope")(),t=angular.injector(["ng"]).get("$timeout");t(function(){e.$apply()})};t=this.defaults={handleResponse:function(e,t){var n=t.result&&t.result.files;n?t.scope().replace(t.files,n):(t.errorThrown||"error"===t.textStatus)&&(t.files[0].error=t.errorThrown||t.textStatus)},add:function(e,t){var n=t.scope();t.process(function(){return n.process(t)}).always(function(){var e=t.files[0],i=function(){return t.submit()};angular.forEach(t.files,function(e,n){e._index=n,e.$state=function(){return t.state()},e.$progress=function(){return t.progress()},e.$response=function(){return t.response()},t.formData&&(e.formData=t.formData,e.formData.size=e.size)}),e.$cancel=function(){return n.clear(t.files),t.abort()},"rejected"===e.$state()?e._$submit=i:e.$submit=i,n.$apply(function(){var i=n.option("prependFiles")?"unshift":"push";Array.prototype[i].apply(n.queue,t.files),e.$submit&&(n.option("autoUpload")||t.autoUpload)&&t.autoUpload!==!1&&e.$submit()})})},progress:function(e,t){t.scope().$apply()},done:function(e,t){var n=this;t.scope().$apply(function(){t.handleResponse.call(n,e,t)})},fail:function(e,t){var n=this;if("abort"!==t.errorThrown){if(t.dataType&&t.dataType.indexOf("json")===t.dataType.length-4)try{t.result=angular.fromJson(t.jqXHR.responseText)}catch(i){}t.scope().$apply(function(){t.handleResponse.call(n,e,t)})}},stop:e,processstart:e,processstop:e,getNumberOfFiles:function(){return this.scope().queue.length},dataType:"json",autoUpload:!1},this.$get=[function(){return{defaults:t}}]}).provider("formatFileSizeFilter",function(){var e={units:[{size:1e9,suffix:" GB"},{size:1e6,suffix:" MB"},{size:1e3,suffix:" KB"}]};this.defaults=e,this.$get=function(){return function(t){if(!angular.isNumber(t))return"";for(var a,s,n=!0,i=0;n;){if(n=e.units[i],a=n.prefix||"",s=n.suffix||"",i===e.units.length-1||t>=n.size)return a+(t/n.size).toFixed(2)+s;i+=1}}}}).controller("FileUploadController",["$scope","$element","$attrs","$window","fileUpload",function(e,t,n,i,a){var s={progress:function(){return t.fileupload("progress")},active:function(){return t.fileupload("active")},option:function(e,n){return t.fileupload("option",e,n)},add:function(e){return t.fileupload("add",e)},send:function(e){return t.fileupload("send",e)},process:function(e){return t.fileupload("process",e)},processing:function(e){return t.fileupload("processing",e)}};e.disabled=!i.jQuery.support.fileInput,e.queue=e.queue||[],e.clear=function(e){var t=this.queue,n=t.length,i=e,a=1;for(angular.isArray(e)&&(i=e[0],a=e.length);n;)if(n-=1,t[n]===i)return t.splice(n,a)},e.replace=function(e,t){var a,s,n=this.queue,i=e[0];for(a=0;n.length>a;a+=1)if(n[a]===i){for(s=0;t.length>s;s+=1)n[a+s]=t[s];return}},e.applyOnQueue=function(e){var n,i,t=this.queue.slice(0);for(n=0;t.length>n;n+=1)i=t[n],i[e]&&i[e]()},e.submit=function(){this.applyOnQueue("$submit")},e.cancel=function(){this.applyOnQueue("$cancel")},angular.extend(e,s),t.fileupload(angular.extend({scope:function(){return e}},a.defaults)).on("fileuploadadd",function(t,n){n.scope=e.option("scope")}).on(["fileuploadadd","fileuploadsubmit","fileuploadsend","fileuploaddone","fileuploadfail","fileuploadalways","fileuploadprogress","fileuploadprogressall","fileuploadstart","fileuploadstop","fileuploadchange","fileuploadpaste","fileuploaddrop","fileuploaddragover","fileuploadchunksend","fileuploadchunkdone","fileuploadchunkfail","fileuploadchunkalways","fileuploadprocessstart","fileuploadprocess","fileuploadprocessdone","fileuploadprocessfail","fileuploadprocessalways","fileuploadprocessstop"].join(" "),function(t,n){e.$emit(t.type,n).defaultPrevented&&t.preventDefault()}).on("remove",function(){var t;for(t in s)s.hasOwnProperty(t)&&delete e[t]}),e.$watch(n.fileUpload,function(e){e&&t.fileupload("option",e)})}]).controller("FileUploadProgressController",["$scope","$attrs","$parse",function(e,t,n){var i=n(t.fileUploadProgress),a=function(){var t=i(e);t&&t.total&&(e.num=Math.floor(100*(t.loaded/t.total)))};a(),e.$watch(t.fileUploadProgress+".loaded",function(e,t){e!==t&&a()})}]).controller("FileUploadPreviewController",["$scope","$element","$attrs","$parse",function(e,t,n,i){var a=i(n.fileUploadPreview),s=a(e);s.preview&&t.append(s.preview)}]).directive("fileUpload",function(){return{controller:"FileUploadController"}}).directive("fileUploadProgress",function(){return{controller:"FileUploadProgressController"}}).directive("fileUploadPreview",function(){return{controller:"FileUploadPreviewController"}}).directive("download",function(){return function(e,t){t.on("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",t.prop("download"),t.prop("href")].join(":"))}catch(n){}})}})}),function(e){e.PaginationCalculator=function(e,t){this.maxentries=e,this.opts=t},e.extend(e.PaginationCalculator.prototype,{numPages:function(){return Math.ceil(this.maxentries/this.opts.items_per_page)},getInterval:function(e){var t=Math.floor(this.opts.num_display_entries/2),n=this.numPages(),i=n-this.opts.num_display_entries,a=e>t?Math.max(Math.min(e-t,i),0):0,s=e>t?Math.min(e+t+this.opts.num_display_entries%2,n):Math.min(this.opts.num_display_entries,n);return{start:a,end:s}}}),e.PaginationRenderers={},e.PaginationRenderers.defaultRenderer=function(t,n){this.maxentries=t,this.opts=n,this.pc=new e.PaginationCalculator(t,n)},e.extend(e.PaginationRenderers.defaultRenderer.prototype,{createLink:function(t,n,i){var a,s=this.pc.numPages();return t=0>t?0:s>t?t:s-1,i=e.extend({text:t+1,classes:""},i||{}),a=t==n?isNaN(i.text)?e("<li class='disabled'><a>"+i.text+"</a></li>"):e("<li class='active'><a>"+i.text+"</a></li>"):e("<li><a href='"+this.opts.link_to.replace(/__id__/,t)+"'>"+i.text+"</a></li>"),i.classes&&a.addClass(i.classes),a.data("page_id",t),a},appendRange:function(e,t,n,i,a){var s;for(s=n;i>s;s++)this.createLink(s,t,a).appendTo(e)},getLinks:function(t,n){t=parseInt(t);var i,a,s=this.pc.getInterval(t),o=this.pc.numPages(),r=e("<ul class='pagination'></ul>");return this.opts.items_per_page>=this.maxentries?r:(this.opts.prev_text&&(t>0||this.opts.prev_show_always)&&r.append(this.createLink(t-1,t,{text:this.opts.prev_text,classes:"prev"})),s.start>0&&this.opts.num_edge_entries>0&&(a=Math.min(this.opts.num_edge_entries,s.start),this.appendRange(r,t,0,a,{classes:"sp"}),s.start>this.opts.num_edge_entries&&this.opts.ellipse_text&&e("<li><a>"+this.opts.ellipse_text+"</a></li>").appendTo(r)),this.appendRange(r,t,s.start,s.end),o>s.end&&this.opts.num_edge_entries>0&&(o-this.opts.num_edge_entries>s.end&&this.opts.ellipse_text&&e("<li><a>"+this.opts.ellipse_text+"</a></li>").appendTo(r),i=Math.max(o-this.opts.num_edge_entries,s.end),this.appendRange(r,t,i,o,{classes:"ep"})),this.opts.next_text&&(o-1>t||this.opts.next_show_always)&&r.append(this.createLink(t+1,t,{text:this.opts.next_text,classes:"next"})),e("li:not(.disabled, .active) a",r).click(n),r)}}),e.fn.pagination=function(t,n){function r(t){var i=e(t.target).parent().data("page_id"),a=l(i);return a||t.stopPropagation(),a}function l(e){i.data("current_page",e),s=a.getLinks(e,r),i.empty(),s.appendTo(i);var t=n.callback(e,i);return t}n=e.extend({items_per_page:10,num_display_entries:11,current_page:0,num_edge_entries:0,link_to:"javascript:;",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,renderer:"defaultRenderer",load_first_page:!1,callback:function(){return!1}},n||{});var a,s,o,i=this;if(o=n.current_page,i.data("current_page",o),t=!t||0>t?1:t,n.items_per_page=!n.items_per_page||0>n.items_per_page?1:n.items_per_page,!e.PaginationRenderers[n.renderer])throw new ReferenceError("Pagination renderer '"+n.renderer+"' was not found in jQuery.PaginationRenderers object.");a=new e.PaginationRenderers[n.renderer](t,n);var c=new e.PaginationCalculator(t,n),d=c.numPages();i.bind("setPage",{numPages:d},function(e,t){return t>=0&&e.data.numPages>t?(l(t),!1):void 0}),i.bind("prevPage",function(){var n=e(this).data("current_page");return n>0&&l(n-1),!1}),i.bind("nextPage",{numPages:d},function(t){var n=e(this).data("current_page");return t.data.numPages-1>n&&l(n+1),!1}),i.bind("currentPage",function(){var n=e(this).data("current_page");return l(n),!1}),s=a.getLinks(o,r),i.empty(),s.appendTo(i),n.load_first_page&&n.callback(o,i)}}(jQuery),function(){(function(e){return"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)})(function(e){"use strict";var t,n,i,a;return a="caret",t=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.getPos=function(){var e,t,n,i,a,s,o,r,l;return n=this.domInputor,n.focus(),document.selection?(o=document.selection.createRange(),s=0,o&&o.parentElement()===n&&(a=n.value.replace(/\r\n/g,"\n"),i=a.length,l=n.createTextRange(),l.moveToBookmark(o.getBookmark()),t=n.createTextRange(),t.collapse(!1),l.compareEndPoints("StartToEnd",t)>-1?r=e=i:(r=-l.moveStart("character",-i),e=-l.moveEnd("character",-i)))):r=n.selectionStart,r},t.prototype.setPos=function(e){var t,n;return t=this.domInputor,document.selection?(n=t.createTextRange(),n.move("character",e),n.select()):t.setSelectionRange(e,e)},t.prototype.getPosition=function(e){var t,i,a,s,o,r,l,c,d;return t=this.$inputor,a=function(e){return e.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},e=e||this.getPos(),l=t.val().slice(0,e),o="<span>"+a(l)+"</span>",o+="<span id='caret'>|</span>",r=new n(t),i=r.create(o).rect(),c=i.left-t.scrollLeft(),d=i.top-t.scrollTop(),s=i.height,{left:c,top:d,height:s}},t.prototype.getOffset=function(t){var n,i,a,s,o,r,l;return n=this.$inputor,document.selection?(o=this.domInputor.createTextRange(),t&&o.move("character",t),r=o.boundingLeft+n.scrollLeft(),l=o.boundingTop+e(window).scrollTop()+n.scrollTop(),i=o.boundingHeight):(a=n.offset(),s=this.getPosition(t),r=a.left+s.left,l=a.top+s.top,i=s.height),{left:r,top:l,height:i}},t}(),n=function(){function t(e){this.$inputor=e}return t.prototype.css_attr=["overflowY","height","width","paddingTop","paddingLeft","paddingRight","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","fontFamily","borderStyle","borderWidth","wordWrap","fontSize","lineHeight","overflowX","text-align"],t.prototype.mirrorCss=function(){var t,n=this;return t={position:"absolute",left:-9999,top:0,zIndex:-2e4,"white-space":"pre-wrap"},e.each(this.css_attr,function(e,i){return t[i]=n.$inputor.css(i)}),t},t.prototype.create=function(t){return this.$mirror=e("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(t),this.$inputor.after(this.$mirror),this},t.prototype.rect=function(){var e,t,n;return e=this.$mirror.find("#caret"),t=e.position(),n={left:t.left,top:t.top,height:e.height()},this.$mirror.remove(),n},t}(),i={pos:function(e){return e?this.setPos(e):this.getPos()},position:function(e){return this.getPosition(e)},offset:function(e){return this.getOffset(e)}},e.fn.caret=function(n){var a;return a=new t(this),i[n]?i[n].apply(a,Array.prototype.slice.call(arguments,1)):e.error("Method "+n+" does not exist on jQuery.caret")}})}.call(this),function(){(function(e){return"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)})(function(e){"use strict";var t,n,i,a;return a="caret",t=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.getPos=function(){var e,t,n,i,a,s,o,r,l;return n=this.domInputor,n.focus(),document.selection?(o=document.selection.createRange(),s=0,o&&o.parentElement()===n&&(a=n.value.replace(/\r\n/g,"\n"),i=a.length,l=n.createTextRange(),l.moveToBookmark(o.getBookmark()),t=n.createTextRange(),t.collapse(!1),l.compareEndPoints("StartToEnd",t)>-1?r=e=i:(r=-l.moveStart("character",-i),e=-l.moveEnd("character",-i)))):r=n.selectionStart,r},t.prototype.setPos=function(e){var t,n;return t=this.domInputor,document.selection?(n=t.createTextRange(),n.move("character",e),n.select()):t.setSelectionRange(e,e)},t.prototype.getPosition=function(e){var t,i,a,s,o,r,l,c,d;return t=this.$inputor,a=function(e){return e.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===e&&(e=this.getPos()),l=t.val().slice(0,e),o="<span>"+a(l)+"</span>",o+="<span id='caret'>|</span>",r=new n(t),i=r.create(o).rect(),c=i.left-t.scrollLeft(),d=i.top-t.scrollTop(),s=i.height,{left:c,top:d,height:s}},t.prototype.getOffset=function(e){var t,n,i,a,s,o;return t=this.$inputor,i=t.offset(),a=this.getPosition(e),s=i.left+a.left,o=i.top+a.top,n=a.height,{left:s,top:o,height:n}},t.prototype.getIEPosition=function(e){var t,n,i,a,s;return i=this.getIEOffset(e),n=this.$inputor.offset(),a=i.left-n.left,s=i.top-n.top,t=i.height,{left:a,top:s,height:t}},t.prototype.getIEOffset=function(t){var n,i,a,s;return i=this.domInputor.createTextRange(),t&&i.move("character",t),a=i.boundingLeft+$inputor.scrollLeft(),s=i.boundingTop+e(window).scrollTop()+$inputor.scrollTop(),n=i.boundingHeight,{left:a,top:s,height:n}},t}(),n=function(){function t(e){this.$inputor=e}return t.prototype.css_attr=["overflowY","height","width","paddingTop","paddingLeft","paddingRight","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","fontFamily","borderStyle","borderWidth","wordWrap","fontSize","lineHeight","overflowX","text-align"],t.prototype.mirrorCss=function(){var t,n=this;return t={position:"absolute",left:-9999,top:0,zIndex:-2e4,"white-space":"pre-wrap"},e.each(this.css_attr,function(e,i){return t[i]=n.$inputor.css(i)}),t},t.prototype.create=function(t){return this.$mirror=e("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(t),this.$inputor.after(this.$mirror),this},t.prototype.rect=function(){var e,t,n;return e=this.$mirror.find("#caret"),t=e.position(),n={left:t.left,top:t.top,height:e.height()},this.$mirror.remove(),n},t}(),i={pos:function(e){return e?this.setPos(e):this.getPos()},position:function(e){return document.selection?this.getIEPosition(e):this.getPosition(e)},offset:function(e){return document.selection?this.getIEOffset(e):this.getOffset(e)}},e.fn.caret=function(n){var a;return a=new t(this),i[n]?i[n].apply(a,Array.prototype.slice.call(arguments,1)):e.error("Method "+n+" does not exist on jQuery.caret")}})}.call(this),function(){var e=[].slice;(function(e){return"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)})(function(t){var n,i,a,s,o,r,l,c,d;return a=function(){function e(e){this.current_flag=null,this.controllers={},this.$inputor=t(e),this.listen()}return e.prototype.controller=function(e){return this.controllers[e||this.current_flag]},e.prototype.set_context_for=function(e){return this.current_flag=e,this},e.prototype.reg=function(e,t){var n,i;return n=(i=this.controllers)[e]||(i[e]=new s(this,e)),t.alias&&(this.controllers[t.alias]=n),n.init(t),this},e.prototype.listen=function(){var e=this;return this.$inputor.on("keyup.atwho",function(t){return e.on_keyup(t)}).on("keydown.atwho",function(t){return e.on_keydown(t)}).on("scroll.atwho",function(){var n;return null!=(n=e.controller())?n.view.hide():void 0}).on("blur.atwho",function(){var n;return(n=e.controller())?n.view.hide(n.get_opt("display_timeout")):void 0})},e.prototype.dispatch=function(){var e=this;return t.map(this.controllers,function(t){return t.look_up()?e.set_context_for(t.key):void 0})},e.prototype.on_keyup=function(e){var n;switch(e.keyCode){case l.ESC:e.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case l.DOWN:case l.UP:t.noop();break;default:this.dispatch()}},e.prototype.on_keydown=function(e){var n,i;if(n=null!=(i=this.controller())?i.view:void 0,n&&n.visible())switch(e.keyCode){case l.ESC:e.preventDefault(),n.hide();break;case l.UP:e.preventDefault(),n.prev();break;case l.DOWN:e.preventDefault(),n.next();break;case l.TAB:case l.ENTER:if(!n.visible())return;e.preventDefault(),n.choose();break;default:t.noop()}},e}(),s=function(){function s(e,a){this.app=e,this.key=a,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||i(),this.setting=null,this.query=null,this.pos=0,n.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new c(this),this.view=new d(this)}var i,a;return a=0,i=function(){return a+=1},s.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho["default"],e),this.model.reload(this.setting.data)},s.prototype.call_default=function(){var n,i;i=arguments[0],n=arguments.length>=2?e.call(arguments,1):[];try{return o[i].apply(this,n)}catch(a){return t.error(""+a+" Or maybe At.js doesn't have function "+i)}},s.prototype.trigger=function(e,t){var n,i;return t.push(this),n=this.get_opt("alias"),i=n?""+e+"-"+n+".atwho":""+e+".atwho",this.$inputor.trigger(i,t)},s.prototype.callbacks=function(e){return this.get_opt("callbacks")[e]||o[e]},s.prototype.get_opt=function(e){try{return this.setting[e]}catch(n){return null}},s.prototype.catch_query=function(){var e,t,n,i,a,s;return t=this.$inputor.val(),e=this.$inputor.caret("pos"),s=t.slice(0,e),i=this.callbacks("matcher").call(this,this.key,s,this.get_opt("start_with_space")),"string"==typeof i&&this.get_opt("max_len",20)>=i.length?(a=e-i.length,n=a+i.length,this.pos=a,i={text:i.toLowerCase(),head_pos:a,end_pos:n},this.trigger("matched",[this.key,i.text])):this.view.hide(),this.query=i},s.prototype.rect=function(){var e,t;return e=this.$inputor.caret("offset",this.pos-1),t=document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+t}},s.prototype.insert=function(e){var t,n,i,a;return t=this.$inputor,e=""+e,n=t.val(),i=n.slice(0,this.query.head_pos||0),a=""+i+e+" "+n.slice(this.query.end_pos||0),t.val(a),t.caret("pos",i.length+e.length+1),t.change()},s.prototype.render_view=function(e){var t;return t=this.get_opt("search_key"),e=this.callbacks("sorter").call(this,this.query.text,e.slice(0,1001),t),this.view.render(e.slice(0,this.get_opt("limit")))
},s.prototype.look_up=function(){var e,n;if(e=this.catch_query())return n=function(e){return e&&e.length>0?this.render_view(e):this.view.hide()},this.model.query(e.text,t.proxy(n,this)),e},s}(),c=function(){function n(e){this.context=e,this.key=this.context.key}var e;return e={},n.prototype.saved=function(){return this.fetch()>0},n.prototype.query=function(e,t){var n,i,a;return n=this.fetch(),i=this.context.get_opt("search_key"),t(n=this.context.callbacks("filter").call(this.context,e,n,i)),n&&n.length>0?void 0:null!=(a=this.context.callbacks("remote_filter"))?a.call(this.context,e,t):void 0},n.prototype.fetch=function(){return e[this.key]||[]},n.prototype.save=function(t){return e[this.key]=this.context.callbacks("before_save").call(this.context,t||[])},n.prototype.load=function(e){return!this.saved()&&e?this._load(e):void 0},n.prototype.reload=function(e){return this._load(e)},n.prototype._load=function(e){var n=this;return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(e){return n.save(e)}):this.save(e)},n}(),d=function(){function e(e){this.context=e,this.key=this.context.key,this.id=this.context.get_opt("alias")||"at-view-"+this.key.charCodeAt(0),this.$el=t("<div id='"+this.id+"' class='atwho-view'><ul id='"+this.id+"-ul' class='atwho-view-url'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return e.prototype.bind_event=function(){var e,n=this;return e=this.$el.find("ul"),e.on("mouseenter.view","li",function(n){return e.find(".cur").removeClass("cur"),t(n.currentTarget).addClass("cur")}).on("click",function(e){return n.choose(),e.preventDefault()})},e.prototype.visible=function(){return this.$el.is(":visible")},e.prototype.choose=function(){var e;return e=this.$el.find(".cur"),this.context.insert(this.context.callbacks("before_insert").call(this.context,e.data("value"),e)),this.context.trigger("inserted",[e]),this.context.callbacks("after_insert").call(this.context,this.context),this.hide()},e.prototype.reposition=function(){var e,n;return n=this.context.rect(),n.bottom+this.$el.height()-t(window).scrollTop()>t(window).height()&&(n.bottom=n.top-this.$el.height()),e={left:n.left,top:n.bottom},this.$el.offset(e),this.context.trigger("reposition",[e])},e.prototype.next=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.next(),t.length||(t=this.$el.find("li:first")),t.addClass("cur")},e.prototype.prev=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.prev(),t.length||(t=this.$el.find("li:last")),t.addClass("cur")},e.prototype.show=function(){return this.visible()||this.$el.show(),this.reposition()},e.prototype.hide=function(e){var t,n=this;return isNaN(e&&this.visible())?this.$el.hide():(t=function(){return n.hide()},clearTimeout(this.timeout_id),this.timeout_id=setTimeout(t,e))},e.prototype.render=function(e){var n,i,a,s,o,l,c;if(!t.isArray(e||0>=e.length))return this.hide(),void 0;for(this.$el.find("ul").empty(),i=this.$el.find("ul"),o=this.context.get_opt("tpl",r),l=0,c=e.length;c>l;l++)a=e[l],s=this.context.callbacks("tpl_eval").call(this.context,o,a),n=t(this.context.callbacks("highlighter").call(this.context,s,this.context.query.text)),n.data("atwho-info",a),i.append(n);return this.show(),i.find("li:first").addClass("cur")},e}(),l={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13},o={before_save:function(e){var n,i,a,s;if(!t.isArray(e))return e;for(s=[],i=0,a=e.length;a>i;i++)n=e[i],t.isPlainObject(n)?s.push(n):s.push({name:n});return s},matcher:function(e,t,n){var i,a;return e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(e="(?:^|\\s)"+e),a=new RegExp(e+"([A-Za-z0-9_+-]*)$|"+e+"([^\\x00-\\xff]*)$","gi"),i=a.exec(t),i?i[2]||i[1]:null},filter:function(e,t,n){var i,a,s,o;for(o=[],a=0,s=t.length;s>a;a++)i=t[a],~i[n].toLowerCase().indexOf(e)&&o.push(i);return o},remote_filter:null,sorter:function(e,t,n){var i,a,s,o;if(!e)return t;for(o=[],a=0,s=t.length;s>a;a++)i=t[a],i.atwho_order=i[n].toLowerCase().indexOf(e),i.atwho_order>-1&&o.push(i);return o.sort(function(e,t){return e.atwho_order-t.atwho_order})},tpl_eval:function(e,t){try{return e.replace(/\$\{([^\}]*)\}/g,function(e,n){return t[n]})}catch(n){return""}},highlighter:function(e,t){var n;return t?(n=new RegExp(">\\s*(\\w*)("+t.replace("+","\\+")+")(\\w*)\\s*<","ig"),e.replace(n,function(e,t,n,i){return"> "+t+"<strong>"+n+"</strong>"+i+" <"})):e},before_insert:function(e){return e},after_insert:function(){}},r="<li data-value='${name}'>${name}</li>",i={init:function(e){var n,i;return i=(n=t(this)).data("atwho"),i||n.data("atwho",i=new a(this)),i.reg(e.at,e)},load:function(e,t){var n;return(n=this.controller(e))?n.model.load(t):void 0},run:function(){return this.dispatch()}},n=t("<div id='atwho-container'></div>"),t.fn.atwho=function(e){var a;return a=arguments,t("body").append(n),this.filter("textarea, input").each(function(){var n;return"object"!=typeof e&&e?i[e]?(n=t(this).data("atwho"))?i[e].apply(n,Array.prototype.slice.call(a,1)):void 0:t.error("Method "+e+" does not exist on jQuery.caret"):i.init.apply(this,a)})},t.fn.atwho["default"]={at:void 0,alias:void 0,data:null,tpl:r,callbacks:o,search_key:"name",limit:5,max_len:20,start_with_space:!0,display_timeout:300}})}.call(this),function(e){var t=navigator.userAgent.toLowerCase(),n=function(e){return e.test(t)},i=Object.prototype.toString,a=n(/opera/),s=n(/\bchrome\b/),o=n(/webkit/),r=!s&&n(/safari/),l=!a&&n(/msie/),c=!!document.createElement("canvas").getContext,d=!o&&n(/gecko/),u=n(/ipod|ipad|iphone|android/gi),p={Linear:function(e,t,n,i){return n*e/i+t},Cubic:{easeIn:function(e,t,n,i){return n*(e/=i)*e*e+t},easeOut:function(e,t,n,i){return n*((e=e/i-1)*e*e+1)+t},easeInOut:function(e,t,n,i){return 1>(e/=i/2)?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t}}},f=function(e){var t=!1,n=!1,h=[],m=function(){return document.addEventListener?function(){document.removeEventListener("DOMContentLoaded",m,!1),g()}:document.attachEvent?function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",m),g())}:void 0}(),_=function(){if(!t){try{document.documentElement.doScroll("left")}catch(e){return setTimeout(_,1),void 0}g()}},g=function(){if(!t){t=!0;for(var e=0;h.length>e;e++)h[e].call(document);h=[]}},v=function(){if(!n){if(n=!0,"complete"===document.readyState)return setTimeout(g,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",m,!1),e.addEventListener("load",g,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",m),e.attachEvent("onload",g);var t=!1;try{t=null==e.frameElement}catch(i){}document.documentElement.doScroll&&t&&_()}}},b=function(e){v(),t?e.call(document,y):h.push(function(){return e.call(this)})},y=function(e){return!e||e.nodeType?e:"string"==typeof e?(-1!=e.indexOf("#")&&(e=e.substring(1)),document.getElementById(e)):("function"==typeof e&&b(e),void 0)};y.apply=function(e,t){if(e&&t&&"object"==typeof t)for(var n in t)t[n]!==void 0&&(e[n]=t[n]);if(!t&&e){var i={};for(var n in e)i[n]=e[n];return i}return e},y.apply(y,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(e,t){return null===e||void 0===e||y.isArray(e)&&!e.length||(t?!1:""===e)},isArray:function(e){return"[object Array]"===i.apply(e)},isDate:function(e){return"[object Date]"===i.apply(e)},isObject:function(e){return!!e&&"[object Object]"===i.apply(e)},isFunction:function(e){return"[object Function]"===i.apply(e)},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isString:function(e){return"string"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isFalse:function(e){return"boolean"==typeof e&&!e},isElement:function(e){return e?!!e.tagName:!1},isDefined:function(e){return e!==void 0}}),y.applyIf=function(e,t){if(e&&y.isObject(t))for(var n in t)y.isDefined(t[n])&&!y.isDefined(e[n])&&(e[n]=t[n]);return!t&&e?y.apply(e):e},y.merge=function(e,t,n){if(e&&y.isObject(t)){for(var i in t)y.isDefined(t[i])&&(y.isObject(t[i])?y.isObject(e[i])?y.merge(e[i],t[i]):e[i]=y.clone(t[i],!0):e[i]=t[i]);if(y.isObject(n))return y.merge(e,n)}return e},y.clone=function(e,t,n){var i={};if(y.isArray(e)&&y.isObject(t))for(var a=0;e.length>a;a++)i[e[a]]=n&&y.isObject(t[e[a]])?y.clone(t[e[a]],n):t[e[a]];else if(y.isObject(e))for(var s in e)i[s]=t&&y.isObject(e[s])&&!e[s].ICHARTJS_OBJECT?y.clone(e[s],t):e[s];return i},y.override=function(e,t){if(e&&t){var n=e.prototype;y.apply(n,t),y.isIE&&t.hasOwnProperty("toString")&&(n.toString=t.toString)}},y.extend=function(){var e=function(e){for(var t in e)this[t]=e[t]},t=Object.prototype.constructor;return function(n,i){var o,a=function(){n.apply(this,arguments)},s=function(){},r=n.prototype;return s.prototype=r,o=a.prototype=new s,o.constructor=a,a.superclass=r,r.constructor==t&&(r.constructor=n),a.override=function(e){y.override(a,e)},o.superclass=o.supr=function(){return r},o.override=e,y.override(a,i),a.extend=function(e){return y.extend(a,e)},a.plugin_={},a.plugin=function(e,t){y.isString(e)&&y.isFunction(t)&&(a.plugin_[e]=t)},a}}();var w=Math.sin,k=Math.cos,x=Math.atan,C=(Math.tan,Math.acos,Math.sqrt),S=Math.abs,D=Math.PI,E=2*D,T=Math.ceil,z=Math.round,M=Math.floor,P=Math.max,A=Math.min,O=parseFloat,I={},F={},N=function(e,t){if(0==e)return e;var n=S(e),i=.1;if(n>1){for(;n>1;)n/=10,i=10*i;return M(e/i+t)*i}for(i=1;1>n;)n=10*n,i=10*i;return z(e*i+t)/i},H={white:"rgb(255,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",yellow:"rgb(255,255,0)",black:"rgb(0,0,0)"},L=function(e){return e=e.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),(7==e.length?"rgba(":"rgb(")+parseInt(e.substring(0,2),16)+","+parseInt(e.substring(2,4),16)+","+parseInt(e.substring(4,6),16)+(7==e.length?",0."+e.substring(6,7)+")":")")},W=function(e){var t=/rgb\((\w*),(\w*),(\w*)\)/.exec(e);if(t)return new Array(t[1],t[2],t[3]);if(t=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(e))return new Array(t[1],t[2],t[3],t[4]);throw new Error("invalid colors value '"+e+"'")},Y=function(e,t,n){y.isArray(e)&&(t=e[1],n=e[2],e=e[0]),e/=255,t/=255,n/=255;var i=P(P(e,t),n),a=A(A(e,t),n),s=i-a;if(0==s)return new Array(0,0,i);var o;return e==i?o=(t-n)/s:t==i?o=(n-e)/s+2:n==i&&(o=(e-t)/s+4),o*=60,0>o&&(o+=360),new Array(o,s/i,i)},U=function(e){if(!e)return e;if(e=e.replace(/\s/g,"").toLowerCase(),/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(e))return e;if(/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)$/.exec(e))return e;if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(e))return L(e);if(H[e])return H[e];throw new Error("invalid colors value '"+e+"'")},B=function(e,t,n,i){y.isArray(e)&&(i=t,t=e[1],n=e[2],e=e[0]);var a,s,o,r=M(e/60)%6,l=e/60-r,c=n*(1-t),d=n*(1-t*l),u=n*(1-t*(1-l));switch(r){case 0:a=n,s=u,o=c;break;case 1:a=d,s=n,o=c;break;case 2:a=c,s=n,o=u;break;case 3:a=c,s=d,o=n;break;case 4:a=u,s=c,o=n;break;case 5:a=n,s=c,o=d}return"rgb"+(i?"a":"")+"("+z(255*a)+","+z(255*s)+","+z(255*o)+(i?","+i+")":")")},V=.05,X=.14,G=function(e,t){return t=t||X,e>.5?t-(1-e)/10:e>.1?t-.16+e/5:e>t?t:e/2},K=function(e,t,n,i){if(!t)return t;t=W(U(t));var a=Y(t);return i=0!=i?i||V:i,a[1]-=i,e?(a[2]-=G(a[2],n),a[1]=y.upTo(a[1],1),a[2]=y.lowTo(a[2],0)):(a[2]+=G(1-a[2],n),a[1]=y.lowTo(a[1],0),a[2]=y.upTo(a[2],1)),B(a,t[3])};return y.apply(y,{getFont:function(e,t,n,i){return e+" "+t+(i||"px")+" "+n},getDoc:function(){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t},DefineAbstract:function(e,t){if(!t[e])throw new Error("Cannot instantiate the type '"+t.type+"'.you must implements it with method '"+e+"'.")},getAA:function(e){return"linear"==e?p.Linear:"easeInOut"==e||"easeIn"==e||"easeOut"==e?p.Cubic[e]:p.Linear},noConflict:function(){return f},plugin:function(e,t,n){y.isFunction(e)&&e.plugin(t,n)},parsePadding:function(e,t){return e=e||0,y.isNumber(e)?new Array(e,e,e,e):y.isArray(e)?e:(t=t||0,e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(","),1==e.length?e[0]=e[1]=e[2]=e[3]=O(e[0])||t:2==e.length?(e[0]=e[2]=O(e[0])||t,e[1]=e[3]=O(e[1])||t):3==e.length?(e[0]=O(e[0])||t,e[1]=e[3]=O(e[1])||t,e[2]=O(e[2])||t):(e[0]=O(e[0])||t,e[1]=O(e[1])||t,e[2]=O(e[2])||t,e[3]=O(e[3])||t),e)},distanceP2P:function(e,t,n,i){return C((n-e)*(n-e)+(i-t)*(i-t))},atan2Radian:function(e,t,n,i){if(e==n)return i>t?D/2:3*D/2;if(t==i)return n>e?0:D;var a=y.quadrant(e,t,n,i),s=x(S((t-i)/(e-n)));return a?(3==a?E:D)+(2==a?s:-s):s},angle2Radian:function(e){return e*D/180},radian2Angle:function(e){return 180*e/D},quadrant:function(e,t,n,i){return n>e?i>t?0:3:i>t?1:2},toPI2:function(e){for(;0>e;)e+=E;return e},visible:function(e,t,n){if(e>=t)return[];var i=y.quadrantd(e),a=y.quadrantd(t);if((2==i||3==i)&&(2==a||3==a)&&D>t-e)return[];if(e=y.toPI2(e),t=y.toPI2(t),e>=t&&(t+=E),e>D)e=E;else{if(t>E)return[{s:e,e:D,f:n},{s:E,e:t,f:n}];t>D&&(t=D)}return{s:e,e:t,f:n}},quadrantd:function(e){if(0==e)return 0;if(0==e%E)return 3;for(;0>e;)e+=E;return T(2*(e%E)/D)-1},upTo:function(e,t){return t>e?e:t},lowTo:function(e,t){return e>t?e:t},between:function(e,t,n){return e>t?y.between(t,e,n):n>t?t:e>n?e:n},inRange:function(e,t,n){return t>n&&n>e},angleInRange:function(e,t,n){return n-=e,n=0>n?n+E:n,n%=E,t-e>n},angleZInRange:function(e,t,n){return e>t?n>e||t>n:t>n&&n>e},inRangeClosed:function(e,t,n){return t>=n&&n>=e},inEllipse:function(e,t,n,i){return 1>=e*e/n/n+t*t/i/i},p2Point:function(e,t,n,i){return{x:e+k(n)*i,y:t+w(n)*i}},toRgb:U,toRgba:function(e,t){var n=W(U(e));return"rgba("+n[0]+","+n[1]+","+n[2]+","+t+")"},vectorP2P:function(e,t,n){return n||(t=y.angle2Radian(t),e=y.angle2Radian(e)),t=w(t),{x:t*w(e),y:t*k(e)}},uid:function(e){return(e||"ichartjs")+"_"+T(1e4*Math.random())+(new Date).getTime().toString().substring(4)},register:function(e){if(y.isString(e))F[e.toLowerCase()]=e;else{var t=e.get("id");if(!t||""==t){for(t=y.uid(e.type);I[t];)t=y.uid(e.type);e.push("id",t)}if(I[t])throw new Error("exist reduplicate id :"+t);e.id=t,I[t]=e}},create:function(e){if(!e.type||!F[e.type])throw new Error("TypeNotFoundException["+e.type+"]");return new y[F[e.type]](e)},get:function(e){return I[e]},isPercent:function(e){return y.isString(e)&&e.match(/(.*)%/)},parsePercent:function(e,t){return y.isString(e)&&(e=e.match(/(.*)%/),e&&(e=t?M(O(e[1])*t/100):e[1]/100)),!e||0>=e||e>t?t:e},parseFloat:function(e,t){if(!y.isNumber(e)&&(e=O(e),!y.isNumber(e)))throw new Error("["+t+"]="+e+"is not a valid number.");return e},ceil:function(e){return N(e,1)},floor:function(e){return N(e,-1)},_2D:"2d",_3D:"3d",light:function(e,t,n){return K(!1,e,t,n)},dark:function(e,t,n){return K(!0,e,t,n)},fixPixel:function(e){return y.isNumber(e)?e:O(e.replace("px",""))||0},toPixel:function(e){return y.isNumber(e)?e+"px":y.fixPixel(e)+"px"},emptyFn:function(){return!0},supportCanvas:c,isOpera:a,isWebKit:o,isChrome:s,isSafari:r,isIE:l,isGecko:d,isMobile:u,touch:"ontouchend"in document,FRAME:u?30:60}),y.Assert={isTrue:function(e,t){if(e!==!0)throw new Error(t)}},y.requestAnimFrame=function(){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)};return function(e){t(e)}}(),y.Event={addEvent:function(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},fix:function(t){t===void 0&&(t=e.event);var n={target:t.target,pageX:t.pageX,pageY:t.pageY,offsetX:t.offsetX,offsetY:t.offsetY,stopPropagation:!1,event:t};if(t.offsetX===void 0){if(t.target||(n.target=t.srcElement||document),t.targetTouches&&(n.pageX=t.targetTouches[0].pageX,n.pageY=t.targetTouches[0].pageY),null==n.pageX&&null!=t.clientX){var i=document.documentElement,a=document.body;n.pageX=t.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),n.pageY=t.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)}for(var s=0,o=0,r=t.target;r!=document.body&&r;)s+=r.offsetLeft-(r.scrollLeft||0),o+=r.offsetTop,r=r.offsetParent;n.offsetX=n.pageX-s,n.offsetY=n.pageY-o}return n.x=n.offsetX,n.y=n.offsetY,t.stopPropagation||(t.stopPropagation=function(){e.event.cancelBubble=!0}),n}},y}(e);Array.prototype.each=function(e,t){for(var i,n=this.length,a=0;n>a&&(i=t?e.call(t,this[a],a):e(this[a],a),"boolean"!=typeof i||i);a++);return this},Array.prototype.eachAll=function(e,t){this.each(function(n,i){return f.isArray(n)?n.eachAll(e,t):t?e.call(t,n,i):e(n,i)},t)},Array.prototype.sor=function(e){for(var i,t=this,n=t.length-1,a=0;n>a;a++)for(var s=n;s>a;s--)(e?!e(t[s],t[s-1]):t[s-1]>t[s])&&(i=t[s],t[s]=t[s-1],t[s-1]=i)},e.iChart=f,e.$||(e.$=e.iChart)}(window),function(e){e.Element=function(t){var n=this._();n.type="element",n.ICHARTJS_OBJECT=!0,e.DefineAbstract("configure",n),e.DefineAbstract("afterConfiguration",n),n.options={},n.set({border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0}),n.W="width",n.H="height",n.O="top",n.B="bottom",n.L="left",n.R="right",n.C="center",n.X="originx",n.Y="originy",n.variable={},n.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]},n.registerEvent("initialize"),n.initialization=!1,n.configure.apply(n,Array.prototype.slice.call(arguments,1)),n.default_=e.clone(n.options,!0),n.set(t),n.afterConfiguration(n)},e.Element.prototype={_:function(){return this},afterConfiguration:function(t){if(e.isObject(t.get("listeners")))for(var n in t.get("listeners"))t.on(n,t.get("listeners")[n]);t.initialize(),t.fireEvent(t,"initialize",[t])},registerEvent:function(){for(var e=0;arguments.length>e;e++)this.events[arguments[e]]=[]},fireString:function(t,n,i,a){var s=this.fireEvent(t,n,i);return e.isString(s)?s:s!==!0&&e.isDefined(s)?s.toString():a},fireEvent:function(e,t,n){var i=this.events[t].length;if(1==i)return this.events[t][0].apply(e,n);for(var a=!0,s=0;i>s;s++)this.events[t][s].apply(e,n)||(a=!1);return a},on:function(t,n){return e.isString(t)&&e.isArray(this.events[t])?this.events[t].push(n):e.isArray(t)&&t.each(function(e){this.on(e,n)},this),this},getPlugin:function(e){return this.constructor.plugin_[e]},set:function(t){e.isObject(t)&&e.merge(this.options,t)},pushIf:function(t,n){return e.isDefined(this.get(t))&&null!=this.get(t)?this.get(t):this.push(t,n)},push:function(e,t){for(var n=e.split("."),i=n.length-1,a=this.options,s=0;i>s;s++)a[n[s]]||(a[n[s]]={}),a=a[n[s]];return a[n[i]]=t,t},get:function(e){for(var t=e.split("."),n=this.options[t[0]],i=1;t.length>i;i++){if(!n)return null;n=n[t[i]]}return n}},e.Painter=e.extend(e.Element,{configure:function(){this.type="painter",this.dimension=e._2D,e.DefineAbstract("commonDraw",this),e.DefineAbstract("initialize",this),this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:null,originy:null}),this.variable.event={mouseover:!1},this.variable.animation={},this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")},is3D:function(){return this.dimension==e._3D},applyGradient:function(e,t,n,i){var a=this._();a.get("gradient")&&a.get("f_color")&&(a.push("f_color",a.T.gradient(e||a.x||0,t||a.y||0,n||a.get(a.W),i||a.get(a.H),[a.get("dark_color"),a.get("light_color")],a.get("gradient_mode"))),a.push("light_color",a.T.gradient(e||a.x||0,t||a.y||0,n||a.get(a.W),i||a.get(a.H),[a.get("background_color"),a.get("light_color")],a.get("gradient_mode"))),a.push("f_color_",a.get("f_color")))},draw:function(e,t){if(t)this.root.draw(e);else{if(!this.fireEvent(this,"beforedraw",[this,e]))return this;this.commonDraw(this,e),this.fireEvent(this,"draw",[this,e])}},inject:function(e){e&&(this.root=e,this.target=this.T=e.T)},doConfig:function(){var t=this._(),n=e.parsePadding(t.get("padding")),i=t.get("border.enable"),i=i?e.parsePadding(t.get("border.width")):[0,0,0,0],a=e.toRgb(t.get("background_color")),s=t.get("color_factor"),o=t.get("gradient")?0:null;if(t.set({border_top:i[0],border_right:i[1],border_bottom:i[2],border_left:i[3],hborder:i[1]+i[3],vborder:i[0]+i[2],padding_top:n[0]+i[0],padding_right:n[1]+i[1],padding_bottom:n[2]+i[2],padding_left:n[3]+i[3],hpadding:n[1]+n[3]+i[1]+i[3],vpadding:n[0]+n[2]+i[0]+i[2]}),t.get("shadow")===!0&&t.push("shadow",{color:t.get("shadow_color"),blur:t.get("shadow_blur"),offsetx:t.get("shadow_offsetx"),offsety:t.get("shadow_offsety")}),t.push("f_color",a),t.push("f_color_",a),t.push("light_color",e.light(a,s,o)),t.push("dark_color",e.dark(a,.8*s,o)),t.push("light_color2",e.light(a,2*s,o)),t.is3D()&&!t.get("xAngle_")){var r=e.vectorP2P(t.get("xAngle"),t.get("yAngle"));t.push("xAngle_",r.x),t.push("yAngle_",r.y)}}}),e.Html=e.extend(e.Element,{configure:function(t){this.type="html",this.T=t,e.DefineAbstract("beforeshow",this),this.set({animation:!0,default_action:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0}),this.transitions=""},initialize:function(){var e=this._();e.wrap=e.get("wrap"),e.dom=document.createElement("div"),e.get("shadow")&&e.css("boxShadow",e.get("shadow_offsetx")+"px "+e.get("shadow_offsety")+"px "+e.get("shadow_blur")+"px "+e.get("shadow_color")),e.get("border.enable")&&(e.css("border",e.get("border.width")+"px "+e.get("border.style")+" "+e.get("border.color")),e.css("borderRadius",e.get("border.radius")+"px")),e.css("position","absolute"),e.css("zIndex",e.get("index")),e.applyStyle(),e.wrap.appendChild(e.dom),e.style=e.dom.style,e.get("default_action")&&e.doAction(e)},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(t,n){var i="transitionend";e.isWebKit?i="webkitTransitionEnd":e.isOpera&&(i="oTransitionEnd"),e.Event.addEvent(this.dom,i,t,n)},destroy:function(){this.wrap.removeChild(this.dom),this.dom=null},transition:function(t){this.transitions=""==this.transitions?t:this.transitions+","+t,e.isWebKit?this.css("WebkitTransition",this.transitions):e.isGecko?this.css("MozTransition",this.transitions):e.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},beforeshow:function(e,t,n){n.follow(e,t,n)},show:function(e,t){this.beforeshow(e,t,this),this.css("visibility","visible"),this.get("animation")&&this.css("opacity",1)},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(t,n){if(e.isString(t)){if(!e.isDefined(n))return this.dom.style[t];this.dom.style[t]=n}},applyStyle:function(){for(var t,e=this.get("style").split(";"),n=0;e.length>n;n++)t=e[n].split(":"),t.length>1&&this.css(t[0],t[1])}}),e.Component=e.extend(e.Painter,{configure:function(t){e.Component.superclass.configure.apply(this,arguments),this.type="component",this.set({fontsize:12,font:"Verdana",fontweight:"normal",fontunit:"px",tip:{enable:!1,border:{width:2}}}),this.atomic=!1,this.proxy=!1,this.ICHARTJS_CHART=!1,this.inject(t)},initialize:function(){e.DefineAbstract("isEventValid",this),e.DefineAbstract("doDraw",this),this.doConfig(),this.initialization=!0},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},destroy:function(){this.tip&&this.tip.destroy()},doConfig:function(){e.Component.superclass.doConfig.call(this);var t=this._(),n=t.get(t.W),i=t.get("maxwidth"),a=t.get(t.X);if(n&&i&&(n=t.push(t.W,e.parsePercent(n,i)),n>i&&(n=t.push("width",i)),i>n)){var s=t.get("align")||t.C;s==t.C?a+=(i-n)/2:s==t.R&&(a+=i-n)}t.x=t.push(t.X,a+t.get("offsetx")),t.y=t.push(t.Y,t.get(t.Y)+t.get("offsety")),t.push("fontStyle",e.getFont(t.get("fontweight"),t.get("fontsize"),t.get("font"),t.get("fontunit"))),t.data=t.get("data"),t.get("tip.enable")&&(t.pushIf("tip.border.color",t.get("f_color")),e.isFunction(t.get("tip.invokeOffset"))||t.push("tip.invokeOffset",t.tipInvoke()))},isMouseOver:function(e){return this.isEventValid(e,this)},redraw:function(e){this.root.draw(e,this.root.Combination)},last:e.emptyFn,commonDraw:function(e){e.proxy||e.doDraw.call(e,e)}}),e.Tip=e.extend(e.Html,{configure:function(){e.Tip.superclass.configure.apply(this,arguments),this.type="tip",this.set({name:"",index:0,value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200}),this.registerEvent("parseText")},position:function(e,t,n){n.style.top=(0>e?0:e)+"px",n.style.left=(0>t?0:t)+"px"},follow:function(t,n,i){if(i.get("invokeOffsetDynamic")){if(n.hit){(e.isString(n.text)||e.isNumber(n.text))&&i.text(n.name,n.value,n.text,n.i,i);var a=i.get("invokeOffset")(i.width(),i.height(),n);i.position(a.top,a.left,i)}}else if("follow"!=i.get("showType")&&e.isFunction(i.get("invokeOffset"))){var a=i.get("invokeOffset")(i.width(),i.height(),n);i.position(a.top,a.left,i)}else i.position(t.y-1.1*i.height()-2,t.x+2,i)},text:function(e,t,n,i,a){a.dom.innerHTML=a.fireString(a,"parseText",[a,e,t,n,i],n)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},doAction:function(e){e.T.on("mouseover",function(t,n,i){e.show(n,i)}).on("mouseout",function(t,n){e.hidden(n)}),"follow"==e.get("showType")&&e.T.on("mousemove",function(t,n,i){e.T.variable.event.mouseover&&setTimeout(function(){e.T.variable.event.mouseover&&e.follow(n,i,e)},e.get("delay"))})},initialize:function(){e.Tip.superclass.initialize.call(this);var t=this._();if(t.text(t.get("name"),t.get("value"),t.get("text"),t.get("index"),t),t.hidden(),t.get("animation")){var n=t.get("move_duration")/1e3+"s "+t.get("timing_function")+" 0s";t.transition("opacity "+t.get("fade_duration")/1e3+"s "+t.get("timing_function")+" 0s"),t.transition("top "+n),t.transition("left "+n),t.onTransitionEnd(function(){0==t.css("opacity")&&t.css("visibility","hidden")},!1)}}}),e.CrossHair=e.extend(e.Html,{configure:function(){e.CrossHair.superclass.configure.apply(this,arguments),this.type="crosshair",this.set({top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(e,t,n){if(n.get("invokeOffset")){var i=n.get("invokeOffset")(e,t);i&&i.hit?(n.o_valid=!0,n.position(i.top-n.top,i.left-n.left,n)):i&&n.o_valid||n.position(n.owidth,n.oheight,n)}else n.position(e.y-n.top-1,e.x-n.left-1,n)},position:function(e,t,n){n.horizontal.style.top=e-n.size+"px",n.vertical.style.left=t-n.size+"px"},doCreate:function(t,n,i){var a=document.createElement("div");return a.style.width=e.toPixel(n),a.style.height=e.toPixel(i),a.style.backgroundColor=t.get("line_color"),a.style.position="absolute",t.dom.appendChild(a),a},doAction:function(e){e.T.on("mouseover",function(t,n,i){e.show(n,i)}).on("mouseout",function(t,n,i){e.hidden(n,i)}).on("mousemove",function(t,n,i){e.follow(n,i,e)})},initialize:function(){e.CrossHair.superclass.initialize.call(this);var t=this._(),n=e.toPixel(t.get("line_width"));t.size=t.get("line_width")/2,t.top=e.fixPixel(t.get(t.O)),t.left=e.fixPixel(t.get(t.L)),t.owidth=-t.T.root.width,t.oheight=-t.T.root.height,t.o_valid=!1,t.css("width","0px"),t.css("height","0px"),t.css("top",t.top+"px"),t.css("left",t.left+"px"),t.css("visibility","hidden"),t.horizontal=t.doCreate(t,t.get("hcross")?e.toPixel(t.get(t.W)):"0px",n),t.vertical=t.doCreate(t,n,t.get("vcross")?e.toPixel(t.get(t.H)):"0px")}}),e.Legend=e.extend(e.Component,{configure:function(){e.Legend.superclass.configure.apply(this,arguments),this.type="legend",this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:10,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"}),this.atomic=!0,this.registerEvent("parse")},isEventValid:function(e,t){var n={valid:!1};return e.x>this.x&&t.x+t.width>e.x&&e.y>t.y&&t.y+t.height>e.y&&t.data.each(function(i,a){return e.x>i.x&&i.x+i.width_+t.get("signwidth")>e.x&&e.y>i.y&&i.y+t.get("line_height")>e.y?(n={valid:!0,index:a,target:i},!1):void 0},t),n},drawCell:function(e,t,n,i,a,s){var o=s.get("sign_size"),r=s.getPlugin("sign");r&&r.call(s,s.T,a,{x:e+o/2,y:t},o,i)||(-1!=a.indexOf("bar")&&s.T.box(e,t-o/12,o,o/6,0,i),"round"==a?s.T.round(e+o/2,t,o/2,i):"round-bar"==a?s.T.round(e+o/2,t,o/4,i):"square-bar"==a?s.T.box(e+o/4,t-o/4,o/2,o/2,0,i):"square"==a&&s.T.box(e,t-o/2,o,o,0,i)),s.T.fillText(n,e+s.get("signwidth"),t,0,s.get("text_with_sign_color")?i:s.get("color"),"lr",s.get("line_height"))},doDraw:function(t){t.T.box(t.x,t.y,t.width,t.height,t.get("border"),t.get("f_color"),!1,t.get("shadow")),t.T.textStyle(t.L,"middle",e.getFont(t.get("fontweight"),t.get("fontsize"),t.get("font"))),t.data.each(function(e){t.drawCell(e.x,e.y,e.text,e.color,e.sign,t)})},doLayout:function(t,n){var i=t.get("sign_size"),a=0,s=0,o=0,r=t.get("column"),l=t.get("row"),c=t.data.length;t.T.textFont(t.get("fontStyle")),i>t.get("line_height")&&t.push("line_height",i+i/5),t.push("signwidth",i+t.get("sign_space")),t.data.each(function(e){e.width_=t.T.measureText(e.text)},t);for(var d=0;r>d;d++){o=0;for(var u=d;c>u;u+=r)o=Math.max(o,t.data[u].width_);t.columnwidth[d]=o,a+=o}for(var d=0;l>d;d++){o=0;for(var u=d*r;c>u;u++)o=Math.max(o,t.data[u].text.split("\n").length);t.columnheight[d]=o,s+=o}if(a=t.push(t.W,a+t.get("hpadding")+t.get("signwidth")*r+(r-1)*t.get("legend_space")),a>t.get("maxwidth")){var p=Math.floor(t.get("fontsize")*(t.get("maxwidth")/a));if(!(10>p&&1==r))return p>9?t.push("fontStyle",e.getFont(t.get("fontweight"),t.push("fontsize",p),t.get("font"))):r>1&&t.push("row",Math.ceil(c/t.push("column",r-1))),t.doLayout(t,n),void 0}var f,h,m,_;t.width=a,t.height=s=t.push(t.H,s*t.get("line_height")+t.get("vpadding")),t.y=t.get("valign")==t.O?n.get("t_originy"):t.get("valign")==t.B?n.get("b_originy")-s:n.get("centery")-s/2,t.x=t.get("align")==t.L?n.get("l_originx"):t.get("align")==t.C?n.get("centerx")-a/2:n.get("r_originx")-a,t.x=t.push(t.X,(0>t.x?n.get("l_originx"):t.x)+t.get("offsetx")),t.y=t.push(t.Y,(0>t.y?n.get("t_originy"):t.y)+t.get("offsety")),m=t.y+t.get("padding_top"),i=t.get("legend_space")+t.get("signwidth");for(var d=0;l>d;d++){h=t.x+t.get("padding_left"),_=t.columnheight[d]/2*t.get("line_height"),m+=_;for(var u=0;r>u&&c>d*r+u;u++)f=t.data[d*r+u],f.y=m,f.x=h,h+=t.columnwidth[u]+i;m+=_}},doConfig:function(){e.Legend.superclass.doConfig.call(this);var t=this._(),n=t.root,i=e.isNumber(t.get("column")),a=e.isNumber(t.get("row")),s=t.data.length;t.get("align")==t.C&&"middle"==t.get("valign")&&t.push("valign",t.O),n.get("align")==t.L&&"middle"==t.get("valign")&&t.push("align",t.R),t.data.each(function(n,i){e.merge(n,t.fireEvent(t,"parse",[t,n.name,i])),n.text=n.text||n.name||"",n.sign=n.sign||t.get("sign")},t),i||a||(i=t.push("column",1)),i&&!a&&(a=t.push("row",Math.ceil(s/t.get("column")))),!i&&a&&(i=t.push("column",Math.ceil(s/t.get("row")))),i=t.get("column"),a=t.get("row"),s>a*i&&(a+=Math.ceil((s-a*i)/i),a=t.push("row",a)),t.columnwidth=[],t.columnheight=[],t.doLayout(t,n)}}),e.Label=e.extend(e.Component,{configure:function(){e.Label.superclass.configure.apply(this,arguments),this.type="label",this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:!1}),this.atomic=!0,this.registerEvent()},isEventValid:function(t,n){return{valid:e.inRange(n.labelx,n.labelx+n.get(n.W),t.x)&&e.inRange(n.labely,n.labely+n.get(n.H),t.y)}},text:function(e){e&&this.push("text",e),this.push(this.W,this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(e){var t=e.get("quadrantd"),n=e.get("line_points"),i=e.get("smooth"),t=t>=1&&2>=t,a=e.get("labelx"),s=e.get("labely");e.labelx=a+(t?-e.get(e.W)-i:i),e.labely=s-e.get(e.H)/2,n[2]={x:a,y:s},n[3]={x:n[2].x+(t?-i:i),y:n[2].y}},doLayout:function(e,t,n,i){i.push("labelx",i.get("labelx")+e/n),i.push("labely",i.get("labely")+t/n),i.get("line_points").each(function(n,i){return n.x+=e,n.y+=t,1==i
},i),i.localizer(i)},doDraw:function(e){var t=e.get("line_points"),n=e.get("sign_size"),i=e.labelx+e.get("padding_left"),a=e.labely+e.get("padding_top");e.T.label(t,e.get("line_thickness"),e.get("border.color")),e.T.box(e.labelx,e.labely,e.get(e.W),e.get(e.H),e.get("border"),e.get("f_color"),!1,e.get("shadow")),e.T.textStyle(e.L,e.O,e.get("fontStyle"));var s=e.get("color");e.get("text_with_sign_color")&&(s=e.get("scolor")),"square"==e.get("sign")?e.T.box(i,a,n,n,0,e.get("scolor")):e.get("sign")&&e.T.round(i+n/2,a+n/2,n/2,e.get("scolor")),e.T.fillText(e.get("text"),i+n+e.get("sign_space"),a,e.get("textwidth"),s)},doConfig:function(){e.Label.superclass.doConfig.call(this);var t=this._();t.T.textFont(t.get("fontStyle")),t.get("fontsize")>t.get("line_height")&&t.push("line_height",t.get("fontsize")),t.get("sign")||(t.push("sign_size",0),t.push("sign_space",0)),t.push(t.H,t.get("line_height")+t.get("vpadding")),t.text(),t.localizer(t)}}),e.Text=e.extend(e.Component,{configure:function(){e.Text.superclass.configure.apply(this,arguments),this.type="text",this.set({text:"",textAlign:"center",align:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0}),this.registerEvent()},doDraw:function(e){e.get("box_feature")&&e.T.box(e.x,e.y,e.get(e.W),e.get(e.H),e.get("border"),e.get("f_color")),e.T.text(e.get("text"),e.get("textx"),e.get("texty"),e.get(e.W)-e.get("hpadding"),e.get("color"),e.get("textAlign"),e.get("textBaseline"),e.get("fontStyle"),e.get("writingmode"),e.get("line_height"),e.get("shadow"),e.get("rotate"))},isEventValid:function(){return{valid:!1}},doLayout:function(e,t,n,i){i.x=i.push(i.X,i.x+e),i.y=i.push(i.Y,i.y+t),i.push("textx",i.get("textx")+e),i.push("texty",i.get("texty")+t)},doConfig:function(){e.Text.superclass.doConfig.call(this);var t=this._(),n=t.x,i=t.y+t.get("padding_top"),a=t.get(t.W),s=t.get(t.H),o=t.get("textAlign");n+=o==t.C?a/2:o==t.R?a-t.get("padding_right"):t.get("padding_left"),s&&(i+=s/2,t.push("textBaseline","middle")),t.push("textx",n),t.push("texty",i),t.push("box_feature",a&&s),t.applyGradient()}}),function(e){function m(t){if("string"==typeof t&&(t=e(t)),!t||!t.tagName||"canvas"!=t.tagName.toLowerCase())throw new Error("there not a canvas element");this.canvas=t,this.c=this.canvas.getContext("2d")}var t=Math.PI,n=t/90,i=n/2,a=Math.ceil,s=Math.floor,o=2*t,r=Math.max,l=Math.min,c=Math.sin,d=Math.cos,u=function(e,t){return 1==e?s(t)+.5:Math.round(t)},p=function(e,t,n,i){var d,u,p,f,a=t.x,s=t.y,o=e[n-1],c=e[n+1];if(e.length-1>n){var _,h=o.y,m=c.y;d=(i*a+o.x)/(i+1),u=(i*s+h)/(i+1),p=(i*a+c.x)/(i+1),f=(i*s+m)/(i+1),_=(f-u)*(p-a)/(p-d)+s-f,u+=_,f+=_,u>h&&u>s?(u=r(h,s),f=2*s-u):h>u&&s>u&&(u=l(h,s),f=2*s-u),f>m&&f>s?(f=r(m,s),u=2*s-f):m>f&&s>f&&(f=l(m,s),u=2*s-f),t.rcx=p,t.rcy=f}return[o.rcx||o.x,o.rcy||o.y,d||a,u||s,a,s]},f=function(t){return e.isNumber(t)?t:e.parseFloat(t,t)},h=function(t,n){var i,s,a=0,o=0,c=!1,d=n.get("labels");if(n.data=t,"simple"==n.dataType)n.total=0,t.each(function(t){if(t.background_color=t.color,a=t.value||0,e.isArray(a)){var u=0;o=a.length>o?a.length:o;for(var p=0;a.length>p;p++)a[p]=f(a[p]),u+=a[p],c||(i=s=a[p],c=!0),i=r(a[p],i),s=l(a[p],s);t.total=u}else a=f(a),t.value=a,n.total+=a,c||(i=s=a,c=!0),i=r(a,i),s=l(a,s)},n),e.isArray(d)&&(o=d.length>o?d.length:o),n.push("maxItemSize",o);else if("stacked"==n.dataType||"complex"==n.dataType){var p,h,m,u=d.length,_="stacked"==n.dataType;if(0==u){u=t[0].value.length;for(var g=0;u>g;g++)d.push("")}n.columns=[];for(var g=0;u>g;g++)p=[],h=0,t.each(function(n,o){a=n.value[g],a&&(n.value[g]=a=f(a,a),h+=a,_?m=t[o].color:(m=n.color,c||(i=s=a,c=!0),i=r(a,i),s=l(a,s)),p.push(e.applyIf({name:n.name,value:n.value[g],background_color:m,color:m},e.isArray(n.extra)?n.extra[g]||{}:n)))}),_&&(c||(i=s=a,c=!0),i=r(h,i),s=l(h,s)),n.columns.push({total:h,name:d[g],item:p})}n.push("minValue",s),n.push("maxValue",i),n.doConfig(),n.initialization=!0};m.prototype={getContext:function(){return this.c},css:function(t,n){return e.isDefined(n)?(this.canvas.style[t]=n,void 0):this.canvas.style[t]},ellipse:function(e,t,i,a,s,o,r,l,u,p,f,h,m,_){var g=s,m=!!m;for(this.save().gCo(_).strokeStyle(l,u,p).shadowOn(f).fillStyle(r).moveTo(e,t).beginPath(),m&&this.moveTo(e,t);o>=g;)this.lineTo(e+i*d(g),t+a*c(g)),g+=n;return this.lineTo(e+i*d(o),t+a*c(o)).closePath().stroke(l).fill(r).restore()},arc:function(e,t,n,i,a,o,r,l,u,p,f,h,m,_){return l&&(n-=s(u/2)),0>=n?this:(this.save().gCo(_).strokeStyle(l,u,p).fillStyle(r).beginPath(),i?(this.moveTo(e+d(a)*(n-i),t+c(a)*(n-i)).lineTo(e+d(a)*n,t+c(a)*n),this.c.arc(e,t,n,a,o,h),this.lineTo(e+d(o)*(n-i),t+c(o)*(n-i)),this.c.arc(e,t,n-i,o,a,!h)):(this.c.arc(e,t,n,a,o,h),m&&this.lineTo(e,t)),this.closePath(),l?this.shadowOn(f).stroke(l).shadowOff().fill(r):this.shadowOn(f).fill(r),this.restore())},sector:function(e,t,n,i,a,s,o,r,l,c,d,u,p,f){return d&&this.arc(e,t,n,i,a,s,o,r,l,c,d,u,!p,!f),this.arc(e,t,n,i,a,s,o,r,l,c,!1,u,!p)},sector3D:function(){var a=function(t,i,a,s,o,r,l,u,p){var f=function(e,n){this.lineTo(t+a*d(e),i+(n||0)+s*c(e))},h=o;for(this.fillStyle(e.dark(p)).moveTo(t+a*d(o),i+s*c(o)).beginPath();r>=h;)f.call(this,h),h+=n;for(f.call(this,r),this.lineTo(t+a*d(r),i+u+s*c(r)),h=r;h>=o;)f.call(this,h,u),h-=n;f.call(this,o,u),this.lineTo(t+a*d(o),i+s*c(o)).closePath().fill(!0)},s=function(e,t,n,i,a,s,o,r){var l=e+n*d(o),u=t+s+i*c(o);this.moveTo(e,t).beginPath().fillStyle(r).lineTo(e,t+s).lineTo(l,u).lineTo(l,u-s).lineTo(e,t).closePath().fill(!0)},o=function(t,n,i,a,o,r,l,c,d){var u=e.quadrantd(o),p=e.quadrantd(r);d=e.dark(d),(1==u||2==u)&&s.call(this,t,n,i,a,l,c,o,d),(0==p||3==p)&&s.call(this,t,n,i,a,l,c,r,d)},r=function(e,t,n,i,s,r,l,c,d,u,p,f,h){return this.ellipse(e,t+l,n,i,s,r,c,d,u,p,f,h,!0),o.call(this,e,t,n,i,s,r,h,l,c),this.ellipse(e,t,n,i,s,r,c,d,u,p,!1,h,!0),a.call(this,e,t,n,i,s,r,h,l,c),this};return r.layerPaint=o,r.sPaint=a,r.layerDraw=s,r}(),textStyle:function(e,t,n){return this.textAlign(e).textBaseline(t).textFont(n)},strokeStyle:function(e,t,n,i){return e&&(t&&(this.c.lineWidth=t),n&&(this.c.strokeStyle=n),i&&(this.c.lineJoin=i)),this},globalAlpha:function(e){return e&&(this.c.globalAlpha=e),this},fillStyle:function(e){return e&&(this.c.fillStyle=e),this},arc2:function(e,t,n,i,a,s){return n&&this.c.arc(e,t,n,i,a,s),this},textAlign:function(e){return e&&(this.c.textAlign=e),this},textBaseline:function(e){return e&&(this.c.textBaseline=e),this},textFont:function(e){return e&&(this.c.font=e),this},shadowOn:function(e){return e&&(this.c.shadowColor=e.color,this.c.shadowBlur=e.blur,this.c.shadowOffsetX=e.offsetx,this.c.shadowOffsetY=e.offsety),this},shadowOff:function(){return this.c.shadowColor="white",this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0,this},gradient:function(e,t,n,i,a,s,o){s=s.toLowerCase();var r=e,l=t,c=!s.indexOf("linear");if(s=s.substring(14),c){switch(s){case"updown":l+=i;break;case"downup":t+=i;break;case"leftright":r+=n;break;case"rightleft":e+=n;break;default:return a[0]}return this.avgLinearGradient(e,t,r,l,a)}return e+=n/2,t+=i/2,this.avgRadialGradient(e,t,o||0,e,t,n>i?i:n,"outin"==s?a.reverse():a)},avgLinearGradient:function(e,t,n,i,a){for(var s=this.createLinearGradient(e,t,n,i),o=0;a.length>o;o++)s.addColorStop(o/(a.length-1),a[o]);return s},createLinearGradient:function(e,t,n,i){return this.c.createLinearGradient(e,t,n,i)},avgRadialGradient:function(e,t,n,i,a,s,o){for(var r=this.createRadialGradient(e,t,n,i,a,s),l=0;o.length>l;l++)r.addColorStop(l/(o.length-1),o[l]);return r},createRadialGradient:function(e,t,n,i,a,s){return this.c.createRadialGradient(e,t,n,i,a,s)},text:function(e,t,n,i,a,s,o,r,l,c,d,u){return this.save().textStyle(s,o,r).fillText(e,t,n,i,a,l,c,d,u).restore()},fillText:function(e,t,n,a,s,o,r,l,c){if(e=e.toString(),!e||!e.length)return this;a=a||!1,o=o||"lr",r=r||16,t=u(0,t),n=u(0,n);var d=e.split("tb"==o?"":"\n");return d.length>1&&("middle"==this.c.textBaseline?n-=(d.length-1)*r/2:"bottom"==this.c.textBaseline&&(n-=(d.length-1)*r)),this.save().fillStyle(s).translate(t,n).rotate(i*c).shadowOn(l),d.each(function(e,i){try{a&&a>0?this.c.fillText(e,0,i*r,a):this.c.fillText(e,0,i*r)}catch(s){console.log(s.message+"["+e+","+t+","+n+"]")}},this),this.restore()},measureText:function(e){e=e.split("\n");var t=0;return e.each(function(e){t=r(this.measureText(e).width,t)},this.c),t},moveTo:function(e,t){return e=e||0,t=t||0,this.c.moveTo(e,t),this},lineTo:function(e,t){return e=e||0,t=t||0,this.c.lineTo(e,t),this},save:function(){return this.c.save(),this},restore:function(){return this.c.restore(),this},beginPath:function(){return this.c.beginPath(),this},closePath:function(){return this.c.closePath(),this},stroke:function(e){return e&&this.c.stroke(),this},fill:function(e){return e&&this.c.fill(),this},cube:function(t,n,i,a,s,o,r,l,c,d,p,f){t=u(d,t),n=u(d,n),r=r&&r>0?r:s;var h=t+r*i,m=n-r*a;return h=u(d,h),m=u(d,m),f&&(this.polygon(l,c,d,p,f,!1,[{x:t,y:n},{x:h,y:m},{x:h+s,y:m},{x:t+s,y:n}]),this.polygon(l,c,d,p,f,!1,[{x:t,y:n},{x:t,y:n+o},{x:t+s,y:n+o},{x:t+s,y:n}]),this.polygon(l,c,d,p,f,!1,[{x:t+s,y:n},{x:h+s,y:m},{x:h+s,y:m+o},{x:t+s,y:n+o}])),this.polygon(e.dark(l),c,d,p,!1,!1,[{x:t,y:n},{x:h,y:m},{x:h+s,y:m},{x:t+s,y:n}]),this.polygon(l,c,d,p,!1,!1,[{x:t,y:n},{x:t,y:n+o},{x:t+s,y:n+o},{x:t+s,y:n}]),this.polygon(e.dark(l),c,d,p,!1,!1,[{x:t+s,y:n},{x:h+s,y:m},{x:h+s,y:m+o},{x:t+s,y:n+o}]),this},cube3D:function(t,n,i,a,s,o,r,l,c,d,p,f){if(t=u(d,t),n=u(d,n),l=l&&0!=l?l:o,s){var h=e.vectorP2P(i,a);i=t+l*h.x,a=n-l*h.y}else i=t+l*i,a=n-l*a;for(;6>f.length;)f.push(!1);i=u(d,i),a=u(d,a);var m=[];return 0>a?e.isObject(f[4])&&m.push(e.applyIf({points:[{x:t,y:n-r},{x:i,y:a-r},{x:i+o,y:a-r},{x:t+o,y:n-r}]},f[4])):e.isObject(f[0])&&m.push(e.applyIf({points:[{x:t,y:n},{x:i,y:a},{x:i+o,y:a},{x:t+o,y:n}]},f[0])),e.isObject(f[1])&&m.push(e.applyIf({points:[{x:i,y:a},{x:i,y:a-r},{x:i+o,y:a-r},{x:i+o,y:a}]},f[1])),e.isObject(f[2])&&m.push(e.applyIf({points:[{x:t,y:n},{x:t,y:n-r},{x:i,y:a-r},{x:i,y:a}]},f[2])),e.isObject(f[3])&&m.push(e.applyIf({points:[{x:t+o,y:n},{x:t+o,y:n-r},{x:i+o,y:a-r},{x:i+o,y:a}]},f[3])),0>a?e.isObject(f[0])&&m.push(e.applyIf({points:[{x:t,y:n},{x:i,y:a},{x:i+o,y:a},{x:t+o,y:n}]},f[0])):e.isObject(f[4])&&m.push(e.applyIf({points:[{x:t,y:n-r},{x:i,y:a-r},{x:i+o,y:a-r},{x:t+o,y:n-r}]},f[4])),e.isObject(f[5])&&m.push(e.applyIf({points:[{x:t,y:n},{x:t,y:n-r},{x:t+o,y:n-r},{x:t+o,y:n}]},f[5])),m.each(function(e){this.polygon(e.color,c,d,p,e.shadow,e.alpha,e.points)},this),this},polygon:function(e,t,n,i,a,s,o,r,l,c){if(this.save().strokeStyle(t,n,i).beginPath().fillStyle(e).globalAlpha(s).shadowOn(a).moveTo(o[0].x,o[0].y),r){this.moveTo(u(n,c[0].x),u(n,c[0].y)).lineTo(u(n,o[0].x),u(n,o[0].y));for(var d=1;o.length>d;d++)this.bezierCurveTo(p(o,o[d],d,l));this.lineTo(u(n,c[1].x),u(n,c[1].y))}else for(var d=1;o.length>d;d++)this.lineTo(u(n,o[d].x),u(n,o[d].y));return this.closePath().stroke(t).fill(e).restore()},lines:function(e,t,n,i){if(!t)return this;this.save().gCo(i).beginPath().strokeStyle(!0,t,n).moveTo(u(t,e[0]),u(t,e[1]));for(var a=2;e.length-1>a;a+=2)this.lineTo(u(t,e[a]),u(t,e[a+1]));return this.stroke(!0).restore()},bezierCurveTo:function(e){return this.c.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]),this},label:function(e,t,n){return this.save().beginPath().strokeStyle(!0,t,n).moveTo(u(t,e[0].x),u(t,e[0].y)).bezierCurveTo([e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]).stroke(!0).restore()},lineArray:function(e,t,n,i,a){if(!t)return this;this.save().beginPath().strokeStyle(!0,t,n).moveTo(u(t,e[0].x),u(t,e[0].y));for(var s=1;e.length>s;s++)i?this.bezierCurveTo(p(e,e[s],s,a||1.5)):this.lineTo(u(t,e[s].x),u(t,e[s].y));return this.stroke(!0).restore()},dotted:function(t,n,i,a,o,r,l,c,d){if(!o)return this;t=u(o,t),n=u(o,n),i=u(o,i),a=u(o,a);var f,p=e.distanceP2P(t,n,i,a);if(0>=l||l>=p||t!=i&&n!=a)return this.line(t,n,i,a,o,r,d);(t>i||n>a)&&(f=t,t=i,i=f,f=n,n=a,a=f),this.save().gCo(d).strokeStyle(!0,o,r).beginPath().moveTo(t,n);var h=l*(c||1),m=s(p/(l+h)),_=p-m*(l+h)>l,g=n==a;m=_?m+1:m;for(var v=1;m>=v;v++)this.lineTo(g?t+l*v+h*(v-1):t,g?n:n+l*v+h*(v-1)).moveTo(g?t+(l+h)*v:t,g?n:n+(l+h)*v);return _||this.lineTo(i,a),this.stroke(!0).restore()},line:function(e,t,n,i,a,s,o){return a?(this.save().gCo(o),this.beginPath().strokeStyle(!0,a,s).moveTo(u(a,e),u(a,t)).lineTo(u(a,n),u(a,i)).stroke(!0).restore()):this},round:function(e,t,n,i,a,s){return this.arc(e,t,n,0,0,o,i,!!s,a,s)},round0:function(e,t,n,i,a){return this.arc(e.x,e.y,t,0,0,o,n,!!a,i,a)},fillRect:function(e,t,n,i){return this.c.fillRect(e,t,n,i),this},translate:function(e,t){return this.c.translate(e,t),this},rotate:function(e){return this.c.rotate(e),this},clearRect:function(e,t,n,i){return e=e||0,t=t||0,n=n||this.canvas.width,i=i||this.canvas.height,this.c.clearRect(e,t,n,i),this},gCo:function(e){return e?this.gCO(e):this},gCO:function(e){return this.c.globalCompositeOperation=e?"destination-over":"source-over",this},box:function(n,i,r,l,c,d,p,f,h){if(c=c||{enable:0},c.enable){var m=c.width,_=c.color,g=c.radius,v=e.isNumber(m);m=e.parsePadding(m),m[0]==m[1]&&m[1]==m[2]&&m[2]==m[3]&&(v=!0),f=f?1:-1,r+=f*(m[1]+m[3])/2,l+=f*(m[0]+m[2])/2,n-=f*(m[3]/2),i-=f*(m[0]/2),m=v?m[0]:m,g=v&&g&&0!=g&&"0"!=g?e.parsePadding(g):0}return this.save().gCo(h).fillStyle(d).strokeStyle(v,m,_),g?this.beginPath().moveTo(u(m,n+g[0]),u(m,i)).lineTo(u(m,n+r-g[1]),u(m,i)).arc2(u(m,n+r-g[1]),u(m,i+g[1]),g[1],3*t/2,o).lineTo(u(m,n+r),u(m,i+l-g[2])).arc2(u(m,n+r-g[2]),u(m,i+l-g[2]),g[2],0,t/2).lineTo(u(m,n+g[3]),u(m,i+l)).arc2(u(m,n+g[3]),u(m,i+l-g[3]),g[3],t/2,t).lineTo(u(m,n),u(m,i+g[0])).arc2(u(m,n+g[0]),u(m,i+g[0]),g[0],t,3*t/2).closePath().shadowOn(p).stroke(m).shadowOff().fill(d):!c.enable||v?(m&&c.enable&&(this.shadowOn(p).c.strokeRect(n,i,r,l),this.shadowOff()),d&&this.fillRect(n,i,r,l)):(m&&(_=e.isArray(_)?_:[_,_,_,_],this.shadowOn(p).line(n+r,i+m[0]/2,n+r,i+l-m[0]/2,m[1],_[1],0).line(n,i+m[0]/2,n,i+l-m[0]/2,m[3],_[3],0).line(s(n-m[3]/2),i,n+r+m[1]/2,i,m[0],_[0],0).line(s(n-m[3]/2),i+l,n+r+m[1]/2,i+l,m[2],_[2],0).shadowOff()),d&&this.beginPath().moveTo(s(n+m[3]/2),s(i+m[0]/2)).lineTo(a(n+r-m[1]/2),i+m[0]/2).lineTo(a(n+r-m[1]/2),a(i+l-m[2]/2)).lineTo(s(n+m[3]/2),a(i+l-m[2]/2)).lineTo(s(n+m[3]/2),s(i+m[0]/2)).closePath().fill(d)),this.restore()},toDataURL:function(e){return this.canvas.toDataURL(e||"image/png")},addEvent:function(t,n,i){e.Event.addEvent(this.canvas,t,n,i)}},e.taylor={light:function(e,t){t.highlight=!1,e.on("mouseover",function(){t.highlight=!0,e.redraw("mouseover")}).on("mouseout",function(){t.highlight=!1,e.redraw("mouseout")}).on("beforedraw",function(){return e.push("f_color",t.highlight?e.get("light_color"):e.get("f_color_")),!0})}},e.Chart=e.extend(e.Painter,{configure:function(){e.Chart.superclass.configure.apply(this,arguments),this.type="chart",this.dataType="simple",this.set({id:"",render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},animation:!1,doAnimation:null,animation_timing_function:"easeInOut",animation_duration:1e3,z_index:999,legend:{enable:!1},tip:{enable:!1}}),this.registerEvent("beforeAnimation","afterAnimation","resize","animating"),this.T=null,this.Rendered=!1,this.Combination=!1,this.Animationed=!1,this.show=!1,this.data=[],this.plugins=[],this.components=[],this.oneways=[],this.total=0,this.ICHARTJS_CHART=!0},toDataURL:function(e){return this.T.toDataURL(e)},segmentRect:function(){this.Combination||this.T.clearRect()},resetCanvas:function(){this.Combination||this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,!0)},animation:function(t){t.segmentRect(),t.coo&&!t.ILLUSIVE_COO&&t.coo.draw(),t.doAnimation(t.variable.animation.time,t.duration,t),t.plugins.each(function(e){e.A_draw&&(e.variable.animation.animating=!0,e.variable.animation.time=t.variable.animation.time,e.draw(),e.variable.animation.animating=!1)}),t.Combination||(t.oneways.each(function(e){e.draw()}),t.duration>t.variable.animation.time?(t.variable.animation.time++,e.requestAnimFrame(function(){t.animation(t)})):e.requestAnimFrame(function(){t.Animationed=!0,t.plugins.each(function(e){e.Animationed=!0}),t.processAnimation=!1,t.draw(),t.plugins.each(function(e){e.processAnimation=!1}),t.fireEvent(t,"afterAnimation",[t])}))},runAnimation:function(e){e.fireEvent(e,"beforeAnimation",[e]),e.A_draw||(e.variable.animation={type:0,time:0,queue:[]}),e.processAnimation=!0,e.animation(e)},doSort:function(){var t=function(t,n){return(e.isArray(t)?t.zIndex||0:t.get("z_index"))>(e.isArray(n)?n.zIndex||0:n.get("z_index"))};this.components.sor(t),this.oneways.sor(t)},commonDraw:function(t,n){return t.show=!1,t.redraw||(e.Assert.isTrue(t.Rendered,t.type+" has not rendered"),e.Assert.isTrue(t.data&&t.data.length>0,t.type+"'s data is empty"),e.Assert.isTrue(t.initialization,t.type+" Failed to initialize"),t.doSort()),t.redraw=!0,!t.Animationed&&t.get("animation")?(t.runAnimation(t),void 0):(t.segmentRect(),t.components.eachAll(function(e){e.draw(n)}),t.components.eachAll(function(e){e.last&&e.last(e)}),t.oneways.each(function(e){e.draw()}),t.show=!0,void 0)},plugin:function(e){var t=this._();e.inject(t),e.ICHARTJS_CHART&&(e.Combination=!0,e.setUp()),t.get("animation")||e.push("animation",!1),e.duration=t.duration,t.register(e),t.plugins.push(e)},destroy:function(e){e.components.eachAll(function(e){e.destroy()}),e.oneways.each(function(e){e.destroy()})},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},create:function(t,n){if(t.get("fit")){var i=window.innerWidth,a=window.innerHeight,s=e.getDoc().body.style;s.padding="0px",s.margin="0px",s.overflow="hidden",t.push(t.W,i),t.push(t.H,a)}t.canvasid=e.uid(t.type),t.shellid="shell-"+t.canvasid;var o=[];o.push("<div id='"),o.push(t.shellid),o.push("' style='padding:0px;margin:0px;overflow:hidden;position:relative;'>"),o.push("<canvas id= '"),o.push(t.canvasid),o.push("' style='-webkit-text-size-adjust: none;'>"),o.push("<p>Your browser does not support the canvas element</p></canvas>"),o.push("</div>"),n.innerHTML=o.join(""),t.shell=e(t.shellid),t.T=t.target=new m(t.canvasid),t.size(t),t.Rendered=!0},setUp:function(){var e=this._();e.redraw=!1,e.T.clearRect(),e.initialization=!1,e.initialize()},load:function(e){var t=this._();t.push("data",e||[]),t.setUp(),(t.Combination?t.root:t).draw()},resize:function(t,n){t=e.parseFloat(t),n=e.parseFloat(n);var i=this._();i.Combination||(i.width=i.push(i.W,t),i.height=i.push(i.H,n),i.size(i)),i.set(i.fireEvent(i,"resize",[t,n])),i.setUp(),i.plugins.eachAll(function(e){e.Combination&&e.resize(t,n)}),i.Combination||i.draw()},size:function(e){e.T.canvas.width=e.width=e.pushIf(e.W,400),e.T.canvas.height=e.height=e.pushIf(e.H,300),e.shell.style.width=e.width+"px",e.shell.style.height=e.height+"px"},initialize:function(){var t=this._(),n=t.get("data"),i=t.get("render");t.push(t.X,null),t.push(t.Y,null),t.Combination?(e.apply(t.options,e.clone([t.W,t.H,"padding","border","client_height","client_width","minDistance","maxDistance","centerx","centery","l_originx","r_originx","t_originy","b_originy"],t.root.options,!0)),t.width=t.get(t.W),t.height=t.get(t.H),t.shell=t.root.shell,t.Rendered=!0):t.Rendered||i&&t.create(t,e(i)),t.Rendered&&!t.initialization&&(n&&n.length>0?h.call(t,n,t):e.isString(t.get("url"))&&t.ajax.call(t,t.get("url"),function(e){t.push("data",e),t.initialize(),t.draw()}))},eventOff:function(){this.stopEvent=!0},eventOn:function(){this.stopEvent=!1},oneWay:function(t){t.T.strokeStyle(!0,0,t.get("strokeStyle"),t.get("lineJoin")),t.processAnimation=t.get("animation"),e.isFunction(t.get("doAnimation"))&&(t.doAnimation=t.get("doAnimation")),t.animationArithmetic=e.getAA(t.get("animation_timing_function"));var r,l,n=t.variable.event,i=t.Combination,s=!t.get("turn_off_touchmove")&&!i,o=!e.touch&&t.get("default_mouseover_css")&&!i,c=e.touch?["touchstart","touchmove"]:["click","mousemove"];t.stopEvent=!1,t.A_draw=i&&t.processAnimation,e.register(t),i||c.each(function(n){t.T.addEvent(n,function(i){t.processAnimation||t.stopEvent||i.targetTouches&&1!=i.targetTouches.length||t.fireEvent(t,n,[t,e.Event.fix(i)])},!1)}),t.on(c[0],function(e,t){return e.components.eachAll(function(e){if(e.ICHARTJS_CHART){if(e.fireEvent(e,c[0],[e,t]))return n.click=!0,!1}else{var i=e.isMouseOver(t);if(i.valid)return n.click=!0,e.fireEvent(e,"click",[e,t,i]),!t.stopPropagation}}),n.click?(s&&t.event.preventDefault(),n.click=!1,!0):void 0}),(!e.touch||s)&&(t.on(c[1],function(e,t){return r=l=!1,e.components.eachAll(function(e){if(!e.ICHARTJS_CHART){var n=e.variable.event,i=e.isMouseOver(t);if(i.valid){if(r=r||e.atomic,n.mouseover||(n.mouseover=!0,e.fireEvent(e,"mouseover",[e,t,i])),e.fireEvent(e,"mousemove",[e,t,i]),i.stop)return!1}else n.mouseover&&(n.mouseover=!1,e.fireEvent(e,"mouseout",[e,t,i]));return!t.stopPropagation}return e.fireEvent(e,c[1],[e,t])?(r=!0,!1):void 0}),n.mouseover?(t.event.preventDefault(),r||(n.mouseover=!1,e.fireEvent(e,"mouseout",[e,t])),n.mouseover):(r&&(n.mouseover=r,e.fireEvent(e,"mouseover",[e,t])),void 0)}),o&&t.on("mouseover",function(){t.T.css("cursor","pointer")}).on("mouseout",function(){t.T.css("cursor","default")})),e.applyIf(t.get("sub_option"),e.clone(["shadow","tip"],t.options,!0)),t.Combination||(t.bg=new e.Custom({z_index:-1,drawFn:function(){t.T.box(0,0,t.width,t.height,t.get("border"),t.get("f_color"),0,0,!0)}}),t.duration=a(t.get("animation_duration")*e.FRAME/1e3)),t.oneWay=e.emptyFn},originXY:function(e,t,n){var i=e.get("align");return i==e.L?e.pushIf(e.X,t[0]):i==e.R?e.pushIf(e.X,t[1]):e.pushIf(e.X,t[2]),e.x=e.push(e.X,e.get(e.X)+e.get("offsetx")),e.y=e.push(e.Y,n[0]+e.get("offsety")),{x:e.x,y:e.y}},getPercent:function(e,t){return this.get("showpercent")?(100*(e/(t||this.total||1))).toFixed(this.get("decimalsnum"))+"%":e},doActing:function(t,n,i,a,s){var o=!!t.get("communal_acting"),r=t.getPercent(n.value,n.total);t.push(o?"sub_option":"communal_acting",e.clone(t.get(o?"communal_acting":"sub_option"),!0)),e.merge(t.get("sub_option"),n),e.merge(t.get("sub_option"),i),t.push("sub_option.value",r),t.push("sub_option.value_",n.value),t.get("sub_option.tip.enable")&&(t.push("sub_option.tip.text",s||n.name+" "+r),t.push("sub_option.tip.name",n.name),t.push("sub_option.tip.index",a),t.push("sub_option.tip.value",n.value),t.push("sub_option.tip.total",n.total||t.total))},register:function(t){return t.id=e.uid(t.type),this.components.push(t),t},remove:function(e,t){t&&e.components.each(function(n,i){return t.id==n.id?(e.components.splice(i,1),!1):void 0})},doConfig:function(){e.Chart.superclass.doConfig.call(this);var t=this._();if(t.destroy(t),t.oneways.length=0,t.oneWay(t),t.push("communal_acting",0),!t.Combination){t.oneways.push(t.bg),t.push("r_originx",t.width-t.get("padding_right")),t.push("b_originy",t.height-t.get("padding_bottom")),t.applyGradient(),e.isString(t.get("title"))&&t.push("title",e.applyIf({text:t.get("title")},t.default_.title)),e.isString(t.get("subtitle"))&&t.push("subtitle",e.applyIf({text:t.get("subtitle")},t.default_.subtitle)),e.isString(t.get("footnote"))&&t.push("footnote",e.applyIf({text:t.get("footnote")},t.default_.footnote));var o,n=0,i=t.push("l_originx",t.get("padding_left")),a=t.push("t_originy",t.get("padding_top")),s=t.push("client_width",t.width-t.get("hpadding"));if(""!=t.get("title.text")){var c=""!=t.get("subtitle.text");n=c?t.get("title.height")+t.get("subtitle.height"):t.get("title.height"),a=t.push("t_originy",a+n),t.push("title.originx",i),t.push("title.originy",t.get("padding_top")),t.push("title.maxwidth",s),t.pushIf("title.width",s),t.title=new e.Text(t.get("title"),t),t.oneways.push(t.title),c&&(t.push("subtitle.originx",i),t.push("subtitle.originy",t.get("padding_top")+t.get("title.height")),t.pushIf("subtitle.width",s),t.push("subtitle.maxwidth",s),t.subtitle=new e.Text(t.get("subtitle"),t),t.oneways.push(t.subtitle))}if(""!=t.get("footnote.text")){var d=t.get("footnote.height");n+=d,t.push("b_originy",t.get("b_originy")-d),t.push("footnote.originx",i),t.push("footnote.originy",t.get("b_originy")),t.push("footnote.maxwidth",s),t.pushIf("footnote.width",s),t.footnote=new e.Text(t.get("footnote"),t),t.oneways.push(t.footnote)}o=t.push("client_height",t.get(t.H)-t.get("vpadding")-t.pushIf("other_height",n)),t.push("minDistance",l(s,o)),t.push("maxDistance",r(s,o)),t.push("centerx",i+s/2),t.push("centery",a+o/2)}t.get("legend.enable")&&(t.legend=new e.Legend(e.apply({maxwidth:t.get("client_width"),data:t.data},t.get("legend")),t),t.oneways.push(t.legend)),t.push("sub_option.tip.wrap",t.push("tip.wrap",t.shell))}})}(e),e.Custom=e.extend(e.Component,{configure:function(){e.Custom.superclass.configure.apply(this,arguments),this.type="custom",this.set({drawFn:e.emptyFn,configFn:e.emptyFn,eventValid:void 0,animating_draw:!0})},doDraw:function(e){e.get("drawFn").call(e,e)},isEventValid:function(t,n){return e.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,t,n):{valid:!1}},doConfig:function(){e.Custom.superclass.doConfig.call(this);var t=this._();t.A_draw=t.get("animating_draw"),t.variable.animation={animating:!1,time:0},t.duration=0,t.get("configFn").call(t,t)}}),e.Scale=e.extend(e.Component,{configure:function(){e.Scale.superclass.configure.apply(this,arguments),this.type="scale",this.set({position:"left",which:"h",basic_value:0,scale2grid:!0,distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2}),this.registerEvent("parseText")},isEventValid:function(){return{valid:!1}},getScale:function(t){var n=[t.get("basic_value"),t.get("start_scale"),t.get("end_scale"),t.get("end_scale")-t.get("start_scale"),0];return n[4]=e.inRange(n[1],n[2]+1,n[0])||e.inRange(n[2]-1,n[1],n[0]),{range:n[4],basic:n[4]?(n[0]-n[1])/n[3]:0,start:n[4]?n[0]:n[1],end:n[2],distance:n[3]}},doDraw:function(e){e.get("scale_enable")&&e.items.each(function(t){e.T.line(t.x0,t.y0,t.x1,t.y1,e.get("scale_size"),e.get("scale_color"),!1)}),e.labels.each(function(e){e.draw()})},doLayout:function(e,t,n){n.get("scale_enable")&&n.items.each(function(n){n.x0+=e,n.y0+=t,n.x1+=e,n.y1+=t}),n.labels.each(function(n){n.doLayout(e,t,0,n)})},doConfig:function(){e.Scale.superclass.doConfig.call(this);var t=this._(),n=Math.abs,i=t.get("labels").length,a=t.get("min_scale"),s=t.get("max_scale"),o=t.get("scale_space"),r=t.get("end_scale"),l=t.get("start_scale");if(t.items=[],t.labels=[],t.number=0,i>0)t.number=i-1;else{if(l>a&&(l=t.push("start_scale",e.floor(a))),(!e.isNumber(r)||s>r)&&(r=e.ceil(s),r=t.push("end_scale",r||l?r:1)),o&&n(r-l)>n(o)&&t.push("scale_share",(r-l)/o),t.number=t.push("scale_share",n(t.get("scale_share"))),!o||o>r-l){for(var c=(r-l+"").indexOf(".")+1,d=1;c>0;)c--,d*=10;o=t.push("scale",(r-l)*d/t.get("scale_share")/d)}parseInt(o)!=o&&0==t.get("decimalsnum")&&t.push("decimalsnum",(o+"").substring((o+"").indexOf(".")+1).length)}t.push("distanceOne",t.get("valid_distance")/t.number);var u,p,f,h=0,m=0,_=0,g=0,v=0,b=0,y=t.get("scale_width"),w=y/2,k=t.get("scaleAlign"),x=t.get("position"),j=t.get("text_space"),$="",C=t.get("coo").get("axis.width");t.push("which",t.get("which").toLowerCase()),t.isH="h"==t.get("which"),t.isH?(k==t.O?g=-y:k==t.C?(g=-w,m=w):m=y,x==t.O?(b=-j-C[0],$=t.B):(b=j+C[2],$=t.O),x=t.C):(k==t.L?_=-y:k==t.C?(_=-w,h=w):h=y,$="middle",x==t.R?(x=t.L,v=j+C[1]):(x=t.R,v=-j-C[3]));for(var S=0;t.number>=S;S++)u=i?t.get("labels")[S]:(o*S+l).toFixed(t.get("decimalsnum")),p=t.isH?t.get("valid_x")+S*t.get("distanceOne"):t.x,f=t.isH?t.y:t.get("valid_y")+t.get("valid_distance")-S*t.get("distanceOne"),t.items.push({x:p,y:f,x0:p+_,y0:f+g,x1:p+h,y1:f+m}),t.get("label")&&t.labels.push(new e.Text(e.applyIf(e.apply(t.get("label"),e.merge({text:u,x:p,y:f,originx:p+v,originy:f+b},t.fireEvent(t,"parseText",[u,p+v,f+b,S,t.number==S]))),{textAlign:x,textBaseline:$}),t))}}),e.Coordinate={coordinate_:function(t){var n=this._(),i=n.get("coordinate");if(i.ICHARTJS_OBJECT)return n.x=n.push(n.X,i.x),n.y=n.push(n.Y,i.y),n.ILLUSIVE_COO=!0,i;var a="85%",s=e.parsePercent,o=n.get("coordinate.scale"),r=n.get("scaleAlign"),l=n.push("coordinate._width",s(n.get("coordinate.width")||a,Math.floor(n.get("client_width"))));if(h=n.push("coordinate._height",s(n.get("coordinate.height")||a,Math.floor(n.get("client_height")))-(n.is3D()?(n.get("coordinate.pedestal_height")||22)+(n.get("coordinate.board_deep")||20):0)),n.push("coordinate.valid_height_value",s(n.get("coordinate.valid_height"),h)),n.push("coordinate.valid_width_value",s(n.get("coordinate.valid_width"),l)),n.originXY(n,[n.get("l_originx"),n.get("r_originx")-l,n.get("centerx")-l/2],[n.get("centery")-h/2]),n.push("coordinate.originx",n.x),n.push("coordinate.originy",n.y),t&&t(),e.isObject(o)&&(o=[o]),e.isArray(o)){var c="stacked"!=n.dataType;o.each(function(t){n.get("percent")&&t.position==r&&(t=e.apply(t,{start_scale:0,end_scale:100,scale_space:10,listeners:{parseText:function(e){return{text:e+"%"}}}})),(!t.start_scale||c&&t.start_scale>n.get("minValue"))&&(t.min_scale=n.get("minValue")),(!t.end_scale||c&&n.get("maxValue")>t.end_scale)&&(t.max_scale=n.get("maxValue"))})}else n.push("coordinate.scale",{position:r,scaleAlign:r,max_scale:n.get("maxValue"),min_scale:n.get("minValue")});return n.is3D()&&(n.push("coordinate.xAngle_",n.get("xAngle_")),n.push("coordinate.yAngle_",n.get("yAngle_")),n.push("coordinate.zHeight",n.get("zHeight")*n.get("bottom_scale"))),n.remove(n,n.coo),n.register(new(e[n.is3D()?"Coordinate3D":"Coordinate2D"])(n.get("coordinate"),n))}},e.Coordinate2D=e.extend(e.Component,{configure:function(){e.Coordinate2D.superclass.configure.apply(this,arguments),this.type="coordinate2d",this.set({sign_size:12,sign_space:5,scale:[],width:"85%",height:"85%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",background_color:0,striped:!0,striped_direction:"v",striped_factor:.01,crosshair:{enable:!1},z_index:-1,axis:{enable:!0,color:"#666666",width:1}}),this.scale=[],this.gridlines=[]},getScale:function(e,t){for(var n=this._(),a=0;n.scale.length>a;a++)if(n.scale[a].get("position")==e)return n.scale[a].getScale(n.scale[a]);if(!t)return e=e==n.L?n.R:e==n.R?n.L:e==n.O?n.B:n.O,n.getScale(e,!0);throw new Error("there no valid scale")},isEventValid:function(e,t){return{valid:e.x>t.x&&t.x+t.width>e.x&&t.y+t.height>e.y&&e.y>t.y}},doDraw:function(t){if(t.T.box(t.x,t.y,t.width,t.height,0,t.get("f_color")),t.get("striped"))var n,i,a=!1,o=(t.get("axis.width"),e.dark(t.get("background_color"),t.get("striped_factor"),0));var r="v"==t.get("striped_direction");t.gridlines.each(function(e){t.get("striped")&&(a&&(r?t.T.box(e.x1,e.y1+e.width,e.x2-e.x1,i-e.y1-e.width,0,o):t.T.box(n+e.width,e.y2,e.x1-n,e.y1-e.y2,0,o)),n=e.x1,i=e.y1,a=!a)}).each(function(e){e.overlap||(e.solid?t.T.line(e.x1,e.y1,e.x2,e.y2,e.width,e.color):t.T.dotted(e.x1,e.y1,e.x2,e.y2,e.width,e.color,e.size,e.fator))}),t.T.box(t.x,t.y,t.width,t.height,t.get("axis"),!1,t.get("shadow"),!0),t.scale.each(function(e){e.draw()})},destroy:function(){this.crosshair&&this.crosshair.destroy()},doCrosshair:function(t){t.get("crosshair.enable")&&!t.crosshair&&(t.push("crosshair.wrap",t.root.shell),t.push("crosshair.height",t.height),t.push("crosshair.width",t.width),t.push("crosshair.top",t.y),t.push("crosshair.left",t.x),t.crosshair=new e.CrossHair(t.get("crosshair"),t))
},doConfig:function(){e.Coordinate2D.superclass.doConfig.call(this);var t=this._();if(t.atomic=!1,t.width=t.get("_width"),t.height=t.get("_height"),t.valid_width=t.get("valid_width_value"),t.valid_height=t.get("valid_height_value"),t.get("gradient")&&e.isString(t.get("f_color"))&&t.push("f_color",t.T.avgLinearGradient(t.x,t.y,t.x,t.y+t.height,[t.get("dark_color"),t.get("light_color")])),t.get("axis.enable")){var n=t.get("axis.width");e.isArray(n)||t.push("axis.width",[n,n,n,n])}else t.push("axis.width",[0,0,0,0]);t.doCrosshair(t);var i,a=!(!t.get("gridlinesVisible")||!t.get("grids")),s=a&&!!t.get("grids.horizontal"),o=a&&!!t.get("grids.vertical"),r=t.height,l=t.width,c=t.valid_width,d=t.valid_height,u=t.get("gridlinesVisible")&&t.get("scale2grid")&&!(s&&o),p=t.push("x_start",t.x+(l-c)/2),f=t.push("y_start",t.y+(r-d)/2),h=t.get("axis.width");t.push("x_end",t.x+(l+c)/2),t.push("y_end",t.y+(r+d)/2),e.isArray(t.get("scale"))||(e.isObject(t.get("scale"))?t.push("scale",[t.get("scale")]):t.push("scale",[])),t.get("scale").each(function(n){i=n.position,i=i||t.L,i=i.toLowerCase(),n[t.X]=t.x,n.coo=t,n[t.Y]=t.y,n.valid_x=p,n.valid_y=f,n.position=i,i==t.O?(n.which="h",n.distance=l,n.valid_distance=c):i==t.R?(n.which="v",n.distance=r,n.valid_distance=d,n[t.X]+=l,n.valid_x+=c):i==t.B?(n.which="h",n.distance=l,n.valid_distance=c,n[t.Y]+=r,n.valid_y+=d):(n.which="v",n.distance=r,n.valid_distance=d),t.scale.push(new e.Scale(n,t.root))},t);var m=t.push("ignoreOverlap",t.get("ignoreOverlap")&&t.get("axis.enable")||t.get("ignoreEdge"));if(m)if(t.get("ignoreEdge"))var _=function(e,n,i){return"v"==e?i==t.y||i==t.y+r:n==t.x||n==t.x+e};else var _=function(e,n,i){return"v"==e?i==t.y&&h[0]>0||i==t.y+r&&h[2]>0:n==t.x&&h[3]>0||n==t.x+l&&h[1]>0};var g={solid:!0,size:10,fator:1,width:t.get("grid_line_width"),color:t.get("grid_color")},v=e.applyIf(t.get("gridHStyle"),g),b=e.applyIf(t.get("gridVStyle"),g);if(u){var w,k,x;t.scale.each(function(n){x=n.get("position"),e.isFalse(n.get("scale2grid"))||s&&"v"==n.get("which")||o&&"h"==n.get("which")||(w=k=0,x==t.O?k=r:x==t.R?w=-l:x==t.B?k=-r:w=l,n.items.each(function(i){m&&t.gridlines.push(e.applyIf({overlap:_.call(t,n.get("which"),i.x,i.y),x1:i.x,y1:i.y,x2:i.x+w,y2:i.y+k},n.isH?b:v))}))})}if(o){var j=t.get("grids.vertical");e.Assert.isTrue(j.value>0,"vertical value");var $=l/j.value,C=j.value;"given_value"==j.way&&(C=$,$=j.value,$=$>l?l:$);for(var S=0;C>=S;S++)m&&t.gridlines.push(e.applyIf({overlap:_.call(t,"h",t.x+S*$,t.y),x1:t.x+S*$,y1:t.y,x2:t.x+S*$,y2:t.y+r,H:!1,width:b.width,color:b.color},b))}if(s){var D=t.get("grids.horizontal");e.Assert.isTrue(D.value>0,"horizontal value");var $=r/D.value,C=D.value;"given_value"==D.way&&(C=$,$=D.value,$=$>r?r:$);for(var S=0;C>=S;S++)m&&t.gridlines.push(e.applyIf({overlap:_.call(t,"v",t.x,t.y+S*$),x1:t.x,y1:t.y+S*$,x2:t.x+l,y2:t.y+S*$,H:!0,width:v.width,color:v.color},v))}}}),e.Coordinate3D=e.extend(e.Coordinate2D,{configure:function(){e.Coordinate3D.superclass.configure.apply(this,arguments),this.type="coordinate3d",this.dimension=e._3D,this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,left_board:!0,gradient:!0,color_factor:.18,ignoreEdge:!0,striped:!1,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(e){var t=e.width,n=e.height,i=e.get("xAngle_"),a=e.get("yAngle_"),s=e.get("zHeight"),o=e.get("z_offx"),r=e.get("z_offy");e.get("pedestal_height")&&e.T.cube3D(e.x,e.y+n+e.get("pedestal_height"),i,a,!1,t,e.get("pedestal_height"),3*s/2,e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("bottom_style")),e.get("board_deep")&&e.T.cube3D(e.x+o,e.y+n-r,i,a,!1,t,n,e.get("board_deep"),e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("board_style")),e.T.cube3D(e.x,e.y+n,i,a,!1,t,n,s,e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("wall_style")),e.gridlines.each(function(t){t.solid?(e.get("left_board")&&e.T.line(t.x1,t.y1,t.x1+o,t.y1-r,t.width,t.color),e.T.line(t.x1+o,t.y1-r,t.x2+o,t.y2-r,t.width,t.color)):(e.get("left_board")&&e.T.dotted(t.x1,t.y1,t.x1+o,t.y1-r,t.width,t.color,t.size,t.fator),e.T.dotted(t.x1+o,t.y1-r,t.x2+o,t.y2-r,t.width,t.color,t.size,t.fator))}),e.scale.each(function(e){e.draw()})},doConfig:function(){e.Coordinate3D.superclass.doConfig.call(this);for(var t=this._(),n=t.get("wall_style"),i=t.get("background_color")||"#d6dbd2",a=t.height,s=t.width,o=t.get("color_factor"),r=t.push("z_offx",t.get("xAngle_")*t.get("zHeight")),l=t.push("z_offy",t.get("yAngle_")*t.get("zHeight"));6>n.length;)n.push({color:i});t.get("left_board")||(n[2]=!1,t.scale.each(function(e){e.doLayout(r,-l,e)})),t.push("bottom_style",[{color:t.get("shadow_color"),shadow:t.get("shadow")},!1,!1,{color:n[3].color},!1,{color:n[3].color}]),t.push("board_style",[!1,!1,!1,{color:n[4].color},{color:n[5].color},!1]),t.get("gradient")&&(e.isString(n[0].color)&&(n[0].color=t.T.avgLinearGradient(t.x,t.y+a,t.x+s,t.y+a,[e.dark(n[0].color,o/2+.06),e.dark(n[0].color,o/2+.06)])),e.isString(n[1].color)&&(n[1].color=t.T.avgLinearGradient(t.x+r,t.y-l,t.x+r,t.y+a-l,[e.dark(n[1].color,o),e.light(n[1].color,o)])),e.isString(n[2].color)&&(n[2].color=t.T.avgLinearGradient(t.x,t.y,t.x,t.y+a,[e.light(n[2].color,o/3),e.dark(n[2].color,o)])),t.get("bottom_style")[5].color=t.T.avgLinearGradient(t.x,t.y+a,t.x,t.y+a+t.get("pedestal_height"),[e.light(n[3].color,o/2+.06),e.dark(n[3].color,o/2,0)])),t.push("wall_style",[n[0],n[1],n[2]])}}),e.Rectangle=e.extend(e.Component,{configure:function(){e.Rectangle.superclass.configure.apply(this,arguments),this.type="rectangle",this.set({width:0,height:0,value_space:4,value:"",label:{},name:"",tipAlign:"top",valueAlign:"top",shadow_blur:3,shadow_offsety:-1}),this.atomic=!0,this.registerEvent("parseText"),this.label=null},last:function(e){e.label&&e.label.draw()},doDraw:function(e){e.drawRectangle()},doConfig:function(){e.Rectangle.superclass.doConfig.call(this);var t=this._(),n=t.variable.event,i=t.get("valueAlign");e.taylor.light(t,n),t.width=t.get(t.W),t.height=t.get(t.H);var a=t.push("centerx",t.x+t.width/2),s=t.push("centery",t.y+t.height/2),o=t.C,r="middle",l=t.get("value_space");i==t.L?(o=t.R,a=t.x-l):i==t.R?(o=t.L,a=t.x+t.width+l):i==t.B?(s=t.y+t.height+l,r=t.O):i==t.O&&(s=t.y-l,r=t.B),t.get("label")&&(t.push("label.originx",a),t.push("label.originy",s),t.push("label.text",t.push("value",t.fireString(t,"parseText",[t,t.get("value")],t.get("value")))),e.applyIf(t.get("label"),{textAlign:o,textBaseline:r,color:t.get("color")}),t.label=new e.Text(t.get("label"),t)),t.get("tip.enable")&&("follow"!=t.get("tip.showType")&&t.push("tip.invokeOffsetDynamic",!1),t.tip=new e.Tip(t.get("tip"),t))}}),e.Rectangle2D=e.extend(e.Rectangle,{configure:function(){e.Rectangle2D.superclass.configure.apply(this,arguments),this.type="rectangle2d",this.set({shadow_offsety:-2})},drawRectangle:function(){var e=this._();e.T.box(e.get(e.X),e.get(e.Y),e.get(e.W),e.get(e.H),e.get("border"),e.get("f_color"),e.get("shadow"))},isEventValid:function(e,t){return{valid:e.x>t.x&&t.x+t.width>e.x&&t.y+t.height>e.y&&e.y>t.y}},tipInvoke:function(){var e=this._();return function(t,n){return{left:e.tipX(t,n),top:e.tipY(t,n)}}},doConfig:function(){e.Rectangle2D.superclass.doConfig.call(this);var t=this._(),n=t.get("tipAlign");n==t.L||n==t.R?t.tipY=function(e,n){return t.get("centery")-n/2}:t.tipX=function(e){return t.get("centerx")-e/2},n==t.L?t.tipX=function(e){return t.x-t.get("value_space")-e}:n==t.R?t.tipX=function(){return t.x+t.width+t.get("value_space")}:t.tipY=n==t.B?function(){return t.y+t.height+3}:function(e,n){return t.y-n-3},t.applyGradient()}}),e.Rectangle3D=e.extend(e.Rectangle,{configure:function(){e.Rectangle3D.superclass.configure.apply(this,arguments),this.type="rectangle3d",this.dimension=e._3D,this.set({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,shadow_offsetx:2})},drawRectangle:function(){var e=this._();e.T.cube(e.get(e.X),e.get(e.Y),e.get("xAngle_"),e.get("yAngle_"),e.get(e.W),e.get(e.H),e.get("zHeight"),e.get("f_color"),e.get("border.enable"),e.get("border.width"),e.get("light_color"),e.get("shadow"))},isEventValid:function(e,t){return{valid:e.x>t.x&&t.x+t.get(t.W)>e.x&&t.y+t.get(t.H)>e.y&&e.y>t.y}},tipInvoke:function(){var e=this._();return function(t,n){return{left:e.topCenterX-t/2,top:e.topCenterY-n}}},doConfig:function(){e.Rectangle3D.superclass.doConfig.call(this);var t=this._();t.pushIf("zHeight",t.get(t.W)),t.topCenterX=t.x+(t.get(t.W)+t.get(t.W)*t.get("xAngle_"))/2,t.topCenterY=t.y-t.get(t.W)*t.get("yAngle_")/2-t.get("value_space"),t.get("valueAlign")==t.O&&t.label&&(t.label.push("textx",t.topCenterX),t.label.push("texty",t.topCenterY))}}),e.Sector=e.extend(e.Component,{configure:function(){e.Sector.superclass.configure.apply(this,arguments),this.type="sector",this.set({value:"",name:"",ignored:!1,counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,donutwidth:0,mutex:!1,increment:void 0,label_length:void 0,gradient_mode:"RadialGradientOutIn",mini_label_threshold_angle:15,mini_label:!1,label:{},rounded:!1}),this.atomic=!0,this.registerEvent("changed","parseText"),this.label=null,this.tip=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},getDimension:function(){var e=this._();return{x:e.x,x:e.y,startAngle:e.get("startAngle"),middleAngle:e.get("middleAngle"),endAngle:e.get("endAngle")}},doDraw:function(e){e.get("ignored")||(e.label&&!e.get("mini_label")&&e.label.draw(),e.drawSector(),e.label&&e.get("mini_label")&&e.label.draw())},doText:function(t,n,i){t.push("label.originx",n),t.push("label.originy",i),t.push("label.textBaseline","middle"),t.label=new e.Text(t.get("label"),t)},doLabel:function(t,n,i,a,s,o,r,l){t.push("label.originx",n),t.push("label.originy",i),t.push("label.quadrantd",a),t.push("label.line_points",s),t.push("label.labelx",o),t.push("label.labely",r),t.push("label.smooth",l),t.push("label.angle",t.get("middleAngle")%(2*Math.PI)),t.label=new e.Label(t.get("label"),t)},isLabel:function(){return this.get("label")&&!this.get("mini_label")},doConfig:function(){e.Sector.superclass.doConfig.call(this);var s,t=this._(),n=t.variable.event,i=t.get("label"),a=t.get("bound_event");return t.get("rounded")?(t.push("startAngle",0),t.push("endAngle",2*Math.PI),void 0):(e.taylor.light(t,n),t.push("totalAngle",t.get("endAngle")-t.get("startAngle")),i&&(t.get("mini_label")&&(t.get("mini_label_threshold_angle")*Math.PI/180>t.get("totalAngle")?t.push("mini_label",!1):e.apply(t.get("label"),t.get("mini_label"))),t.push("label.text",t.fireString(t,"parseText",[t,t.get("label.text")],t.get("label.text"))),t.pushIf("label.border.color",t.get("border.color")),t.push("label.scolor",t.get("background_color"))),t.variable.event.status=t.expanded=t.get("expand"),t.get("tip.enable")&&("follow"!=t.get("tip.showType")&&t.push("tip.invokeOffsetDynamic",!1),t.tip=new e.Tip(t.get("tip"),t)),n.poped=!1,t.on(a,function(){n.poped=!0,t.expanded=!t.expanded,t.redraw(a),n.poped=!1}),t.on("beforedraw",function(e,o){return o==a&&(s=!1,t.x=t.get(t.X),t.y=t.get(t.Y),t.expanded&&(t.get("mutex")&&!n.poped?(t.expanded=!1,s=!0):(t.x+=t.get("inc_x"),t.y-=t.get("inc_y"))),n.status!=t.expanded&&(t.fireEvent(t,"changed",[t,t.expanded]),s=!0,n.status=t.expanded),i&&s&&t.label.doLayout(t.get("inc_x")*(t.expanded?1:-1),-t.get("inc_y")*(t.expanded?1:-1),2,t.label)),!0}),void 0)}}),e.Sector2D=e.extend(e.Sector,{configure:function(){e.Sector2D.superclass.configure.apply(this,arguments),this.type="sector2d",this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(t,n){if(!n.get("ignored")){if(n.isLabel()&&n.label.isEventValid(t,n.label).valid)return{valid:!0};var i=e.distanceP2P(n.x,n.y,t.x,t.y),a=n.get("donutwidth");if(i>n.r||a&&n.r-a>i)return{valid:!1};if(e.angleInRange(n.get("startAngle"),n.get("endAngle"),e.atan2Radian(n.x,n.y,t.x,t.y)))return{valid:!0}}return{valid:!1}},tipInvoke:function(){var t=this,n=t.get("middleAngle"),i=e.quadrantd(n);return function(a,s){var o=e.p2Point(t.x,t.y,n,.8*t.r);return{left:i>=1&&2>=i?o.x-a:o.x,top:i>=2?o.y-s:o.y}}},doConfig:function(){e.Sector2D.superclass.doConfig.call(this);var t=this._();t.r=t.get("radius"),t.get("donutwidth")>t.r&&t.push("donutwidth",0),t.applyGradient(t.x-t.r,t.y-t.r,.9*2*t.r,.9*2*t.r);var n=t.get("middleAngle"),i=t.pushIf("increment",e.lowTo(5,t.r/10));if(t.push("inc_x",i*Math.cos(2*Math.PI-n)),t.push("inc_y",i*Math.sin(2*Math.PI-n)),i*=2,t.get("label"))if(t.get("mini_label"))P2=e.p2Point(t.x,t.y,n,t.get("donutwidth")?t.r-t.get("donutwidth")/2:5*t.r/8),t.doText(t,P2.x,P2.y);else{var s=e.quadrantd(n),o=e.p2Point(t.x,t.y,n,t.r+i),r=e.p2Point(t.x,t.y,n,t.r+.6*i);P2=e.p2Point(t.x,t.y,n,t.r),t.doLabel(t,P2.x,P2.y,s,[{x:P2.x,y:P2.y},{x:r.x,y:r.y},{x:o.x,y:o.y}],o.x,o.y,.4*i)}}}),e.Sector3D=e.extend(e.Sector,{configure:function(){e.Sector3D.superclass.configure.apply(this,arguments),this.type="sector3d",this.dimension=e._3D,this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0}),this.proxy=!0},isEventValid:function(t,n){if(!n.get("ignored")){if(n.isLabel()&&n.label.isEventValid(t,n.label).valid)return{valid:!0};if(!e.inEllipse(t.x-n.x,t.y-n.y,n.a,n.b))return{valid:!1};if(e.angleZInRange(n.sA,n.eA,e.atan2Radian(n.x,n.y,t.x,t.y)))return{valid:!0}}return{valid:!1}},p2p:function(e,t,n,i){return{x:e+this.a*Math.cos(n)*i,y:t+this.b*Math.sin(n)*i}},tipInvoke:function(){var t=this,n=t.get("middleAngle"),i=e.quadrantd(n);return function(e,a){var s=t.p2p(t.x,t.y,n,.6);return{left:i>=2&&3>=i?s.x-e:s.x,top:i>=3?s.y-a:s.y}}},doConfig:function(){e.Sector3D.superclass.doConfig.call(this);var t=this._(),n=t.get("counterclockwise"),i=t.get("middleAngle");t.a=t.get("semi_major_axis"),t.b=t.get("semi_minor_axis"),t.h=t.get("cylinder_height"),e.Assert.isTrue(t.a*t.b>=0,"major&minor");var a=2*Math.PI,s=function(i){for(;0>i;)i+=a;return Math.abs(e.atan2Radian(0,0,t.a*Math.cos(i),n?-t.b*Math.sin(i):t.b*Math.sin(i)))},o=t.pushIf("increment",e.lowTo(5,t.a/10));if(t.sA=s.call(t,t.get("startAngle")),t.eA=s.call(t,t.get("endAngle")),t.mA=s.call(t,i),t.push("inc_x",o*Math.cos(a-t.mA)),t.push("inc_y",o*Math.sin(a-t.mA)),o*=2,t.get("label"))if(t.get("mini_label")){var r=t.p2p(t.x,t.y,i,.5);t.doText(t,r.x,r.y)}else{var l=e.quadrantd(i),c=t.p2p(t.x,t.y,i,o/t.a+1),d=t.p2p(t.x,t.y,i,.6*o/t.a+1),u=t.p2p(t.x,t.y,i,1);t.doLabel(t,u.x,u.y,l,[{x:u.x,y:u.y},{x:d.x,y:d.y},{x:c.x,y:c.y}],c.x,c.y,.4*o)}}}),e.Pie=e.extend(e.Chart,{configure:function(){e.Pie.superclass.configure.call(this),this.type="pie",this.set({radius:"100%",offset_angle:0,separate_angle:0,bound_event:"click",counterclockwise:!1,intellectLayout:!0,layout_distance:4,pop_animate:!1,mutex:!1,increment:void 0,sub_option:{label:{}}}),this.registerEvent("bound","rebound"),this.sectors=[],this.components.push(this.sectors),this.ILLUSIVE_COO=!0},toggle:function(e){this.sectors[e||0].toggle()},bound:function(e){this.sectors[e||0].bound()},rebound:function(e){this.sectors[e||0].rebound()},getSectors:function(){return this.sectors},doAnimation:function(e,t,n){var i=0,a=n.oA;n.sectors.each(function(s){i=n.animationArithmetic(e,0,s.get("totalAngle"),t),s.push("startAngle",a),s.push("endAngle",a+=i),n.is3D()||s.drawSector()}),n.is3D()&&n.proxy.drawSector()},parse:function(e){e.data.each(function(t,n){e.doParse(e,t,n)},e),e.localizer(e)},doParse:function(e,t,n){var i=t.name+" "+e.getPercent(t.value);e.doActing(e,t,null,n,i),e.push("sub_option.id",n),e.get("sub_option.label")&&e.push("sub_option.label.text",i),e.push("sub_option.listeners.changed",function(t,n){e.fireEvent(e,n?"bound":"rebound",[e,t.get("name")])}),e.sectors.push(e.doSector(e,t))},doSector:function(t){return new e[t.sub](t.get("sub_option"),t)},dolayout:function(t,n,i,a,s,o){(t.is3D()?e.inEllipse(t.get(t.X)-n,t.topY-i,t.a,t.b):t.r>e.distanceP2P(t.get(t.X),t.topY,n,i))&&(i=t.topY-i,a.push("labelx",t.get(t.X)+(2*Math.sqrt(t.r*t.r-i*i)+s)*(0==o||3==o?1:-1)),a.localizer(a))},localizer:function(e){if(e.get("intellectLayout")){var a,s,o,t=[],n=[],i=e.get("layout_distance");e.sectors.each(function(e){e.isLabel()&&t.push(e.label)}),t.sor(function(e,t){return Math.abs(Math.sin(e.get("angle")))-Math.abs(Math.sin(t.get("angle")))>0}),t.each(function(t){n.each(function(n){s=n.labelx,o=n.labely,(o>=t.labely&&t.get(e.H)>o-t.labely-1||t.labely>o&&n.get(e.H)>t.labely-o-1)&&(s>=t.labelx&&t.get(e.W)>s-t.labelx||t.labelx>s&&n.get(e.W)>t.labelx-s)&&(a=t.get("quadrantd"),t.push("labely",t.get("labely")+o-t.labely+(t.get(e.H)+i)*(a>1?-1:1)),t.localizer(t),e.dolayout(e,t.get("labelx"),t.get("labely")+t.get(e.H)/2*(2>a?-1:1),t,i,a))},e),n.push(t)})}},doConfig:function(){e.Pie.superclass.doConfig.call(this);var n,t=this._(),i=t.get("radius"),a=t.get("sub_option.label")?.35:.44,s=2*Math.PI;t.sub=t.is3D()?"Sector3D":"Sector2D",t.sectors.zIndex=t.get("z_index"),t.sectors.length=0,t.oA=e.angle2Radian(t.get("offset_angle"))%s,t.is3D()&&(a+=.06);var o=t.data.length,r=e.angle2Radian(e.between(0,90,t.get("separate_angle"))),l=s-r,r=r/o,c=t.oA+r,d=c;0==t.total&&(n=1/o),t.data.each(function(e,i){c+=(n||e.value/t.total)*l,i==o-1&&(c=s+t.oA),e.startAngle=d,e.endAngle=c,e.totalAngle=c-d,e.middleAngle=(d+c)/2,d=c+r},t),t.r=i=e.parsePercent(i,Math.floor(t.get("minDistance")*a)),t.topY=t.originXY(t,[i+t.get("l_originx"),t.get("r_originx")-i,t.get("centerx")],[t.get("centery")]).y,e.apply(t.get("sub_option"),e.clone([t.X,t.Y,"bound_event","mutex","increment"],t.options))}}),e.Pie2D=e.extend(e.Pie,{configure:function(){e.Pie2D.superclass.configure.call(this),this.type="pie2d"},doConfig:function(){e.Pie2D.superclass.doConfig.call(this);var t=this._();t.push("sub_option.radius",t.r),t.parse(t)}}),e.register("Pie2D"),e.Pie3D=e.extend(e.Pie,{configure:function(){e.Pie3D.superclass.configure.apply(this,arguments),this.type="pie3d",this.dimension=e._3D,this.set({zRotate:45,yHeight:30}),this.positive=!0},doSector:function(t,n){return t.push("sub_option.cylinder_height",n.cylinder_height?n.cylinder_height*t.get("zRotate_"):t.get("cylinder_height")),new e[t.sub](t.get("sub_option"),t)},one:function(t){var n,i,c,a=[],s=t.get("counterclockwise"),o=function(e,t){return 1+Math.sin(t?e+Math.PI:e)},r="startAngle",l="endAngle";lay=function(t,i,a,s){c=e.quadrantd(i),(t&&(0==c||3==c)||!t&&(2==c||1==c))&&n.push({g:i,z:i==a,x:s.x,y:s.y,a:s.a,b:s.b,color:e.dark(s.get("background_color")),h:s.h,F:s})},t.proxy=new e.Custom({z_index:t.get("z_index")+1,drawFn:function(){this.drawSector(),a=[],t.sectors.each(function(e){e.get("label")&&(e.expanded?a.push(e.label):e.label.draw())}),a.each(function(e){e.draw()})}}),t.proxy.drawSector=function(){t.sectors.each(function(e){t.T.ellipse(e.x,e.y+e.h,e.a,e.b,e.get(r),e.get(l),0,e.get("border.enable"),e.get("border.width"),e.get("border.color"),e.get("shadow"),s,!0)},t),n=[],i=[],t.sectors.each(function(t){lay(s,t.get(r),t.get(l),t),lay(!s,t.get(l),t.get(r),t),i=i.concat(e.visible(t.get(r),t.get(l),t))},t),n.sor(function(e,t){var n=o(e.g)-o(t.g);return 0==n?e.z:n>0}),n.each(function(e){t.T.sector3D.layerDraw.call(t.T,e.x,e.y,e.a+.5,e.b+.5,s,e.h,e.g,e.color)},t),t.processAnimation||i.sor(function(e,t){return 0>o((e.s+e.e)/2,1)-o((t.s+t.e)/2,1)}),i.each(function(e){t.T.sector3D.sPaint.call(t.T,e.f.x,e.f.y,e.f.a,e.f.b,e.s,e.e,s,e.f.h,e.f.get("f_color"))},t),t.sectors.each(function(e){t.T.ellipse(e.x,e.y,e.a,e.b,e.get(r),e.get(l),e.get("f_color"),e.get("border.enable"),e.get("border.width"),e.get("border.color"),!1,!1,!0)},t)},t.one=e.emptyFn},doConfig:function(){e.Pie3D.superclass.doConfig.call(this);var t=this._(),n=e.angle2Radian(t.get("zRotate"));t.push("cylinder_height",t.get("yHeight")*t.push("zRotate_",Math.abs(Math.cos(n)))),t.a=t.push("sub_option.semi_major_axis",t.r),t.b=t.push("sub_option.semi_minor_axis",t.r*Math.abs(Math.sin(n))),t.topY=t.push("sub_option.originy",t.get(t.Y)-t.get("yHeight")/2),t.parse(t),t.one(t),t.components.push(t.proxy)}}),e.register("Pie3D"),e.Donut2D=e.extend(e.Pie,{configure:function(){e.Donut2D.superclass.configure.call(this),this.type="donut2d",this.set({donutwidth:.3,center:{text:"",line_height:24,fontweight:"bold",fontsize:24}})},doConfig:function(){e.Donut2D.superclass.doConfig.call(this);var t=this._(),n="donutwidth",i=t.r;t.push("sub_option.radius",i),t.get(n)>0&&(1>t.get(n)?t.push(n,Math.floor(i*t.get(n))):t.get(n)>=i&&t.push(n,0),t.push("sub_option.donutwidth",t.get(n))),e.isString(t.get("center"))&&t.push("center",e.applyIf({text:t.get("center")},t.default_.center)),""!=t.get("center.text")&&(t.push("center.originx",t.get(t.X)),t.push("center.originy",t.get(t.Y)),t.push("center.textBaseline","middle"),t.center=new e.Text(t.get("center"),t),t.components.push(t.center)),t.parse(t)}}),e.register("Donut2D"),e.Column=e.extend(e.Chart,{configure:function(){e.Column.superclass.configure.call(this),this.type="column",this.set({coordinate:{},column_width:void 0,column_space:void 0,text_space:6,scaleAlign:"left",sub_option:{},label:{}}),this.registerEvent(),this.rectangles=[],this.labels=[],this.components.push(this.labels),this.components.push(this.rectangles)},doAnimation:function(e,t,n){var i;n.labels.each(function(e){e.draw()}),n.rectangles.each(function(a){i=Math.ceil(n.animationArithmetic(e,0,a.height,t)),a.push(n.Y,a.y+(a.height-i)),a.push(n.H,i),a.drawRectangle()})},getCoordinate:function(){return this.coo},doLabel:function(t,n,i,a,s){t.labels.push(new e.Text(e.apply(t.get("label"),{id:n,text:i,originx:a,originy:s}),t))},doParse:function(e,t,n,i){e.doActing(e,t,i,n)},engine:function(e){var t=e.get("column_width"),n=e.get("column_space"),i=e.coo.getScale(e.get("scaleAlign")),a=e.coo.valid_height,s=t/2,o=t*(e.get("group_fator")||0),r="complex"!=e.dataType?t+n:e.data.length*t+n+(e.is3D()?(e.data.length-1)*o:0),l=e.coo.get("y_end"),c=l-i.basic*a-(e.is3D()?e.get("zHeight")*(e.get("bottom_scale")-1)/2*e.get("yAngle_"):0),d=n+e.coo.get("x_start");l=l+e.get("text_space")+e.coo.get("axis.width")[2],e.doEngine(e,t,n,i,a,s,o,r,d,c,l)},doConfig:function(){e.Column.superclass.doConfig.call(this);var t=this._(),n="column_width",i="z_index";t.sub=t.is3D()?"Rectangle3D":"Rectangle2D",t.rectangles.length=0,t.labels.length=0,t.rectangles.zIndex=t.get(i),t.labels.zIndex=t.get(i)+1,t.coo=e.Coordinate.coordinate_.call(t,function(){var a,s,o,e=t.data.length,i=t.get("coordinate.valid_width_value");"complex"==t.dataType?(o=t.get("labels").length,e=o*e+(t.is3D()?(e-1)*o*t.get("group_fator"):0),a=Math.floor(i/(o+1+e)),s=t.pushIf(n,a),o+=1):("stacked"==t.dataType&&(e=t.get("labels").length),a=Math.floor(2*i/(3*e+1)),s=t.pushIf(n,a),o=e+1),s*e>i&&(s=t.push(n,a)),t.push("column_space",(i-s*e)/o),t.is3D()&&(t.push("zHeight",t.get(n)*t.get("zScale")),t.push("sub_option.zHeight",t.get("zHeight")),t.push("sub_option.xAngle_",t.get("xAngle_")),t.push("sub_option.yAngle_",t.get("yAngle_")))}),t.push("sub_option.width",t.get(n))}}),e.Column2D=e.extend(e.Column,{configure:function(){e.Column2D.superclass.configure.call(this),this.type="column2d"},doEngine:function(t,n,i,a,s,o,r,l,c,d,u){var p;t.data.each(function(n,i){p=(n.value-a.start)*s/a.distance,t.doParse(t,n,i,{id:i,originx:c+i*l,originy:d-(p>0?p:0),height:Math.abs(p)}),t.rectangles.push(new e[t.sub](t.get("sub_option"),t)),t.doLabel(t,i,n.name,c+l*i+o,u)},t)},doConfig:function(){e.Column2D.superclass.doConfig.call(this),this.engine(this)}}),e.register("Column2D"),e.Column3D=e.extend(e.Column2D,{configure:function(){e.Column3D.superclass.configure.call(this),this.type="column3d",this.dimension=e._3D,this.set({coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){e.Column3D.superclass.doConfig.call(this)}}),e.register("Column3D"),e.ColumnMulti2D=e.extend(e.Column,{configure:function(){e.ColumnMulti2D.superclass.configure.call(this),this.type="columnmulti2d",this.dataType="complex",this.set({labels:[]})},doEngine:function(t,n,i,a,s,o,r,l,c,d,u){var p;t.columns.each(function(o,f){o.item.each(function(i,o){p=(i.value-a.start)*s/a.distance,t.doParse(t,i,o,{id:f+"_"+o,originx:c+o*(n+r)+f*l,originy:d-(p>0?p:0),height:Math.abs(p)}),t.rectangles.push(new e[t.sub](t.get("sub_option"),t))},t),t.doLabel(t,f,o.name,c-.5*i+(f+.5)*l,u)},t)},doConfig:function(){e.ColumnMulti2D.superclass.doConfig.call(this),this.engine(this)}}),e.register("ColumnMulti2D"),e.ColumnMulti3D=e.extend(e.ColumnMulti2D,{configure:function(){e.ColumnMulti3D.superclass.configure.call(this),this.type="columnmulti3d",this.dataType="complex",this.dimension=e._3D,this.set({xAngle:60,yAngle:20,zScale:1,group_fator:.3,bottom_scale:1.4})},doConfig:function(){e.ColumnMulti3D.superclass.doConfig.call(this)}}),e.register("ColumnMulti3D"),e.ColumnStacked2D=e.extend(e.Column,{configure:function(){e.ColumnStacked2D.superclass.configure.call(this),this.type="columnstacked2d",this.dataType="stacked",this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(t,n,i,a,s,o,r,l,c,d,u){var p,f,h,m=t.get("percent");t.columns.each(function(n,o){p=0,h=m?100/n.total:1,n.item.each(function(i,r){f=(i.value*h-a.start)*s/a.distance,i.total=n.total,t.doParse(t,i,r,{id:o+"_"+r,originx:c+o*l,originy:d-(f>0?f:0)-p,height:Math.abs(f)}),p+=f,t.rectangles.push(new e[t.sub](t.get("sub_option"),t))},t),t.doLabel(t,o,n.name,c-.5*i+(o+.5)*l,u)},t)},doConfig:function(){e.ColumnStacked2D.superclass.doConfig.call(this),this.engine(this)}}),e.register("ColumnStacked2D"),e.ColumnStacked3D=e.extend(e.ColumnStacked2D,{configure:function(){e.ColumnStacked3D.superclass.configure.call(this),this.type="columnstacked3d",this.dataType="stacked",this.dimension=e._3D,this.set({percent:!1,sub_option:{label:{color:"#ffffff"},valueAlign:"middle"},coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){e.ColumnStacked3D.superclass.doConfig.call(this)}}),e.register("ColumnStacked3D"),e.Bar=e.extend(e.Chart,{configure:function(){e.Bar.superclass.configure.call(this),this.type="bar",this.set({coordinate:{striped_direction:"h"},bar_height:void 0,bar_space:void 0,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}})},getCoordinate:function(){return this.coo},doLabel:function(t,n,i,a,s){t.labels.push(new e.Text(e.apply(t.get("label"),{id:n,text:i,textAlign:"right",textBaseline:"middle",originx:a,originy:s}),t))},doParse:function(e,t,n,i){e.doActing(e,t,i,n)},engine:function(e){var t=e.get("bar_height"),n=e.get("bar_space"),i=e.coo.getScale(e.get("scaleAlign")),a=e.coo.valid_width,s=t/2,o="complex"!=e.dataType?t+n:e.data.length*t+n,r=e.coo.get("x_start")+i.basic*a,l=e.coo.get(e.X)-e.get("text_space")-e.coo.get("axis.width")[3],c=e.coo.get("y_start")+n;e.doEngine(e,t,n,i,a,s,o,r,l,c)},doAnimation:function(e,t,n){n.labels.each(function(e){e.draw()}),n.rectangles.each(function(i){i.push(n.W,Math.ceil(n.animationArithmetic(e,0,i.width,t))),i.drawRectangle()})},doConfig:function(){e.Bar.superclass.doConfig.call(this);var t=this._(),n="bar_height",i="z_index";t.rectangles=[],t.labels=[],t.rectangles.zIndex=t.get(i),t.labels.zIndex=t.get(i)+1,t.components.push(t.labels),t.components.push(t.rectangles),t.coo=e.Coordinate.coordinate_.call(t,function(){var a,s,o,e=t.data.length,i=t.get("coordinate.valid_height_value");"complex"==t.dataType?(o=t.get("labels").length,e=o*e+(t.is3D()?(e-1)*o*t.get("group_fator"):0),a=Math.floor(i/(o+1+e)),s=t.pushIf(n,a),o+=1):("stacked"==t.dataType&&(e=t.get("labels").length),a=Math.floor(2*i/(3*e+1)),s=t.pushIf(n,a),o=e+1),s*e>i&&(s=t.push(n,a)),t.push("bar_space",(i-s*e)/o)}),t.push("sub_option.height",t.get(n)),t.push("sub_option.valueAlign",t.R),t.push("sub_option.tipAlign",t.R)}}),e.Bar2D=e.extend(e.Bar,{configure:function(){e.Bar2D.superclass.configure.call(this),this.type="bar2d"},doEngine:function(t,n,i,a,s,o,r,l,c,d){var u;t.data.each(function(n,i){u=(n.value-a.start)*s/a.distance,t.doParse(t,n,i,{id:i,originy:d+i*r,width:Math.abs(u),originx:l+(u>0?0:-Math.abs(u))}),t.rectangles.push(new e.Rectangle2D(t.get("sub_option"),t)),t.doLabel(t,i,n.name,c,d+i*r+o)},t)},doConfig:function(){e.Bar2D.superclass.doConfig.call(this),this.engine(this)}}),e.register("Bar2D"),e.BarMulti2D=e.extend(e.Bar,{configure:function(){e.BarMulti2D.superclass.configure.call(this),this.type="barmulti2d",this.dataType="complex",this.set({labels:[]})},doEngine:function(t,n,i,a,s,o,r,l,c,d){var u;t.columns.each(function(o,p){o.item.each(function(i,o){u=(i.value-a.start)*s/a.distance,t.doParse(t,i,o,{id:p+"_"+o,originy:d+o*n+p*r,width:Math.abs(u),originx:l+(u>0?0:-Math.abs(u))}),t.rectangles.push(new e.Rectangle2D(t.get("sub_option"),t))},t),t.doLabel(t,p,o.name,c,d-.5*i+(p+.5)*r)},t)},doConfig:function(){e.BarMulti2D.superclass.doConfig.call(this),this.engine(this)}}),e.register("BarMulti2D"),e.BarStacked2D=e.extend(e.Bar,{configure:function(){e.BarStacked2D.superclass.configure.call(this),this.type="barstacked2d",this.dataType="stacked",this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(t,n,i,a,s,o,r,l,c,d){var u,p,f,h=t.get("percent");t.columns.each(function(n,o){u=0,f=h?100/n.total:1,n.item.each(function(i,c){p=(i.value*f-a.start)*s/a.distance,i.total=n.total,t.doParse(t,i,c,{id:o+"_"+c,originy:d+o*r,originx:l+(p>0?0:-Math.abs(p))+u,width:Math.abs(p)}),u+=p,t.rectangles.push(new e.Rectangle2D(t.get("sub_option"),t))},t),t.doLabel(t,o,n.name,c,d-.5*i+(o+.5)*r)},t)},doConfig:function(){e.BarStacked2D.superclass.doConfig.call(this),this.push("sub_option.valueAlign",this.C),this.engine(this)}}),e.register("BarStacked2D"),e.LineSegment=e.extend(e.Component,{configure:function(){e.LineSegment.superclass.configure.apply(this,arguments),this.type="linesegment",this.set({brushsize:1,intersection:!0,label:{},sign:"round",area_color:null,hollow:!0,hollow_inside:!0,hollow_color:"#FEFEFE",smooth:!1,smoothing:1.5,point_size:6,points:[],keep_with_coordinate:!1,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0}),this.registerEvent("parseText"),this.tip=null},drawSegment:function(){var e=this._();e.polygons.each(function(t){e.T.polygon.apply(e.T,t)}),e.T.shadowOn(e.get("shadow")),e.lines.each(function(t){e.T.lineArray.apply(e.T,t)}),e.intersections.each(function(t){e.sign_plugin?e.sign_plugin_fn.apply(e,t):e.T.round0.apply(e.T,t)}),e.get("shadow")&&e.T.shadowOff()},doDraw:function(e){e.drawSegment(),e.get("label")&&e.labels.each(function(e){e.draw()})},isEventValid:function(){},tipInvoke:function(){var e=this.x,n=(this.y,this.get("tip_offset")),i=this.get("point_size")+n,a=this;return function(t,s,o){var r=o.left,l=o.top;return r=3>a.tipPosition&&r-t-e-n>0||a.tipPosition>2&&0>r-t-e-n?r-(t+n):r+n,l=0==a.tipPosition%2?l+i:l-s-i,{left:r,top:l}}},PP:function(e,t,n,i,a,s){e.get("area")&&e.polygons.push([e.get("area_color")||e.get("light_color2"),0,e.get("brushsize"),0,0,e.get("area_opacity"),e.get("smooth")?t:[{x:n,y:i}].concat(t.concat([{x:a,y:s}])),e.get("smooth"),e.get("smoothing")||1.5,[{x:n,y:i},{x:a,y:s}]])},parse:function(t){t.polygons=[],t.lines=[],t.intersections=[],t.labels=[];var n=t.get("points"),i=t.get("intersection"),a=!!t.get("label"),s=[],o=!1,r=t.get("smooth"),l=t.get("smoothing")||1.5,c=t.get("f_color"),d=t.get("brushsize"),u=t.get("point_size");if(i){var p=t.getPlugin("sign"),f=c,h=t.get("hollow_color");t.sign_plugin=e.isFunction(p),t.sign_plugin_fn=p,t.get("hollow_inside")&&(f=h,h=c)}n.each(function(n){n.x_=n.x,n.y_=n.y,!n.ignored&&a&&(t.push("label.originx",n.x),t.push("label.originy",n.y-u/2-1),t.push("label.text",t.fireString(t,"parseText",[t,n.value],n.value)),e.applyIf(t.get("label"),{textBaseline:"bottom",color:t.get("f_color")}),t.labels.push(new e.Text(t.get("label"),t))),n.ignored&&o?(t.lines.push([s,d,c,r,l]),t.PP(t,s,s[0].x,t.y,s[s.length-1].x,t.y),s=[],o=!1):n.ignored||(s.push(n),o=!0),i&&!n.ignored&&t.intersections.push(t.sign_plugin?[t.T,t.get("sign"),n,u,n.color||f,n.hollow_color||h]:t.get("hollow")?[n,u/2-d+1,n.color||f,d+1,n.hollow_color||h]:[n,u/2,n.color||f])
}),s.length&&(t.lines.push([s,d,c,r,l]),t.PP(t,s,s[0].x,t.y,s[s.length-1].x,t.y))},doConfig:function(){e.LineSegment.superclass.doConfig.call(this),e.Assert.isTrue(this.get("point_space")>0,"point_space");var t=this._(),n=3*t.get("point_size")/2,i=t.get("point_space"),a=t.get("event_range_y"),s=t.get("event_range_x"),o=t.get("tipInvokeHeap"),r=t.get("points"),l=t.get("name");t.parse(t),(0>=s||s>i/2)&&(s=t.push("event_range_x",i/2)),0==a&&(a=t.push("event_range_y",n/2)),t.get("tip.enable")&&(t.on("mouseover",function(){o.push(t),t.tipPosition=o.length}).on("mouseout",function(){o.pop()}),t.push("tip.invokeOffsetDynamic",!0),t.tip=new e.Tip(t.get("tip"),t));var c=t.get("coordinate"),d=t.get("limit_y"),u=t.get("keep_with_coordinate"),p=function(e,t,n){return!e.ignored&&s>Math.abs(t-e.x)&&(!d||d&&a>Math.abs(n-e.y))?!0:!1},f=function(e){return{valid:!0,name:l,value:r[e].value,text:r[e].text,top:r[e].y,left:r[e].x,i:e,hit:!0}};t.isEventValid=function(n){if(c&&!c.isEventValid(n,c).valid)return{valid:!1};var a=Math.floor((n.x-t.x)/i);if(0>a||a>=r.length-1)return a=e.between(0,r.length-1,a),p(r[a],n.x,n.y)?f(a):{valid:u};for(var s=a;a+1>=s;s++)if(p(r[s],n.x,n.y))return f(s);return{valid:u}}}}),e.Line=e.extend(e.Chart,{configure:function(){e.Line.superclass.configure.call(this),this.type="line",this.set({brushsize:1,coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:!1},tipMocker:null,tipMockerOffset:null,scaleAlign:"left",labelAlign:"bottom",labels:[],label_space:6,proportional_spacing:!0,sub_option:{},legend:{sign:"bar"},label:{}}),this.registerEvent("parsePoint"),this.lines=[],this.components.push(this.lines)},getCoordinate:function(){return this.coo},doConfig:function(){e.Line.superclass.doConfig.call(this);var t=this._(),n=1==t.data.length;t.lines.length=0,t.lines.zIndex=t.get("z_index");var i=t.pushIf("sub_option.keep_with_coordinate",n);t.get("crosshair.enable")&&(t.pushIf("crosshair.hcross",n),t.push("crosshair.invokeOffset",function(e){var a=t.lines[0].isEventValid(e);return a.valid?a:i})),t.Combination||(t.push("coordinate.crosshair",t.get("crosshair")),t.pushIf("coordinate.scale",[{position:t.get("scaleAlign"),max_scale:t.get("maxValue")},{position:t.get("labelAlign"),start_scale:1,scale:1,end_scale:t.get("maxItemSize"),labels:t.get("labels"),label:t.get("label")}])),t.coo=e.Coordinate.coordinate_.call(t),t.Combination&&(t.coo.push("crosshair",t.get("crosshair")),t.coo.doCrosshair(t.coo));var a=t.coo.valid_width,s=a,o=t.get("maxItemSize")-1,r=a/o,l=t.get("point_space");if(t.get("proportional_spacing")&&(l&&r>l?s=o*l:t.push("point_space",r)),t.push("sub_option.width",s),t.push("sub_option.height",t.coo.valid_height),t.push("sub_option.originx",t.coo.get("x_start")+(a-s)/2),t.push("sub_option.originy",t.coo.get("y_end")),t.get("tip.enable")&&!t.mocker&&e.isFunction(t.get("tipMocker"))){t.push("sub_option.tip.enable",!1),t.push("tip.invokeOffsetDynamic",!0);var c,h,m,_,d=t.coo.get(t.X),u=t.coo.get(t.Y),p=t.coo.height,f=t.get("tipMockerOffset");f=e.isNumber(f)?0>f?0:f>1?1:f:null,t.push("tip.invokeOffset",function(e,t,n){return null!=f?n.top=u+(p-t)*f:(n.top=n.maxTop-(n.maxTop-n.minTop)/3-t,(t>p||u>n.top)&&(n.top=u)),{left:n.left-e-d>5?n.left-e-5:n.left+5,top:n.top}});var g=t.get("tip.listeners.parseText");g&&delete t.get("tip.listeners").parseText,t.mocker=new e.Custom({eventValid:function(e){return m=t.lines[0].isEventValid(e),m.hit=h!=m.i,m.valid&&(h=m.i,c=[],t.lines.each(function(t,n){_=t.isEventValid(e),0==n?m.minTop=m.maxTop=_.top:(m.minTop=Math.min(m.minTop,_.top),m.maxTop=Math.max(m.maxTop,_.top)),c.push(g?g(null,_.name,_.value,_.text,_.i):_.name+" "+_.value)}),m.text=t.get("tipMocker").call(t,c,m.i)||"tipMocker not return"),m.valid?m:!1}}),new e.Tip(t.get("tip"),t.mocker),t.register(t.mocker)}t.pushIf("sub_option.area_opacity",t.get("area_opacity"))}}),e.LineBasic2D=e.extend(e.Line,{configure:function(){e.LineBasic2D.superclass.configure.call(this),this.type="basicline2d",this.tipInvokeHeap=[]},doAnimation:function(e,t,n){n.lines.each(function(i){i.get("points").each(function(a){a.y=i.y-Math.ceil(n.animationArithmetic(e,0,i.y-a.y_,t))}),i.drawSegment()})},doConfig:function(){e.LineBasic2D.superclass.doConfig.call(this);var n,s,o,r,c,d,t=this._(),i=t.coo.valid_height,a=t.get("point_space"),l=t.get("sub_option.originx");t.push("sub_option.tip.showType","follow"),t.push("sub_option.coordinate",t.coo),t.push("sub_option.tipInvokeHeap",t.tipInvokeHeap),t.push("sub_option.point_space",a),t.data.each(function(u){n=t.coo.getScale(u.scaleAlign||t.get("scaleAlign")),c=t.get("sub_option.originy")-n.basic*i,s=[],u.value.each(function(p,f){o=a*f,r=(p-n.start)*i/n.distance,d={x:l+o,y:c-r,value:p,text:u.name+" "+p},e.merge(d,t.fireEvent(t,"parsePoint",[u,p,o,r,f,n])),s.push(d)},t),e.merge(t.get("sub_option"),u),t.push("sub_option.points",s),t.push("sub_option.brushsize",u.linewidth||u.line_width),t.lines.push(new e.LineSegment(t.get("sub_option"),t))},this)}}),e.register("LineBasic2D"),e.Area2D=e.extend(e.LineBasic2D,{configure:function(){e.Area2D.superclass.configure.call(this),this.type="area2d",this.set({area_opacity:.3})},doConfig:function(){this.push("sub_option.area",!0),e.Area2D.superclass.doConfig.call(this)}}),e.register("Area2D")}(iChart),function(e){function i(t){var n=t||window.event,i=[].slice.call(arguments,1),a=0,o=0,r=0;return t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(a=n.wheelDelta/120),n.detail&&(a=-n.detail/3),r=a,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(r=0,o=-1*a),void 0!==n.wheelDeltaY&&(r=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(o=-1*n.wheelDeltaX/120),i.unshift(t,a,o,r),(e.event.dispatch||e.event.handle).apply(this,i)}var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var n=t.length;n;)e.event.fixHooks[t[--n]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],i,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(e){var t={init:function(t){var n={set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:950,mouseWheel:!0,mouseWheelPixels:"auto",autoDraggerLength:!0,autoHideScrollbar:!1,snapAmount:null,snapOffset:0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0,normalizeMouseWheelDelta:!1},contentTouchScroll:!0,callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){}},theme:"light"},t=e.extend(!0,n,t);return this.each(function(){var n=e(this);if(t.set_width&&n.css("width",t.set_width),t.set_height&&n.css("height",t.set_height),e(document).data("mCustomScrollbar-index")){var i=parseInt(e(document).data("mCustomScrollbar-index"));e(document).data("mCustomScrollbar-index",i+1)}else e(document).data("mCustomScrollbar-index","1");n.wrapInner("<div class='mCustomScrollBox mCS-"+t.theme+"' id='mCSB_"+e(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+e(document).data("mCustomScrollbar-index"));var a=n.children(".mCustomScrollBox");if(t.horizontalScroll){a.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />");var s=a.children(".mCSB_h_wrapper");s.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:s.children().outerWidth(),position:"relative"}).unwrap()}else a.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");var o=a.children(".mCSB_container");e.support.touch&&o.addClass("mCS_touch"),o.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");var r=a.children(".mCSB_scrollTools"),l=r.children(".mCSB_draggerContainer"),c=l.children(".mCSB_dragger");if(t.horizontalScroll?c.data("minDraggerWidth",c.width()):c.data("minDraggerHeight",c.height()),t.scrollButtons.enable&&(t.horizontalScroll?r.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>"):r.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>")),a.bind("scroll",function(){n.is(".mCS_disabled")||a.scrollTop(0).scrollLeft(0)}),n.data({mCS_Init:!0,mCustomScrollbarIndex:e(document).data("mCustomScrollbar-index"),horizontalScroll:t.horizontalScroll,scrollInertia:t.scrollInertia,scrollEasing:"mcsEaseOut",mouseWheel:t.mouseWheel,mouseWheelPixels:t.mouseWheelPixels,autoDraggerLength:t.autoDraggerLength,autoHideScrollbar:t.autoHideScrollbar,snapAmount:t.snapAmount,snapOffset:t.snapOffset,scrollButtons_enable:t.scrollButtons.enable,scrollButtons_scrollType:t.scrollButtons.scrollType,scrollButtons_scrollSpeed:t.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:t.scrollButtons.scrollAmount,autoExpandHorizontalScroll:t.advanced.autoExpandHorizontalScroll,autoScrollOnFocus:t.advanced.autoScrollOnFocus,normalizeMouseWheelDelta:t.advanced.normalizeMouseWheelDelta,contentTouchScroll:t.contentTouchScroll,onScrollStart_Callback:t.callbacks.onScrollStart,onScroll_Callback:t.callbacks.onScroll,onTotalScroll_Callback:t.callbacks.onTotalScroll,onTotalScrollBack_Callback:t.callbacks.onTotalScrollBack,onTotalScroll_Offset:t.callbacks.onTotalScrollOffset,onTotalScrollBack_Offset:t.callbacks.onTotalScrollBackOffset,whileScrolling_Callback:t.callbacks.whileScrolling,bindEvent_scrollbar_drag:!1,bindEvent_content_touch:!1,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_buttonsContinuous_y:!1,bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_focusin:!1,bindEvent_autoHideScrollbar:!1,mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1}),t.horizontalScroll)"none"!==n.css("max-width")&&(t.advanced.updateOnContentResize||(t.advanced.updateOnContentResize=!0));else if(n.data("scrollnoheight")){var d=e(window).height();a.css("max-height",d-n.data("scrollnoheight"))}else{var u=!1,p=parseInt(n.css("max-height"));n.css("max-height").indexOf("%")>=0&&(u=p,p=n.parent().height()*u/100),n.css("overflow","hidden"),a.css("max-height",p)}if(n.mCustomScrollbar("update"),t.advanced.updateOnBrowserResize){var f,h=e(window).width(),m=e(window).height();e(window).bind("resize."+n.data("mCustomScrollbarIndex"),function(){f&&clearTimeout(f),f=setTimeout(function(){if(!n.is(".mCS_disabled")&&!n.is(".mCS_destroyed")){var t=e(window).width(),i=e(window).height();(h!==t||m!==i)&&("none"!==n.css("max-height")&&u&&a.css("max-height",n.parent().height()*u/100),n.data("scrollnoheight")&&a.css("max-height",i-n.data("scrollnoheight")),n.mCustomScrollbar("update"),h=t,m=i)}},150)})}if(t.advanced.updateOnContentResize){var _;if(t.horizontalScroll)var g=o.outerWidth(!0);else var g=o.outerHeight(!0);_=setInterval(function(){if(t.horizontalScroll){t.advanced.autoExpandHorizontalScroll&&o.css({position:"absolute",width:"auto"}).css({width:o.outerWidth()});var e=o.outerWidth(!0)}else var e=o.outerHeight(!0);e!=g&&(n.mCustomScrollbar("update"),g=e)},300)}})},update:function(){var t=e(this),n=t.children(".mCustomScrollBox"),i=n.children(".mCSB_container");i.removeClass("mCS_no_scrollbar"),t.removeClass("mCS_disabled mCS_destroyed"),n.scrollTop(0).scrollLeft(0);var a=n.children(".mCSB_scrollTools"),s=a.children(".mCSB_draggerContainer"),o=s.children(".mCSB_dragger");if(t.data("horizontalScroll")){var r=a.children(".mCSB_buttonLeft"),l=a.children(".mCSB_buttonRight"),c=n.width();t.data("autoExpandHorizontalScroll")&&i.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:i.outerWidth(),position:"relative"}).unwrap();var d=i.outerWidth()}else var u=a.children(".mCSB_buttonUp"),p=a.children(".mCSB_buttonDown"),f=n.height(),h=i.outerHeight();if(h>f&&!t.data("horizontalScroll")){a.css("display","block");var m=s.height();if(t.data("autoDraggerLength")){var _=Math.round(f/h*m),g=o.data("minDraggerHeight");if(g>=_)o.css({height:g});else if(_>=m-10){var v=m-10;o.css({height:v})}else o.css({height:_});o.children(".mCSB_dragger_bar").css({"line-height":o.height()+"px"})}var b=o.height(),y=(h-f)/(m-b);t.data("scrollAmount",y).mCustomScrollbar("scrolling",n,i,s,o,u,p,r,l);var w=Math.abs(i.position().top);t.mCustomScrollbar("scrollTo",w,{scrollInertia:0,trigger:"internal"})}else if(d>c&&t.data("horizontalScroll")){a.css("display","block");var k=s.width();if(t.data("autoDraggerLength")){var x=Math.round(c/d*k),j=o.data("minDraggerWidth");if(j>=x)o.css({width:j});else if(x>=k-10){var $=k-10;o.css({width:$})}else o.css({width:x})}var C=o.width(),y=(d-c)/(k-C);t.data("scrollAmount",y).mCustomScrollbar("scrolling",n,i,s,o,u,p,r,l);var w=Math.abs(i.position().left);t.mCustomScrollbar("scrollTo",w,{scrollInertia:0,trigger:"internal"})}else n.unbind("mousewheel focusin"),t.data("horizontalScroll")?o.add(i).css("left",0):o.add(i).css("top",0),a.css("display","none"),i.addClass("mCS_no_scrollbar"),t.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1})},scrolling:function(t,i,a,s,o,r,l,c){function f(e,t,n,i){d.data("horizontalScroll")?d.mCustomScrollbar("scrollTo",s.position().left-t+i,{moveDragger:!0,trigger:"internal"}):d.mCustomScrollbar("scrollTo",s.position().top-e+n,{moveDragger:!0,trigger:"internal"})}function w(e){s.data("preventAction")||(s.data("preventAction",!0),d.mCustomScrollbar("scrollTo",e,{trigger:"internal"}))}function C(){var e=d.data("scrollButtons_scrollSpeed");return"auto"===d.data("scrollButtons_scrollSpeed")&&(e=Math.round((d.data("scrollInertia")+100)/40)),e}var d=e(this);if(!d.data("bindEvent_scrollbar_drag")){var u,p;e.support.msPointer?(s.bind("MSPointerDown",function(t){t.preventDefault(),d.data({on_drag:!0}),s.addClass("mCSB_dragger_onDrag");var n=e(this),i=n.offset(),a=t.originalEvent.pageX-i.left,o=t.originalEvent.pageY-i.top;n.width()>a&&a>0&&n.height()>o&&o>0&&(u=o,p=a)}),e(document).bind("MSPointerMove."+d.data("mCustomScrollbarIndex"),function(e){if(e.preventDefault(),d.data("on_drag")){var t=s,n=t.offset(),i=e.originalEvent.pageX-n.left,a=e.originalEvent.pageY-n.top;f(u,p,a,i)}}).bind("MSPointerUp."+d.data("mCustomScrollbarIndex"),function(){d.data({on_drag:!1}),s.removeClass("mCSB_dragger_onDrag")})):(s.bind("mousedown touchstart",function(t){t.preventDefault(),t.stopImmediatePropagation();var a,o,n=e(this),i=n.offset();if("touchstart"===t.type){var r=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];a=r.pageX-i.left,o=r.pageY-i.top}else d.data({on_drag:!0}),s.addClass("mCSB_dragger_onDrag"),a=t.pageX-i.left,o=t.pageY-i.top;n.width()>a&&a>0&&n.height()>o&&o>0&&(u=o,p=a)}).bind("touchmove",function(t){t.preventDefault(),t.stopImmediatePropagation();var n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],i=e(this),a=i.offset(),s=n.pageX-a.left,o=n.pageY-a.top;f(u,p,o,s)}),e(document).bind("mousemove."+d.data("mCustomScrollbarIndex"),function(e){if(d.data("on_drag")){var t=s,n=t.offset(),i=e.pageX-n.left,a=e.pageY-n.top;f(u,p,a,i)}}).bind("mouseup."+d.data("mCustomScrollbarIndex"),function(){d.data({on_drag:!1}),s.removeClass("mCSB_dragger_onDrag")})),d.data({bindEvent_scrollbar_drag:!0})}if(e.support.touch&&d.data("contentTouchScroll")&&!d.data("bindEvent_content_touch")){var h,m,_,g,v,b,y;i.bind("touchstart",function(t){t.stopImmediatePropagation(),h=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],m=e(this),_=m.offset(),v=h.pageX-_.left,g=h.pageY-_.top,b=g,y=v}),i.bind("touchmove",function(t){t.preventDefault(),t.stopImmediatePropagation(),h=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],m=e(this).parent(),_=m.offset(),v=h.pageX-_.left,g=h.pageY-_.top,d.data("horizontalScroll")?d.mCustomScrollbar("scrollTo",y-v,{trigger:"internal"}):d.mCustomScrollbar("scrollTo",b-g,{trigger:"internal"})})}if(d.data("bindEvent_scrollbar_click")||(a.bind("click",function(t){var n=(t.pageY-a.offset().top)*d.data("scrollAmount"),i=e(t.target);d.data("horizontalScroll")&&(n=(t.pageX-a.offset().left)*d.data("scrollAmount")),(i.hasClass("mCSB_draggerContainer")||i.hasClass("mCSB_draggerRail"))&&d.mCustomScrollbar("scrollTo",n,{trigger:"internal",scrollEasing:"draggerRailEase"})}),d.data({bindEvent_scrollbar_click:!0})),d.data("mouseWheel")&&(d.data("bindEvent_mousewheel")||(t.bind("mousewheel",function(e,t){if(!("TEXTAREA"===e.target.tagName&&e.target.scrollHeight>e.target.clientHeight)){e.preventDefault(),e.stopImmediatePropagation();var n,o=d.data("mouseWheelPixels"),r=Math.abs(i.position().top),l=s.position().top,c=a.height()-s.height();d.data("normalizeMouseWheelDelta")&&(t=0>t?-1:1),"auto"===o&&(o=100+Math.round(d.data("scrollAmount")/2)),d.data("horizontalScroll")&&(l=s.position().left,c=a.width()-s.width(),r=Math.abs(i.position().left)),(t>0&&0!==l||0>t&&l!==c)&&(e.preventDefault(),e.stopImmediatePropagation()),n=r-t*o,d.mCustomScrollbar("scrollTo",n,{trigger:"internal"})}}),d.data({bindEvent_mousewheel:!0}))),d.data("scrollButtons_enable"))if("pixels"===d.data("scrollButtons_scrollType"))d.data("horizontalScroll")?(c.add(l).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",k,x),d.data({bindEvent_buttonsContinuous_x:!1}),d.data("bindEvent_buttonsPixels_x")||(c.bind("click",function(e){e.preventDefault(),w(Math.abs(i.position().left)+d.data("scrollButtons_scrollAmount"))}),l.bind("click",function(e){e.preventDefault(),w(Math.abs(i.position().left)-d.data("scrollButtons_scrollAmount"))}),d.data({bindEvent_buttonsPixels_x:!0}))):(r.add(o).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",k,x),d.data({bindEvent_buttonsContinuous_y:!1}),d.data("bindEvent_buttonsPixels_y")||(r.bind("click",function(e){e.preventDefault(),w(Math.abs(i.position().top)+d.data("scrollButtons_scrollAmount"))}),o.bind("click",function(e){e.preventDefault(),w(Math.abs(i.position().top)-d.data("scrollButtons_scrollAmount"))}),d.data({bindEvent_buttonsPixels_y:!0})));else if(d.data("horizontalScroll")){if(c.add(l).unbind("click"),d.data({bindEvent_buttonsPixels_x:!1}),!d.data("bindEvent_buttonsContinuous_x")){c.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var t=C();d.data({mCSB_buttonScrollRight:setInterval(function(){d.mCustomScrollbar("scrollTo",Math.abs(i.position().left)+t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var k=function(e){e.preventDefault(),clearInterval(d.data("mCSB_buttonScrollRight"))};c.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",k),l.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var t=C();d.data({mCSB_buttonScrollLeft:setInterval(function(){d.mCustomScrollbar("scrollTo",Math.abs(i.position().left)-t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var x=function(e){e.preventDefault(),clearInterval(d.data("mCSB_buttonScrollLeft"))};l.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",x),d.data({bindEvent_buttonsContinuous_x:!0})}}else if(r.add(o).unbind("click"),d.data({bindEvent_buttonsPixels_y:!1}),!d.data("bindEvent_buttonsContinuous_y")){r.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var t=C();d.data({mCSB_buttonScrollDown:setInterval(function(){d.mCustomScrollbar("scrollTo",Math.abs(i.position().top)+t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var j=function(e){e.preventDefault(),clearInterval(d.data("mCSB_buttonScrollDown"))};r.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",j),o.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var t=C();d.data({mCSB_buttonScrollUp:setInterval(function(){d.mCustomScrollbar("scrollTo",Math.abs(i.position().top)-t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var $=function(e){e.preventDefault(),clearInterval(d.data("mCSB_buttonScrollUp"))};o.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",$),d.data({bindEvent_buttonsContinuous_y:!0})}d.data("autoScrollOnFocus")&&(d.data("bindEvent_focusin")||(t.bind("focusin",function(){t.scrollTop(0).scrollLeft(0);var n=e(document.activeElement);if(n.is("input,textarea,select,button,a[tabindex],area,object")){var a=i.position().top,s=n.position().top,o=t.height()-n.outerHeight();d.data("horizontalScroll")&&(a=i.position().left,s=n.position().left,o=t.width()-n.outerWidth()),(0>a+s||a+s>o)&&d.mCustomScrollbar("scrollTo",s,{trigger:"internal"})}}),d.data({bindEvent_focusin:!0}))),d.data("autoHideScrollbar")&&(d.data("bindEvent_autoHideScrollbar")||(t.bind("mouseenter",function(){t.addClass("mCS-mouse-over"),n.showScrollbar.call(t.children(".mCSB_scrollTools"))}).bind("mouseleave touchend",function(e){t.removeClass("mCS-mouse-over"),"mouseleave"===e.type&&n.hideScrollbar.call(t.children(".mCSB_scrollTools"))}),d.data({bindEvent_autoHideScrollbar:!0})))},scrollTo:function(t,i){function b(e){switch(this.mcs={top:l.position().top,left:l.position().left,draggerTop:u.position().top,draggerLeft:u.position().left,topPct:Math.round(100*Math.abs(l.position().top)/Math.abs(l.outerHeight()-r.height())),leftPct:Math.round(100*Math.abs(l.position().left)/Math.abs(l.outerWidth()-r.width()))},e){case"onScrollStart":a.data("mCS_tweenRunning",!0).data("onScrollStart_Callback").call(a,this.mcs);break;case"whileScrolling":a.data("whileScrolling_Callback").call(a,this.mcs);break;case"onScroll":a.data("onScroll_Callback").call(a,this.mcs);break;case"onTotalScrollBack":a.data("onTotalScrollBack_Callback").call(a,this.mcs);break;case"onTotalScroll":a.data("onTotalScroll_Callback").call(a,this.mcs)}}var o,f,h,m,_,a=e(this),s={moveDragger:!1,trigger:"external",callbacks:!0,scrollInertia:a.data("scrollInertia"),scrollEasing:a.data("scrollEasing")},i=e.extend(s,i),r=a.children(".mCustomScrollBox"),l=r.children(".mCSB_container"),c=r.children(".mCSB_scrollTools"),d=c.children(".mCSB_draggerContainer"),u=d.children(".mCSB_dragger"),p=draggerSpeed=i.scrollInertia;if(!l.hasClass("mCS_no_scrollbar")&&(a.data({mCS_trigger:i.trigger}),a.data("mCS_Init")&&(i.callbacks=!1),t||0===t)){if("number"==typeof t)i.moveDragger?(o=t,t=a.data("horizontalScroll")?u.position().left*a.data("scrollAmount"):u.position().top*a.data("scrollAmount"),draggerSpeed=0):o=t/a.data("scrollAmount");else if("string"==typeof t){var g;g="top"===t?0:"bottom"!==t||a.data("horizontalScroll")?"left"===t?0:"right"===t&&a.data("horizontalScroll")?l.outerWidth()-r.width():"first"===t?a.find(".mCSB_container").find(":first"):"last"===t?a.find(".mCSB_container").find(":last"):a.find(t):l.outerHeight()-r.height(),1===g.length?(t=a.data("horizontalScroll")?g.position().left:g.position().top,o=t/a.data("scrollAmount")):o=t=g}if(a.data("horizontalScroll")){a.data("onTotalScrollBack_Offset")&&(h=-a.data("onTotalScrollBack_Offset")),a.data("onTotalScroll_Offset")&&(_=r.width()-l.outerWidth()+a.data("onTotalScroll_Offset")),0>o?(o=t=0,clearInterval(a.data("mCSB_buttonScrollLeft")),h||(f=!0)):o>=d.width()-u.width()?(o=d.width()-u.width(),t=r.width()-l.outerWidth(),clearInterval(a.data("mCSB_buttonScrollRight")),_||(m=!0)):t=-t;var v=a.data("snapAmount");v&&(t=Math.round(t/v)*v-a.data("snapOffset")),n.mTweenAxis.call(this,u[0],"left",Math.round(o),draggerSpeed,i.scrollEasing),n.mTweenAxis.call(this,l[0],"left",Math.round(t),p,i.scrollEasing,{onStart:function(){i.callbacks&&!a.data("mCS_tweenRunning")&&b("onScrollStart"),a.data("autoHideScrollbar")&&n.showScrollbar.call(c)},onUpdate:function(){i.callbacks&&b("whileScrolling")},onComplete:function(){i.callbacks&&(b("onScroll"),(f||h&&l.position().left>=h)&&b("onTotalScrollBack"),(m||_&&_>=l.position().left)&&b("onTotalScroll")),u.data("preventAction",!1),a.data("mCS_tweenRunning",!1),a.data("autoHideScrollbar")&&(r.hasClass("mCS-mouse-over")||n.hideScrollbar.call(c))}})}else{a.data("onTotalScrollBack_Offset")&&(h=-a.data("onTotalScrollBack_Offset")),a.data("onTotalScroll_Offset")&&(_=r.height()-l.outerHeight()+a.data("onTotalScroll_Offset")),0>o?(o=t=0,clearInterval(a.data("mCSB_buttonScrollUp")),h||(f=!0)):o>=d.height()-u.height()?(o=d.height()-u.height(),t=r.height()-l.outerHeight(),clearInterval(a.data("mCSB_buttonScrollDown")),_||(m=!0)):t=-t;var v=a.data("snapAmount");v&&(t=Math.round(t/v)*v-a.data("snapOffset")),u.css("top",Math.round(o)),l.css("top",Math.round(t))}a.data("mCS_Init")&&a.data({mCS_Init:!1})}},stop:function(){var t=e(this),i=t.children().children(".mCSB_container"),a=t.children().children().children().children(".mCSB_dragger");n.mTweenAxisStop.call(this,i[0]),n.mTweenAxisStop.call(this,a[0])},disable:function(t){var n=e(this),i=n.children(".mCustomScrollBox"),a=i.children(".mCSB_container"),s=i.children(".mCSB_scrollTools"),o=s.children().children(".mCSB_dragger");i.unbind("mousewheel focusin mouseenter mouseleave touchend"),a.unbind("touchstart touchmove"),t&&(n.data("horizontalScroll")?o.add(a).css("left",0):o.add(a).css("top",0)),s.css("display","none"),a.addClass("mCS_no_scrollbar"),n.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_content_touch:!1,bindEvent_autoHideScrollbar:!1}).addClass("mCS_disabled")},destroy:function(){var t=e(this);t.removeClass("mCustomScrollbar _mCS_"+t.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove(),e(document).unbind("mousemove."+t.data("mCustomScrollbarIndex")+" mouseup."+t.data("mCustomScrollbarIndex")+" MSPointerMove."+t.data("mCustomScrollbarIndex")+" MSPointerUp."+t.data("mCustomScrollbarIndex")),e(window).unbind("resize."+t.data("mCustomScrollbarIndex"))}},n={showScrollbar:function(){this.stop().animate({opacity:1},"fast")},hideScrollbar:function(){this.stop().animate({opacity:0},"fast")},mTweenAxis:function(e,t,n,i,a,s){function m(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()}function _(){u||o.call(),u=m()-c,g(),u>=e._time&&(e._time=u>e._time?u+d-(u-e._time):u+d-1,u+1>e._time&&(e._time=u+1)),i>e._time?e._id=_request(_):l.call()}function g(){i>0?(e.currVal=y(e._time,p,h,i,a),f[t]=Math.round(e.currVal)+"px"):f[t]=n+"px",r.call()}function v(){d=1e3/60,e._time=u+d,_request=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return g(),setTimeout(e,.01)},e._id=_request(_)}function b(){null!=e._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._id):clearTimeout(e._id),e._id=null)}function y(e,t,n,i,a){switch(a){case"linear":return n*e/i+t;case"easeOutQuad":return e/=i,-n*e*(e-2)+t;case"easeInOutQuad":return e/=i/2,1>e?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t);case"easeOutCubic":return e/=i,e--,n*(e*e*e+1)+t;case"easeOutQuart":return e/=i,e--,-n*(e*e*e*e-1)+t;case"easeOutQuint":return e/=i,e--,n*(e*e*e*e*e+1)+t;case"easeOutCirc":return e/=i,e--,n*Math.sqrt(1-e*e)+t;case"easeOutSine":return n*Math.sin(e/i*(Math.PI/2))+t;case"easeOutExpo":return n*(-Math.pow(2,-10*e/i)+1)+t;case"mcsEaseOut":var s=(e/=i)*e,o=s*e;return t+n*(.499999999999997*o*s+-2.5*s*s+5.5*o+-6.5*s+4*e);case"draggerRailEase":return e/=i/2,1>e?n/2*e*e*e+t:(e-=2,n/2*(e*e*e+2)+t)}}var d,s=s||{},o=s.onStart||function(){},r=s.onUpdate||function(){},l=s.onComplete||function(){},c=m(),u=0,p=e.offsetTop,f=e.style;"left"===t&&(p=e.offsetLeft);var h=n-p;b(),v()},mTweenAxisStop:function(e){null!=e._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._id):clearTimeout(e._id),e._id=null)},rafPolyfill:function(){for(var e=["ms","moz","webkit","o"],t=e.length;--t>-1&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"]}};n.rafPolyfill.call(),e.support.touch=!!("ontouchstart"in window),e.support.msPointer=window.navigator.msPointerEnabled;var i="https:"==document.location.protocol?"https:":"http:";e.event.special.mousewheel||document.write('<script src="'+i+'//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.0.6/jquery.mousewheel.min.js"></script>'),e.fn.mCustomScrollbar=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?(e.error("Method "+n+" does not exist"),void 0):t.init.apply(this,arguments)}}(jQuery),function(e,t,n,i){"use strict";var a=n("html"),s=n(e),o=n(t),r=n.fancybox=function(){r.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),c=null,d=t.createTouch!==i,u=function(e){return e&&e.hasOwnProperty&&e instanceof n},p=function(e){return e&&"string"===n.type(e)},f=function(e){return p(e)&&e.indexOf("%")>0},h=function(e){return e&&!(e.style.overflow&&"hidden"===e.style.overflow)&&(e.clientWidth&&e.scrollWidth>e.clientWidth||e.clientHeight&&e.scrollHeight>e.clientHeight)},m=function(e,t){var n=parseInt(e,10)||0;return t&&f(e)&&(n=r.getViewport()[t]/100*n),Math.ceil(n)},_=function(e,t){return m(e,t)+"px"};n.extend(r,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!d,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeChange:n.noop,beforeClose:n.noop,afterClose:n.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){return e&&(n.isPlainObject(t)||(t={}),!1!==r.close(!0))?(n.isArray(e)||(e=u(e)?n(e).get():[e]),n.each(e,function(a,s){var l,c,d,f,h,m,_,o={};
"object"===n.type(s)&&(s.nodeType&&(s=n(s)),u(s)?(o={href:s.data("fancybox-href")||s.attr("href"),title:s.data("fancybox-title")||s.attr("title"),isDom:!0,element:s},n.metadata&&n.extend(!0,o,s.metadata())):o=s),l=t.href||o.href||(p(s)?s:null),c=t.title!==i?t.title:o.title||"",d=t.content||o.content,f=d?"html":t.type||o.type,!f&&o.isDom&&(f=s.data("fancybox-type"),f||(h=s.prop("class").match(/fancybox\.(\w+)/),f=h?h[1]:null)),p(l)&&(f||(r.isImage(l)?f="image":r.isSWF(l)?f="swf":"#"===l.charAt(0)?f="inline":p(s)&&(f="html",d=s)),"ajax"===f&&(m=l.split(/\s+/,2),l=m.shift(),_=m.shift())),d||("inline"===f?l?d=n(p(l)?l.replace(/.*(?=#[^\s]+$)/,""):l):o.isDom&&(d=s):"html"===f?d=l:f||l||!o.isDom||(f="inline",d=s)),n.extend(o,{href:l,type:f,content:d,title:c,selector:_}),e[a]=o}),r.opts=n.extend(!0,{},r.defaults,t),t.keys!==i&&(r.opts.keys=t.keys?n.extend({},r.defaults.keys,t.keys):!1),r.group=e,r._start(r.opts.index)):void 0},cancel:function(){var e=r.coming;e&&!1!==r.trigger("onCancel")&&(r.hideLoading(),r.ajaxLoad&&r.ajaxLoad.abort(),r.ajaxLoad=null,r.imgPreload&&(r.imgPreload.onload=r.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),r.coming=null,r.current||r._afterZoomOut(e))},close:function(e){r.cancel(),!1!==r.trigger("beforeClose")&&(r.unbindEvents(),r.isActive&&(r.isOpen&&e!==!0?(r.isOpen=r.isOpened=!1,r.isClosing=!0,n(".fancybox-item, .fancybox-nav").remove(),r.wrap.stop(!0,!0).removeClass("fancybox-opened"),r.transitions[r.current.closeMethod]()):(n(".fancybox-wrap").stop(!0).trigger("onReset").remove(),r._afterZoomOut())))},play:function(e){var t=function(){clearTimeout(r.player.timer)},n=function(){t(),r.current&&r.player.isActive&&(r.player.timer=setTimeout(r.next,r.current.playSpeed))},i=function(){t(),o.unbind(".player"),r.player.isActive=!1,r.trigger("onPlayEnd")},a=function(){r.current&&(r.current.loop||r.group.length-1>r.current.index)&&(r.player.isActive=!0,o.bind({"onCancel.player beforeClose.player":i,"onUpdate.player":n,"beforeLoad.player":t}),n(),r.trigger("onPlayStart"))};e===!0||!r.player.isActive&&e!==!1?a():i()},next:function(e){var t=r.current;t&&(p(e)||(e=t.direction.next),r.jumpto(t.index+1,e,"next"))},prev:function(e){var t=r.current;t&&(p(e)||(e=t.direction.prev),r.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,n){var a=r.current;a&&(e=m(e),r.direction=t||a.direction[e>=a.index?"next":"prev"],r.router=n||"jumpto",a.loop&&(0>e&&(e=a.group.length+e%a.group.length),e%=a.group.length),a.group[e]!==i&&(r.cancel(),r._start(e)))},reposition:function(e,t){var s,i=r.current,a=i?i.wrap:null;a&&(s=r._getPosition(t),e&&"scroll"===e.type?(delete s.position,a.stop(!0,!0).animate(s,200)):(a.css(s),i.pos=n.extend({},i.dim,s)))},update:function(e){var t=e&&e.type,n=!t||"orientationchange"===t;n&&(clearTimeout(c),c=null),r.isOpen&&!c&&(c=setTimeout(function(){var i=r.current;i&&!r.isClosing&&(r.wrap.removeClass("fancybox-tmp"),(n||"load"===t||"resize"===t&&i.autoResize)&&r._setDimension(),"scroll"===t&&i.canShrink||r.reposition(e),r.trigger("onUpdate"),c=null)},n&&!d?0:300))},toggle:function(e){r.isOpen&&(r.current.fitToView="boolean"===n.type(e)?e:!r.current.fitToView,d&&(r.wrap.removeAttr("style").addClass("fancybox-tmp"),r.trigger("onUpdate")),r.update())},hideLoading:function(){o.unbind(".loading"),n("#fancybox-loading").remove()},showLoading:function(){var e,t;r.hideLoading(),e=n('<div id="fancybox-loading"><div></div></div>').click(r.cancel).appendTo("body"),o.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),r.cancel())}),r.defaults.fixed||(t=r.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x}))},getViewport:function(){var t=r.current&&r.current.locked||!1,n={x:s.scrollLeft(),y:s.scrollTop()};return t?(n.w=t[0].clientWidth,n.h=t[0].clientHeight):(n.w=d&&e.innerWidth?e.innerWidth:s.width(),n.h=d&&e.innerHeight?e.innerHeight:s.height()),n},unbindEvents:function(){r.wrap&&u(r.wrap)&&r.wrap.unbind(".fb"),o.unbind(".fb"),s.unbind(".fb")},bindEvents:function(){var t,e=r.current;e&&(s.bind("orientationchange.fb"+(d?"":" resize.fb")+(e.autoCenter&&!e.locked?" scroll.fb":""),r.update),t=e.keys,t&&o.bind("keydown.fb",function(a){var s=a.which||a.keyCode,o=a.target||a.srcElement;return 27===s&&r.coming?!1:(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||o&&(o.type||n(o).is("[contenteditable]"))||n.each(t,function(t,o){return e.group.length>1&&o[s]!==i?(r[t](o[s]),a.preventDefault(),!1):n.inArray(s,o)>-1?(r[t](),a.preventDefault(),!1):void 0}),void 0)}),n.fn.mousewheel&&e.mouseWheel&&r.wrap.bind("mousewheel.fb",function(t,i,a,s){for(var o=t.target||null,l=n(o),c=!1;l.length&&!(c||l.is(".fancybox-skin")||l.is(".fancybox-wrap"));)c=h(l[0]),l=n(l).parent();0===i||c||r.group.length>1&&!e.canShrink&&(s>0||a>0?r.prev(s>0?"down":"left"):(0>s||0>a)&&r.next(0>s?"up":"right"),t.preventDefault())}))},trigger:function(e,t){var i,a=t||r.coming||r.current;if(a){if(n.isFunction(a[e])&&(i=a[e].apply(a,Array.prototype.slice.call(arguments,1))),i===!1)return!1;a.helpers&&n.each(a.helpers,function(t,i){i&&r.helpers[t]&&n.isFunction(r.helpers[t][e])&&r.helpers[t][e](n.extend(!0,{},r.helpers[t].defaults,i),a)}),o.trigger(e)}},isImage:function(e){return p(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(e){return p(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var i,a,s,o,l,t={};if(e=m(e),i=r.group[e]||null,!i)return!1;if(t=n.extend(!0,{},r.opts,i),o=t.margin,l=t.padding,"number"===n.type(o)&&(t.margin=[o,o,o,o]),"number"===n.type(l)&&(t.padding=[l,l,l,l]),t.modal&&n.extend(!0,t,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),t.autoSize&&(t.autoWidth=t.autoHeight=!0),"auto"===t.width&&(t.autoWidth=!0),"auto"===t.height&&(t.autoHeight=!0),t.group=r.group,t.index=e,r.coming=t,!1===r.trigger("beforeLoad"))return r.coming=null,void 0;if(s=t.type,a=t.href,!s)return r.coming=null,r.current&&r.router&&"jumpto"!==r.router?(r.current.index=e,r[r.router](r.direction)):!1;if(r.isActive=!0,("image"===s||"swf"===s)&&(t.autoHeight=t.autoWidth=!1,t.scrolling="visible"),"image"===s&&(t.aspectRatio=!0),"iframe"===s&&d&&(t.scrolling="scroll"),t.wrap=n(t.tpl.wrap).addClass("fancybox-"+(d?"mobile":"desktop")+" fancybox-type-"+s+" fancybox-tmp "+t.wrapCSS).appendTo(t.parent||"body"),n.extend(t,{skin:n(".fancybox-skin",t.wrap),outer:n(".fancybox-outer",t.wrap),inner:n(".fancybox-inner",t.wrap)}),n.each(["Top","Right","Bottom","Left"],function(e,n){t.skin.css("padding"+n,_(t.padding[e]))}),r.trigger("onReady"),"inline"===s||"html"===s){if(!t.content||!t.content.length)return r._error("content")}else if(!a)return r._error("href");"image"===s?r._loadImage():"ajax"===s?r._loadAjax():"iframe"===s?r._loadIframe():r._afterLoad()},_error:function(e){n.extend(r.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:r.coming.tpl.error}),r._afterLoad()},_loadImage:function(){var e=r.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,r.coming.width=this.width/r.opts.pixelRatio,r.coming.height=this.height/r.opts.pixelRatio,r._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,r._error("image")},e.src=r.coming.href,e.complete!==!0&&r.showLoading()},_loadAjax:function(){var e=r.coming;r.showLoading(),r.ajaxLoad=n.ajax(n.extend({},e.ajax,{url:e.href,error:function(e,t){r.coming&&"abort"!==t?r._error("ajax",e):r.hideLoading()},success:function(t,n){"success"===n&&(e.content=t,r._afterLoad())}}))},_loadIframe:function(){var e=r.coming,t=n(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",d?"auto":e.iframe.scrolling).attr("src",e.href);n(e.wrap).bind("onReset",function(){try{n(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),e.iframe.preload&&(r.showLoading(),t.one("load",function(){n(this).data("ready",1),d||n(this).bind("load.fb",r.update),n(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),r._afterLoad()})),e.content=t.appendTo(e.inner),e.iframe.preload||r._afterLoad()},_preloadImages:function(){var a,s,e=r.group,t=r.current,n=e.length,i=t.preload?Math.min(t.preload,n-1):0;for(s=1;i>=s;s+=1)a=e[(t.index+s)%n],"image"===a.type&&a.href&&((new Image).src=a.href)},_afterLoad:function(){var a,s,o,l,c,d,e=r.coming,t=r.current,i="fancybox-placeholder";if(r.hideLoading(),e&&r.isActive!==!1){if(!1===r.trigger("afterLoad",e,t))return e.wrap.stop(!0).trigger("onReset").remove(),r.coming=null,void 0;switch(t&&(r.trigger("beforeChange",t),t.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),r.unbindEvents(),a=e,s=e.content,o=e.type,l=e.scrolling,n.extend(r,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:t}),c=a.href,o){case"inline":case"ajax":case"html":a.selector?s=n("<div>").html(s).find(a.selector):u(s)&&(s.data(i)||s.data(i,n('<div class="'+i+'"></div>').insertAfter(s).hide()),s=s.show().detach(),a.wrap.bind("onReset",function(){n(this).find(s).length&&s.hide().replaceAll(s.data(i)).data(i,!1)}));break;case"image":s=a.tpl.image.replace("{href}",c);break;case"swf":s='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+c+'"></param>',d="",n.each(a.swf,function(e,t){s+='<param name="'+e+'" value="'+t+'"></param>',d+=" "+e+'="'+t+'"'}),s+='<embed src="'+c+'" type="application/x-shockwave-flash" width="100%" height="100%"'+d+"></embed></object>"}u(s)&&s.parent().is(a.inner)||a.inner.append(s),r.trigger("beforeShow"),a.inner.css("overflow","yes"===l?"scroll":"no"===l?"hidden":l),r._setDimension(),r.reposition(),r.isOpen=!1,r.coming=null,r.bindEvents(),r.isOpened?t.prevMethod&&r.transitions[t.prevMethod]():n(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove(),r.transitions[r.isOpened?a.nextMethod:a.openMethod](),r._preloadImages()}},_setDimension:function(){var j,$,C,S,D,E,T,z,M,P,A,O,I,F,N,e=r.getViewport(),t=0,i=!1,a=!1,s=r.wrap,o=r.skin,l=r.inner,c=r.current,d=c.width,u=c.height,p=c.minWidth,h=c.minHeight,g=c.maxWidth,v=c.maxHeight,b=c.scrolling,y=c.scrollOutside?c.scrollbarWidth:0,w=c.margin,k=m(w[1]+w[3]),x=m(w[0]+w[2]);if(s.add(o).add(l).width("auto").height("auto").removeClass("fancybox-tmp"),j=m(o.outerWidth(!0)-o.width()),$=m(o.outerHeight(!0)-o.height()),C=k+j,S=x+$,D=f(d)?(e.w-C)*m(d)/100:d,E=f(u)?(e.h-S)*m(u)/100:u,"iframe"===c.type){if(F=c.content,c.autoHeight&&1===F.data("ready"))try{F[0].contentWindow.document.location&&(l.width(D).height(9999),N=F.contents().find("body"),y&&N.css("overflow-x","hidden"),E=N.outerHeight(!0))}catch(H){}}else(c.autoWidth||c.autoHeight)&&(l.addClass("fancybox-tmp"),c.autoWidth||l.width(D),c.autoHeight||l.height(E),c.autoWidth&&(D=l.width()),c.autoHeight&&(E=l.height()),l.removeClass("fancybox-tmp"));if(d=m(D),u=m(E),M=D/E,p=m(f(p)?m(p,"w")-C:p),g=m(f(g)?m(g,"w")-C:g),h=m(f(h)?m(h,"h")-S:h),v=m(f(v)?m(v,"h")-S:v),T=g,z=v,c.fitToView&&(g=Math.min(e.w-C,g),v=Math.min(e.h-S,v)),O=e.w-k,I=e.h-x,c.aspectRatio?(d>g&&(d=g,u=m(d/M)),u>v&&(u=v,d=m(u*M)),p>d&&(d=p,u=m(d/M)),h>u&&(u=h,d=m(u*M))):(d=Math.max(p,Math.min(d,g)),c.autoHeight&&"iframe"!==c.type&&(l.width(d),u=l.height()),u=Math.max(h,Math.min(u,v))),c.fitToView)if(l.width(d).height(u),s.width(d+j),P=s.width(),A=s.height(),c.aspectRatio)for(;(P>O||A>I)&&d>p&&u>h&&!(t++>19);)u=Math.max(h,Math.min(v,u-10)),d=m(u*M),p>d&&(d=p,u=m(d/M)),d>g&&(d=g,u=m(d/M)),l.width(d).height(u),s.width(d+j),P=s.width(),A=s.height();else d=Math.max(p,Math.min(d,d-(P-O))),u=Math.max(h,Math.min(u,u-(A-I)));y&&"auto"===b&&E>u&&O>d+j+y&&(d+=y),l.width(d).height(u),s.width(d+j),P=s.width(),A=s.height(),i=(P>O||A>I)&&d>p&&u>h,a=c.aspectRatio?T>d&&z>u&&D>d&&E>u:(T>d||z>u)&&(D>d||E>u),n.extend(c,{dim:{width:_(P),height:_(A)},origWidth:D,origHeight:E,canShrink:i,canExpand:a,wPadding:j,hPadding:$,wrapSpace:A-o.outerHeight(!0),skinSpace:o.height()-u}),!F&&c.autoHeight&&u>h&&v>u&&!a&&l.height("auto")},_getPosition:function(e){var t=r.current,n=r.getViewport(),i=t.margin,a=r.wrap.width()+i[1]+i[3],s=r.wrap.height()+i[0]+i[2],o={position:"absolute",top:i[0],left:i[3]};return t.autoCenter&&t.fixed&&!e&&n.h>=s&&n.w>=a?o.position="fixed":t.locked||(o.top+=n.y,o.left+=n.x),o.top=_(Math.max(o.top,o.top+(n.h-s)*t.topRatio)),o.left=_(Math.max(o.left,o.left+(n.w-a)*t.leftRatio)),o},_afterZoomIn:function(){var e=r.current;e&&(r.isOpen=r.isOpened=!0,r.wrap.css("overflow","visible").addClass("fancybox-opened"),r.update(),(e.closeClick||e.nextClick&&r.group.length>1)&&r.inner.css("cursor","pointer").bind("click.fb",function(t){n(t.target).is("a")||n(t.target).parent().is("a")||(t.preventDefault(),r[e.closeClick?"close":"next"]())}),e.closeBtn&&n(e.tpl.closeBtn).appendTo(r.skin).bind("click.fb",function(e){e.preventDefault(),r.close()}),e.arrows&&r.group.length>1&&((e.loop||e.index>0)&&n(e.tpl.prev).appendTo(r.outer).bind("click.fb",r.prev),(e.loop||r.group.length-1>e.index)&&n(e.tpl.next).appendTo(r.outer).bind("click.fb",r.next)),r.trigger("afterShow"),e.loop||e.index!==e.group.length-1?r.opts.autoPlay&&!r.player.isActive&&(r.opts.autoPlay=!1,r.play()):r.play(!1))},_afterZoomOut:function(e){e=e||r.current,n(".fancybox-wrap").trigger("onReset").remove(),n.extend(r,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),r.trigger("afterClose",e)}}),r.transitions={getOrigPosition:function(){var e=r.current,t=e.element,n=e.orig,i={},a=50,s=50,o=e.hPadding,l=e.wPadding,c=r.getViewport();return!n&&e.isDom&&t.is(":visible")&&(n=t.find("img:first"),n.length||(n=t)),u(n)?(i=n.offset(),n.is("img")&&(a=n.outerWidth(),s=n.outerHeight())):(i.top=c.y+(c.h-s)*e.topRatio,i.left=c.x+(c.w-a)*e.leftRatio),("fixed"===r.wrap.css("position")||e.locked)&&(i.top-=c.y,i.left-=c.x),i={top:_(i.top-o*e.topRatio),left:_(i.left-l*e.leftRatio),width:_(a+l),height:_(s+o)}},step:function(e,t){var n,i,a,s=t.prop,o=r.current,l=o.wrapSpace,c=o.skinSpace;("width"===s||"height"===s)&&(n=t.end===t.start?1:(e-t.start)/(t.end-t.start),r.isClosing&&(n=1-n),i="width"===s?o.wPadding:o.hPadding,a=e-i,r.skin[s](m("width"===s?a:a-l*n)),r.inner[s](m("width"===s?a:a-l*n-c*n)))},zoomIn:function(){var e=r.current,t=e.pos,i=e.openEffect,a="elastic"===i,s=n.extend({opacity:1},t);delete s.position,a?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===i&&(t.opacity=.1),r.wrap.css(t).animate(s,{duration:"none"===i?0:e.openSpeed,easing:e.openEasing,step:a?this.step:null,complete:r._afterZoomIn})},zoomOut:function(){var e=r.current,t=e.closeEffect,n="elastic"===t,i={opacity:.1};n&&(i=this.getOrigPosition(),e.closeOpacity&&(i.opacity=.1)),r.wrap.animate(i,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:n?this.step:null,complete:r._afterZoomOut})},changeIn:function(){var o,e=r.current,t=e.nextEffect,n=e.pos,i={opacity:1},a=r.direction,s=200;n.opacity=.1,"elastic"===t&&(o="down"===a||"up"===a?"top":"left","down"===a||"right"===a?(n[o]=_(m(n[o])-s),i[o]="+="+s+"px"):(n[o]=_(m(n[o])+s),i[o]="-="+s+"px")),"none"===t?r._afterZoomIn():r.wrap.css(n).animate(i,{duration:e.nextSpeed,easing:e.nextEasing,complete:r._afterZoomIn})},changeOut:function(){var e=r.previous,t=e.prevEffect,i={opacity:.1},a=r.direction,s=200;"elastic"===t&&(i["down"===a||"up"===a?"top":"left"]=("up"===a||"left"===a?"-":"+")+"="+s+"px"),e.wrap.animate(i,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){n(this).trigger("onReset").remove()}})}},r.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!d,fixed:!0},overlay:null,fixed:!1,el:n("html"),create:function(e){e=n.extend({},this.defaults,e),this.overlay&&this.close(),this.overlay=n('<div class="fancybox-overlay"></div>').appendTo(r.coming?r.coming.parent:e.parent),this.fixed=!1,e.fixed&&r.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(e){var t=this;e=n.extend({},this.defaults,e),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(e),this.fixed||(s.bind("resize.overlay",n.proxy(this.update,this)),this.update()),e.closeClick&&this.overlay.bind("click.overlay",function(e){return n(e.target).hasClass("fancybox-overlay")?(r.isActive?r.close():t.close(),!1):void 0}),this.overlay.css(e.css).show()},close:function(){var e,t;s.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(n(".fancybox-margin").removeClass("fancybox-margin"),e=s.scrollTop(),t=s.scrollLeft(),this.el.removeClass("fancybox-lock"),s.scrollTop(e).scrollLeft(t)),n(".fancybox-overlay").remove().hide(),n.extend(this,{overlay:null,fixed:!1})},update:function(){var n,e="100%";this.overlay.width(e).height("100%"),l?(n=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),o.width()>n&&(e=o.width())):o.width()>s.width()&&(e=o.width()),this.overlay.width(e).height(o.height())},onReady:function(e,t){var i=this.overlay;n(".fancybox-overlay").stop(!0,!0),i||this.create(e),e.locked&&this.fixed&&t.fixed&&(i||(this.margin=o.height()>s.height()?n("html").css("margin-right").replace("px",""):!1),t.locked=this.overlay.append(t.wrap),t.fixed=!1),e.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){var i,a;t.locked&&(this.margin!==!1&&(n("*").filter(function(){return"fixed"===n(this).css("position")&&!n(this).hasClass("fancybox-overlay")&&!n(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),i=s.scrollTop(),a=s.scrollLeft(),this.el.addClass("fancybox-lock"),s.scrollTop(i).scrollLeft(a)),this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){this.overlay&&!r.coming&&this.overlay.fadeOut(e.speedOut,n.proxy(this.close,this))}},r.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var s,o,t=r.current,i=t.title,a=e.type;if(n.isFunction(i)&&(i=i.call(t.element,t)),p(i)&&""!==n.trim(i)){switch(s=n('<div class="fancybox-title fancybox-title-'+a+'-wrap">'+i+"</div>"),a){case"inside":o=r.skin;break;case"outside":o=r.wrap;break;case"over":o=r.inner;break;default:o=r.skin,s.appendTo("body"),l&&s.width(s.width()),s.wrapInner('<span class="child"></span>'),r.current.margin[2]+=Math.abs(m(s.css("margin-bottom")))}s["top"===e.position?"prependTo":"appendTo"](o)}}},n.fn.fancybox=function(e){var t,i=n(this),a=this.selector||"",s=function(s){var c,d,o=n(this).blur(),l=t;s.ctrlKey||s.altKey||s.shiftKey||s.metaKey||o.is(".fancybox-wrap")||(c=e.groupAttr||"data-fancybox-group",d=o.attr(c),d||(c="rel",d=o.get(0)[c]),d&&""!==d&&"nofollow"!==d&&(o=a.length?n(a):i,o=o.filter("["+c+'="'+d+'"]'),l=o.index(this)),e.index=l,r.open(o,e)!==!1&&s.preventDefault())};return e=e||{},t=e.index||0,a&&e.live!==!1?o.undelegate(a,"click.fb-start").delegate(a+":not('.fancybox-item, .fancybox-nav')","click.fb-start",s):i.unbind("click.fb-start").bind("click.fb-start",s),this.filter("[data-fancybox-start=1]").trigger("click"),this},o.ready(function(){var t,s;n.scrollbarWidth===i&&(n.scrollbarWidth=function(){var e=n('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),i=t.innerWidth()-t.height(99).innerWidth();return e.remove(),i}),n.support.fixedPosition===i&&(n.support.fixedPosition=function(){var e=n('<div style="position:fixed;top:20px;"></div>').appendTo("body"),t=20===e[0].offsetTop||15===e[0].offsetTop;return e.remove(),t}()),n.extend(r.defaults,{scrollbarWidth:n.scrollbarWidth(),fixed:n.support.fixedPosition,parent:n("body")}),t=n(e).width(),a.addClass("fancybox-lock-test"),s=n(e).width(),a.removeClass("fancybox-lock-test"),n("<style type='text/css'>.fancybox-margin{margin-right:"+(s-t)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function(e){var t=e.fancybox;t.helpers.buttons={defaults:{skipSingle:!1,position:"top",tpl:'<div id="fancybox-buttons"><ul><li><a class="btnPrev" title="Previous" href="javascript:;"></a></li><li><a class="btnPlay" title="Start slideshow" href="javascript:;"></a></li><li><a class="btnNext" title="Next" href="javascript:;"></a></li><li><a class="btnToggle" title="Toggle size" href="javascript:;"></a></li><li><a class="btnClose" title="Close" href="javascript:;"></a></li></ul></div>'},list:null,buttons:null,beforeLoad:function(e,t){return e.skipSingle&&2>t.group.length?(t.helpers.buttons=!1,t.closeBtn=!0,void 0):(t.margin["bottom"===e.position?2:0]+=30,void 0)},onPlayStart:function(){this.buttons&&this.buttons.play.attr("title","Pause slideshow").addClass("btnPlayOn")},onPlayEnd:function(){this.buttons&&this.buttons.play.attr("title","Start slideshow").removeClass("btnPlayOn")},afterShow:function(n,i){var a=this.buttons;a||(this.list=e(n.tpl).addClass(n.position).appendTo("body"),a={prev:this.list.find(".btnPrev").click(t.prev),next:this.list.find(".btnNext").click(t.next),play:this.list.find(".btnPlay").click(t.play),toggle:this.list.find(".btnToggle").click(t.toggle),close:this.list.find(".btnClose").click(t.close)}),i.index>0||i.loop?a.prev.removeClass("btnDisabled"):a.prev.addClass("btnDisabled"),i.loop||i.group.length-1>i.index?(a.next.removeClass("btnDisabled"),a.play.removeClass("btnDisabled")):(a.next.addClass("btnDisabled"),a.play.addClass("btnDisabled")),this.buttons=a,this.onUpdate(n,i)},onUpdate:function(e,t){var n;this.buttons&&(n=this.buttons.toggle.removeClass("btnDisabled btnToggleOn"),t.canShrink?n.addClass("btnToggleOn"):t.canExpand||n.addClass("btnDisabled"))},beforeClose:function(){this.list&&this.list.remove(),this.list=null,this.buttons=null}}}(jQuery),function(e){var t=e.fancybox;t.helpers.thumbs={defaults:{width:50,height:50,position:"bottom",source:function(t){var n;return t.element&&(n=e(t.element).find("img").attr("src")),!n&&"image"===t.type&&t.href&&(n=t.href),n}},wrap:null,list:null,width:0,init:function(t,n){var a,i=this,s=t.width,o=t.height,r=t.source;a="";for(var l=0;n.group.length>l;l++)a+='<li><a style="width:'+s+"px;height:"+o+'px;" href="javascript:jQuery.fancybox.jumpto('+l+');"></a></li>';this.wrap=e('<div id="fancybox-thumbs"></div>').addClass(t.position).appendTo("body"),this.list=e("<ul>"+a+"</ul>").appendTo(this.wrap),e.each(n.group,function(t){var a=r(n.group[t]);a&&e("<img />").load(function(){var r,l,c,n=this.width,a=this.height;i.list&&n&&a&&(r=n/s,l=a/o,c=i.list.children().eq(t).find("a"),r>=1&&l>=1&&(r>l?(n=Math.floor(n/l),a=o):(n=s,a=Math.floor(a/r))),e(this).css({width:n,height:a,top:Math.floor(o/2-a/2),left:Math.floor(s/2-n/2)}),c.width(s).height(o),e(this).hide().appendTo(c).fadeIn(300))}).attr("src",a)}),this.width=this.list.children().eq(0).outerWidth(!0),this.list.width(this.width*(n.group.length+1)).css("left",Math.floor(.5*e(window).width()-(n.index*this.width+.5*this.width)))},beforeLoad:function(e,t){return 2>t.group.length?(t.helpers.thumbs=!1,void 0):(t.margin["top"===e.position?0:2]+=e.height+15,void 0)},afterShow:function(e,t){this.list?this.onUpdate(e,t):this.init(e,t),this.list.children().removeClass("active").eq(t.index).addClass("active")},onUpdate:function(t,n){this.list&&this.list.stop(!0).animate({left:Math.floor(.5*e(window).width()-(n.index*this.width+.5*this.width))},150)},beforeClose:function(){this.wrap&&this.wrap.remove(),this.wrap=null,this.list=null,this.width=0}}}(jQuery),function(e){"use strict";var t=e.fancybox,n=function(t,n,i){return i=i||"","object"===e.type(i)&&(i=e.param(i,!0)),e.each(n,function(e,n){t=t.replace("$"+e,n||"")}),i.length&&(t+=(t.indexOf("?")>0?"&":"?")+i),t};t.helpers.media={defaults:{youtube:{matcher:/(youtube\.com|youtu\.be|youtube-nocookie\.com)\/(watch\?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*)).*/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"opaque",enablejsapi:1},type:"iframe",url:"//www.youtube.com/embed/$3"},vimeo:{matcher:/(?:vimeo(?:pro)?.com)\/(?:[^\d]+)?(\d+)(?:.*)/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},type:"iframe",url:"//player.vimeo.com/video/$1"},metacafe:{matcher:/metacafe.com\/(?:watch|fplayer)\/([\w\-]{1,10})/,params:{autoPlay:"yes"},type:"swf",url:function(t,n,i){return i.swf.flashVars="playerVars="+e.param(n,!0),"//www.metacafe.com/fplayer/"+t[1]+"/.swf"}},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"swf",url:"//www.dailymotion.com/swf/video/$1"},twitvid:{matcher:/twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i,params:{autoplay:0},type:"iframe",url:"//www.twitvid.com/embed.php?guid=$1"},twitpic:{matcher:/twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i,type:"image",url:"//twitpic.com/show/full/$1/"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},google_maps:{matcher:/maps\.google\.([a-z]{2,3}(\.[a-z]{2})?)\/(\?ll=|maps\?)(.*)/i,type:"iframe",url:function(e){return"//maps.google."+e[1]+"/"+e[3]+""+e[4]+"&output="+(e[4].indexOf("layer=c")>0?"svembed":"embed")}}},beforeLoad:function(t,i){var o,r,l,c,a=i.href||"",s=!1;for(o in t)if(t.hasOwnProperty(o)&&(r=t[o],l=a.match(r.matcher))){s=r.type,c=e.extend(!0,{},r.params,i[o]||(e.isPlainObject(t[o])?t[o].params:null)),a="function"===e.type(r.url)?r.url.call(this,l,c,i):n(r.url,l,c);break}s&&(i.href=a,i.type=s,i.autoHeight=!1)}}}(jQuery),function(e){function T(e,t){return function(n){return F(e.call(this,n),t)}}function z(e){return function(t){return this.lang().ordinal(e.call(this,t))}}function M(){}function P(e){O(this,e)}function A(e){var t=this._data={},n=e.years||e.year||e.y||0,i=e.months||e.month||e.M||0,a=e.weeks||e.week||e.w||0,s=e.days||e.day||e.d||0,o=e.hours||e.hour||e.h||0,r=e.minutes||e.minute||e.m||0,l=e.seconds||e.second||e.s||0,c=e.milliseconds||e.millisecond||e.ms||0;this._milliseconds=c+1e3*l+6e4*r+36e5*o,this._days=s+7*a,this._months=i+12*n,t.milliseconds=c%1e3,l+=I(c/1e3),t.seconds=l%60,r+=I(l/60),t.minutes=r%60,o+=I(r/60),t.hours=o%24,s+=I(o/24),s+=7*a,t.days=s%30,i+=I(s/30),t.months=i%12,n+=I(i/12),t.years=n}function O(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function I(e){return 0>e?Math.ceil(e):Math.floor(e)}function F(e,t){for(var n=e+"";t>n.length;)n="0"+n;return n}function N(e,t,n){var o,i=t._milliseconds,a=t._days,s=t._months;i&&e._d.setTime(+e+i*n),a&&e.date(e.date()+a*n),s&&(o=e.date(),e.date(1).month(e.month()+s*n).date(Math.min(o,e.daysInMonth())))}function H(e){return"[object Array]"===Object.prototype.toString.call(e)}function L(e,t){var s,n=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),a=0;for(s=0;n>s;s++)~~e[s]!==~~t[s]&&a++;return a+i}function R(e,t){return t.abbr=e,s[e]||(s[e]=new M),s[e].set(t),s[e]}function q(e){return e?(!s[e]&&o&&require("./lang/"+e),s[e]):t.fn._lang}function W(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Y(e){var n,i,t=e.match(l);for(n=0,i=t.length;i>n;n++)t[n]=E[t[n]]?E[t[n]]:W(t[n]);return function(a){var s="";for(n=0;i>n;n++)s+="function"==typeof t[n].call?t[n].call(a,e):t[n];return s}}function U(e,t){function i(t){return e.lang().longDateFormat(t)||t}for(var n=5;n--&&c.test(t);)t=t.replace(c,i);return C[t]||(C[t]=Y(t)),C[t](e)}function B(e){switch(e){case"DDDD":return f;case"YYYY":return h;case"YYYYY":return m;case"S":case"SS":case"SSS":case"DDD":return p;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return _;case"X":return b;case"Z":case"ZZ":return g;case"T":return v;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return u;default:return new RegExp(e.replace("\\",""))}}function V(e,t,n){var i,s=n._a;switch(e){case"M":case"MM":s[1]=null==t?0:~~t-1;break;case"MMM":case"MMMM":i=q(n._l).monthsParse(t),null!=i?s[1]=i:n._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=t&&(s[2]=~~t);break;case"YY":s[0]=~~t+(~~t>68?1900:2e3);break;case"YYYY":case"YYYYY":s[0]=~~t;break;case"a":case"A":n._isPm="pm"===(t+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":s[3]=~~t;break;case"m":case"mm":s[4]=~~t;break;case"s":case"ss":s[5]=~~t;break;case"S":case"SS":case"SSS":s[6]=~~(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,i=(t+"").match(x),i&&i[1]&&(n._tzh=~~i[1]),i&&i[2]&&(n._tzm=~~i[2]),i&&"+"===i[0]&&(n._tzh=-n._tzh,n._tzm=-n._tzm)}null==t&&(n._isValid=!1)}function X(e){var t,n,i=[];if(!e._d){for(t=0;7>t;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];i[3]+=e._tzh||0,i[4]+=e._tzm||0,n=new Date(0),e._useUTC?(n.setUTCFullYear(i[0],i[1],i[2]),n.setUTCHours(i[3],i[4],i[5],i[6])):(n.setFullYear(i[0],i[1],i[2]),n.setHours(i[3],i[4],i[5],i[6])),e._d=n}}function G(e){var i,a,t=e._f.match(l),n=e._i;for(e._a=[],i=0;t.length>i;i++)a=(B(t[i]).exec(n)||[])[0],a&&(n=n.slice(n.indexOf(a)+a.length)),E[t[i]]&&V(t[i],a,e);e._isPm&&12>e._a[3]&&(e._a[3]+=12),e._isPm===!1&&12===e._a[3]&&(e._a[3]=0),X(e)}function K(e){for(var t,n,i,r,a=99;e._f.length;){if(t=O({},e),t._f=e._f.pop(),G(t),n=new P(t),n.isValid()){i=n;break}r=L(t._a,n.toArray()),a>r&&(a=r,i=n)}O(e,i)}function Q(e){var t,n=e._i;if(y.exec(n)){for(e._f="YYYY-MM-DDT",t=0;4>t;t++)if(k[t][1].exec(n)){e._f+=k[t][0];break}g.exec(n)&&(e._f+=" Z"),G(e)}else e._d=new Date(n)}function Z(t){var n=t._i,i=r.exec(n);n===e?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof n?Q(t):H(n)?(t._a=n.slice(0),X(t)):t._d=n instanceof Date?new Date(+n):new Date(n)}function J(e,t,n,i,a){return a.relativeTime(t||1,!!n,e,i)}function et(e,t,n){var a=i(Math.abs(e)/1e3),s=i(a/60),o=i(s/60),r=i(o/24),l=i(r/365),c=45>a&&["s",a]||1===s&&["m"]||45>s&&["mm",s]||1===o&&["h"]||22>o&&["hh",o]||1===r&&["d"]||25>=r&&["dd",r]||45>=r&&["M"]||345>r&&["MM",i(r/30)]||1===l&&["y"]||["yy",l];return c[2]=t,c[3]=e>0,c[4]=n,J.apply({},c)}function tt(e,n,i){var a=i-n,s=i-e.day();return s>a&&(s-=7),a-7>s&&(s+=7),Math.ceil(t(e).add("d",s).dayOfYear()/7)}function nt(e){var n=e._i,i=e._f;return null===n||""===n?null:("string"==typeof n&&(e._i=n=q().preparse(n)),t.isMoment(n)?(e=O({},n),e._d=new Date(+n._d)):i?H(i)?K(e):G(e):Z(e),new P(e))}function it(e,n){t.fn[e]=t.fn[e+"s"]=function(e){var t=this._isUTC?"UTC":"";return null!=e?(this._d["set"+t+n](e),this):this._d["get"+t+n]()}}function at(e){t.duration.fn[e]=function(){return this._data[e]}}function st(e,n){t.duration.fn["as"+e]=function(){return+this/n}}for(var t,a,n="2.0.0",i=Math.round,s={},o="undefined"!=typeof module&&module.exports,r=/^\/?Date\((\-?\d+)/i,l=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,c=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,u=/\d\d?/,p=/\d{1,3}/,f=/\d{3}/,h=/\d{1,4}/,m=/[+\-]?\d{1,6}/,_=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,g=/Z|[\+\-]\d\d:?\d\d/i,v=/T/i,b=/[\+\-]?\d+(\.\d{1,3})?/,y=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,w="YYYY-MM-DDTHH:mm:ssZ",k=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],x=/([\+\-]|\d\d)/gi,j="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),$={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},C={},S="DDD w W M D d".split(" "),D="M D H h m s w W".split(" "),E={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return F(this.year()%100,2)},YYYY:function(){return F(this.year(),4)},YYYYY:function(){return F(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)
},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return F(~~(this.milliseconds()/10),2)},SSS:function(){return F(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+F(~~(e/60),2)+":"+F(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+F(~~(10*e/6),4)},X:function(){return this.unix()}};S.length;)a=S.pop(),E[a+"o"]=z(E[a]);for(;D.length;)a=D.pop(),E[a+a]=T(E[a],2);for(E.DDDD=T(E.DDD,3),M.prototype={set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var n,i,a;for(this._monthsParse||(this._monthsParse=[]),n=0;12>n;n++)if(this._monthsParse[n]||(i=t([2e3,n]),a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(a.replace(".",""),"i")),this._monthsParse[n].test(e))return n},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var a=this._relativeTime[n];return"function"==typeof a?a(e,t,n,i):a.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return tt(e,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},t=function(e,t,n){return nt({_i:e,_f:t,_l:n,_isUTC:!1})},t.utc=function(e,t,n){return nt({_useUTC:!0,_isUTC:!0,_l:n,_i:e,_f:t})},t.unix=function(e){return t(1e3*e)},t.duration=function(e,n){var o,i=t.isDuration(e),a="number"==typeof e,s=i?e._data:a?{}:e;return a&&(n?s[n]=e:s.milliseconds=e),o=new A(s),i&&e.hasOwnProperty("_lang")&&(o._lang=e._lang),o},t.version=n,t.defaultFormat=w,t.lang=function(e,n){return e?(n?R(e,n):s[e]||q(e),t.duration.fn._lang=t.fn._lang=q(e),void 0):t.fn._lang._abbr},t.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),q(e)},t.isMoment=function(e){return e instanceof P},t.isDuration=function(e){return e instanceof A},t.fn=P.prototype={clone:function(){return t(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return t.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!L(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){var n=U(this,e||t.defaultFormat);return this.lang().postformat(n)},add:function(e,n){var i;return i="string"==typeof e?t.duration(+n,e):t.duration(e,n),N(this,i,1),this},subtract:function(e,n){var i;return i="string"==typeof e?t.duration(+n,e):t.duration(e,n),N(this,i,-1),this},diff:function(e,n,i){var o,r,a=this._isUTC?t(e).utc():t(e).local(),s=6e4*(this.zone()-a.zone());return n&&(n=n.replace(/s$/,"")),"year"===n||"month"===n?(o=432e5*(this.daysInMonth()+a.daysInMonth()),r=12*(this.year()-a.year())+(this.month()-a.month()),r+=(this-t(this).startOf("month")-(a-t(a).startOf("month")))/o,"year"===n&&(r/=12)):(o=this-a-s,r="second"===n?o/1e3:"minute"===n?o/6e4:"hour"===n?o/36e5:"day"===n?o/864e5:"week"===n?o/6048e5:o),i?r:I(r)},from:function(e,n){return t.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!n)},fromNow:function(e){return this.from(t(),e)},calendar:function(){var e=this.diff(t().startOf("day"),"days",!0),n=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){var e=this.year();return 0===e%4&&0!==e%100||0===e%400},isDST:function(){return t([this.year()]).zone()>this.zone()||t([this.year(),5]).zone()>this.zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==e?t:this.add({d:e-t})},startOf:function(e){switch(e=e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.day(0),this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(e,n){return n=n!==void 0?n:"millisecond",+this.clone().startOf(n)>+t(e).startOf(n)},isBefore:function(e,n){return n=n!==void 0?n:"millisecond",+t(e).startOf(n)>+this.clone().startOf(n)},isSame:function(e,n){return n=n!==void 0?n:"millisecond",+this.clone().startOf(n)===+t(e).startOf(n)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return t.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(e){var n=i((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return null==e?n:this.add("d",e-n)},isoWeek:function(e){var t=tt(this,1,4);return null==e?t:this.add("d",7*(e-t))},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},lang:function(t){return t===e?this._lang:(this._lang=q(t),this)}},a=0;j.length>a;a++)it(j[a].toLowerCase().replace(/s$/,""),j[a]);it("year","FullYear"),t.fn.days=t.fn.day,t.fn.weeks=t.fn.week,t.fn.isoWeeks=t.fn.isoWeek,t.duration.fn=A.prototype={weeks:function(){return I(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(e){var t=+this,n=et(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},lang:t.fn.lang};for(a in $)$.hasOwnProperty(a)&&(st(a,$[a]),at(a.toLowerCase()));st("Weeks",6048e5),t.lang("en",{ordinal:function(e){var t=e%10,n=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),o&&(module.exports=t),"undefined"==typeof ender&&(this.moment=t),"function"==typeof define&&define.amd&&define("moment",[],function(){return t})}.call(this),moment.lang("zh-cn",{months:"ä¸æ_äºæ_ä¸æ_åæ_äºæ_å­æ_ä¸æ_å«æ_ä¹æ_åæ_åä¸æ_åäºæ?".split("_"),monthsShort:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ?".split("_"),weekdays:"æææ¥_ææä¸_ææäº_ææä¸_ææå_ææäº_ææå?".split("_"),weekdaysShort:"å¨æ¥_å¨ä¸_å¨äº_å¨ä¸_å¨å_å¨äº_å¨å­".split("_"),weekdaysMin:"æ¥_ä¸_äº_ä¸_å_äº_å?".split("_"),longDateFormat:{LT:"Ahç¹mm",L:"YYYYå¹´MMMDæ?",LL:"YYYYå¹´MMMDæ?",LLL:"YYYYå¹´MMMDæ¥LT",LLLL:"YYYYå¹´MMMDæ¥ddddLT",l:"YYYYå¹´MMMDæ?",ll:"YYYYå¹´MMMDæ?",lll:"YYYYå¹´MMMDæ¥LT",llll:"YYYYå¹´MMMDæ¥ddddLT"},meridiem:function(e,t){return 9>e?"æ©ä¸":11>e&&30>t?"ä¸å":13>e&&30>t?"ä¸­å":18>e?"ä¸å":"æä¸"},calendar:{sameDay:"[ä»å¤©]LT",nextDay:"[æå¤©]LT",nextWeek:"[ä¸]ddddLT",lastDay:"[æ¨å¤©]LT",lastWeek:"[ä¸]ddddLT",sameElse:"L"},ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"æ?";case"M":return e+"æ?";case"w":case"W":return e+"å?";default:return e}},relativeTime:{future:"%så?",past:"%så?",s:"å ç§",m:"1åé",mm:"%dåé",h:"1å°æ¶",hh:"%då°æ¶",d:"1å¤?",dd:"%då¤?",M:"1ä¸ªæ",MM:"%dä¸ªæ",y:"1å¹?",yy:"%då¹?"}}),function(){function t(t){this.tokens=[],this.tokens.links={},this.options=t||c.defaults,this.rules=e.normal,this.options.gfm&&(this.rules=this.options.tables?e.tables:e.gfm)}function i(e,t){if(this.options=t||c.defaults,this.links=e,this.rules=n.normal,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?n.breaks:n.gfm:this.options.pedantic&&(this.rules=n.pedantic)}function a(e){this.tokens=[],this.token=null,this.options=e||c.defaults}function s(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e,t){return e=e.source,t=t||"",function n(i,a){return i?(a=a.source||a,a=a.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(i,a),n):new RegExp(e,t)}}function r(){}function l(e){for(var n,i,t=1;arguments.length>t;t++){n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}function c(e,n,i){if(i||"function"==typeof n){i||(i=n,n=null),n&&(n=l({},c.defaults,n));var r,d,o=n.highlight,u=0;try{r=t.lex(e,n)}catch(p){return i(p)}d=r.length;var f=function(e){var t,s;e!==!0&&delete n.highlight;try{t=a.parse(r,n)}catch(l){s=l}return n.highlight=o,s?i(s):i(null,t)};if(!o||3>o.length)return f(!0);if(!d)return f();for(;r.length>u;u++)(function(e){return"code"!==e.type?--d||f():o(e.text,e.lang,function(t,n){return null==n||n===e.text?--d||f():(e.text=n,e.escaped=!0,--d||f(),void 0)})})(r[u])}else try{return n&&(n=l({},c.defaults,n)),a.parse(t.lex(e,n),n)}catch(p){if(p.message+="\nPlease report this to https://github.com/chjj/marked.",(n||c.defaults).silent)return"<p>An error occured:</p><pre>"+s(p.message+"",!0)+"</pre>";throw p}}var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:r,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:r,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:r,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};e.bullet=/(?:[*+-]|\d+\.)/,e.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,e.item=o(e.item,"gm")(/bull/g,e.bullet)(),e.list=o(e.list)(/bull/g,e.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),e._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",e.html=o(e.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,e._tag)(),e.paragraph=o(e.paragraph)("hr",e.hr)("heading",e.heading)("lheading",e.lheading)("blockquote",e.blockquote)("tag","<"+e._tag)("def",e.def)(),e.normal=l({},e),e.gfm=l({},e.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),e.gfm.paragraph=o(e.paragraph)("(?!","(?!"+e.gfm.fences.source.replace("\\1","\\2")+"|")(),e.tables=l({},e.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=e,t.lex=function(e,n){var i=new t(n);return i.lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(t,n){for(var i,a,s,o,r,l,c,d,u,t=t.replace(/^ +$/gm,"");t;)if((s=this.rules.newline.exec(t))&&(t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(t))t=t.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});else if(s=this.rules.fences.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]});else if(s=this.rules.heading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if(n&&(s=this.rules.nptable.exec(t))){for(t=t.substring(s[0].length),l={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")},d=0;l.align.length>d;d++)l.align[d]=/^ *-+: *$/.test(l.align[d])?"right":/^ *:-+: *$/.test(l.align[d])?"center":/^ *:-+ *$/.test(l.align[d])?"left":null;for(d=0;l.cells.length>d;d++)l.cells[d]=l.cells[d].split(/ *\| */);this.tokens.push(l)}else if(s=this.rules.lheading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2]?1:2,text:s[1]});else if(s=this.rules.hr.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,n),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(t)){for(t=t.substring(s[0].length),o=s[2],this.tokens.push({type:"list_start",ordered:o.length>1}),s=s[0].match(this.rules.item),i=!1,u=s.length,d=0;u>d;d++)l=s[d],c=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(c-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&d!==u-1&&(r=e.bullet.exec(s[d+1])[0],o===r||o.length>1&&r.length>1||(t=s.slice(d+1).join("\n")+t,d=u-1)),a=i||/\n\n(?!\s*$)/.test(l),d!==u-1&&(i="\n"===l[l.length-1],a||(a=i)),this.tokens.push({type:a?"loose_item_start":"list_item_start"}),this.token(l,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(t))t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===s[1]||"script"===s[1],text:s[0]});else if(n&&(s=this.rules.def.exec(t)))t=t.substring(s[0].length),this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]};else if(n&&(s=this.rules.table.exec(t))){for(t=t.substring(s[0].length),l={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")},d=0;l.align.length>d;d++)l.align[d]=/^ *-+: *$/.test(l.align[d])?"right":/^ *:-+: *$/.test(l.align[d])?"center":/^ *:-+ *$/.test(l.align[d])?"left":null;for(d=0;l.cells.length>d;d++)l.cells[d]=l.cells[d].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(n&&(s=this.rules.paragraph.exec(t)))t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1][s[1].length-1]?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:r,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:r,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};n._inside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([^\s]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,n.link=o(n.link)("inside",n._inside)("href",n._href)(),n.reflink=o(n.reflink)("inside",n._inside)(),n.normal=l({},n),n.pedantic=l({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=l({},n.normal,{escape:o(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:o(n.text)("]|","~]|")("|","|https?://|")()}),n.breaks=l({},n.gfm,{br:o(n.br)("{2,}","*")(),text:o(n.gfm.text)("{2,}","*")()}),i.rules=n,i.output=function(e,t,n){var a=new i(t,n);return a.output(e)},i.prototype.output=function(e){for(var n,i,a,o,t="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),t+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),"@"===o[2]?(i=":"===o[1][6]?this.mangle(o[1].substring(7)):this.mangle(o[1]),a=this.mangle("mailto:")+i):(i=s(o[1]),a=i),t+='<a href="'+a+'">'+i+"</a>";else if(o=this.rules.url.exec(e))e=e.substring(o[0].length),i=s(o[1]),a=i,t+='<a href="'+a+'">'+i+"</a>";else if(o=this.rules.tag.exec(e))e=e.substring(o[0].length),t+=this.options.sanitize?s(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),t+=this.outputLink(o,{href:o[2],title:o[3]});else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),n=(o[2]||o[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){t+=o[0][0],e=o[0].substring(1)+e;continue}t+=this.outputLink(o,n)}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),t+="<strong>"+this.output(o[2]||o[1])+"</strong>";else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),t+="<em>"+this.output(o[2]||o[1])+"</em>";else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),t+="<pre><code>"+s(o[2],!0)+"</code></pre>";else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),t+="<br>";else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),t+="<del>"+this.output(o[1])+"</del>";else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),t+=s(this.smartypants(o[0]));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return t},i.prototype.outputLink=function(e,t){return"!"!==e[0][0]?'<a href="'+s(t.href)+'"'+(t.title?' title="'+s(t.title)+'"':"")+">"+this.output(e[1])+"</a>":'<img src="'+s(t.href)+'" alt="'+s(e[1])+'"'+(t.title?' title="'+s(t.title)+'"':"")+">"},i.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"â?").replace(/'([^']*)'/g,"â?$1â?").replace(/"([^"]*)"/g,"â?$1â?").replace(/\.{3}/g,"â?"):e},i.prototype.mangle=function(e){for(var a,t="",n=e.length,i=0;n>i;i++)a=e.charCodeAt(i),Math.random()>.5&&(a="x"+a.toString(16)),t+="&#"+a+";";return t},a.parse=function(e,t){var n=new a(t);return n.parse(e)},a.prototype.parse=function(e){this.inline=new i(e.links,this.options),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},a.prototype.next=function(){return this.token=this.tokens.pop()},a.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},a.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},a.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+">"+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var e=this.options.highlight(this.token.text,this.token.lang);null!=e&&e!==this.token.text&&(this.token.escaped=!0,this.token.text=e)}return this.token.escaped||(this.token.text=s(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var n,i,a,o,r,t="";for(t+="<thead>\n<tr>\n",i=0;this.token.header.length>i;i++)n=this.inline.output(this.token.header[i]),t+=this.token.align[i]?'<th align="'+this.token.align[i]+'">'+n+"</th>\n":"<th>"+n+"</th>\n";for(t+="</tr>\n</thead>\n",t+="<tbody>\n",i=0;this.token.cells.length>i;i++){for(a=this.token.cells[i],t+="<tr>\n",r=0;a.length>r;r++)o=this.inline.output(a[r]),t+=this.token.align[r]?'<td align="'+this.token.align[r]+'">'+o+"</td>\n":"<td>"+o+"</td>\n";t+="</tr>\n"}return t+="</tbody>\n","<table>\n"+t+"</table>\n";case"blockquote_start":for(var t="";"blockquote_end"!==this.next().type;)t+=this.tok();return"<blockquote>\n"+t+"</blockquote>\n";case"list_start":for(var l=this.token.ordered?"ol":"ul",t="";"list_end"!==this.next().type;)t+=this.tok();return"<"+l+">\n"+t+"</"+l+">\n";case"list_item_start":for(var t="";"list_item_end"!==this.next().type;)t+="text"===this.token.type?this.parseText():this.tok();return"<li>"+t+"</li>\n";case"loose_item_start":for(var t="";"list_item_end"!==this.next().type;)t+=this.tok();return"<li>"+t+"</li>\n";case"html":return this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},r.exec=r,c.options=c.setOptions=function(e){return l(c.defaults,e),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1},c.Parser=a,c.parser=a.parse,c.Lexer=t,c.lexer=t.lex,c.InlineLexer=i,c.inlineLexer=i.output,c.parse=c,"object"==typeof exports?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):this.marked=c}.call(function(){return this||("undefined"!=typeof window?window:global)}()),Sanitize.REGEX_PROTOCOL=/^([A-Za-z0-9\+\-\.\&\;\*\s]*?)(?:\:|&*0*58|&*x0*3a)/i,Sanitize.RELATIVE="__relative__",Sanitize.prototype.clean_node=function(e){function n(e,t){var n;for(n=0;t.length>n;n++)if(t[n]==e)return n;return-1}function a(){var n,i,e=[],t={};for(n=0;arguments.length>n;n++)if(arguments[n]&&arguments[n].length)for(i=0;arguments[n].length>i;i++)t[arguments[n][i]]||(t[arguments[n][i]]=!0,e.push(arguments[n][i]));return e}function s(e){var t;switch(e.nodeType){case 1:o.call(this,e);break;case 3:t=e.cloneNode(!1),this.current_element.appendChild(t);break;case 5:t=e.cloneNode(!1),this.current_element.appendChild(t);break;case 8:this.config.allow_comments&&(t=e.cloneNode(!1),this.current_element.appendChild(t));break;default:console&&console.log&&console.log("unknown node type",e.nodeType)}}function o(e){var t,l,c,d,u,p,f,h,m,_,g=r.call(this,e);if(e=g.node,c=e.nodeName.toLowerCase(),l=this.current_element,this.allowed_elements[c]||g.whitelist){this.current_element=this.dom.createElement(e.nodeName),l.appendChild(this.current_element);var v=this.config.attributes;for(d=a(v[c],v.__ALL__,g.attr_whitelist),t=0;d.length>t;t++)p=d[t],u=e.attributes[p],u&&(_=!0,this.config.protocols[c]&&this.config.protocols[c][p]&&(h=this.config.protocols[c][p],m=u.nodeValue.toLowerCase().match(Sanitize.REGEX_PROTOCOL),_=m?-1!=n(m[1],h):-1!=n(Sanitize.RELATIVE,h)),_&&(f=document.createAttribute(p),f.value=u.nodeValue,this.current_element.setAttributeNode(f)));if(this.config.add_attributes[c])for(p in this.config.add_attributes[c])f=document.createAttribute(p),f.value=this.config.add_attributes[c][p],this.current_element.setAttributeNode(f)}else if(-1!=n(e,this.whitelist_nodes)){for(this.current_element=e.cloneNode(!0);this.current_element.childNodes.length>0;)this.current_element.removeChild(this.current_element.firstChild);l.appendChild(this.current_element)}if(!this.config.remove_all_contents&&!this.config.remove_element_contents[c])for(t=0;e.childNodes.length>t;t++)s.call(this,e.childNodes[t]);this.current_element.normalize&&this.current_element.normalize(),this.current_element=l}function r(e){var i,s,o,t={attr_whitelist:[],node:e,whitelist:!1};for(i=0;this.transformers.length>i;i++)if(o=this.transformers[i]({allowed_elements:this.allowed_elements,config:this.config,node:e,node_name:e.nodeName.toLowerCase(),whitelist_nodes:this.whitelist_nodes,dom:this.dom}),null!=o){if("object"!=typeof o)throw new Error("transformer output must be an object or null");if(o.whitelist_nodes&&o.whitelist_nodes instanceof Array)for(s=0;o.whitelist_nodes.length>s;s++)-1==n(o.whitelist_nodes[s],this.whitelist_nodes)&&this.whitelist_nodes.push(o.whitelist_nodes[s]);t.whitelist=o.whitelist?!0:!1,o.attr_whitelist&&(t.attr_whitelist=a(t.attr_whitelist,o.attr_whitelist)),t.node=o.node?o.node:t.node}return t}var t=this.dom.createDocumentFragment();for(this.current_element=t,this.whitelist_nodes=[],i=0;e.childNodes.length>i;i++)s.call(this,e.childNodes[i]);return t.normalize&&t.normalize(),t},"function"==typeof define&&define("sanitize",[],function(){return Sanitize}),Sanitize.Config||(Sanitize.Config={}),Sanitize.Config.BASIC={elements:["a","b","blockquote","br","cite","code","dd","dl","dt","em","i","li","ol","p","pre","q","small","strike","strong","sub","sup","u","ul"],attributes:{a:["href"],blockquote:["cite"],q:["cite"]},add_attributes:{a:{rel:"nofollow"}},protocols:{a:{href:["ftp","http","https","mailto",Sanitize.RELATIVE]},blockquote:{cite:["http","https",Sanitize.RELATIVE]},q:{cite:["http","https",Sanitize.RELATIVE]}}},Sanitize.Config.RELAXED={elements:["a","b","blockquote","br","caption","cite","code","col","colgroup","dd","dl","dt","em","hr","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","q","small","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","div"],attributes:{a:["href","title"],blockquote:["cite"],col:["span","width"],colgroup:["span","width"],img:["align","alt","height","src","title","width","class"],ol:["start","type"],q:["cite"],table:["summary","width"],td:["abbr","axis","colspan","rowspan","width"],th:["abbr","axis","colspan","rowspan","scope","width"],ul:["type"],div:["class"],hr:[""]},protocols:{a:{href:["ftp","http","https","mailto",Sanitize.RELATIVE]},blockquote:{cite:["http","https",Sanitize.RELATIVE]},img:{src:["http","https",Sanitize.RELATIVE]},q:{cite:["http","https",Sanitize.RELATIVE]}}},Sanitize.Config.RESTRICTED={elements:["b","em","i","strong","u"]},function(e,t,n,i){function a(i){if(!n[i]){if(!t[i]){if(e)return e(i);throw new Error("Cannot find module '"+i+"'")}var s=n[i]={exports:{}};t[i][0](function(e){var n=t[i][1][e];return a(n?n:e)},s,s.exports)}return n[i].exports}for(var s=0;i.length>s;s++)a(i[s]);return a}("undefined"!=typeof require&&require,{1:[function(e,t,n){(function(){function f(e,t,n){if("href"===t||"src"===t){if(c.lastIndex=0,c.test(n))return"#";if(d.lastIndex=0,d.test(n))return"#"}else if("style"===t){if(u.lastIndex=0,u.test(n))return"#";if(p.lastIndex=0,p.test(n))return""}}function h(e,t){return m(t)}function m(e){return e.replace(a,"&lt;").replace(s,"&gt;")}function _(e,t){return String.fromCharCode(parseInt(t))}function g(e){"use strict";this.options=e=e||{},this.whiteList=e.whiteList||n.whiteList,this.onTagAttr=e.onTagAttr||n.onTagAttr,this.onIgnoreTag=e.onIgnoreTag||n.onIgnoreTag}function v(e,t){var n=new g(t);return n.process(e)}var i={h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],hr:[],span:[],strong:[],b:[],i:[],br:[],p:[],pre:[],code:[],a:["target","href","title"],img:["src","alt","title","class"],div:[],table:["width","border"],tr:[],td:["width","colspan"],th:["width","colspan"],tbody:[],ul:[],li:[],ol:[],dl:[],dt:[],em:[],cite:[],section:[],header:[],footer:[],blockquote:[],audio:["autoplay","controls","loop","preload","src"],video:["autoplay","controls","loop","preload","src","height","width"]},a=/</g,s=/>/g,o=/"/g,r=/[^a-zA-Z0-9_:\.\-]/gim,l=/&#([a-zA-Z0-9]*);?/gim,c=/\/\*|\*\//gm,d=/^[\s"'`]*((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,u=/\/\*|\*\//gm,p=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi;g.prototype.filterAttributes=function(e,t){"use strict";e=e.toLowerCase();for(var n=this,i=this.whiteList[e],a=0,s="",c=!1,d=!1,u=function(t,a){if(t=t.trim(),!d&&"/"===t)return d=!0,void 0;if(t=t.replace(r,"").toLowerCase(),!(1>t.length)&&-1!==i.indexOf(t)){if(a){a=a.trim().replace(o,"&quote;"),a=a.replace(l,_);for(var c="",u=0,p=a.length;p>u;u++)c+=32>a.charCodeAt(u)?" ":a[u];a=c.trim();var f=n.onTagAttr(e,t,a);f!==void 0&&(a=f)}s+=t+(a?'="'+a+'"':"")+" "}},p=0,f=t.length;f>p;p++){var h=t[p];if(c!==!1||"="!==h)if(c===!1||p!==a||'"'!==h&&"'"!==h)if(" "!==h);else{var g=t.slice(a,p).trim();c===!1?u(g):u(c,g),c=!1,a=p+1}else{var m=t.indexOf(h,p+1);if(-1===m)break;var g=t.slice(a+1,m).trim();u(c,g),c=!1,p=m,a=p+1}else c=t.slice(a,p),a=p+1}return t.length>a&&(c===!1?u(t.slice(a)):u(c,t.slice(a))),d&&(s+="/"),s.trim()},g.prototype.addNewTag=function(e,t,n){"use strict";var i="",a="</"===e.slice(0,2)?2:1,s=e.indexOf(" ");if(-1===s)var o=e.slice(a,e.length-1).trim();else var o=e.slice(a,s+1).trim();if(o=o.toLowerCase(),o in this.whiteList)if(-1===s)i+=e.slice(0,a)+o+">";else{var r=this.filterAttributes(o,e.slice(s+1,e.length-1).trim());i+=e.slice(0,a)+o+(r.length>0?" "+r:"")+">"}else{var l={isClosing:2===a,position:n,originalPosition:t-e.length+1},c=this.onIgnoreTag(o,e,l);c===void 0&&(c=m(e)),i+=c}return i},g.prototype.process=function(e){"use strict";for(var t="",n=0,i=!1,a=!1,s=0,s=0,o=e.length;o>s;s++){var r=e[s];if(i===!1){if("<"===r){i=s;continue}}else if(a===!1){if("<"===r){t+=m(e.slice(n,s)),i=s,n=s;continue}if(">"===r){t+=m(e.slice(n,i)),t+=this.addNewTag(e.slice(i,s+1),s,t.length),n=s+1,i=!1;continue}if('"'===r||"'"===r){a=r;continue}}else if(r===a){a=!1;continue}}return e.length>n&&(t+=m(e.substr(n))),t},n=t.exports=v,n.FilterXSS=g,n.whiteList=i,n.onTagAttr=f,n.onIgnoreTag=h,n.utils=e("./utils"),"undefined"!=typeof window&&(window.filterXSS=t.exports)})()},{"./utils":2}],2:[function(e,t){var i=t.exports;i.tagFilter=function(e,t){"function"!=typeof t&&(t=function(){});var n=[],i=!1;return{onIgnoreTag:function(a,s,o){if(-1!==e.indexOf(a)){var r="[removed]";if(i!==!1&&o.isClosing){var l=o.position+r.length;n.push([i,l]),i=!1}else i=o.position;return r}return t(a,s,o)},filter:function(e){var t="",i=0;return n.forEach(function(n){t+=e.slice(i,n[0]),i=n[1]}),t+=e.slice(i)}}}},{}]},{},[1]);var Heyoffline,addEvent,destroy,extend,setStyles,__bind=function(e,t){return function(){return e.apply(t,arguments)}};extend=function(e,t){var n;if(t)for(n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},arguments.callee(e[n],t[n])):e[n]=t[n];return e},addEvent=function(e,t,n,i){return null==i&&(i=!1),e.addEventListener?e.addEventListener(t,n,i):void 0},setStyles=function(e,t){var n,i;i=[];for(n in t)i.push(e.style[n]=t[n]);return i},destroy=function(e){return e.parentNode.removeChild(e)},Heyoffline=function(){function e(e){this.hideMessage=__bind(this.hideMessage,this),this.offline=__bind(this.offline,this),this.online=__bind(this.online,this),extend(this.options,e),this.setup()}return e.prototype.version="1.1.1",e.prototype.options={text:{title:"You're currently offline",content:"Seems like you've gone offline,                you might want to wait until your network comes back before continuing.<br /><br />                This message will self-destruct once you're online again.",button:"Relax, I know what I'm doing"},monitorFields:!1,prefix:"heyoffline",noStyles:!1,disableDismiss:!1,elements:["input","select","textarea","*[contenteditable]"]},e.prototype.modified=!1,e.prototype.setup=function(){return this.events={element:["keyup","change"],network:["online","offline"]},this.elements={fields:document.querySelectorAll(this.options.elements.join(",")),overlay:document.createElement("div"),modal:document.createElement("div"),heading:document.createElement("h2"),content:document.createElement("p"),button:document.createElement("a")},this.defaultStyles={overlay:{position:"absolute",top:0,left:0,width:"100%",background:"rgba(0, 0, 0, 0.3)",zIndex:500},modal:{padding:"15px",background:"#fff",boxShadow:"0 2px 30px rgba(0, 0, 0, 0.3)",width:"450px",margin:"0 auto",position:"relative",top:"30%",color:"#444",borderRadius:"2px",zIndex:600},heading:{fontSize:"1.7em",paddingBottom:"15px"},content:{paddingBottom:"15px"},button:{fontWeight:"bold",cursor:"pointer"}},this.attachEvents()
},e.prototype.createElements=function(){return this.createElement(document.body,"overlay"),this.resizeOverlay(),this.createElement(this.elements.overlay,"modal"),this.createElement(this.elements.modal,"heading",this.options.text.title),this.createElement(this.elements.modal,"content",this.options.text.content),this.options.disableDismiss?void 0:(this.createElement(this.elements.modal,"button",this.options.text.button),addEvent(this.elements.button,"click",this.hideMessage))},e.prototype.createElement=function(e,t,n){return this.elements[t].setAttribute("class",""+this.options.prefix+"_"+t),this.elements[t]=e.appendChild(this.elements[t]),n&&(this.elements[t].innerHTML=n),this.options.noStyles?void 0:setStyles(this.elements[t],this.defaultStyles[t])},e.prototype.resizeOverlay=function(){return setStyles(this.elements.overlay,{height:""+window.innerHeight+"px"})},e.prototype.destroyElements=function(){return this.elements.overlay?destroy(this.elements.overlay):void 0},e.prototype.attachEvents=function(){var e,t,n,i,a,s,o,r,l=this;for(o=this.elements.fields,n=0,a=o.length;a>n;n++)t=o[n],this.elementEvents(t);for(r=this.events.network,i=0,s=r.length;s>i;i++)e=r[i],this.networkEvents(e);return addEvent(window,"resize",function(){return l.resizeOverlay()})},e.prototype.elementEvents=function(e){var t,n,i,a,s,o=this;for(a=this.events.element,s=[],n=0,i=a.length;i>n;n++)t=a[n],s.push(function(t){return addEvent(e,t,function(){return o.modified=!0})}(t));return s},e.prototype.networkEvents=function(e){return addEvent(window,e,this[e])},e.prototype.online=function(){return this.hideMessage()},e.prototype.offline=function(){return this.options.monitorFields?this.modified?this.showMessage():void 0:this.showMessage()},e.prototype.showMessage=function(){return this.createElements(),this.options.onOnline?this.options.onOnline.call(this):void 0},e.prototype.hideMessage=function(e){return e&&e.preventDefault(),this.destroyElements(),this.options.onOffline?this.options.onOffline.call(this):void 0},e}(),function(){"use strict";angular.module("ui.bootstrap.popbox",["ui.bootstrap.position"]).factory("$position",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function i(e){return"static"===(n(e,"position")||"static")}var a=function(t){for(var n=e[0],a=t.offsetParent||n;a&&a!==n&&i(a);)a=a.offsetParent;return a||n};return{position:function(t){var n=this.offset(t),i={top:0,left:0},s=a(t[0]);return s!==e[0]&&(i=this.offset(angular.element(s)),i.top+=s.clientTop,i.left+=s.clientLeft),{width:t.prop("offsetWidth"),height:t.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:n.prop("offsetWidth"),height:n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].body.scrollTop),left:i.left+(t.pageXOffset||e[0].body.scrollLeft)}}}}]).provider("$popbox",[function(){var e={placement:"top",align:null,animation:!0,popupDelay:0,arrow:!1,popboxClass:"popbox",transitionClass:"fade",triggerClass:"in",popboxOpenClass:"popbox-open",resolve:{},backdropFade:!1,popboxFade:!1,keyboard:!0,backdropClick:!0},t={},n=2,i=58;this.options=function(e){t=e},this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$injector","$position","$timeout",function(a,s,o,r,l,c,d,u,p,f){function m(e){var t=angular.element("<div>");return t.addClass(e),t}function g(n){var i=this,a=this.options=angular.extend({},e,t,n);this._open=!1,this._target=$(i.options.target.target),$(this._target).hasClass("js-popbox")||$(this._target).parents(".js-popbox").length>0&&(this._target=$(this._target).parents(".js-popbox").eq(0)),this.modalEl=m(a.popboxClass),a.popboxFade&&(this.modalEl.addClass(a.transitionClass),this.modalEl.removeClass(a.triggerClass)),this.handledEscapeKey=function(e){27===e.which&&(i.close(),e.preventDefault(),i.$scope.$apply())},this.handledSortable=function(){i.close(),i.$scope.$apply()},this.handleBackDropClick=function(e){for(var t=e.target,n=!0;t;){if($(t).hasClass("popbox")||$(t).hasClass("popbox-step-li")||$(t).hasClass("openpop")){n=!1;break}t=t.parentNode}0===$(e.target).parents("body").length&&(n=!1),n&&h.hasClass("popbox-open")&&(i.close(),e.preventDefault(),i.$scope.$apply())},this.handleLocationChange=function(){i.close()}}var h=s.find("body");return g.prototype.isOpen=function(){return this._open},g.prototype.open=function(e,t){var a=this,s=this.options,c=a.options.popboxClass;if(h.hasClass("popbox-open")&&$("."+c).length>0){if(this._target[0]===$("."+c).scope().popbox._target[0])return $("."+c).scope().popbox.close(),void 0;$("."+a.options.popboxClass).each(function(){$(this).scope().popbox.close()})}if(e&&(s.templateUrl=e),t&&(s.controller=t),!s.template&&!s.templateUrl)throw new Error("Popbox.open expected template or templateUrl, neither found. Use options or open method to specify them.");return this._loadResolves().then(function(e){var t=e.$scope=a.$scope=e.$scope?e.$scope:r.$new();if(a.modalEl.html(e.$template),a.options.controller){var s=l(a.options.controller,e);a.modalEl.children().data("ngControllerController",s)}a._addElementsToDom(),o(a.modalEl)(t),f(function(){a.options.popboxFade&&a.modalEl.addClass(a.options.triggerClass)});var c=kzi.util.docWidth(),d=kzi.util.docHeight(),u=kzi.util.docOuterWidth();kzi.util.docOuterHeight();var _=null,g=function(){var e,t={};e=p.position(a._target),e.top=a.options.top||$(a._target).offset().top,e.left=a.options.left||$(a._target).offset().left,a.modalEl.css({display:"block"});var s=$(a.modalEl).outerWidth(!0),o=$(a.modalEl).outerHeight(!0);a.options.top&&(e.height=0);var r=$(a._target).data("placement");r||(r=a.options.placement);var l=$(a._target).data("align");l||(l=a.options.align);var f=$(a._target).data("offset");f=null==f?n:parseInt(f,10);var m={set_box_placement_auto_lf:function(){(null===r||"auto"===r)&&(r=c/2>e.left?"right":"left")},set_box_align_auto_tb:function(){"auto"===l&&(l=d/2>e.top?"top":"bottom")},set_top_position:function(){"top"===l?t.top=e.top:"bottom"===l?t.bottom=d-e.top-e.height:e.top>d/2?t.bottom=d-e.top-e.height/2-o/2:t.top=e.top+e.height/2-o/2,void 0!==t.top&&null!==t.top&&(t.top+o>d?t.top=d-o-n:i>t.top&&(t.top=i+n)),void 0!==t.bottom&&null!==t.bottom&&(0>t.bottom?t.bottom=n:t.bottom+o+i>d&&(t.bottom=d-o-i))},set_left_position:function(){"right"===l?t.right=c-e.left-e.width:t.left="left"===l?e.left:e.left+e.width/2-s/2,void 0!==t.left&&null!==t.left&&(0>=t.left?t.left=n:t.left+s>c&&(t.left=void 0,t.right=n)),void 0!==t.right&&null!==t.right&&(0>t.right?t.right=n:t.right+s>c&&(t.right=void 0,t.left=n))}};switch(m.set_box_placement_auto_lf(),r){case"right":m.set_top_position(),t.left=e.left+e.width+n,t.left+s>u&&(t.left=void 0,t.right=u-e.left+n);break;case"left":m.set_top_position(),t.right=c-e.left+n,t.right+s>u&&(t.right=e.left+s+n);break;case"top":m.set_left_position(),t.bottom=d-e.top+n,t.bottom+o>d-i&&(t.bottom=void 0,t.top=e.top+e.height+n);break;case"bottom":m.set_left_position(),t.top=e.top+e.height+f,t.top+o>d&&(t.top=void 0,t.bottom=d-e.top+n,t.bottom+o>d-i&&(t.top=d-i-o,t.bottom=void 0));break;default:t={top:e.top+e.height+2+"px",left:e.left-e.width/2+"px"},a.options.placement="bottom"}_=t,a.modalEl.css(t),h.addClass(a.options.popboxOpenClass)};f(function(){g()},100);var v=$(a._target).data("auto-adapt");(v||"true"===v)&&(a.$watcher=t.$watch(function(){return $(a.modalEl).outerWidth(!0)+","+$(a.modalEl).outerHeight(!0)},function(){f(function(){g()})})),a._bindEvents()}),this.deferred=d.defer(),this.deferred.promise},g.prototype.close=function(e,t){var n=this;this._getFadingElements(),_.isFunction(n.$watcher)&&n.$watcher(),h.removeClass(n.options.popboxOpenClass),this._onCloseComplete(e,t)},g.prototype._getFadingElements=function(){var e=[];return this.options.popboxFade&&e.push(this.modalEl),e},g.prototype._bindEvents=function(){this.options.keyboard&&h.bind("keydown.popbox",this.handledEscapeKey),this.options.backdropClick&&(h.bind("mousedown.popbox",this.handleBackDropClick),h.bind("sortstart.popbox",this.handledSortable)),this.modalEl.bind("mousedown.popbox",function(){}),this.$scope.$on("$locationChangeSuccess",this.handleLocationChange)},g.prototype._unbindEvents=function(){this.options.keyboard&&h.unbind("keydown.popbox",this.handledEscapeKey),this.options.backdropClick&&h.unbind("mousedown.popbox",this.handleBackDropClick),h.unbind("sortstart.popbox",this.handledSortable)},g.prototype._onCloseComplete=function(e,t){this._removeElementsFromDom(),t||this._unbindEvents(),this.deferred.resolve(e)},g.prototype._addElementsToDom=function(){$(this._target).addClass("openpop"),h.append(this.modalEl),this._open=!0},g.prototype._removeElementsFromDom=function(){this._target.removeClass("openpop"),this.modalEl.remove(),this._open=!1},g.prototype._loadResolves=function(){var n,e=[],t=[],i=this;return this.options.template?n=d.when(this.options.template):this.options.templateUrl&&(n=a.get(this.options.templateUrl,{cache:c}).then(function(e){return e.data})),angular.forEach(this.options.resolve||[],function(n,i){t.push(i),e.push(angular.isString(n)?u.get(n):u.invoke(n))}),t.push("$template"),e.push(n),d.all(e).then(function(e){var n={};return angular.forEach(e,function(e,i){n[t[i]]=e}),n.popbox=i,n})},{popbox:function(e){return new g(e)}}}]}])}(),wt.service=angular.module("wt.service",["ngResource"]).factory("rest",["$resource",function(e){"use strict";return{index:e("/api/index/:OP",{OP:"index"}),user:e("/api/user/:uid",{uid:"index"}),project:e("/api/project/:pid",{pid:"index",OP:"index"})}}]).factory("data",["$http",function(e){"use strict";var t={get:1,post:2,put:3,del:4},n=function(e){return e.indexOf("?")>-1?e+"&dt="+(new Date).getTime():e+"?dt="+(new Date).getTime()},i=function(i,a,s,o,r,l){var c=function(e,n,i,s){if(s.url===void 0&&angular.noop(),200===e.code)angular.isFunction(o)&&o(e);else{if($(document).scope().global.loading_done=!0,2005===e.code)return $(document).scope().returnToSignin(),void 0;if(angular.isFunction(r))r(e);else{if(e.code===kzi.statuses.error.permission_deny.code)return kzi.msg.error("æ²¡ææéæä½"),void 0;if(!$(document).scope().global.show_msg){$(document).scope().global.show_msg=!0;var l="æä½å¤±è´¥ï¼è¯·éæ°å°è¯";a===t.get&&(l="å è½½å¤±è´¥ï¼è¯·éæ°å°è¯"),kzi.msg.error(l,function(){$(document).scope().global.show_msg=!1})}}}},d=function(){if(!$(document).scope().global.show_msg){$(document).scope().global.show_msg=!0;var o="æä½å¤±è´¥ï¼è¯·éæ°å°è¯";a===t.get&&(o="å è½½å¤±è´¥ï¼è¯·éæ°å°è¯"),kzi.msg.error(o,function(){$(document).scope().global.show_msg=!1})}u()},u=function(){angular.isFunction(l)&&l()},p=function(){kzi.console.timeEnd("Ajaxï¼?"+i)};switch(a){case t.get:i=n(i),kzi.console.time("Ajaxï¼?"+i),e.get(i).success(p).success(c).error(d).then(u);break;case t.post:kzi.console.time("Ajaxï¼?"+i),e.post(i,{data:s}).success(p).success(c).error(d).then(u);break;case t.del:kzi.console.time("Ajaxï¼?"+i),e({method:"delete",url:i}).success(p).success(c).error(d).then(u);break;case t.put:kzi.console.time("Ajaxï¼?"+i),e.put(i,{data:s}).success(p).success(c).error(d).then(u);break;default:throw new Error("ä¼ å¥çæ¹æ³ç±»åä¸æ¯æ")}},a=function(e,n,a,s){i(e,t.get,null,n,a,s)},s=function(e,n,a,s,o){i(e,t.post,n,a,s,o)},o=function(e,n,a,s){i(e,t.del,null,n,a,s)},r=function(e,n,a,s,o){i(e,t.put,n,a,s,o)};return{error:function(){$(document).scope().global.show_msg||($(document).scope().global.show_msg=!0,kzi.msg.error("å è½½å¤±è´¥ï¼è¯·éæ°å°è¯",function(){$(document).scope().global.show_msg=!1}))},signin:function(e,t,n,i,a){var o={name:e,password:t};s("/api/user/signin",o,n,i,a)},signup:function(e,t,n,i,a,o,r){var l={name:e,email:t,password:n,team_name:i};s("/api/user/signup",l,a,o,r)},signout:function(e,t,n){s("/api/user/signout",null,e,t,n)},auth:function(e,t,n){a("/api/me",e,t,n)},watch:function(e,t,n,i,a,o,r){s("/api/"+t+"/"+n+"/watcher?pid="+e,{uids:[i]},a,o,r)},watch_batch:function(e,t,n,i,a,o,r){s("/api/"+t+"/"+n+"/watcher?pid="+e,{uids:i},a,o,r)},unwatch:function(e,t,n,i,a,s,r){o("/api/"+t+"/"+n+"/watchers/"+i+"?pid="+e,a,s,r)},get_watchers:function(e,t,n,i,s,o){a("/api/"+t+"/"+n+"/watcher?pid="+e,i,s,o)},get_my_watchs:function(e,t,n,i,s,o,r){a("/api/watchs/forme?team_id="+e+"&type="+t+"&since_id="+n+"&count="+i,s,o,r)},search_all:function(e,t,n,i,s){a("/api/search?team_id="+e+"&keywords="+t+"&scopes=all",n,i,s)},user:{get:function(e,t,n){a("/api/account/basic",e,t,n)},update:function(e,t,n,i,a){r("/api/user",{display_name:e,desc:t,initials:""},n,i,a)},email_check:function(e,t,n,i){a("/api/user/email/check?email="+e,t,n,i)},name_check:function(e,t,n,i){a("/api/user/name/check?name="+e,t,n,i)},forgot_pwd:function(e,t,n,i){s("/api/user/password/forgot",{email:e},t,n,i)},change_pwd:function(e,t,n,i,a){r("/api/user/password/change",{oldpassword:e,password:t},n,i,a)},reset_pwd:function(e,t,n,i,a){r("/api/user/password/reset?token="+e,{password:t},n,i,a)},set_avatar:function(e,t,n,i){r("/api/user/avatar",{avatar:e},t,n,i)},search_user:function(e,t,n,i){a("/api/user/search?criteria="+e,t,n,i)},get_user_prefs:function(e,t,n,i){a("/api/users/"+e+"/prefs",t,n,i)},set_user_prefs:function(e,t,n,i,a,s){r("/api/users/"+e+"/prefs",{key:t,value:n},i,a,s)},apply:function(e,t,n,i,a,o){s("/api/apply",{email:e,team_name:t,team_desc:n},i,a,o)},get_apply:function(e,t,n,i){a("/api/apply?code="+e,t,n,i)},apply_signup:function(e,t,n,i,a,o,r,l){var c={name:t,email:n,password:i,team_name:a};s("/api/user/apply_signup?code="+e,c,o,r,l)},email_change_apply:function(e,t,n,i){s("/api/user/email/apply",{email:e},t,n,i)},reset_email:function(e,t,n,i){r("/api/user/email/reset?token="+e,null,t,n,i)},signin_twofactor:function(e,t,n,i,a,o){var r={name:t,password:n,factor:e};s("/api/user/twofactor",r,i,a,o)},signin_recovery:function(e,t,n,i,a,o){var r={name:t,password:n,factor:e};s("/api/user/recovery",r,i,a,o)}},account:{get_basic:function(e,t,n){a("/api/account/basic",e,t,n)},get_teams:function(e,t,n){a("/api/account/teams",e,t,n)},get_projects:function(e,t,n){a("/api/account/projects",e,t,n)},get_security:function(e,t,n,i){a("/api/account/security?page="+e,t,n,i)},conform_password:function(e,t,n,i){r("/api/account/sudo/confirm",{password:e},t,n,i)},get_recovery_codes:function(e,t,n){a("/api/account/twofactor/recovery",e,t,n)},get_twofactor_secret:function(e,t,n){a("/api/account/twofactor/secret",e,t,n)},enable_twofactor:function(e,t,n,i){r("/api/account/twofactor/enable",{factor:e},t,n,i)},disable_twofactor:function(e,t,n){r("/api/account/twofactor/disable",{},e,t,n)},get_apps:function(e,t,n){a("/api/account/apps",e,t,n)},decommissioning_app:function(e,t,n,i){o("/api/account/apps/"+e,t,n,i)}},team:{get:function(e,t,n,i){a("/api/teams/"+e,t,n,i)},get_list:function(e,t,n){a("/api/teams",e,t,n)},add:function(e,t,n,i,a){s("/api/team/",{name:e,desc:t},n,i,a)},update:function(e,t,n,i,a,s,o){r("/api/teams/"+e+"/account",{name:t,desc:n,url:i},a,s,o)},set_logo:function(e,t,n,i,a){r("/api/teams/"+e+"/account/logo",{pic:t},n,i,a)},transfer:function(e,t,n,i,a){r("/api/teams/"+e+"/account/transfer",{uid:t},n,i,a)},dismiss:function(e,t,n,i){o("/api/teams/"+e+"/account",t,n,i)},add_member:function(e,t,n,i,a){s("/api/teams/"+e+"/member",{uid:t},n,i,a)},del_member:function(e,t,n,i,a){o("/api/teams/"+e+"/members/"+t,n,i,a)},invite_member:function(e,t,n,i,a,o,r){s("/api/teams/"+e+"/member/invite",{members:t,message:n,project_ids:i},a,o,r)},uninvite_member:function(e,t,n,i,a){r("/api/teams/"+e+"/members/"+t+"/uninvite",null,n,i,a)},set_role:function(e,t,n,i,a,s){r("/api/teams/"+e+"/members/"+t+"/role",{role:n},i,a,s)},set_group:function(e,t,n,i,a,s){r("/api/teams/"+e+"/members/"+t+"/group",{group_id:n},i,a,s)},get_team_members:function(e,t,n,i){a("/api/teams/"+e+"/members",t,n,i)},add_team_member:function(e,t,n,i,a,o){s("/api/teams/"+e+"/member",{uid:t,role:n},i,a,o)},add_group:function(e,t,n,i,a){s("/api/teams/"+e+"/group",{name:t},n,i,a)},del_group:function(e,t,n,i,a){o("/api/teams/"+e+"/groups/"+t,n,i,a)},update_group:function(e,t,n,i,a,s){r("/api/teams/"+e+"/groups/"+t,{name:n},i,a,s)},get_groups:function(e,t,n,i){a("/api/teams/"+e+"/groups",t,n,i)},set_current:function(e,t,n,i){r("/api/teams/"+e+"/current",null,t,n,i)},get_member_projects:function(e,t,n,i,s){a("/api/teams/"+e+"/members/"+t+"/projects",n,i,s)},leave:function(e,t,n,i){r("/api/teams/"+e+"/leave",null,t,n,i)},commonweal_apply:function(e,t,n,i,a,o){s("/api/teams/"+e+"/commonweal/apply",{type:t,desc:n},i,a,o)},summary:function(e,t,n,i){a("/api/teams/"+e+"/account/summary",t,n,i)},upgrade:function(e,t,n,i,a){r("/api/teams/"+e+"/account/upgrade",{quota:t},n,i,a)},degrade:function(e,t,n,i){r("/api/teams/"+e+"/account/degrade",null,t,n,i)},payment:function(e,t,n,i){a("/api/teams/"+e+"/account/payment",t,n,i)},get_payments:function(e,t,n,i,s){a("/api/teams/"+e+"/account/payments?page="+t,n,i,s)},get_billings:function(e,t,n,i,s){a("/api/teams/"+e+"/account/billings",n,i,s)},redeem_coupon:function(e,t,n,i,a){s("/api/teams/"+e+"/account/redeem",{coupon_no:t},n,i,a)},cancel_payment:function(e,t,n,i,a){o("/api/teams/"+e+"/account/payment?pay_id="+t,n,i,a)},get_account_members:function(e,t,n,i){a("/api/teams/"+e+"/account/members",t,n,i)},get_account_projects:function(e,t,n,i){a("/api/teams/"+e+"/account/projects",t,n,i)},get_security_histories:function(e,t,n,i,s){a("/api/teams/"+e+"/account/security?page="+t,n,i,s)},change_subscription:function(e,t,n,i,a){r("/api/teams/"+e+"/account/subscription",{quota:t},n,i,a)},bulk_export:function(e,t,n,i){s("/api/teams/"+e+"/account/export",null,t,n,i)},get_bulk_export:function(e,t,n,i,s){a("/api/teams/"+e+"/account/export?page="+t,n,i,s)}},project:{get_all:function(e,t,n,i){a("/api/projects/all?type="+e,t,n,i)},create:function(e,t,n,i,a,o){s("/api/project",{team_id:e,name:t,desc:n},i,a,o)},get_list:function(e,t,n,i,s){a("/api/projects?team_id="+e+"&type="+t,n,i,s)},get:function(e,t,n,i){a("/api/projects/"+e,t,n,i)},update:function(e,t,n,i,a,s){r("/api/projects/"+e,{name:t,desc:n},i,a,s)},del:function(e,t,n,i){o("/api/projects/"+e,t,n,i)},set_logo:function(e,t,n,i,a,s){r("/api/projects/"+e+"/logo",{bg:t,pic:n},i,a,s)},archive:function(e,t,n,i){r("/api/projects/"+e+"/archive",null,t,n,i)},unarchive:function(e,t,n,i){r("/api/projects/"+e+"/unarchive",null,t,n,i)},set_prefs:function(e,t,n,i,a,s){r("/api/projects/"+e+"/prefs",{key:t,value:n},i,a,s)},add_member:function(e,t,n,i,a,o){s("/api/projects/"+e+"/member",{uid:t,role:n},i,a,o)},invite_member:function(e,t,n,i,a){s("/api/projects/"+e+"/member/invite",{uid:t},n,i,a)},get_members:function(e,t,n,i){a("/api/projects/"+e+"/members",t,n,i)},del_member:function(e,t,n,i,a){o("/api/projects/"+e+"/members/"+t,n,i,a)},set_member_role:function(e,t,n,i,a,s){r("/api/projects/"+e+"/members/role",{uid:t,role:n},i,a,s)},set_labels:function(e,t,n,i,a){r("/api/projects/"+e+"/labels",{labels:t},n,i,a)},get_labels:function(e,t,n,i){a("/api/projects/"+e+"/labels",t,n,i)},get_trash:function(e,t,n,i){a("/api/projects/"+e+"/recycle",t,n,i)},clear_trash:function(e,t,n,i){o("/api/projects/"+e+"/recycle",t,n,i)},member_leave:function(e,t,n,i){r("/api/projects/"+e+"/leave",null,t,n,i)},prj_position:function(e,t,n,i,a){r("/api/projects/"+e+"/position",{pos:t},n,i,a)},get_chat_list:function(e,t,n,i,s,o){var r="/api/projects/"+e+"/chat?page="+t;n&&(r+="&count="+n),a(r,i,s,o)},get_unique_admin_prjs:function(e,t,n,i,s){var o="/api/projects/users/"+t+"/unique/admin?team_id="+e;a(o,n,i,s)}},entry:{add:function(e,t,n,i,a,o){s("/api/entry?pid="+e,{name:t,pos:n},i,a,o)},get_list:function(e,t,n,i){a("/api/entries/?pid="+e,t,n,i)},get_archived_list:function(e,t,n,i){a("/api/entries/archived?pid="+e,t,n,i)},update:function(e,t,n,i,a,s){r("/api/entries/"+t+"?pid="+e,{name:n},i,a,s)},trash:function(e,t,n,i,a){r("/api/entries/"+t+"/trash?pid="+e,null,n,i,a)},untrash:function(e,t,n,i,a){r("/api/entries/"+t+"/restore?pid="+e,null,n,i,a)},del:function(e,t,n,i,a){o("/api/entries/"+t+"?pid="+e,n,i,a)},change_pos:function(e,t,n,i,a,s){r("/api/entries/"+t+"/position?pid="+e,{pos:n},i,a,s)},archive:function(e,t,n,i,a){r("/api/entries/"+t+"/archive?pid="+e,null,n,i,a)},unarchive:function(e,t,n,i,a){r("/api/entries/"+t+"/unarchive?pid="+e,null,n,i,a)},move:function(e,t,n,i,a){r("/api/entries/"+t+"/move?pid="+e,null,n,i,a)},copy:function(e,t,n,i,a){r("/api/entries/"+t+"/copy?pid="+e,null,n,i,a)},batch_assign:function(e,t,n,i,a,s){r("/api/entries/"+t+"/tasks/members?pid="+e,{uid:n},i,a,s)},batch_set_label:function(e,t,n,i,a,s){r("/api/entries/"+t+"/tasks/labels?pid="+e,{label:n},i,a,s)},batch_set_expire:function(e,t,n,i,a,s){r("/api/entries/"+t+"/tasks/expire?pid="+e,{expire:n},i,a,s)},batch_move:function(e,t,n,i,a,s){r("/api/entries/"+t+"/tasks/position?pid="+e,{to:n},i,a,s)},copy_entry:function(e,t,n,i,a,o,r){s("/api/entries/"+t+"/copy?pid="+e,{name:n,pos:i},a,o,r)}},task:{add:function(e,t,n,i,a,o,r){s("/api/task?pid="+e,{entry_id:t,name:n,pos:i},a,o,r)},add_full:function(e,t,n,i,a,o,r,l,c,d){s("/api/task?pid="+e,{entry_id:t,name:n,pos:i,labels:o,members:a,expire_date:r},l,c,d)},get:function(e,t,n,i,s){a("/api/tasks/"+t+"?pid="+e,n,i,s)},update:function(e,t,n,i,a,s,o){r("/api/tasks/"+t+"?pid="+e,{name:n,desc:i},a,s,o)},trash:function(e,t,n,i,a){r("/api/tasks/"+t+"/trash?pid="+e,null,n,i,a)},untrash:function(e,t,n,i,a,s){r("/api/tasks/"+n+"/restore?pid="+e,{entry_id:t},i,a,s)},del:function(e,t,n,i,a){o("/api/tasks/"+t+"?pid="+e,n,i,a)},change_pos:function(e,t,n,i,a,s){r("/api/tasks/"+t+"/position?pid="+e,{pos:n},i,a,s)},move:function(e,t,n,i,a,s,o,l){r("/api/tasks/"+t+"/position?pid="+e,{from:n,to:i,pos:a},s,o,l)},set_expire:function(e,t,n,i,a,s){r("/api/tasks/"+t+"/expire?pid="+e,{expire:n},i,a,s)},assign:function(e,t,n,i,a,o){s("/api/tasks/"+t+"/member?pid="+e,{uid:n},i,a,o)},unassign:function(e,t,n,i,a,s){o("/api/tasks/"+t+"/members/"+n+"?pid="+e,i,a,s)},set_labels:function(e,t,n,i,a,s){r("/api/tasks/"+t+"/labels?pid="+e,{label:n},i,a,s)},del_labels:function(e,t,n,i,a,s){o("/api/tasks/"+t+"/labels?pid="+e+"&label="+n,i,a,s)},complete:function(e,t,n,i,a){r("/api/tasks/"+t+"/complete?pid="+e,null,n,i,a)},uncomplete:function(e,t,n,i,a){r("/api/tasks/"+t+"/uncomplete?pid="+e,null,n,i,a)},add_todo:function(e,t,n,i,a,o,r){s("/api/tasks/"+t+"/todo?pid="+e,{name:n,pos:i},a,o,r)},update_todo:function(e,t,n,i,a,s,o,l){r("/api/tasks/"+t+"/todos/"+n+"?pid="+e,{name:i},s,o,l)},del_todo:function(e,t,n,i,a,s){o("/api/tasks/"+t+"/todos/"+n+"?pid="+e,i,a,s)},update_todo_pos:function(e,t,n,i,a,s,o){var l="/api/tasks/"+t+"/todos/"+n+"/position?pid="+e;r(l,{pos:i},a,s,o)},complete_todo:function(e,t,n,i,a,s){r("/api/tasks/"+t+"/todos/"+n+"/checked?pid="+e,null,i,a,s)},uncomplete_todo:function(e,t,n,i,a,s){r("/api/tasks/"+t+"/todos/"+n+"/unchecked?pid="+e,null,i,a,s)},change_todo_pos:function(e,t,n,i,a,s,o){r("/api/tasks/"+t+"/todos/"+n+"/position?pid="+e,{pos:i},a,s,o)},search:function(e,t,n,i){a("/api/tasks/search?q="+e,t,n,i)},get_for_me:function(e,t,n,i,s){a("/api/tasks/forme?team_id="+e+"&complete="+t,n,i,s)},get_for_uncompleted:function(e,t,n){a("/api/tasks/uncompleted",e,t,n)},get_for_expired:function(e,t,n){a("/api/tasks/expired",e,t,n)},get_for_completed:function(e,t,n,i){a("/api/tasks/completed?page="+e,t,n,i)},get_archived_list:function(e,t,n,i,s,o){a("/api/tasks/archived?pid="+e+"&page="+t+"&count="+n,i,s,o)},get_for_graph:function(e,t,n,i,s){a("/api/graph/user?start="+e+"&end="+t,n,i,s)},get_for_user_overview:function(e,t,n){a("/api/tasks/user/overview",e,t,n)},archive:function(e,t,n,i,a){r("/api/tasks/"+t+"/archive?pid="+e,{},n,i,a)},unarchive:function(e,t,n,i,a,s){r("/api/tasks/"+t+"/unarchive?pid="+e,{entry_id:n},i,a,s)},archived_all:function(e,t,n,i,a){r("/api/tasks/archived?pid="+e,{entry_id:t},n,i,a)},copy_task:function(e,t,n,i,a,o,r,l,c,d,u,p,f){var h={name:n,pos:i,keep_comments:Number(a),keep_members:Number(o),keep_labels:Number(r),keep_attachments:Number(l),keep_watchers:Number(d),keep_todos:Number(c)};s("/api/tasks/"+t+"/copy?pid="+e,h,u,p,f)},get_all_list:function(e,t,n,i,s){a("/api/tasks/browse?type="+e+"&page="+t,n,i,s)}},file:{new_upload:function(e,t,n,i,a){s("/api/file?pid="+e,t,n,i,a)},get_list:function(e,t,n,i,s){a("/api/files?pid="+e+"&folder_id="+t,n,i,s)},get_image_list:function(e,t,n,i){a("/api/files/images?pid="+e,t,n,i)},get:function(e,t,n,i,s){a("/api/files/"+t+"?pid="+e,n,i,s)},update:function(e,t,n,i,a,s,o){r("/api/files/"+t+"?pid="+e,{name:n,desc:i},a,s,o)},update_ext:function(e,t,n,i,a,s){r("/api/files/"+t+"/ext?pid="+e,{ext:n},i,a,s)},trash:function(e,t,n,i,a){r("/api/files/"+t+"/trash?pid="+e,null,n,i,a)},untrash:function(e,t,n,i,a){r("/api/files/"+t+"/restore?pid="+e,null,n,i,a)},del:function(e,t,n,i,a){o("/api/files/"+t+"?pid="+e,n,i,a)},get_versions:function(e,t,n,i,s){a("/api/files/"+t+"/versions?pid="+e,n,i,s)},move:function(e,t,n,i,a,s,o){r("/api/files/"+t+"/move?pid="+e,{from:n,to:i},a,s,o)},get_target:function(e,t,n,i,s){a("/api/files/"+t+"/target?pid="+e,n,i,s)},attach:function(e,t,n,i,a,s,o){r("/api/"+t+"/"+n+"/attach?pid="+e,{fid:i},a,s,o)},detach:function(e,t,n,i,a,s,o){r("/api/"+t+"/"+n+"/detach?pid="+e,{fid:i},a,s,o)},upload_attach:function(e,t,n,i,a,o,r){s("/api/"+t+"/"+n+"/file?pid="+e,{files:i},a,o,r)},get_attach_list:function(e,t,n,i,s,o){a("/api/"+t+"/"+n+"/files?pid="+e,i,s,o)},add_folder:function(e,t,n,i,a){s("/api/folder?pid="+e,{name:t},n,i,a)},get_folders:function(e,t,n,i){a("/api/folders?pid="+e,t,n,i)},get_all_list:function(e,t,n,i,s){a("/api/files/browse?type="+e+"&page="+t,n,i,s)}},comment:{publish:function(e,t,n,i,a,o,r){s("/api/"+t+"/"+n+"/comment?pid="+e,{message:i},a,o,r)},get_list:function(e,t,n,i,s,o){a("/api/"+t+"/"+n+"/comments?pid="+e,i,s,o)},del:function(e,t,n,i,a,s,r){o("/api/"+n+"/"+i+"/comments/"+t+"?pid="+e,a,s,r)},update:function(e,t,n,i,a,s,o,l){r("/api/"+n+"/"+i+"/comments/"+t+"?pid="+e,{message:a},s,o,l)}},calendar:{get_my_tasks:function(e,t,n,i,s,o,r,l){a("/api/calendar/tasks?team_id="+e+"&type="+t+"&uid="+n+"&start="+i+"&end="+s,o,r,l)}},event:{get:function(e,t,n,i,s){a("/api/events/"+t+"?pid="+e,n,i,s)},add:function(e,t,n,i,a,o,r,l,c,d,u){s("/api/event?pid="+e,{name:t,location:n,attendees:i,start_date:a,start_time:o,end_date:r,end_time:l},c,d,u)},update:function(e,t,n,i,a,s,o,l,c,d,u,p){r("/api/events/"+t+"?pid="+e,{name:n,location:a,summary:i,start_date:s,start_time:o,end_date:l,end_time:c},d,u,p)},update_date:function(e,t,n,i,a,s,o,l,c){r("/api/events/"+t+"/date?pid="+e,{start_date:n,start_time:i,end_date:a,end_time:s},o,l,c)},trash:function(e,t,n,i,a){r("/api/events/"+t+"/trash?pid="+e,null,n,i,a)},get_list:function(e,t,n,i,s,o,r,l){a("/api/calendar/events?pid="+e+"&type="+t+"&showall="+n+"&start="+i+"&end="+s,o,r,l)},attendee_add:function(e,t,n,i,a,s){r("/api/events/"+t+"/attendee?pid="+e,{uid:n},i,a,s)},attendee_remove:function(e,t,n,i,a,s){o("/api/events/"+t+"/attendees/"+n+"?pid="+e,i,a,s)},untrash:function(e,t,n,i,a){r("/api/events/"+t+"/restore?pid="+e,null,n,i,a)},del:function(e,t,n,i,a){o("/api/events/"+t+"?pid="+e,n,i,a)},get_today_events:function(e,t,n){a("/api/events/today",e,t,n)}},post:{add:function(e,t,n,i,a,o,r){var l="/api/post?pid="+e;s(l,{name:t,content:n,watchers:i},a,o,r)},get:function(e,t,n,i,s){a("/api/posts/"+t+"?pid="+e,n,i,s)},get_list:function(e,t,n,i,s,o,r,l,c){var d="/api/posts?pid="+e+"&since_id="+t+"&count="+n+"&sort="+i+"&desc="+s+"&type="+o;a(d,r,l,c)},update:function(e,t,n,i,a,s,o){var l="/api/posts/"+t+"?pid="+e;r(l,{name:n,content:i},a,s,o)},trash:function(e,t,n,i,a){r("/api/posts/"+t+"/trash?pid="+e,null,n,i,a)},untrash:function(e,t,n,i,a){r("/api/posts/"+t+"/restore?pid="+e,null,n,i,a)},del:function(e,t,n,i,a){o("/api/posts/"+t+"?pid="+e,n,i,a)},get_all_list:function(e,t,n,i,s){a("/api/posts/browse?type="+e+"&page="+t,n,i,s)}},page:{add:function(e,t,n,i,a,o,r,l){var c="/api/page?pid="+e;s(c,{name:t,content:n,message:i,parent_id:a},o,r,l)},get:function(e,t,n,i,s){a("/api/pages/"+t+"?pid="+e,n,i,s)},get_versions:function(e,t,n,i,s){var o="/api/pages/"+t+"/versions?pid="+e;a(o,n,i,s)},get_list:function(e,t,n,i,s,o,r,l){var c="/api/pages?pid="+e+"&since_id="+t+"&count="+n+"&sort="+i+"&desc="+s;a(c,o,r,l)},get_all:function(e,t,n,i){var s="/api/pages?pid="+e;a(s,t,n,i)},update:function(e,t,n,i,a,s,o,l,c,d){var u="/api/pages/"+t+"?pid="+e;r(u,{name:n,content:i,message:a,is_notify:s,unloak:o},l,c,d)},trash:function(e,t,n,i,a){r("/api/pages/"+t+"/trash?pid="+e,null,n,i,a)},untrash:function(e,t,n,i,a){r("/api/pages/"+t+"/restore?pid="+e,null,n,i,a)},del:function(e,t,n,i,a){o("/api/pages/"+t+"?pid="+e,n,i,a)},locked:function(e,t,n,i,a){r("/api/pages/"+t+"/locked?pid="+e,null,n,i,a)},unlocked:function(e,t,n,i,a){r("/api/pages/"+t+"/unlocked?pid="+e,null,n,i,a)},get_all_list:function(e,t,n,i,s){a("/api/pages/browse?type="+e+"&page="+t,n,i,s)}},activity:{get_for_user:function(e,t,n,i,s,o,r){a("/api/activity/users/"+e+"?pid="+t+"&since_id="+n+"&count="+i,s,o,r)},forme:function(e,t,n,i,s,o,r){a("/api/activity/forme?team_id="+e+"&type="+t+"&since_id="+n+"&count="+i,s,o,r)},get_for_teams:function(e,t,n,i,s,o,r,l){a("/api/activity/teams?team_id="+e+"&pid="+t+"&type="+n+"&since_id="+i+"&count="+s,o,r,l)},get_for_project:function(e,t,n,i,s,o,r){a("/api/activity/project?pid="+e+"&type="+t+"&since_id="+n+"&count="+i,s,o,r)},get_for_item:function(e,t,n,i,s,o,r){a("/api/activity/"+e+"/"+t+"?since_id="+n+"&count="+i,s,o,r)},get_feeds:function(e,t,n,i,s,o){a("/api/activity/feed?pid="+e+"&type="+t+"&page="+n,i,s,o)}},notice:{unread:function(e,t,n){a("/api/notice/unread/teams",e,t,n)},set_allread:function(e,t,n,i){r("/api/notice/allread?type="+e,null,t,n,i)},set_read:function(e,t,n,i){r("/api/notices/"+e+"/read",null,t,n,i)},get_list:function(e,t,n,i,s,o,r){a("/api/notices?type="+e+"&since_id="+t+"&count="+n+"&is_read="+i,s,o,r)}},invite:{accept:function(e,t,n,i){r("/api/invites/"+e+"/accept",null,t,n,i)},join:function(e,t,n,i,a,s,o){r("/api/invites/"+e+"/join",{name:t,display_name:n,password:i},a,s,o)},refuse:function(e,t,n,i){r("/api/invites/"+e+"/refuse",null,t,n,i)},get:function(e,t,n,i){a("/api/invites/"+e,t,n,i)},get_new:function(e,t,n){a("/api/invites/new",e,t,n)},get_invite_code:function(e,t,n,i,s){var o="/api/invite/code?member_id="+t+"&team_id="+e;a(o,n,i,s)}},feedback:{add:function(e,t,n,i,a,o,r,l){var c={name:e,email:t,category:n,desc:i,path:a};s("/api/feedback",c,o,r,l)}},guide:{search_guides:function(e,t,n,i){a("/api/guides/search?keywords="+e,t,n,i)}},graph:{overview:function(e,t,n,i){a("/api/graph/overview?pid="+e,t,n,i)},get_pulse:function(e,t,n,i,s,o){a("/api/graph/pulse?pid="+e+"&start="+t+"&end="+n,i,s,o)},get_daily:function(e,t,n,i,s,o){a("/api/graph/daily?pid="+e+"&start="+t+"&end="+n,i,s,o)},get_contribution:function(e,t,n,i,s,o){a("/api/graph/contribution?pid="+e+"&start="+t+"&end="+n,i,s,o)}},blog:{get_blog_admin:function(e,t,n){a("/api/blog/admin",e,t,n)},get_categories:function(e,t,n){a("/api/blog/categories",e,t,n)},add_category:function(e,t,n,i,a,o){s("/api/blog/category",{name:e,pos:t,permalink:n},i,a,o)},update_category:function(e,t,n,i,a,s,o){r("/api/blog/categories/"+e,{name:t,pos:n,permalink:i},a,s,o)},delete_category:function(e,t,n,i){o("/api/blog/categories/"+e,t,n,i)},get_articles:function(e,t,n,i){a("/api/blog/articles?page="+e,t,n,i)},get_article:function(e,t,n,i){a("/api/blog/articles/"+e,t,n,i)},add_article:function(e,t,n,i,a,o,r,l){s("/api/blog/article",{title:e,category_id:a,permalink:i,summary:t,content:n},o,r,l)},update_article:function(e,t,n,i,a,s,o,l,c){r("/api/blog/articles/"+e,{title:t,category_id:s,permalink:a,summary:n,content:i},o,l,c)},delete_article:function(e,t,n,i){o("/api/blog/articles/"+e,t,n,i)}},share:{recommand:function(e,t,n,i,a){s("/api/share/recommand",{email:e,message:t},n,i,a)}}}}]).factory("utility",[function(){"use strict";return{load_data_by_page:function(e,t,n){t.has_more=!1,t.loaded=!1,e(function(e){angular.isFunction(n)&&n(e),e.length===kzi.config.default_count&&(t.has_more=!0),t.loaded=!0})},notice:{load_notices:function(e,t){wt.utility.load_data_by_page(e,t,function(e){t.notices=_.isEmpty(t.notices)?e:t.notices.concat(e)})}},activity:{set_default_settings:function(e,t){var n=t.last_date;
_.each(e,function(e){var t=moment(e.published).format("YYYY-MM-DD");t===n?e.is_show_date=!1:(e.is_show_date=!0,n=t)}),t.last_date=n},load_activities:function(e,t,n){e(function(e){wt.utility.activity.set_default_settings(e,t),t.activities=_.isEmpty(t.activities)?e:t.activities.concat(e),t.has_more=e.length===kzi.config.default_count?!0:!1,_.isFunction(n)&&n()})}},team:{filter_members_by_selected_group:function(e,t){_.each(e,function(e){return null===t||t.is_all?(e.is_show=!0,void 0):(e.is_show=e.group_id===t.group_id?!0:!1,void 0)})},set_default_team_members:function(e){_.each(e,function(e){e.is_show=!0})}}}}]).factory("socket",["$rootScope",function(e){"use strict";var t=io.connect(kzi.config.socket_url());return{on:function(n,i){t.on(n,_.throttle(function(){var n=arguments;e.$apply(function(){i.apply(t,n)})},500))},emit:function(n,i,a){t.emit(n,i,function(){var n=arguments;e.$apply(function(){a&&a.apply(t,n)})})}}}]),function(){angular.module("wt.directive",[]).directive("wtCommentEditor",["$timeout","$parse","$popbox",function(e,t,n){"use strict";return{restrict:"A",require:"ngModel",link:function(e,i,a){i.addClass("help-block form-control gollum-editor-body"),i.wrap('<div class="gollum-editor-wrap" />'),i.wrap('<div class="gollum-editor" />');var s=['<div class="gollum-editor-function-bar">','<div class="gollum-editor-function-buttons">','<div class="btn-group mr_10">','<a class="btn btn-min function-button function-bold" title="ç²ä½"><span>ç²ä½</span></a>','<a class="btn btn-min function-button function-italic" title="æä½"><span>æä½</span></a>',"</div>",'<div class="btn-group mr_10">','<a class="btn btn-min function-button function-ul" title="æ åºåè¡¨"><span>æ åºåè¡¨</span></a>','<a class="btn btn-min function-button function-ol" title="æåºåè¡¨"><span>æåºåè¡¨</span></a>','<a class="btn btn-min function-button function-blockquote" title="å¼ç¨"><span>å¼ç¨</span></a>','<a class="btn btn-min function-button function-hr" title="æ°´å¹³åå²çº?"><span>æ°´å¹³åå²çº?</span></a>',"</div>",'<div class="btn-group">','<a class="btn btn-min function-button js-popbox function-emoji" data-placement="bottom" title="æå¥è¡¨æ"><i class="icon-smile"></i></a>',"</div>","</div>","</div>"].join("");['<div class="gollum-editor-help" class="jaws">','<ul class="gollum-editor-help-parent">','<li><a href="javascript:;" class="selected">Help 1</a></li>','<li><a href="javascript:;">Help 1</a></li>','<li><a href="javascript:;">Help 1</a></li>',"</ul>",'<ul class="gollum-editor-help-list">','<li><a href="javascript:;">Help 2</a></li>','<li><a href="javascript:;">Help 3</a></li>','<li><a href="javascript:;">Help 4</a></li>','<li><a href="javascript:;">Help 5</a></li>','<li><a href="javascript:;">Help 6</a></li>','<li><a href="javascript:;">Help 7</a></li>','<li><a href="javascript:;">Help 8</a></li>',"</ul>",'<div class="gollum-editor-help-wrapper">','<div class="gollum-editor-help-content">',"<p>","</p>","</div>","</div>","</div>"].join(""),i.before(s);var r=function(n){e.$apply(function(){t(a.ngModel).assign(e,n)})};i.parents(".gollum-editor-wrap").eq(0).GollumEditor({AfterClickFunBar:r});var l=i.parents(".gollum-editor").find(".function-emoji"),c=null;i.parents(".editor-wrap").bind("click",function(){null!==c&&(c.close(),c=null)}),l.bind("click",function(s){s.stopPropagation(),s.preventDefault(),e.$apply(function(){return null!=c?(c.close(),c=null,void 0):(n.popbox({target:s,templateUrl:"/ycjs/tpl/common/pop_emojis.html",controller:["$scope","popbox",function(n,s){n.popbox=s,n.emojis=[];var o=72,r=[],l=[];$.each(kzi.emojis,function(e){0!==e&&0===e%o&&(l.push(r),r=[]),r.push(this)}),l.push(r),n.emoji_groups=l,n.emojis=l[0],n.current=0,n.js_to_page=function(e){n.current=e,n.emojis=l[e]},c=s,n.js_insert_emoji=function(n){var o=i.val()+" :"+n+": ";t(a.ngModel).assign(e,o),s.close()},n.js_close=function(){s.close()},n.js_mousedown=function(e){e.stopPropagation(),e.preventDefault()}}]}).open().then(function(){c=null}),void 0)})})}}}]).directive("wtEditor",["$timeout","$parse","MdParse","sanitize",function(e,t,n,i){"use strict";return{restrict:"A",require:"ngModel",link:function(e,a,s){a.addClass("help-block form-control gollum-editor-body"),a.wrap('<div class="gollum-editor-wrap" />'),a.wrap('<div class="gollum-editor" />');var o=['<div class="gollum-editor-function-bar">','<div class="gollum-editor-function-buttons">','<div class="btn-group mr_10">','<a class="btn btn-min function-button function-bold" title="ç²ä½"><span>ç²ä½</span></a>','<a class="btn btn-min function-button function-italic" title="æä½"><span>æä½</span></a>',"</div>",'<div class="btn-group">','<a class="btn btn-min function-button function-ul" title="æ åºåè¡¨"><span>æ åºåè¡¨</span></a>','<a class="btn btn-min function-button function-ol" title="æåºåè¡¨"><span>æåºåè¡¨</span></a>','<a class="btn btn-min function-button function-blockquote" title="å¼ç¨"><span>å¼ç¨</span></a>','<a class="btn btn-min function-button function-hr" title="æ°´å¹³åå²çº?"><span>æ°´å¹³åå²çº?</span></a>',"</div>","</div>","</div>"].join("");['<div class="gollum-editor-help" class="jaws">','<ul class="gollum-editor-help-parent">','<li><a href="javascript:;" class="selected">Help 1</a></li>','<li><a href="javascript:;">Help 1</a></li>','<li><a href="javascript:;">Help 1</a></li>',"</ul>",'<ul class="gollum-editor-help-list">','<li><a href="javascript:;">Help 2</a></li>','<li><a href="javascript:;">Help 3</a></li>','<li><a href="javascript:;">Help 4</a></li>','<li><a href="javascript:;">Help 5</a></li>','<li><a href="javascript:;">Help 6</a></li>','<li><a href="javascript:;">Help 7</a></li>','<li><a href="javascript:;">Help 8</a></li>',"</ul>",'<div class="gollum-editor-help-wrapper">','<div class="gollum-editor-help-content">',"<p>","</p>","</div>","</div>","</div>"].join(""),a.before(o);var l=function(n){e.$apply(function(){t(s.ngModel).assign(e,n)})};return a.parents(".gollum-editor-wrap").eq(0).GollumEditor({AfterClickFunBar:l}),void 0}}}]).directive("wtFullEditor",["$compile","$timeout","$parse","$popbox","MdParse","sanitize",function(e,t,n,i,a,s){"use strict";return{restrict:"A",require:"ngModel",link:function(t,o,r){o.addClass("help-block form-control gollum-editor-body gollum-editor-full"),o.wrap('<div class="gollum-editor-wrap" />'),o.wrap('<div class="gollum-editor"  />');var l=['<div class="gollum-editor-function-bar">','<div class="gollum-editor-function-buttons">','<div class="btn-group mr_10">','<a class="btn btn-min function-button function-h1" title="æ é¢1"><span>æ é¢1</span></a>','<a class="btn btn-min function-button function-h2" title="æ é¢2"><span>æ é¢2</span></a>','<a class="btn btn-min function-button function-h3" title="æ é¢3"><span>æ é¢3</span></a>',"</div>",'<div class="btn-group mr_10">','<a class="btn btn-min function-button js-popbox function-link" data-placement="bottom" title="é¾æ¥"><span>æå¥é¾æ¥</span></a>','<a class="btn btn-min function-button js-popbox function-image" data-placement="bottom" title="å¾ç"><span>æå¥å¾ç</span></a>',"</div>",'<div class="btn-group mr_10">','<a class="btn btn-min function-button function-bold" title="ç²ä½"><span>ç²ä½</span></a>','<a class="btn btn-min function-button function-italic" title="æä½"><span>æä½</span></a>','<a class="btn btn-min function-button function-code" title="ä»£ç "><span>ä»£ç </span></a>',"</div>",'<div class="btn-group">','<a class="btn btn-min function-button function-ul" title="æ åºåè¡¨"><span>æ åºåè¡¨</span></a>','<a class="btn btn-min function-button function-ol" title="æåºåè¡¨"><span>æåºåè¡¨</span></a>','<a class="btn btn-min function-button function-blockquote" title="å¼ç¨"><span>å¼ç¨</span></a>','<a class="btn btn-min function-button function-hr" title="æ°´å¹³åå²çº?"><span>æ°´å¹³åå²çº?</span></a>',"</div>","</div>",'<div class="gollum-editor-function-buttons pull-right">','<div class="btn-group">','<a class="btn btn-min function-button function-preview" title="é¢è§"><i class="icon-eye-open"></i></a>',"</div>","</div>","</div>"].join("");o.before(l);var c=function(e){t.$apply(function(){n(r.ngModel).assign(t,e)})};o.parents(".gollum-editor-wrap").eq(0).GollumEditor({AfterClickFunBar:c});var d=o.parents(".gollum-editor").find(".function-preview"),u=e('<div class="markdown-preview-scroll pt_15" wt-scroll wt-exheight="260" style="display:none;"><div class="markdown-preview markdown"></div></div>')(t),p=u.find(".markdown-preview");o.after(u),d.bind("click",function(){var n=t.$eval(r.ngModel),i=o.css("display");"none"==i?(o.css("display","block"),u.css("display","none"),d.html('<i class="icon-eye-open"></i>'),d.attr("title","é¢è§"),p.html("")):(""!==n&&(n=a(n),n=s(n)),o.css("display","none"),u.css("display","block"),d.html('<i class="icon-eye-close"></i>'),d.attr("title","åæ¶é¢è§"),p.html(n),p.find("a").attr("target",function(){return this.host!==location.host?"_blank":void 0}))});var f=o.parents(".gollum-editor").find(".function-link"),h=null;o.parents(".editor-wrap").bind("click",function(){null!==h&&(h.close(),h=null)}),f.bind("click",function(e){e.stopPropagation(),e.preventDefault(),t.$apply(function(){return null!=h?(h.close(),h=null,void 0):(i.popbox({target:e,templateUrl:"/ycjs/tpl/common/pop_add_link.html",controller:["$scope","popbox",function(e,i){e.popbox=i,h=i,e.js_close=function(){i.close()};var a=$.GollumEditor.FunctionBar.getFieldSelection(o);_.isEmpty(a)||(a=$.trim(a),1==/^\[.+\]\(.+\)$/gi.test(a)?(e.link_text=a.substring(1,a.indexOf("](")),e.link_address=a.substring(a.indexOf("](")+2,a.length-1)):(e.link_text=a,e.link_address="")),e.js_insert_link=function(){$.GollumEditor.FunctionBar.replaceFieldSelection(o,"["+e.link_text+"]("+e.link_address+")"),i.close(),n(r.ngModel).assign(t,o.val())},e.js_mousedown=function(e){e.stopPropagation(),e.preventDefault()}}]}).open().then(function(){h=null}),void 0)})});var m=o.parents(".gollum-editor").find(".function-image"),g=null;o.parents(".editor-wrap").bind("click",function(){null!==g&&(g.close(),g=null)}),m.bind("click",function(e){e.stopPropagation(),e.preventDefault(),t.$apply(function(){return null!=g?(g.close(),g=null,void 0):(i.popbox({target:e,templateUrl:"/ycjs/tpl/common/pop_add_image.html",controller:["$rootScope","$scope","$filter","$routeParams","popbox","$sce",function(e,i,a,s,l,c){i.popbox=l,g=l,i.step=0,i.js_step=function(e){i.step=e},i.js_close=function(){l.close()};var d=s.pid;i.pid=d,i.js_show_images=function(){i.step=1,_.isEmpty(i.images)&&(i.images_loading_done=!1,i.images=null,wt.data.file.get_image_list(d,function(e){i.images=e.data},null,function(){i.images_loading_done=!0}))},i.js_select_image=function(e){i.step=0,i.image_address=kzi.config.wtprj_url+e.path,i.js_insert_image(null)},i.js_insert_image=function(){$.GollumEditor.FunctionBar.replaceFieldSelection(o,"![]("+i.image_address+")"),l.close(),n(r.ngModel).assign(t,o.val())},i.js_upload_image=function(){i.uploading_done!==!0&&$("#file_upload").click()},i.token=kzi.get_cookie("sid"),i.action_url=e.global.config.box_url()+"?pid="+d+"&token="+i.token,c.trustAsUrl(i.action_url),i.file_upload_option={processstart:function(){i.uploading_done=!1,i.error_msg=null},process:function(e,t){var n=0;_.isEmpty(t.files)||(n=t.files[0].size),l.modalEl.find("form").fileupload({formData:{size:n,target:"prj"}})},processfail:function(){i.error_msg="ä¸ä¼ å¤±è´¥,æ­¤å¤åªæ¯æå¾çæ ¼å¼çæä»¶",i.uploading_done=!0},done:function(t,n){if(_.isEmpty(n.result.files))i.uploading_done=!0;else{var a={type:"project",file:{name:n.result.files[0].fname,size:n.result.files[0].size,ext:kzi.constant.get_ext(n.result.files[0].ext),path:n.result.files[0].url},ext:{folder_id:""}};wt.data.file.new_upload(d,a,function(t){200===t.code&&(t.data.icon=kzi.helper.build_file_icon(t.data),_.isEmpty(i.images)||i.images.push(t.data),e.refresh_cache.file.add(t.data),i.image_address=kzi.config.wtprj_url+t.data.path,i.js_insert_image(null),i.uploading_done=!0)})}},acceptFileTypes:/(\.|\/)(jpe?g|png|gif|bmp)$/i}}]}).open().then(function(){g=null}),void 0)})})}}}]).directive("wtScroll",[function(){"use strict";return function(e,t,n){var i={scrollInertia:150,theme:"dark-thick",advanced:{updateOnBrowserResize:!0,updateOnContentResize:!0,autoScrollOnFocus:!1}};if(""!==n.wtScroll){var a=JSON.parse(n.wtScroll);$.isPlainObject(a)&&(i=$.extend(!0,i,a))}$(t).mCustomScrollbar(i)}}]).directive("wtExheight",["$window",function(e){"use strict";return{link:function(t,n,i){var a=function(e){var t=parseInt(kzi.util.winHeight()-e,10);$(n).css("height",t)},s=_.debounce(function(){a(parseInt(i.wtExheight))},50);t.$watch(i.wtExheight,function(e){a(e)}),$(e).on("resize",s)}}}]).directive("wtTracker",["$window",function(e){"use strict";return{link:function(t,n,i){"dev"!==wt.env&&n.bind("click.wtTracker",function(){var t=i.wtTracker.split("|");t.length>0&&(t.unshift("_trackEvent"),e._gaq.push(t))})}}}]).directive("wtFocus",["$timeout","$parse",function(e,t){"use strict";return{link:function(n,i,a){n.$watch(a.wtFocus,function(t){angular.isDefined(t)&&t===!0&&e(function(){i[0].focus()})},!0),i.bind("blur",function(){angular.isDefined(a.wtFocus)&&e(function(){t(a.wtFocus).assign(n,!1),n.$$phase||n.$apply()},100)})}}}]).directive("wtClickSelect",[function(){"use strict";return{link:function(e,t){t.bind("click",function(){t.select()})}}}]).directive("wtShowEdit",["$timeout","$parse",function(e,t){"use strict";return{link:function(n,i,a){n.$watch(a.wtShowEdit,function(s){if(!_.isUndefined(s))if(s===!0){e(function(){$(i).find(":text,textarea").eq(0).focus()},50);var r=t(a.wtShowEdit);r.assign,i.bind("mousedown.wtShowEdit",function(e){e.stopPropagation()}),e(function(){$(document).bind("mousedown.wtShowEdit",function(){t(a.wtShowEdit).assign(n,!1),n.$$phase||n.$apply()})},50)}else s===!1&&(i.unbind("click.wtShowEdit"),$(document).unbind("click.wtShowEdit"))})}}}]).directive("wtRepeatPassword",[function(){"use strict";return{require:"ngModel",link:function(e,t,n,i){var a=t.inheritedData("$formController")[n.wtRepeatPassword];i.$parsers.push(function(e){return e===a.$viewValue?(i.$setValidity("repeat",!0),e):(i.$setValidity("repeat",!1),void 0)}),a.$parsers.push(function(e){return i.$setValidity("repeat",e===i.$viewValue),e})}}}]).directive("wtCompare",[function(){"use strict";return{require:"ngModel",link:function(e,t,n,i){i.$parsers.push(function(t){return t===e.$eval(n.wtCompare)?(i.$setValidity("compare",!0),t):(i.$setValidity("compare",!1),void 0)}),e.$watch(n.wtCompare,function(t){t===e.$eval(n.ngModel)?i.$setValidity("compare",!0):i.$setValidity("compare",!1)})}}}]).directive("wtRegex",[function(){"use strict";return{require:"ngModel",link:function(e,t,n,i){var a=new RegExp(n.wtRegex);i.$parsers.push(function(e){return i.$setValidity("regex",a.test(e)),e})}}}]).directive("wtForm",[function(){"use strict";return{link:function(e,t){for(var a=["text","password","email",["textarea"],["select"]],s=t[0],o=s.name,r=0;s.length>r;r++){var l=r,c=s[l];if(a.toString().indexOf(c.type)>-1){if(""===c.name)continue;o+"."+c.name+".$dirty";var u=o+"."+c.name+".$valid",p=o+"."+c.name+".$viewValue";e.$watch("["+p+","+u+","+l+"]",function(t){var i=s[t[2]],a=e[o][i.name];if(void 0!==t[0])if(t[1]===!1&&a.$dirty){var r=[];for(var l in a.$error)a.$error[l]&&r.push(kzi.validation_rules.get_msg(l,i));$(i).tooltip("destroy"),$(i).tooltip({animation:!0,placement:"bottom",title:r.toString(),trigger:"focus"}),$(i).tooltip("show")}else $(i).tooltip("destroy")},!0)}}}}}]).directive("wtFormValidate",["$timeout",function(e){"use strict";return{link:function(t,n,i){var s={blurTrig:!0,showMsg:!1},o=$.extend(s,t.$eval(i.wtFormValidate)),r={get_error_msg:function(e,n){var i=[],a=t[e][n.name];for(var s in a.$error)a.$error[s]&&i.push(kzi.validation_rules.get_msg(s,n));return i.toString()},show_error:function(e,t){e.removeClass("valid").addClass("error"),o.showMsg&&(e.tooltip("destroy"),e.tooltip({animation:!0,placement:"right",title:t,trigger:"hover"}))},remove_error:function(e){e.removeClass("error").addClass("valid"),o.showMsg&&e.tooltip("destroy")}},l=["text","password","email","number",["textarea"],["select"],["select-one"]],c=n[0],d=c.name;t[d].$errors=[];for(var u=0;c.length>u;u++){var p=u,f=c[p];if(l.toString().indexOf(f.type)>-1){if(""===f.name)continue;var h=d+"."+f.name+".$viewValue";d+"."+f.name+".$valid",d+"."+f.name+".$dirty",t.$watch("["+h+","+p+"]",function(e){var n=c[e[1]];t[d][n.name],t[d].$errors=[],r.remove_error($(n))},!0),o.blurTrig===!0&&$(f).bind("blur",function(){var n=$(this),i=this;e(function(){var e=d+"."+i.name+".$valid",a=t.$eval(e);a?r.remove_error(n):r.show_error(n,r.get_error_msg(d,i))})})}}var v=function(e,n){if(n.$name===c.name){for(var i=[],a=0;c.length>a;a++){var s=a,o=c[s];if(l.toString().indexOf(o.type)>-1){if(""===o.name)continue;if(d+"."+o.name+".$dirty",d+"."+o.name+".$valid",d+"."+o.name+".$viewValue",n[o.name].$valid)continue;var m=r.get_error_msg(d,o);i.push(m),r.show_error($(o),m)}}n.$errors=_.isEmpty(i)||i.length>0?i:[],t.$$phase||t.$apply(n.$errors)}};t[d].doValidate=v}}}]).directive("wtFormSubmit",["$parse",function(e){"use strict";return{link:function(t,n,i){var s=i.wtFormSubmit.substring(i.wtFormSubmit.indexOf("(")+1,i.wtFormSubmit.length-1);s=s.split(",")[0];var o=t[s],r=e(i.wtFormSubmit),l=function(){!_.isEmpty(o.$errors)&&o.$errors.length>0||($("form[name="+o.$name+"]").find(":input").trigger("input"),$("form[name="+o.$name+"]").find(":input").trigger("change"),_.isFunction(o.doValidate)?o.doValidate(null,o):t.$broadcast("dovalidation",o),o.$invalid||t.$apply(function(){r(t)}))};n.parents("form").bind("keydown keypress",function(e){if(13===e.which&&!t.$eval(i.loadingStatus)){var n=document.activeElement;"textarea"!==n.type&&($(this).find("button").focus(),n.focus(),l(),e.preventDefault())}}),n.bind("click",function(){l()})}}}]).directive("wtRemoteUniqueCheck",["$timeout","$http",function(e,t){"use strict";return{require:"ngModel",link:function(n,i,a,s){var o=function(){var e=n.$eval(a.wtRemoteUniqueCheck),i=e.url,o=e.isExists;t.get(i).success(function(e){200===e.code&&(o===!1?s.$setValidity("romoteuniquecheck",e.data):s.$setValidity("romoteuniquecheck",!e.data))})};n.$watch(a.ngModel,function(e){_.isEmpty(e)||n[i[0].form.name][i[0].name].$dirty||o()}),i.bind("blur",function(){e(function(){i.val(),n[i[0].form.name][i[0].name].$invalid||o()})}),i.bind("focus",function(){e(function(){s.$setValidity("romoteuniquecheck",!0)})})}}}]).directive("wtDatepicker",["$parse",function(e){"use strict";return function(t,n,i){n.addClass("wtdate");var a=e(i.select);n.datepicker({defaultDate:i.wtDatepicker,firstDay:0,onSelect:function(e){t.$apply(function(){t.$eval(i.wtDatepicker+"='"+e+"'",t),_.isFunction(a)&&a(t)})}}),t.$watch(i.wtDatepicker,function(e){n.datepicker("setDate",e)})}}]).directive("wtFullDatepicker",["$parse","$popbox",function(e){"use strict";return{restrict:"AE",replace:!0,templateUrl:"/ycjs/tpl/directive/datepicker.html",link:function(t,n,i){var a=t.$eval(i.defaultDate),s=n.find(".wtdate"),o=e(i.setDate),r=t.$eval(i.minDate);t.js_set_date_inner=function(e){var n=null;switch(e){case"today":n=moment().format("YYYY-MM-DD");break;case"tomorrow":n=moment().add("days",1).format("YYYY-MM-DD");break;case"week":n=moment().endOf("week").add("days",1).format("YYYY-MM-DD");break;case"next_week":n=moment().add("days",7).endOf("week").add("days",1).format("YYYY-MM-DD");break;case"month":n=moment().endOf("month").format("YYYY-MM-DD");break;default:n=moment().format("YYYY-MM-DD")}_.isFunction(o)&&o(t,{date:n})};var l={defaultDate:a,firstDay:0,onSelect:function(e){t.$apply(function(){_.isFunction(o)&&o(t,{date:e})})}};r&&(l.minDate=r),s.datepicker(l),t.$watch(i.defaultDate,function(e){s.datepicker("setDate",e)})}}}]).directive("wtPopFullDatepicker",["$parse","$popbox",function(e,t){"use strict";return{restrict:"A",replace:!0,link:function(e,n,i){n.bind("click",function(n){t.popbox({target:n,templateUrl:"/ycjs/tpl/directive/pop_datepicker.html",controller:["$scope","popbox",function(t,n){var a=e.$eval(i.wtPopFullDatepicker);t.popbox=n,t.default_date=a.default_date,t.min_date=a.min_date,t.js_set_date=function(e){a.set_date(e),n.close()},t.js_close=function(){n.close()}}]}).open()})}}}]).directive("wtInclude",["$compile","$http","$templateCache",function(e,t,n){"use strict";return{restrict:"ECA",compile:function(i,a){var s=a.ngInclude||a.src,o=a.onload||"";return a.autoscroll,function(i,a){var l,r=0,c=function(){l&&(l.$destroy(),l=null),a.html("")};i.$watch(s,function(s){if(0>=$("#"+s).length)return a.html("<span class='tpl_none'>æ­¤æ¨¡æ?"+s+"è¿æªå®ç°ï¼è¯·èå¿ç­å¾...</span>"),void 0;var d=++r;s?t.get(s,{cache:n}).success(function(t){d===r&&(l&&l.$destroy(),l=i.$new(),a.html(t),e(a.contents())(l),l.$emit("$includeContentLoaded"),i.$eval(o))}).error(function(){d===r&&c()}):c()})}}}}]).directive("wtPopbox",["$popbox",function(e){"use strict";return{link:function(t,n,i){n.bind("click",function(n){var a=t.$eval(i.wtPopbox);a.disabled!==!0&&t.$apply(function(){e.popbox({target:n,templateUrl:a.templateUrl,controller:a.controller,resolve:{pop_data:function(){return{$scope:t,parameters:a.parameters}}}}).open()})})}}}]).directive("draggable",[function(){"use strict";return{restrict:"A",link:function(e,t,n){e.$watch(n.draggable,function(e){_.isEmpty(e)||t.draggable(e)})}}}]).directive("droppable",["$compile",function(){"use strict";return{restrict:"A",link:function(e,t,n){e.$watch(n.droppable,function(e){_.isEmpty(e)||t.droppable(e)})}}}]).directive("sortable",[function(){"use strict";return{link:function(e,t,n){e.$watch(n.sortable,function(e){null==e&&t.sortable({disabled:!0}),t.sortable(e)})}}}]).directive("disableSelection",[function(){"use strict";return{link:function(e,t){t.disableSelection()}}}]).directive("wtLoadingDone",[function(){"use strict";return{link:function(e,t,n){e.$watch(n.wtLoadingDone,function(e){e===!0?t.css("display","none"):t.css("display","block")})}}}]).directive("wtTitle",[function(){"use strict";return{link:function(e,t,n){var i=e.$eval(n.wtTitle);t.attr("title",i)}}}]).directive("wtAlt",[function(){"use strict";return{link:function(e,t,n){var i=e.$eval(n.wtAlt);t.attr("alt",i)}}}]).directive("wtPermissionHide",[function(){"use strict";return{link:function(e,t,n){e.$watch(n.wtPermissionHide,function(e){(e==kzi.constant.permission.project_archived||e==kzi.constant.permission.entity_archived||e==kzi.constant.permission.entity_deleted||e==kzi.constant.permission.entity_not_found)&&t.css("display","none")})}}}]).directive("wtPermission",[function(){"use strict";return{link:function(e,t,n){e.$watch(n.wtPermission,function(e){if(e&&4==e.length){var n=e[0],i=e[1],a=e[2],s=e[3];if(!n||!i)return;n===kzi.constant.permission.ok?(a===kzi.constant.permission.project_archived&&t.css("display","none"),i===kzi.constant.role.member?s===kzi.constant.role.admin?t.css("display","none"):t.css("display",""):i===kzi.constant.role.guest?s===kzi.constant.role.admin||s===kzi.constant.role.member?t.css("display","none"):t.css("display",""):t.css("display","")):n===kzi.constant.permission.project_archived?(a===kzi.constant.permission.holder&&0!==s||a===kzi.constant.permission.ok&&0!==s)&&t.css("display","none"):n===kzi.constant.permission.team_stop_service?(a===kzi.constant.permission.holder&&0!==s||a===kzi.constant.permission.ok&&0!==s)&&t.css("display","none"):n===kzi.constant.permission.entity_archived?t.css("display","none"):n===kzi.constant.permission.entity_deleted&&t.css("display","none")}},!0)}}}]).directive("wtPermissionDisabled",[function(){"use strict";return{link:function(e,t,n){e.$watch(n.wtPermissionDisabled,function(e){(e==kzi.constant.permission.project_archived||e==kzi.constant.permission.entity_archived||e==kzi.constant.permission.entity_deleted||e==kzi.constant.permission.entity_not_found)&&(t.attr("disabled","disabled"),t.css("cursor","not-allowed"))})}}}]).directive("wtRule",[function(){"use strict";return{link:function(e,t,n){e.$watch(n.wtRule,function(i){var i=e.$eval(n.wtRule);"hide"==i.type?0==i.rule&&t.css("visibility","hidden"):"disabled"==i.type&&0==i.rule&&(t.attr("disabled","disabled"),t.css("cursor","not-allowed"))})}}}]).directive("wtGoTo",["$location",function(e){"use strict";return{link:function(t,n,i){n.bind("click",function(){e.path(i.wtGoTo),t.$$phase||t.$apply()})}}}]).directive("wtAtwho",[function(){"use strict";return{link:function(e,t,n){e.$watch(n.wtAtwho,function(e){null!==e&&t.atwho(e)})}}}]).directive("wtCommentAtwho",["$parse","$filter",function(e,t){"use strict";return{require:"^ngModel",link:function(n,i,a){var s=kzi.emojis;n.$watch(a.wtCommentAtwho,function(o){if(i.atwho({at:":",data:s,tpl:"<li data-value='${name}:'><img src='/img/emoji/${name}.png' class='emoji' /> ${name}</li>",callbacks:{after_insert:function(t){e(a.ngModel).assign(n,t.$inputor[0].value)}}}),!_.isEmpty(o)){var l="<li data-value='${name}'><a href title='${display_name}' class='avatar avatar-30'><span class='avatar-face'><span class='avatar-text'>${firstText}</span></span></a> <span class='avatar-name'>${display_name}</span></span> <small>(${name})</small></li>";i.atwho({at:"@",limit:5,data:{names:o},tpl:["<li data-value='${name}'><a href title='${display_name}'"," class='avatar avatar-30'><span class='avatar-face'>","<img src='"+kzi.config.wtavatar_url+"40/${avatar}'/></a>&nbsp; ","<span class='avatar-name'>${display_name}</span></span> <small>(${name})</small>","</li>"].join(""),search_key:"display_name",callbacks:{before_save:function(e){return this.call_default("before_save",e.names)},filter:function(e,t){return _.isEmpty(e)?t:_.isEmpty(t)?t:_.filter(t,function(t){return t.display_name.toLowerCase().indexOf(e)>-1||t.name.toLowerCase().indexOf(e)>-1})},sorter:function(e,t){return t},tpl_eval:function(e,n){var i=null;if(null==n.avatar||"default_avatar.png"==n.avatar){var a=t("firstText")(n.display_name);n.firstText=a,i=l.replace(/\$\{([^\}]*)\}/g,function(e,t){return n[t]})}else i=e.replace(/\$\{([^\}]*)\}/g,function(e,t){return n[t]});return i},after_insert:function(t){e(a.ngModel).assign(n,t.$inputor[0].value)}}})}})}}}]).directive("wtEnter",["$parse",function(e){return function(t,n,i){var a=e(i.wtEnter);n.bind("keydown keypress",function(e){var n=e.which||e.keyCode;13===n&&(t.$apply(function(){a(t,{$event:e})}),e.preventDefault())})}}]).directive("wtUpDownEnter",["$parse",function(e){return function(t,n,i){var a=e(i.wtUpDownEnter);n.bind("keydown keypress",function(e){var n=e.which||e.keyCode;(38===n||40===n||13===n)&&(t.$apply(function(){a(t,{$event:e,keyCode:n})}),e.preventDefault())})}}]).directive("wtCtrlEnter",["$parse",function(e){return function(t,n,i){var a=e(i.wtCtrlEnter);n.bind("keydown keypress",function(e){var n=e.which||e.keyCode;(e.ctrlKey||e.metaKey)&&13===n&&(t.$apply(function(){a(t,{$event:e})}),e.preventDefault())})}}]).directive("wtShiftCutover",["$parse",function(e){return function(t,n,i){var a=e(i.wtShiftCutover);n.bind("keydown keypress",function(e){var n=e.which||e.keyCode,i=e.target||e.srcElement;(null===i||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&e.shiftKey&&$.inArray(n,kzi.constant.shift_cutover_keys)>-1&&(t.$$phase||t.$apply(function(){a(t,{$event:e,$keyCode:n})}))})}}]).directive("wtClick",["$parse",function(e){return function(t,n,i){var a=e(i.wtClick);n.bind("click",function(e){t.$$phase?a(t,{$event:e}):t.$apply(function(){a(t,{$event:e})})})}}]).directive("wtShortcutKey",["$parse",function(e){return function(t,n,i){var a=e(i.wtShortcutKey);n.bind("keydown keypress",function(e){var n=e.which||e.keyCode;if((n!==kzi.constant.keyASCIIs.VK_SPACE||"keypress"!==e.type)&&($.inArray(n,kzi.constant.global_shortcut_keys)>-1||$.inArray(n,kzi.constant.entry_shortcut_keys)>-1)){if(n!==kzi.constant.keyASCIIs.ESC){var i=e.target||e.srcElement;if(null!==i&&("INPUT"===i.nodeName||"TEXTAREA"===i.nodeName))return}t.$apply(function(){a(t,{$keyCode:n})})}})}}]).directive("wtKeyAt",["$parse",function(e){return function(t,n,i){var a=e(i.wtKeyAt);n.bind("keydown keypress",function(e){var n=e.which||e.keyCode;n===kzi.constant.keyASCIIs.At&&(t.$apply(function(){a(t,{$event:e})}),e.preventDefault())})}}]).directive("loadingStatus",["$timeout",function(e){"use strict";return function(t,n,i){t.$watch(i.loadingStatus,function(t){t===!0?n.button("loading"):t===!1&&e(function(){n.button("reset")})})}}]).directive("textareaAutoheight",[function(){"use strict";return function(e,t,n){"TEXTAREA"===t[0].tagName&&(t.css({overflow:"hidden","word-wrap":"break-word",resize:"none","padding-right":"22px",height:"32px","line-height":"110%"}),t.height(t[0].scrollHeight-4),t.keyup(function(){var i=1;n.textareaAutoheight&&(i=n.textareaAutoheight),t.height(t[0].scrollHeight-4)}))}}]).directive("textareaInitheight",[function(){"use strict";return function(e,t){"TEXTAREA"===t[0].tagName&&t.focus(function(){t[0].scrollHeight-4>150?t.height("150px"):t.height(t[0].scrollHeight-4)})}}]).directive("wtCopyBind",[function(){"use strict";return function(){}}]).directive("wtScrollFixed",[function(){"use strict";return function(e,t){$(t).css({position:"fixed",width:t.parent().width()}),t.parent().height(t.height()),$(window).resize(function(){$(t).css({width:t.parent().width()}),t.parent().height(t.height())})}}]).directive("wtDisableDrag",[function(){"use strict";return function(e,t){t.on("dragstart",function(e){return console.log("aaa"),e.preventDefault(),!1})}}]).directive("wtSlideShow",["$parse",function(e){"use strict";return function(t,n,i){var a=e(i.slideChange);t.$watch(i.wtSlideShow,function(e){a(t,{value:e}),e===!0?n.slideToggle("normal",function(){var e=n.find("input")[0];e&&e.focus()}):e===!1?n.slideToggle():i.defaultShow||n.slideToggle()})}}]).directive("wtSlidingShow",["$document","$timeout","$parse",function(e){"use strict";return function(t,n,i){var a=500,s=0,o=240;t.$watch("$root.global.right_sidebar_is_fold",function(i){t.$root.locator.show_slide&&e.find(".layout_right_sidebar").length>0&&(s=i?86:o,n.animate({right:s+"px",width:"800px"},a))}),t.$watch(i.wtSlidingShow,function(i){i===!0?(s=e.find(".layout_right_sidebar").length>0?t.$root.global.right_sidebar_is_fold?86:o:0,n.animate({right:s+"px",width:"800px"},a),$(document).bind("mousedown.wtSlidingShow,drag",function(e){$(e.target).hasClass("slide-content")||$(e.target).parents(".slide-content").length>0||$(e.target).hasClass("slide-trigger")||$(e.target).parents(".slide-trigger").length>0||$(e.target).hasClass("popbox")||$(e.target).parents(".popbox").length>0||$(e.target).hasClass("fancybox-overlay")||$(e.target).parents(".fancybox-overlay").length>0||$(e.target).hasClass("layout_right_sidebar")||$(e.target).parents(".layout_right_sidebar").length>0||"fancybox-buttons"===$(e.target).attr("id")||$(e.target).parents("#fancybox-buttons").length>0||$(e.target).hasClass("fancybox-overlay")||$(e.target).parents(".fancybox-overlay").length>0||$(e.target).hasClass("fancybox-thumbs")||$(e.target).parents(".fancybox-thumbs").length>0||$(e.target).hasClass("fancybox-wrap")||$(e.target).parents(".fancybox-wrap").length>0||t.$apply(function(){t.$root.locator.hide_slide()})})):i===!1&&(n.find("div:visible").first().width("800px"),n.animate({width:"0",right:"0"},a),$(document).unbind("mousedown.wtSlidingShow"))})}}]).directive("wtLeftMenuToggle",["$timeout","$parse","$window",function(e,t,n){"use strict";return function(e,t,i){var a=t.children(".leftpanel"),s=a.css("width"),o=200,r=60;e.$watch(i.wtLeftMenuToggle,function(e){var i=t.children(".centerpanel");e===!0?($(n.document).find("body").css("overflow","hidden"),a.clearQueue(),i.clearQueue(),a.stop(),i.stop(),a.animate({width:r},o),i.animate({"margin-left":r},o,null,function(){$("#calendar").fullCalendar("render")}),a.addClass("leftpanel_collapse")):e===!1&&(a.clearQueue(),i.clearQueue(),a.stop(),i.stop(),a.animate({width:s},o),i.animate({"margin-left":220},o,null,function(){a.removeClass("leftpanel_collapse"),$("#calendar").fullCalendar("render")}))})}}]).directive("wtSidebarToggle",["$timeout","$parse","$window",function(){"use strict";return function(e,t,n){var i=$(".layout_right_sidebar"),a=i.outerWidth(),o=86;e.$watch(n.wtSidebarToggle,function(e){var t=$(".layout_content_main");e===!0?(i.css("width",o),t.css("margin-right",o),i.addClass("sidebar_collapse"),$("#calendar").fullCalendar("render")):e===!1&&(i.css("width",a),t.css("margin-right","240px"),i.removeClass("sidebar_collapse"),$("#calendar").fullCalendar("render"))
})}}]).directive("wtStopPropagation",["$timeout","$parse",function(){"use strict";return function(e,t,n){var i=n.wtStopPropagation;_.isEmpty(i)&&(i="mousedown"),t.bind(i,function(e){e.stopPropagation()})}}]).directive("wtChart",["$timeout","$parse",function(){"use strict";return function(e,t,n){e.$watch(n.chartOptions,function(e){if(!_.isEmpty(e)){var t=null;if(null==t)switch(n.wtChart){case"ColumnStacked2D":t=new iChart.ColumnStacked2D(angular.copy(e)),t.draw();break;case"BarStacked2D":t=new iChart.BarStacked2D(angular.copy(e)),t.draw();case"Bar2D":t=new iChart.Bar2D(angular.copy(e)),t.draw();default:}}},!0)}}]).directive("wtFocusEvent",["$timeout","$parse",function(e,t){"use strict";return{link:function(e,n,i){var s=t(i.wtFocusEvent);n.bind("focus",function(t){e.$$phase?s(e,{$event:t}):e.$apply(function(){s(e,{$event:t})})})}}}]).directive("wtModelChange",["$timeout","$parse",function(e,t){"use strict";return{link:function(e,n,i){var s=t(i.wtModelChange);e.$watch(i.ngModel,function(){e.$$phase?s(e):e.$apply(function(){s(e)})})}}}]).directive("wtPagination",function(){"use strict";return function(e,t,n){e.$watch(n.wtPagination,function(n){_.isEmpty(n)||t.pagination(n.totalCount,{current_page:0,items_per_page:kzi.config.default_count,num_display_entries:10,callback:function(t){e.$apply(function(){n.opts.callback(t)})},load_first_page:!1,prev_text:"ä¸ä¸é¡?",next_text:"ä¸ä¸é¡?"})})}}).directive("wtPopDelete",["$popbox","$parse",function(e,t){"use strict";return{link:function(n,i,a){i.bind("click",function(i){var s=t(a.wtPopDelete),o=i;n.$apply(function(){e.popbox({target:o,templateUrl:"/ycjs/tpl/common/pop_delete_confirm.html",controller:["$rootScope","$scope","popbox",function(e,t,n){t.popbox=n,t.js_close=function(){n.close()},t.delete_message="ç¡®è®¤è¦å é¤æ­¤é¡¹åï¼?",t.delete_title="ç¡®è®¤å é¤",t.js_sure_delete=function(){s(t,{$event:o,$popbox:n})}}]}).open()})})}}}]).directive("ngBindHtmlUnsafe",["$sce","sanitize",function(e,t){return{scope:{ngBindHtmlUnsafe:"="},template:"<span ng-bind-html='trustedHtml'></span>",link:function(n){n.updateView=function(){if(!_.isUndefined(n.ngBindHtmlUnsafe)){var i=t(n.ngBindHtmlUnsafe);n.trustedHtml=e.trustAsHtml(i)}},n.$watch("ngBindHtmlUnsafe",function(e){n.updateView(e)})}}}]).directive("wtAutofocus",[function(){"use strict";return{link:function(e,t){t[0].focus()}}}])}(),angular.module("wt.directive.avatar",[]).directive("wtAvatar",["$parse",function(e){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/avatar.html",link:function(t,n,i){var a=function(a){var s=40;angular.isDefined(i.size)&&(s=parseInt(i.size,10)),n.addClass("avatar-"+s),45>s&&(s=40),s>=45&&(s=80),s>=100&&(s=180),angular.isDefined(i.avatar)&&(a.avatar=t.$eval(i.avatar)),n.attr("title",a.display_name),n.attr("member-id",a.uid);var o=n.children(".avatar-face");if(angular.isDefined(i.faceclass)&&o.addClass(i.faceclass),o.empty(),n.find("br").remove(),n.find(".avatar-name").remove(),n.find(".avatar-atname").remove(),n.find(".avatar-append").remove(),"default_avatar.png"===a.avatar||_.isEmpty(a.avatar)){var r=a.display_name.substring(0,1).toLocaleUpperCase();o.append('<span class="avatar-text">'+r+"</span>")}else{var l=kzi.config.default_avatar;a.avatar&&(l=kzi.config.wtavatar_url+s+"/"+a.avatar),o.append('<img src="'+l+'" alt="'+a.display_name+'"/>')}if(angular.isDefined(i.status)){var c="status offline",d="ç¦»çº¿";1===a.online&&(c="status online",d="å¨çº¿"),3===a.online&&(c="status leave",d="ç¦»å¼"),o.append('<span class="'+c+'" title="'+d+'"></span>')}if(angular.isDefined(i.href)?n.attr("href",i.href):n.attr("href","javascript:;"),angular.isDefined(i.namebr)&&o.after("<br/>"),angular.isDefined(i.name)&&n.append('<span class="avatar-name">'+a.display_name+"</span>"),angular.isDefined(i.atname)&&n.append('<span class="avatar-atname">('+a.name+")</span>"),angular.isDefined(i.append)&&n.append('<span class="avatar-append">'+i.append+"</span>"),n.unbind("dragstart.wt-avatar"),angular.isDefined(i.drag)){var u=t.$eval(i.drag);_.isEmpty(u)?n.bind("dragstart.wt-avatar",function(e){return e.preventDefault(),!1}):n.draggable(u)}else n.bind("dragstart.wt-avatar",function(e){return e.preventDefault(),!1});if(n.unbind("click.wt-avatar"),angular.isDefined(i.click)){var p=e(i.click);n.bind("click.wt-avatar",function(e){t.$apply(function(){p(t,{$event:e})})})}};if(t.$watch(i.member,function(e,t){_.isUndefined(e)||_.isNull(e)||_.isEqual(e,t)||a(e)},!0),!_.isUndefined(i.member)){var s=t.$eval(i.member);if(_.isUndefined(s)||_.isNull(s))return;a(s)}}}}]),angular.module("wt.directive.task",[]).directive("wtTask",["$parse","$popbox",function(){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/task.html",link:function(e,t,n){var i=function(e){if(e.labels&&e.labels.length>0){var n="";_.each(e.labels,function(e){n+='<div class="task-label '+e.name+'-label"></div>'}),t.children(".entry-task-labels").empty().append(n)}else t.children(".entry-task-labels").empty()};if(_.isEmpty(n.hideAction)||(e.hide_action=!!n.hideAction),e.$watch(n.task,function(e,t){_.isUndefined(e)||_.isNull(e)||_.isEqual(e,t)||i(e)},!0),!_.isUndefined(n.task)){if(_.isUndefined(e.$eval(n.task)))return;i(e.$eval(n.task))}}}}]).directive("wtTaskComposer",["$compile","$templateCache","$http","$parse","$timeout","$popbox",function(e,t,n,i){"use strict";return{restrict:"E",replace:!0,transclude:!0,link:function(a,s,o){var r="/ycjs/tpl/directive/task_composer.html",l=function(){$(document).bind("mousedown.wtTaskComposer",function(e){$(e.target).hasClass("entry-task-composer")||$(e.target).parents(".entry-task-composer").length>0||$(e.target).hasClass("popbox-avatar")||$(e.target).parents(".popbox-avatar").length>0||a.$apply(function(){i(o.composerShow).assign(a,!1)})})};a.focus_textarea=function(e){var t=null;t=$(e.target).hasClass("composer-body-focus")?$(e.target):$(e.target).parents(".composer-body-focus").eq(0),t.find("textarea").focus()},a.$watch(o.composerShow,function(c){c===!0?s.contents().length>0?(s.css("display","block"),l(),s.find("textarea")[0].focus()):n.get(r,{cache:t}).success(function(t){s.html(t);var n=a.$new();n.js_task_save=function(e){var s=i(o.taskSave);s(n,{$event:e})},e(s.contents())(n),s.css("display","block"),l(),s.find("textarea")[0].focus()}).error(function(){angular.noop()}):c===!1&&(s.css("display","none"),$(document).unbind("mousedown.wtTaskComposer"))})}}}]),angular.module("wt.directive.badges",[]).directive("wtBadges",["shortTimeFormatFilter","$parse","$popbox",function(e){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/badges.html",link:function(t,n,i){var a=function(e){var t=0;if(e.completed)t=0;else{var n=moment().valueOf(),i=1e3*moment(e.expire_date).format("X");t=n>i?1:i>n&&moment().add("days",1).valueOf()>i?2:0}return t},s=function(t){var i="";if(n.children(".icon-time").remove(),0!=t.expire_date,0!=t.expire_date){var s=e(t.expire_date),o="",r="",l=a(t);r="æªæ­¢æ¶é´ï¼?"+s,1===l&&(o="badge-expire-due",r="ä»»å¡å·²ç»æªæ­¢"),2===l&&(o="badge-expire-soon",r="ä»»å¡å³å°æªæ­¢");var c=['<span class="task-badge icon icon-time '+o+'"',' title="'+r+'">',s,"</span> "].join("");i+=c}if(n.children(".icon-th-list").remove(),t.badges.todo_count>0){var d=t.badges.todo_checked_count+"/"+t.badges.todo_count,u="";t.badges.todo_checked_count===t.badges.todo_count&&(u=" badge-todo-done");var p="";p=t.badges.todo_checked_count===t.badges.todo_count?t.badges.todo_checked_count+"ä¸ªæ£æ¥é¡¹å·²å¨é¨å®æ?":"æ£æ¥é¡¹ï¼?"+t.badges.todo_checked_count+"/"+t.badges.todo_count;var f=['<span class="task-badge icon icon-th-list '+u+'"',' title="'+p+'">',d,"</span> "].join("");i+=f}if(n.children(".icon-paper-clip").remove(),t.badges.file_count>0){var h=t.badges.file_count+"ä¸?",m="ä»»å¡æ?"+t.badges.file_count+"ä¸ªéä»?",_=['<span class="task-badge icon icon-paper-clip"',' title="'+m+'">',h,"</span> "].join("");i+=_}if(n.children(".icon-comment-alt").remove(),t.badges.comment_count>0){var g=t.badges.comment_count+"ä¸?",v="ä»»å¡æ?"+t.badges.comment_count+"ä¸ªè¯è®?",b=['<span class="task-badge icon icon-comment-alt"',' title="'+v+'">',g,"</span> "].join("");i+=b}n.append(i)};if(t.$watch(i.task,function(e,t){_.isUndefined(e)||_.isNull(e)||_.isEqual(e,{})||_.isUndefined(e.badges)||_.isNull(e.badges)||null!==t&&moment(e.expire_date).format("YYYY-MM-DD")===moment(t.expire_date).format("YYYY-MM-DD")&&_.isEqual(e.badges,t.badges)&&e.completed==t.completed||s(e)},!0),!_.isUndefined(i.task)){var o=t.$eval(i.task);if(_.isUndefined(o)||_.isEmpty(o))return;if(_.isEqual(o,{}))return;if(_.isUndefined(o.badges)||_.isNull(o.badges))return;s(o)}}}}]),angular.module("wt.directive.notice",[]).directive("wtNotice",["$parse","$popbox",function(e){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/notice.html",link:function(t,n,i){var a=e(i.noticeClick),s=t.notice.template;switch(s){case"task_assign":t.action="ç»ä½ åéäºæ°çä»»å?",t.type_icon=kzi.constant.notice_type_icon.task,t.display_entity=t.notice.data.entity;break;case"task_complete":t.action="å®æäºä»»å?",t.type_icon=kzi.constant.notice_type_icon.task,t.display_entity=t.notice.data.entity;break;case"event_attend":t.action="éè¯·ä½ åä¸æ¥ç¨",t.type_icon=kzi.constant.notice_type_icon.event,t.display_entity=t.notice.data.entity;break;case"task_watch":t.action="æéä½ å³æ³¨ä»»å?",t.type_icon=kzi.constant.notice_type_icon.task,t.display_entity=t.notice.data.entity;break;case"file_watch":t.action="æéä½ å³æ³¨æä»?",t.type_icon=kzi.constant.notice_type_icon.file,t.display_entity=t.notice.data.entity;break;case"post_watch":t.action="æéä½ å³æ³¨è¯é¢?",t.type_icon=kzi.constant.notice_type_icon.post,t.display_entity=t.notice.data.entity;break;case"page_watch":t.action="æéä½ å³æ³¨ææ¡?",t.type_icon=kzi.constant.notice_type_icon.page,t.display_entity=t.notice.data.entity;break;case"task_comment":t.action="è¯è®ºäºä»»å¡ï¼"+t.notice.data.target.name,t.type_icon=kzi.constant.notice_type_icon.comment,t.display_entity=t.notice.data.entity,t.send_entity=t.notice.data.target;break;case"event_comment":t.action="è¯è®ºäºæ¥ç¨ï¼"+t.notice.data.target.name,t.type_icon=kzi.constant.notice_type_icon.comment,t.display_entity=t.notice.data.entity,t.send_entity=t.notice.data.target;break;case"file_comment":t.action="è¯è®ºäºæä»¶ï¼"+t.notice.data.target.name,t.type_icon=kzi.constant.notice_type_icon.comment,t.display_entity=t.notice.data.entity,t.send_entity=t.notice.data.target;break;case"post_comment":t.action="è¯è®ºäºè¯é¢ï¼"+t.notice.data.target.name,t.type_icon=kzi.constant.notice_type_icon.comment,t.display_entity=t.notice.data.entity,t.send_entity=t.notice.data.target;break;case"page_comment":t.action="è¯è®ºäºææ¡£ï¼"+t.notice.data.target.name,t.type_icon=kzi.constant.notice_type_icon.comment,t.display_entity=t.notice.data.entity,t.send_entity=t.notice.data.target;break;case"file_version":t.action="ä¸ä¼ äºæä»¶æ°çæ¬",t.type_icon=kzi.constant.notice_type_icon.file,t.display_entity=t.notice.data.entity;break;case"page_version":t.action="æäº¤äºææ¡£æ°çæ¬",t.type_icon=kzi.constant.notice_type_icon.page,t.display_entity=t.notice.data.entity;break;case"metion_at_comment":t.action="å¨è¯è®ºä¸­æå°äºä½ ",t.type_icon=kzi.constant.notice_type_icon.comment,t.display_entity=t.notice.data.entity,t.send_entity=t.notice.data.target;break;case"project_archive":t.action="å½æ¡£äºé¡¹ç?",t.type_icon=kzi.constant.notice_type_icon.project,t.display_entity=t.notice.data.entity;break;case"project_delete":t.action="å é¤äºé¡¹ç?",t.type_icon=kzi.constant.notice_type_icon.project,t.display_entity=t.notice.data.entity;break;case"project_member_add":t.action="æä½ å å¥äºé¡¹ç?",t.type_icon=kzi.constant.notice_type_icon.project,t.display_entity=t.notice.data.entity;break;case"project_member_remove":t.action="æä½ ç§»åºäºé¡¹ç?",t.type_icon=kzi.constant.notice_type_icon.project,t.display_entity=t.notice.data.entity;break;case"project_member_admin":t.action="è®¾ç½®ä½ ä¸ºé¡¹ç®çè´è´£äºº",t.type_icon=kzi.constant.notice_type_icon.project,t.display_entity=t.notice.data.entity;break;default:t.action=s+"æªå®ç?"}t.js_click_notice=function(){if(!_.isEmpty(t.send_entity))return a(t,{$eType:t.send_entity.etype,$entity:t.send_entity}),void 0;var e=null;_.isEmpty(t.type_icon)||(e=t.type_icon.name),a(t,{$eType:e,$entity:t.display_entity})}}}}]),angular.module("wt.directive.feed",[]).directive("wtFeed",["$parse","$rootScope",function(e,t){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/feed.html",link:function(e){var a=e.feed.template;switch(a){case"task_create":e.action="æ°å»ºäºä»»å?",e.type_icon=kzi.constant.feed_type_icon.task,e.display_entity=e.feed.data.entity;break;case"task_complete":e.action="å®æäºä»»å?",e.type_icon=kzi.constant.feed_type_icon.completed,e.display_entity=e.feed.data.entity;break;case"task_comment_add":e.action="è¯è®ºäºä»»å¡ï¼"+e.feed.data.target.name,e.type_icon=kzi.constant.feed_type_icon.comment,e.display_entity=e.feed.data.entity,e.send_entity=e.feed.data.target;break;case"task_attach_file":e.action="å¨ä»»å¡ä¸æ·»å äºéä»¶ï¼"+e.feed.data.entity.name,e.type_icon=kzi.constant.feed_type_icon.task,e.display_entity=e.feed.data.target,e.send_entity=e.feed.data.target;break;case"file_upload":e.action="ä¸ä¼ äºæä»?",e.type_icon=kzi.constant.feed_type_icon.file,e.display_entity=e.feed.data.entity;break;case"file_new_version":e.action="ä¸ä¼ äºæä»¶æ°çæ¬",e.type_icon=kzi.constant.feed_type_icon.file,e.display_entity=e.feed.data.entity;break;case"file_comment_add":e.action="è¯è®ºäºæä»¶ï¼"+e.feed.data.target.name,e.type_icon=kzi.constant.feed_type_icon.comment,e.display_entity=e.feed.data.entity,e.send_entity=e.feed.data.target;break;case"post_create":e.action="åèµ·äºæ°è¯é¢",e.type_icon=kzi.constant.feed_type_icon.post,e.display_entity=e.feed.data.entity;break;case"post_comment_add":e.action="è¯è®ºäºè¯é¢ï¼"+e.feed.data.target.name,e.type_icon=kzi.constant.feed_type_icon.comment,e.display_entity=e.feed.data.entity,e.send_entity=e.feed.data.target;break;case"event_create":e.action="æ°å»ºäºæ¥ç¨?",e.type_icon=kzi.constant.feed_type_icon.event,e.display_entity=e.feed.data.entity;break;case"event_comment_add":e.action="è¯è®ºäºæ¥ç¨ï¼"+e.feed.data.target.name,e.type_icon=kzi.constant.feed_type_icon.comment,e.display_entity=e.feed.data.entity,e.send_entity=e.feed.data.target;break;case"page_create":e.action="æ°å»ºäºææ¡?",e.type_icon=kzi.constant.feed_type_icon.page,e.display_entity=e.feed.data.entity;break;case"page_comment_add":e.action="è¯è®ºäºææ¡£ï¼"+e.feed.data.target.name,e.type_icon=kzi.constant.feed_type_icon.comment,e.display_entity=e.feed.data.entity,e.send_entity=e.feed.data.target;break;default:}e.js_click_feed=function(){if(!_.isEmpty(e.send_entity))return t.locator.to_entity(e.feed.filter.prj,e.send_entity,!0),void 0;var n=null;_.isEmpty(e.type_icon)||(n=e.type_icon.name),t.locator.to_entity(e.feed.filter.prj,e.display_entity,!0)}}}}]),angular.module("wt.directive.markdown",[]).factory("MdParse",[function(){"use strict";return function(e){return"string"!=typeof e?"":marked(e,{breaks:!0})}}]).factory("sanitize",[function(){"use strict";var e=new Sanitize({}),t=new Sanitize(Sanitize.Config.RESTRICTED),n=new Sanitize(Sanitize.Config.BASIC),i=new Sanitize(Sanitize.Config.RELAXED);return function(a,s){var o=i;switch(s){case 0:o=e;break;case 1:o=t;break;case 2:o=n;break;case 3:o=i;break;default:o=i}var r=document.createElement("div"),l=document.createElement("div");return r.innerHTML=filterXSS(a),l.appendChild(o.clean_node(r)),l.innerHTML}}]).directive("wtMarkdown",["MdParse","sanitize",function(e,t){"use strict";return function(n,i,a){i.addClass("ng-binding markdown").data("$binding",a.genParseMarkdown);var s=i.html()||"";s=e(s),s=t(s),i.html(s),n.$watch(a.wtMarkdown,function(n){n=n||"",""!==n?(n=e(n),n=t(n),i.html(n)):i.html(""),i.find("a").attr("target",function(){return this.host!==location.host?"_blank":void 0})})}}]),angular.module("wt.directive.activity",[]).directive("wtActivity",["$parse","$popbox",function(){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/activity.html",link:function(e){var i=e.$parent.tpl_prefix,a=e.activity.template,s="project_",o="item_";switch(a){case"task_create":i===s?(e.verb="å¨åè¡? <strong>"+e.activity.data.target.name+"</strong> ä¸æ·»å æ°ä»»å¡",e.display_entity=e.activity.data.entity):e.verb=i===o?"æ·»å ä»»å¡":"tpl_prefixä¸ºç©º";break;case"task_update_name":i===s?(e.verb="ä¿®æ¹ä»»å¡",e.display_entity=e.activity.data.entity):e.verb=i===o?"ä¿®æ¹ä»»å¡ä¸? <strong>"+e.activity.data.entity.name+"</strong>":"tpl_prefixä¸ºç©º";break;default:e.verb=a+"æ¨¡æ¿å°æªå®ç°"}}}}]),angular.module("wt.directive.uploadfile",[]).directive("wtUploadfile",["$popbox",function(){"use strict";return{restrict:"A",link:function(e,t,n){var i=function(e){t.unbind("change.call_global_fileupload"),t.bind("change.call_global_fileupload",function(){e.previewMaxWidth&&$("#global_file_upload").fileupload({previewMaxWidth:e.previewMaxWidth}),e.previewMaxHeight&&$("#global_file_upload").fileupload({previewMaxHeight:e.previewMaxHeight});var n={url:e.url,formData:e.formData,fileInput:$(this)};_.isFunction(e.successCallback)&&(n.formData.successCallback=e.successCallback),$("#global_file_upload").fileupload("add",n),_.isFunction(e.addCallback)&&e.addCallback(),$(this).val("")})};if(e.$watch(n.wtUploadfile,function(e,t){_.isUndefined(e)||_.isNull(e)||_.isEqual(e,t)||i(e)},!0),!_.isUndefined(n.wtUploadfile)||_.isNull(n.wtUploadfile)||_.isEmpty(n.wtUploadfile)){if(_.isUndefined(e.$eval(n.wtUploadfile)))return;i(e.$eval(n.wtUploadfile))}}}}]),angular.module("wt.directive").directive("wtConfirmPassword",["$parse","$window",function(e,t){"use strict";return{restrict:"E",replace:!0,templateUrl:"/ycjs/tpl/directive/confirm_password.html",link:function(n,i,a){var s=e(a.confirmSuccess),o=e(a.confirmCancel);n.js_cancel_option=function(){_.isFunction(o)&&o(n)},n.js_forgot_password=function(){t.location.href="/forgot"},n.js_confirm_password=function(e){n.confirming=!0,wt.data.account.conform_password(n.confirm_password,function(){_.isFunction(s)&&s(n)},function(t){t.code===kzi.statuses.user_error.invalid_pwd_error.code?e.$errors.unshift("è¾å¥å¯ç è¾å¥éè¯¯"):e.$errors.unshift("æå¡å¨åçéè¯?")},function(){n.confirming=!1})}}}}]),angular.module("wt.directive").directive("wtPopEmoji",["$parse","$popbox",function(e,t){"use strict";return{restrict:"A",replace:!0,link:function(n,i,a){i.bind("click",function(s){var o=e(a.wtPopEmoji);t.popbox({target:s,templateUrl:"/ycjs/tpl/common/pop_emojis.html",controller:["$scope","popbox",function(e,t){e.popbox=t,e.emojis=[];var a=72,s=[],r=[];$.each(kzi.emojis,function(e){0!==e&&0===e%a&&(r.push(s),s=[]),s.push(this)}),r.push(s),e.emoji_groups=r,e.emojis=r[0],e.current=0,e.js_to_page=function(t){e.current=t,e.emojis=r[t]},e.js_insert_emoji=function(e){var a=i.val()+" :"+e+": ";_.isFunction(o)&&o(n,{emoji:a}),t.close()},e.js_close=function(){t.close()},e.js_mousedown=function(e){e.stopPropagation(),e.preventDefault()}}]}).open().then(function(){})})}}}]),angular.module("wt.directive.dragfile",[]).directive("wtDragfile",["$parse","$window",function(){"use strict";return{link:function(e,t,n){var i=function(e){$(t).unbind("dragover.wt_dragfile"),$(t).unbind("drop.wt_dragfile"),$(t).unbind("drop.wt_dragfile_exit dragleave.wt_dragfile_exit dragexit.wt_dragfile_exit dragend.wt_dragfile_exit"),$(t).bind("dragover.wt_dragfile",function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var n=e.dataTransfer;return n&&-1!==$.inArray("Files",n.types)?(n.dropEffect="copy",$(t).addClass("dragfile-hover"),!1):void 0}),$(t).bind("drop.wt_dragfile",function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=t.dataTransfer;n&&n.files&&n.files.length&&(e.upload_option.formData.size=n.files[0].size,_.each(n.files,function(e){var t={type:2,ext:kzi.constant.get_ext(e.name.substring(e.name.lastIndexOf(".")+1))};e.icon=kzi.constant.get_file_icon(t)}),$("#global_file_upload").fileupload("add",{url:e.upload_option.url,formData:e.upload_option.formData,files:n.files}))}),$(t).bind("drop.wt_dragfile_exit dragleave.wt_dragfile_exit dragexit.wt_dragfile_exit dragend.wt_dragfile_exit",function(e){var n=!0,i=$(t).offset().left,a=$(t).width(),s=$(t).offset().top,o=$(t).height(),r=!1;e.originalEvent.pageX>i&i+a>e.originalEvent.pageX&&(r=!0);var l=!1;return e.originalEvent.pageY>s&s+o>e.originalEvent.pageY&&(l=!0),r&&l&&"drop"!==e.type&&(n=!1),n&&$(t).removeClass("dragfile-hover"),!1})};if(e.$watch(n.wtDragfile,function(e,t){_.isUndefined(e)||_.isNull(e)||_.isEqual(e,t)||i(e)},!0),!_.isUndefined(n.wtDragfile)){var a=e.$eval(n.wtDragfile);if(_.isUndefined(a)||_.isEmpty(a))return;if(_.isEqual(a,{}))return;if(!_.isObject(a))return;i(a)}}}}]),angular.module("wt.directive.event",[]).directive("wtNewEvent",["$rootScope","$routeParams","$parse","$popbox",function(e,t,n,i){"use strict";return{restrict:"A",replace:!0,link:function(a,s,o){var r=n(o.wtNewEvent);s.bind("click",function(n){var s=t.pid;i.popbox({target:n,templateUrl:"/ycjs/tpl/project/event/pop_add_event.html",controller:["$scope","popbox",function(t,n){t.popbox=n,t.step=0,t.js_close=function(){n.close()},t.js_step=function(e){t.step=e};var i=moment().format("HH"),o=moment().format("mm"),l=kzi.constant.all_hour_sections,c=kzi.constant.all_minute_sections,d=function(){t.start_hour_sections=l,t.start_minute_sections=c;var e=o.substring(0,1)+"0";t.new_event.start_minute=e,t.new_event.end_minute=e},u=function(){var e=t.new_event.start_date,n=t.new_event.start_hour,i=t.new_event.start_minute,a=t.new_event.end_date;e>=a?(t.new_event.end_date=e,n>=t.new_event.end_hour?(t.new_event.end_hour=n,i>=t.new_event.end_minute&&(t.new_event.end_minute=i),t.end_minute_sections=_.filter(c,function(e){return e>=i?!0:void 0})):t.end_minute_sections=c,t.end_hour_sections=_.filter(l,function(e){return e>=n?!0:void 0})):(t.end_hour_sections=l,t.end_minute_sections=c)};t.new_event={start_date:moment().format("YYYY-MM-DD"),end_date:moment().format("YYYY-MM-DD"),start_hour:i,start_minute:o,end_hour:moment().format("HH"),end_minute:o,attendees:[e.global.me]},s?(t.new_event.pid=s,t.show_project_select=!1):(e.load_projects(function(e){t.selected_projects=e,_.isEmpty(t.selected_projects)||(t.new_event.pid=t.selected_projects[0].pid,t.new_event.original_pid=t.new_event.pid)}),t.show_project_select=!0),d(),t.$watch("[new_event.start_date,new_event.start_hour,new_event.start_minute]",function(){u()},!0),u(),t.js_to_set_date=function(e){t.current_date_type=e,"start_date"===e?(t.current_date=t.new_event.start_date,t.min_date=null,t.set_date_title="è®¾ç½®å¼å§æ¶é?"):(t.current_date=t.new_event.end_date,t.min_date=t.new_event.start_date,t.set_date_title="è®¾ç½®ç»ææ¶é´"),t.js_step(1)},t.js_set_date=function(e){e=moment(e).format("YYYY-MM-DD"),"start_date"===t.current_date_type?(t.new_event.start_date=e,d(moment(e))):(t.new_event.end_date=e,u()),t.js_step(0)},t.js_change_project=function(){t.new_event.pid!==t.new_event.original_pid&&(t.new_event.original_pid=t.new_event.pid,t.new_event.attendees=[e.global.me])},t.js_to_attendee=function(){t.members=[],t.loading_members=!0,e.load_project_members(t.new_event.pid,function(e){var n=[];_.each(e.members,function(e){if(1===e.status&&e.role!==kzi.constant.role.guest){var i=_.findWhere(t.new_event.attendees,{uid:e.uid});e.assigned=i?1:0,n.push(e)}}),t.members=n,t.loading_members=!1},function(){t.loading_members=!1}),t.js_step(2)},t.js_toggle_member=function(e){e.setting_toggle_member!==!0&&(e.setting_toggle_member=!0,wt.bus.member.set_event_attendees_toggle(s,t.new_event,e,function(){},null,function(){e.setting_toggle_member=!1}))},t.js_save_event=function(){if(!_.isEmpty(t.new_event.name)){t.is_saving=!0;var i=_.pluck(t.new_event.attendees,"uid"),s=t.new_event.end_date,o=t.new_event.end_hour+":"+t.new_event.end_minute,l=t.new_event.location,c=t.new_event.start_hour+":"+t.new_event.start_minute;t.new_event.show_end_date||(s=t.new_event.start_date,o=c),t.new_event.show_location||(l=null),wt.data.event.add(t.new_event.pid,t.new_event.name,l,i,t.new_event.start_date,c,s,o,function(e){t.js_close(),_.isFunction(r)&&r(a,{event:e.data,popbox:n})},null,function(){t.is_saving=!1})}}}]}).open()})}}}]),angular.module("wt.directive").directive("wtComment",["$parse","$rootScope","$popbox",function(e,t,n){"use strict";return{restrict:"E",replace:!1,templateUrl:"/ycjs/tpl/directive/new_comment.html",link:function(t,i,a){var s=e(a.saveComment),o=i.find("textarea");t.$comment={temp_message:""},t.$js_metion_member=function(e){n.popbox({target:e,templateUrl:"/ycjs/tpl/common/pop_comment_metion.html",controller:["$scope","popbox","pop_data",function(e,n){e.popbox=n,e.metion_members=t.atwho_members,e.js_metion_member=function(e,i){t.$comment.temp_message||(t.$comment.temp_message=""),t.$comment.temp_message+=" @"+i.name+" ",o.focus(),n.close()},e.js_metion_all=function(){t.$comment.temp_message||(t.$comment.temp_message=""),_.each(e.metion_members,function(e){t.$comment.temp_message+=" @"+e.name+" "}),o.focus(),n.close()},e.js_close=function(){n.close()},e.js_mousedown=function(e){e.stopPropagation()}}],resolve:{pop_data:function(){return{scope:t,members:t.members}}}}).open()},t.$js_save_comment=function(){s(t,{comment:t.$comment})},t.$js_pop_emojis=function(e){n.popbox({target:e,templateUrl:"/ycjs/tpl/common/pop_emojis.html",controller:["$scope","popbox",function(e,n){e.popbox=n,e.emojis=[];var i=72,a=[],s=[];$.each(kzi.emojis,function(e){0!==e&&0===e%i&&(s.push(a),a=[]),a.push(this)}),s.push(a),e.emoji_groups=s,e.emojis=s[0],e.current=0,e.js_to_page=function(t){e.current=t,e.emojis=s[t]},e.js_insert_emoji=function(e){t.$comment.temp_message=t.$comment.temp_message+" :"+e+": ",o.focus(),n.close()},e.js_close=function(){n.close()},e.js_mousedown=function(e){e.stopPropagation(),e.preventDefault()}}]}).open().then(function(){})}}}}]),function(e,t){"use strict";var n={};n.prototype=n,n.config={wohoo_show_version:305,version:"?ver=3.0.5",debug:function(){return"dev"!==wt.env||n.util.isIE()||"object"!=typeof window.console?!1:!0},prefixed:"wt",lang:"zh-cn",default_pos:65535,default_count:20,googleAnalytics:"UA-42366759-1",box_url:function(){return"dev"===wt.env?"https://b.worktile.com/":"https://box.worktile.com/"},box_url_regex:function(){return"dev"===wt.env?new RegExp("^https://b.worktile.com/(.*)$"):new RegExp("^https://box.worktile.com/(.*)$")},wtbox:function(){return"dev"===wt.env?"https://b.worktile.com/":"https://box.worktile.com/"},default_team_pic:"/img/logo.png",default_avatar:"/img/default_avatar.png",default_box:"",default_project_bg:"",default_nopic:"/img/bg/nopic.png",wtbox_url:"https://wt-thumb.oss.aliyuncs.com/",wtlogo_url:"https://wt-team.oss.aliyuncs.com/",wtavatar_url:"https://wt-avatars.oss.aliyuncs.com/",wtall_url:"https://wt-all.oss.aliyuncs.com/",wtprj_url:"https://wt-prj.oss.aliyuncs.com/",desk_notify_key:"my_desk_notice",root_url:"https://worktile.com",colors:{completed:"#88b244",uncompleted:"#f7af49",expired:"#f47a55",archived:"#9fc6e7",created:"#9fe1e7"},socket_url:function(){return"dev"===wt.env?"":"https://kit.worktile.com/"}},n.calcHeight=function(){var e=t("#header").outerHeight(!0),i=t(".mod_navbar").outerHeight(!0);t(".height-full").height(n.util.winHeight()),t(".height-noheader").height(n.util.winHeight()-e),t(".height-nonav").height(n.util.winHeight()-e-i-1),t(".height-main-min").css("minHeight",n.util.winHeight()-e-i),t.each(t(".height-nonav"),function(e,n){t(n).hasClass("leftpanel")&&(t(n).children().height()>parseInt(t(n).css("height"),10)?t(n).addClass("height-scroll"):t(n).removeClass("height-scroll"))}),t("[data-minheight]").each(function(){var e=parseInt(n.util.winHeight()-t(this).data("minheight"),10);t(this).css("minHeight",e)}),t("[data-maxheight]").each(function(){var e=parseInt(n.util.winHeight()-t(this).data("maxheight"),10);t(this).css("maxHeight",e)}),t("[data-height]").each(function(){var e=parseInt(n.util.winHeight()-t(this).attr("data-height"),10);t(this).css("height",e)})},n.emojis=["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","ok_woman","no_good","information_desk_person","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface","sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel","bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn","house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de","one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_square","white_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"],Date.prototype.isSameDay=function(e){return this.getFullYear()===e.getFullYear()&&this.getMonth()===e.getMonth()&&this.getDate()===e.getDate()
},Date.prototype.format=function(e){var t={"y+":this.getFullYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},n.util={isIE:function(){return!!window.ActiveXObject},isIE6:function(){return n.util.isIE()&&!window.XMLHttpRequest},isIE7:function(){return n.util.isIE()&&!n.util.isIE6()&&!n.util.isIE8()},isIE8:function(){return n.util.isIE()&&!!document.documentMode},winHeight:function(){return t(e).height()},docWidth:function(){return t(document).width()},docHeight:function(){return t(document).height()},docOuterWidth:function(){return t(document).outerWidth()},docOuterHeight:function(){return t(document).outerHeight()},headerNavHeight:function(){return t("#header").outerHeight(!0)},pageNavHeight:function(){return t(".page_navbar").outerHeight(!0)},heightNoHeader:function(){return n.util.winHeight()-n.util.headerNavHeight()},heightNoNav:function(){return n.util.winHeight()-n.util.headerNavHeight()-n.util.pageNavHeight()},dateToTimestamp:function(e){return isNaN(e)?Date.parse(e):e},isDate:function(e){return"object"==typeof e&&e.constructor==Date},getWeekday:function(e){var t=["æææ?","ææä¸","ææäº?","ææä¸?","ææå?","ææäº?","ææå?"];if(n.util.isDate(e))return t[e.getDay()];var i=new Date(e);return t[i.getDay()]},datetimeToDTW:function(e){var t=new Date,i=new Date(e),a="";return t.getFullYear()!==i.getFullYear()&&(a=i.getFullYear()+"å¹? "),a+=i.isSameDay(t)?i.format("ä»å¤© "):i.format("MMæddæ? "),a+=i.format("hh:mm "),a+=n.util.getWeekday(i)},datetimeToDT:function(e){var t=new Date,n=new Date(e),i="";return t.getFullYear()!==n.getFullYear()&&(i=n.getFullYear()+"å¹? "),i+=n.isSameDay(t)?n.format("ä»å¤© "):n.format("MMæddæ? "),i+=n.format("hh:mm ")}},n.helper={build_file_icon:function(e){var t=kzi.constant.get_file_icon(e);return"-1"===t&&(t=e.path),t},get_query:function(e){var t=String(window.document.location.href),n=new RegExp("(^|)"+e+"=([^&]*)(&|$)","gi").exec(t);return n&&n.length>2?n[2]:""},substr:function(e,t){return e?t>=e.length?e:e.substring(0,t-1)+"...":""},padLeft:function(e,t){return e.length>=t?e:n.helper.padLeft("0"+e,t)},mouse_position:function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.body.scrollLeft-document.body.clientLeft,y:e.clientY+document.body.scrollTop-document.body.clientTop}}},n.validator={isEmail:function(e){var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)}},n.get_cookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;n.length>i;i++){for(var a=n[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null},n.debug=function(){n.config.debug()},n.console={log:function(e){n.config.debug()&&console.log(e)},time:function(e){n.config.debug()&&console.time(e)},timeEnd:function(e){n.config.debug()&&console.timeEnd(e)},group:function(e){n.config.debug()&&console.groupCollapsed(e)},groupEnd:function(e){n.config.debug()&&console.groupEnd(e)},profile:function(e){n.config.debug()&&console.profile(e)},profileEnd:function(e){n.config.debug()&&console.profile(e)}};var i=function(e,n,i){t(".notifications").notify({type:e,message:{text:n},onClosed:i}).show()};n.msg={info:function(e,t){i("info",e,t)},error:function(e,t){i("danger",e,t)},success:function(e,t){i("success",e,t)},warn:function(e,t){i("warning",e,t)}},n.localData={hname:location.hostname?location.hostname:"localStatus",isLocalStorage:window.localStorage?!0:!1,dataDom:null,initDom:function(){if(!this.dataDom)try{this.dataDom=document.createElement("input"),this.dataDom.type="hidden",this.dataDom.style.display="none",this.dataDom.addBehavior("#default#userData"),document.body.appendChild(this.dataDom);var e=new Date;e=e.getDate()+30,this.dataDom.expires=e.toUTCString()}catch(t){return!1}return!0},set:function(e,t){this.isLocalStorage?window.localStorage.setItem(e,t):this.initDom()&&(this.dataDom.load(this.hname),this.dataDom.setAttribute(e,t),this.dataDom.save(this.hname))},get:function(e){return this.isLocalStorage?window.localStorage.getItem(e):this.initDom()?(this.dataDom.load(this.hname),this.dataDom.getAttribute(e)):void 0},remove:function(e){this.isLocalStorage?localStorage.removeItem(e):this.initDom()&&(this.dataDom.load(this.hname),this.dataDom.removeAttribute(e),this.dataDom.save(this.hname))}};var a={login_name:{required:"ç¨æ·åæèé®ç®±ä¸è½ä¸ºç©?"},login_password:{required:"ç»å½å¯ç ä¸è½ä¸ºç©º",maxlength:"è¾å¥çå¯ç é¿åº¦å¿é¡»å°äº{maxlength}",minlength:"è¾å¥çå¯ç é¿åº¦ä¸è½å°äº{minlength}"},user_name:{required:"è¾å¥çç¨æ·åä¸è½ä¸ºç©º",maxlength:"è¾å¥çç¨æ·åé¿åº¦å¿é¡»å°äº{maxlength}",romoteuniquecheck:"è¾å¥çç¨æ·åå·²ç»å­å¨ï¼è¯·éæ°è¾å¥",regex:"ç¨æ·åå¿é¡»ä¸º3-30ä¸ªå­ç¬?, å¯ä»¥æ¯å­æ¯ãæ°å­ãä¸åçº¿,ä»¥å­æ¯å¼å¤?"},signup_team_name:{required:"å¢éåç§°ä¸è½ä¸ºç©º",maxlength:"å¢éåç§°é¿åº¦ä¸è½å¤§äº{maxlength}"},signup_name:{required:"è¾å¥çç¨æ·åä¸è½ä¸ºç©º",maxlength:"è¾å¥çç¨æ·åé¿åº¦å¿é¡»å°äº{maxlength}",romoteuniquecheck:"è¾å¥çç¨æ·åå·²ç»å­å¨ï¼è¯·éæ°è¾å¥",regex:"ç¨æ·åå¿é¡»ä¸º3-30ä¸ªå­ç¬?, å¯ä»¥æ¯å­æ¯ãæ°å­ãä¸åçº¿,ä»¥å­æ¯å¼å¤?"},signup_password:{required:"è¾å¥çå¯ç ä¸è½ä¸ºç©?",maxlength:"è¾å¥çå¯ç é¿åº¦å¿é¡»å°äº{maxlength}",minlength:"è¾å¥çå¯ç é¿åº¦ä¸è½å°äº{minlength}"},signup_email:{required:"è¾å¥çé®ç®±ä¸è½ä¸ºç©?",romoteuniquecheck:"è¯¥é®ç®±å°åå·²ç»è¢«æ³¨åï¼è¯·éæ°è¾å?"},apply_email:{required:"è¾å¥çé®ç®±ä¸è½ä¸ºç©?",romoteuniquecheck:"è¯¥é®ç®±å°åå·²ç»è¢«æ³¨åï¼è¯·éæ°è¾å?",maxlength:"è¾å¥çé®ç®±é¿åº¦å¿é¡»å°äº{maxlength}"},team_name:{required:"å¢éåç§°ä¸è½ä¸ºç©º",maxlength:"å¢éåç§°å¿é¡»å°äº{maxlength}"},forget_email:{required:"è¾å¥çé®ç®±ä¸è½ä¸ºç©?",romoteuniquecheck:"è¯¥é®ç®±å°åä¸å­å¨ï¼è¯·éæ°è¾å?",maxlength:"è¾å¥çé®ç®±é¿åº¦å¿é¡»å°äº{maxlength}"},feedback_username:{required:"åé¦è¾å¥çå§åä¸è½ä¸ºç©?"},feedback_email:{required:"åé¦è¾å¥çé®ç®±ä¸è½ä¸ºç©?"},feedback_desc:{required:"åé¦åå®¹ä¸è½ä¸ºç©º"},display_name:{required:"å§åä¸è½ä¸ºç©º",maxlength:"å§åå¿é¡»å°äº{maxlength}"},password:{required:"è¾å¥çå¯ç ä¸è½ä¸ºç©?",minlength:"è¾å¥çå¯ç é¿åº¦ä¸è½å°äº{minlength}"},pwd_old:{required:"åå¯ç ä¸è½ä¸ºç©?",minlength:"åå¯ç é¿åº¦ä¸è½å°äº{minlength}"},pwd_new:{required:"æ°å¯ç ä¸è½ä¸ºç©?",minlength:"æ°å¯ç é¿åº¦ä¸è½å°äº{minlength}"},prj_name:{required:"é¡¹ç®åä¸è½ä¸ºç©?"},task_name:{required:"ä»»å¡åä¸è½ä¸ºç©?"},entry_select:{required:"ä»»å¡æå¨åè¡¨ä¸è½ä¸ºç©?"},new_email:{required:"æ°é®ç®±å°åä¸è½ç©?",romoteuniquecheck:"è¯¥é®ç®±å°åå·²ç»å­å¨ï¼è¯·éæ°è¾å¥"},share_email:{required:"é®ç®±å°åä¸è½ç©?"},share_desc:{required:"åäº«æè¿°ä¿¡æ¯ä¸è½ä¸ç©º"},selected_team:{required:"è¯·éæ©å¢é"},apply_team_desc:{required:"è¯·å¡«åç³è¯·å¬çå¢éçæè¿°"},confirm_password:{required:"ç¡®è®¤å¯ç ä¸è½ä¸ºç©º"},factor:{required:"å¨æéªè¯ç ä¸è½ä¸ºç©º"},recovery_code:{required:"å®å¨ç ä¸è½ä¸ºç©?"}},s=new function(){var e={required:"è¯¥éé¡¹ä¸è½ä¸ºç©º",maxlength:"è¯¥éé¡¹è¾å¥å¼é¿åº¦ä¸è½å¤§äº{maxlength}",minlength:"è¯¥éé¡¹è¾å¥å¼é¿åº¦ä¸è½å°äº{minlength}",email:"è¾å¥é®ä»¶çæ ¼å¼ä¸æ­£ç¡®",repeat:"ä¸¤æ¬¡å¡«åçå¯ç ä¸ä¸è?",regex:"è¯¥éé¡¹è¾å¥æ ¼å¼ä¸æ­£ç¡?",romoteuniquecheck:"è¯¥è¾å¥å¼å·²ç»å­å¨ï¼è¯·éæ°è¾å?"};return this.get_msg=function(n,i){var s=null;switch(_.isEmpty(a[i.name])||_.isEmpty(a[i.name][n])||(s=a[i.name][n]),n){case"maxlength":return null!==s?s.replace("{maxlength}",t(i).attr("ng-maxlength")):e.maxlength.replace("{maxlength}",t(i).attr("ng-maxlength"));case"minlength":return null!==s?s.replace("{minlength}",t(i).attr("ng-minlength")):e.minlength.replace("{minlength}",t(i).attr("ng-minlength"));default:if(null!==s)return s;if(null===e[n])throw new Error("è¯¥éªè¯è§å?("+n+")é»è®¤éè¯¯ä¿¡æ¯æ²¡æè®¾ç½®ï¼?");return e[n]}},this};n.validation_rules=s,n.activity_icon={project_create:"ai-blue icon-folder-close",project_update:"ai-yellow icon-folder-close",project_archive:"ai-dark-blue icon-archive",project_unarchive:"ai-red icon-archive",project_delete:"ai-red icon-trash",member_add:"ai-green icon-user",member_remove:"ai-red icon-user",member_join:"ai-orange icon-user",entry_create:"ai-blue icon-columns",entry_update:"ai-yellow icon-columns",entry_archive:"ai-dark-blue icon-archive",entry_unarchive:"ai-red icon-archive",entry_delete:"ai-red icon-trash",entry_restore:"ai-yellow icon-reply-all",task_create:"ai-blue icon-check",task_update:"ai-yellow icon-check",task_delete:"ai-red icon-trash",task_restore:"ai-yellow icon-reply-all",task_move:"ai-orange icon-share-alt",task_expire_set:"ai-yellow icon-time",task_expire_reset:"ai-yellow icon-time",task_complete:"ai-green icon-check-sign",task_uncomplete:"ai-red icon-check-empty",task_archive:"ai-dark-blue icon-archive",task_unarchive:"ai-red icon-archive",todo_add:"ai-blue icon-th-list",todo_remove:"ai-red icon-th-list",todo_check:"ai-green icon-check-sign",todo_uncheck:"ai-red icon-check-empty",todo_update:"ai-yellow icon-th-list",labels_add:"ai-green icon-tag",labels_remove:"ai-red icon-tag",folder_add:"ai-blue icon-folder-open-alt",folder_update:"ai-yellow icon-folder-open-alt",folder_del:"ai-red icon-folder-open-alt",file_move:"ai-orange icon-share-alt",file_attach:"ai-blue icon-paper-clip",file_detach:"ai-red icon-paper-clip",file_upload:"ai-blue icon-file",file_update:"ai-yellow icon-file",file_new_version:"ai-blue icon-upload-alt",file_delete:"ai-red icon-trash",file_restore:"ai-yellow icon-reply-all",comment_add:"ai-blue icon-comment",comment_remove:"ai-red icon-comment",watch_add:"ai-purple icon-eye-open",watch_remove:"ai-red icon-eye-open",post_create:"ai-blue icon-comments-alt",post_update:"ai-yellow icon-comments-alt",post_delete:"ai-red icon-trash",post_restore:"ai-yellow icon-reply-all",page_create:"ai-blue icon-file-text-alt",page_update:"ai-yellow icon-file-text-alt",page_new_version:"ai-blue icon-file-text-alt",page_delete:"ai-red icon-trash",page_restore:"ai-yellow icon-reply-all",event_create:"ai-blue icon-calendar",event_update:"ai-yellow icon-calendar",event_delete:"ai-red icon-trash",attendee_add:"ai-green icon-user",attendee_remove:"ai-red icon-user"},n.init_fancybox=function(){var e={maxWidth:"95%",maxHeight:"95%",openEffect:"elastic",closeEffect:"elastic",closeBtn:!1,beforeLoad:function(){_.isString(this.title)&&(this.title=this.title.replace(/\n/g,"<br>"))},helpers:{title:{type:"outside",position:"top"},buttons:{tpl:['<div id="fancybox-buttons"><ul>','<li><a class="btnPrev" title="ä¸ä¸ä¸?" href="javascript:;"></a></li>','<li><a class="btnPlay" title="å¼å§å¹»ç¯æ­æ?" href="javascript:;"></a></li>','<li><a class="btnNext" title="ä¸ä¸ä¸?" href="javascript:;"></a></li>','<li><a class="btnToggle" title="åæ¢å¤§å°" href="javascript:;"></a></li>','<li><a class="btnClose" title="å³é­" href="javascript:;"></a></li>',"</ul></div>"].join("")},thumbs:{width:50,height:50},media:{}},tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:['<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" '," webkitAllowFullScreen mozallowfullscreen allowFullScreen",n.util.isIE()?' allowtransparency="true"':"",,"></iframe>"].join(""),error:'<p class="fancybox-error">åå®¹å è½½å¤±è´¥.<br/>è¯·ç¨åéè¯?.</p>',closeBtn:'<a title="å³é­" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="ä¸ä¸ä¸?" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="ä¸ä¸ä¸?" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'}};t(".fancybox-file").fancybox(e)};var o=function(){t(document).ready(function(){n.calcHeight(),n.init_fancybox()}),t(window).load(function(){n.calcHeight()}),setInterval(function(){kzi.calcHeight()},150);var e=_.debounce(function(){kzi.calcHeight()},50);t(window).on("resize",e)};o(),e.kzi=n}(window,jQuery),function(){"use strict";angular.module("wt.bus",["ngResource"]).factory("bus",["$http",function(){return{user:{get:function(){}},team:{},project:{set_star_toggle:function(e,t,n,i){1!=e.archived&&(e.is_star===kzi.constant.star.no?(e.is_star=kzi.constant.star.yes,wt.data.project.set_prefs(e.pid,"is_star",kzi.constant.star.yes,function(e){_.isFunction(t)&&t(e)},function(){e.is_star=kzi.constant.star.no},i)):(e.is_star=kzi.constant.star.no,wt.data.project.set_prefs(e.pid,"is_star",kzi.constant.star.no,function(n){e.is_star=kzi.constant.star.no,_.isFunction(t)&&t(n)},function(){e.is_star=kzi.constant.star.yes},i)))},calculate_prj_pos:function(e,t){var n=0;return n=_.isEmpty(e)&&!_.isEmpty(t)?t.pos/2+1:_.isEmpty(t)&&!_.isEmpty(e)?e.pos+kzi.config.default_pos+1:_.isEmpty(t)||_.isEmpty(e)?kzi.config.default_pos:(t.pos+e.pos)/2+1},label:{load:function(e,t){var n=_.filter(t,function(e){return""!==e.desc});return _.each(n,function(t){var n=_.findWhere(e.labels,{name:t.name});t.assigned=n?1:0}),n},set_labels:function(e,t,n,i,a,s,o,r,l,c){var d=[{name:"blue",desc:t},{name:"green",desc:n},{name:"orange",desc:i},{name:"purple",desc:a},{name:"red",desc:s},{name:"yellow",desc:o}];wt.data.project.set_labels(e,d,function(){r(d)},l,c)}}},entry:{calculate_copy_entry_pos:function(e,t){for(var n=0;e.length>n;n++)if(e[n].entry_id===t.entry_id){if(e.length>n+1){var i=e[n+1].pos;return(i+t.pos)/2+1}return t.pos+kzi.config.default_pos+1}return t.pos+kzi.config.default_pos+1},calculate_entry_pos:function(e,t){var n=kzi.config.default_pos;if(!_.isEmpty(e))if(t){var i=_.min(e,function(e){return e.pos});_.isEmpty(i)||(n=i.pos/2+1)}else{var a=_.max(e,function(e){return e.pos});_.isEmpty(a)||(n=a.pos+kzi.config.default_pos+1)}return n},batch_assign_member:function(e,t,n,i,a,s){wt.data.entry.batch_assign(e,t.entry_id,n.uid,function(e){n.assigned_all=1,_.each(t.tasks,function(e){if(_.isEmpty(e.members))e.members=[n];else{var t=_.any(e.members,function(e){return e.uid==n.uid});t||e.members.push(n)}}),_.isFunction(i)&&i(e)},a,s)},batch_set_label:function(e,t,n,i,a,s){wt.data.entry.batch_set_label(e,t.entry_id,n.name,function(e){_.each(t.tasks,function(e){if(_.isEmpty(e.labels))e.labels=[n];else{var t=_.any(e.labels,function(e){return e.name==n.name});t||e.labels.push(n)}}),_.isFunction(i)&&i(e)},a,s)}},task:{calculate_task_pos:function(e,t){var n=kzi.config.default_pos;return t?_.isEmpty(e.tasks)||(n=_.min(e.tasks,function(e){return e.pos}).pos/2+1):_.isEmpty(e.tasks)||(n=_.max(e.tasks,function(e){return e.pos}).pos+kzi.config.default_pos+1),n},calculate_copy_task_pos:function(e,t){for(var n=0;e.tasks.length>n;n++)if(e.tasks[n].tid===t.tid){if(e.tasks.length>n+1){var i=e.tasks[n+1].pos;return(i+t.pos)/2+1}return t.pos+kzi.config.default_pos+1}return t.pos+kzi.config.default_pos+1},set_toggle_label:function(e,t,n){if(n.assigned){var i=_.findWhere(t.labels,{name:n.name});i&&(t.labels=_.reject(t.labels,function(e){return e.name===n.name})),n.assigned=0,_.isEmpty(t.tid)||wt.data.task.del_labels(e,t.tid,n.name,function(){})}else{var i=_.findWhere(t.labels,{name:n.name});i||(t.labels.push(n),n.assigned=1,_.isEmpty(t.tid)||wt.data.task.set_labels(e,t.tid,n.name,function(){}))}},get_copy_task:function(e){var t={name:e.name,tid:e.tid,entry_id:e.entry_id,pos:e.pos,comment_count:e.badges.comment_count,file_count:e.badges.file_count,todo_count:e.badges.todo_count,member_count:e.members.length,watcher_count:e.watchers.length,label_count:e.labels.length},n=!1;return t.comment_count>0?(t.keep_comments=!0,n=!0):t.keep_comments=!1,t.file_count>0?(t.keep_attachments=!0,n=!0):t.keep_attachments=!1,t.todo_count>0?(t.keep_todos=!0,n=!0):t.keep_todos=!1,t.member_count>0?(t.keep_members=!0,n=!0):t.keep_members=!1,t.watcher_count>0?(t.keep_watchers=!0,n=!0):t.keep_watchers=!1,t.label_count>0?(t.keep_labels=!0,n=!0):t.keep_labels=!1,t.show_keeps=n,t},set_is_show_data:function(e,t){return _.each(e,function(e){var n=moment(e.update_date).format("YYYY-MM-DD");n===t?e.is_show_date=!1:(e.is_show_date=!0,t=n)}),t}},file:{},event:{event_to_calEvent:function(e,t){var n={id:e.event_id,title:e.name,allDay:0,start:e.start.date.toString().substring(0,10),end:e.end.date.toString().substring(0,10),url:"",editable:!0,textColor:"#fff",borderColor:"#fbfbfb",className:"cal_event slide-trigger",backgroundColor:t,extend:{xtype:kzi.constant.xtype.event,pid:e.pid,end:e.end.date}};return n}},comment:{},calendar:{},post:{set_scope_watcher_members:function(e,t,n){if(_.isEmpty(e.members)){var i=[],a=_.pluck(n,"uid");_.each(t,function(e){e.status===kzi.constant.status.ok&&(e.watched=_.contains(a,e.uid)?!0:!1,i.push(e))}),e.members=i}},toggle_watcher_member:function(e,t,n){e.watched?(e.watched=!1,_.isEmpty(t.post_id)?t.watchers=_.reject(t.watchers,function(t){return t.uid===e.uid}):wt.data.unwatch(n,kzi.constant.xtype.post,t.post_id,e.uid,function(){t.watchers=_.reject(t.watchers,function(t){return t.uid===e.uid})})):_.isEmpty(t.post_id)?(e.watched=!0,t.watchers.push(e)):wt.data.watch(n,kzi.constant.xtype.post,t.post_id,e.uid,function(){e.watched=!0,t.watchers.push(e)})},watch_all_members:function(e,t,n,i,a,s){if(t.watchers.length!==e.length)if(_.isEmpty(t.post_id))_.each(e,function(e){e.watched=!0}),t.watchers=e,_.isFunction(i)&&i(),_.isFunction(s)&&s();else{var o=_.pluck(e,"uid");wt.data.watch_batch(n,kzi.constant.xtype.post,t.post_id,o,function(){t.watchers=e,_.isFunction(i)&&i()},a,s)}}},page:{toggle_watcher_member:function(e,t,n){e.watched?(e.watched=!1,_.isEmpty(t.page_id)?t.watchers=_.reject(t.watchers,function(t){return t.uid===e.uid}):wt.data.unwatch(n,kzi.constant.xtype.page,t.page_id,e.uid,function(){t.watchers=_.reject(t.watchers,function(t){return t.uid===e.uid})})):_.isEmpty(t.page_id)?(e.watched=!0,t.watchers.push(e)):wt.data.watch(n,kzi.constant.xtype.page,t.page_id,e.uid,function(){e.watched=!0,t.watchers.push(e)})},watch_all_members:function(e,t,n,i,a,s){if(t.watchers.length!==e.length)if(_.isEmpty(t.page_id))_.each(e,function(e){e.watched=!0}),t.watchers=e,_.isFunction(i)&&i(),_.isFunction(s)&&s();else{var o=_.pluck(e,"uid");wt.data.watch_batch(n,kzi.constant.xtype.page,t.page_id,o,function(){t.watchers=e,_.each(e,function(e){e.watched=!0}),_.isFunction(i)&&i()},a,s)}}},activity:{},notice:{},invite:{},feedback:{},watch:{get_scope_watcher_members:function(e,t){var n=[],i=_.pluck(t,"uid");return _.each(e,function(e){e.status===kzi.constant.status.ok&&(e.watched=_.contains(i,e.uid)?!0:!1,n.push(e))}),n}},member:{set_task_member_toggle:function(e,t,n,i,a,s){if(n.assigned){var o=_.findWhere(t.members,{uid:n.uid});if(_.isEmpty(t.tid))return n.assigned=0,o&&(t.members=_.reject(t.members,function(e){return e.uid===n.uid})),void 0;wt.data.task.unassign(e,t.tid,n.uid,function(e){o&&(t.members=_.reject(t.members,function(e){return e.uid===n.uid})),n.assigned=0,_.isFunction(i)&&i(e)},a,s)}else{var o=_.findWhere(t.members,{uid:n.uid});if(_.isEmpty(t.tid))return n.assigned=1,o||t.members.push(n),void 0;o||wt.data.task.assign(e,t.tid,n.uid,function(e){o=_.findWhere(t.members,{uid:n.uid}),o||(t.members.push(n),n.assigned=1,_.isFunction(i)&&i(e))},a,s)}},get_normal_members:function(e){var t=[];return _.each(e,function(e){e.status===kzi.constant.status.ok&&(e.role===kzi.constant.role.admin||e.role===kzi.constant.role.member)&&t.push(e)}),t},set_event_attendees_toggle:function(e,t,n,i,a,s){if(n.assigned){var o=_.findWhere(t.attendees,{uid:n.uid});if(_.isEmpty(t.event_id))return n.assigned=0,o&&(t.attendees=_.reject(t.attendees,function(e){return e.uid===n.uid})),_.isFunction(i)&&i(),_.isFunction(s)&&s(),void 0;wt.data.event.attendee_remove(e,t.event_id,n.uid,function(e){o&&(t.attendees=_.reject(t.attendees,function(e){return e.uid===n.uid})),n.assigned=0,_.isFunction(i)&&i(e)},a,s)}else{var o=_.findWhere(t.attendees,{uid:n.uid});if(_.isEmpty(t.event_id))return n.assigned=1,o||t.attendees.push(n),_.isFunction(i)&&i(),_.isFunction(s)&&s(),void 0;o||wt.data.event.attendee_add(e,t.event_id,n.uid,function(e){o=_.findWhere(t.attendees,{uid:n.uid}),o||(t.attendees.push(n),n.assigned=1,_.isFunction(i)&&i(e))},a,s)}}},chat:{set_is_show_data:function(e){var t=null;_.each(e,function(e){var n=moment(e.create_date).format("YYYY-MM-DDæ?");n===t?e.is_show_date=!1:(e.is_show_date=!0,t=n)})},set_message_for_file:function(e,t){3==e.body.type&&(e.body.content.type=0,e.body.content.icon=kzi.helper.build_file_icon(e.body.content),e.body.content.pid=t,e.body.content.isImg=-1==kzi.constant.get_file_icon(e.body.content)?!0:!1)},set_messages_for_file:function(e,t){_.each(e,function(e){wt.bus.chat.set_message_for_file(e,t)})}}}}])}(),function(){"use strict";wt.filter=angular.module("wt.filter",[]).filter("role",[function(){return function(e){switch(e){case kzi.constant.role.admin:return"ç®¡çå?";case kzi.constant.role.member:return"æå";case kzi.constant.role.guest:return"è®¿å®¢";default:return e}}}]).filter("prj_role",[function(){return function(e){switch(e){case kzi.constant.role.admin:return"è´è´£äº?";case kzi.constant.role.member:return"æå";case kzi.constant.role.guest:return"è®¿å®¢";default:return e}}}]).filter("wt_entity_type",[function(){return function(e){switch(e){case kzi.constant.atypes.task:return"ä»»å¡";case kzi.constant.atypes.file:return"æä»¶";case kzi.constant.atypes.post:return"è¯é¢";case kzi.constant.atypes.page:return"ææ¡£";case kzi.constant.atypes.event:return"äºä»¶";default:return""}}}]).filter("is_admin",[function(){return function(e){return e==kzi.constant.role.admin?!0:!1}}]).filter("is_pending",[function(){return function(e){return e==kzi.constant.status.pending?!0:!1}}]).filter("sex",[function(){return function(e){switch(e){case"male":return"ç·æ?";case"female":return"å¥³æ?";default:return e}}}]).filter("follow",[function(){return function(e){return e?"å·²å³æ³?":"å³æ³¨"}}]).filter("mark",[function(){return function(e){return e?"å·²æ è®?":"æ è®°"}}]).filter("name_rule",[function(){return function(e){if(e){var t=/^[(\u4e00-\u9fa5)a-z][(\u4e00-\u9fa5)a-zA-Z0-9_]{1,15}$/,n=utf8.stringToBytes(e).length;return t.test(e)?n>0&&5>n?"é¿åº¦å¿é¡»å¤§äº5å­èï¼ä¸ä¸ªæ±å­?3å­è":n>15?"é¿åº¦å¿é¡»å°äº15å­èï¼ä¸ä¸ªæ±å­?3å­è":!1:"æ¯ææ±å­ãå°åå­æ¯a-zãæ°å­?0-9ãæä¸åçº¿_"}}}]).filter("sanitize",["sanitize",function(e){return function(t){return _.isString(t)?e(t):void 0}}]).filter("length",[function(){return function(e){return e?utf8.stringToBytes(e).length:0}}]).filter("firstText",[function(){return function(e){return e?e.substring(0,1).toLocaleUpperCase():""}}]).filter("fromNow",["$filter",function(){return function(e){if(void 0!==e&&null!==e){var t=new moment,n=moment(e);return t.isSame(n,"day")?"ä»å¤© "+n.format("HH:mm"):t.add("days",1).isSame(n,"day")?"æå¤© "+n.format("HH:mm"):t.add("days",-1).isSame(n,"day")?"æ¨å¤© "+n.format("HH:mm"):t.isSame(n,"year")?n.format("MM-DD HH:mm"):n.format("YYYY-MM-DD HH:mm")}}}]).filter("momentFormat",["$filter",function(){return function(e){return moment.lang(kzi.config.lang),moment(e[0]).format(e[1])}}]).filter("dateFormat",["$filter",function(){return function(e){return void 0!==e&&null!==e?(moment.lang(kzi.config.lang),moment(e).format("YYYY-MM-DD")):void 0}}]).filter("timeFormat",["$filter",function(){return function(e){return void 0!==e&&null!==e?(moment.lang(kzi.config.lang),moment(e).format("HH:mm")):void 0}}]).filter("timeFullFormat",["$filter",function(){return function(e){return moment.lang(kzi.config.lang),moment(e).format("YYYY-MM-DD HH:mm")}}]).filter("dateFormatZHCN",["$filter",function(){return function(e){return void 0!==e&&null!==e?(moment.lang(kzi.config.lang),_.isObject(e)?e.format("YYYYå¹´MMæDDæ?"):_.isString(e)?moment(parseFloat(e)).format("YYYYå¹´MMæDDæ?"):moment(e).format("YYYYå¹´MMæDDæ?")):void 0}}]).filter("timeFormatZHCN",["$filter",function(){return function(e){return void 0!==e&&null!==e?(moment.lang(kzi.config.lang),moment(e).format("YYYYå¹´MMæDDæ? HH:mm")):void 0}}]).filter("timeFullFormatZHCN",["$filter",function(){return function(e){return void 0!==e&&null!==e?(moment.lang(kzi.config.lang),moment(e).format("YYYYå¹´MMæDDæ? HH:mm")):void 0}}]).filter("shortTimeFormat",["$filter",function(){return function(e){return void 0!==e&&null!==e?(moment.lang(kzi.config.lang),moment(e).format("MM-DD")):void 0}}]).filter("isNotUndefined",["$filter",function(){return function(e){return!_.isUndefined(e)}}]).filter("isNullOrEmpty",["$filter",function(){return function(e){return angular.isUndefined(e)||null===e||""===e||""===$.trim(e)?!0:!1}}]).filter("isNotNullOrEmpty",["$filter",function(){return function(e){return angular.isUndefined(e)||null===e||""===e||""===$.trim(e)?!1:!0}}]).filter("watch",[function(){return function(e){return e?"åæ¶å³æ³¨":"å³æ³¨"}}]).filter("indexOf",["$filter",function(){return function(e){return angular.isArray(e)?-1!==_.indexOf(e[0],e[1])?!0:!1:void 0}}]).filter("activityIcon",["$filter",function(){return function(e){var t=e;return _.isUndefined(kzi.activity_icon[e])||(t=kzi.activity_icon[e]),t}}]).filter("badgaExpire",["$filter",function(){return function(e){return e.completed||e.badges.todo_checked_count==e.badges.todo_count?"":"badge-expire-soon"}}]).filter("fullPath",["$filter",function(){return function(e){return e?0==e.indexOf("/img")?e:0==e.indexOf("http://wt-avatars")?e:0==e.indexOf("http://wt-prj")?e:kzi.config.box_url+e:void 0}}]).filter("wtBox",["$filter",function(){return function(e){return e?kzi.config.wtbox_url+e:kzi.config.default_box}}]).filter("wtBoxDownload",["$filter",function(){return function(e){if(e){var t=kzi.get_cookie("sid"),n=e.pid,i=e.version?e.version:"";return kzi.config.wtbox()+"download/"+e.fid+"?pid="+n+"&token="+t+"&vid="+i}return kzi.config.default_box}}]).filter("wtBoxView",["$filter",function(){return function(e){if(e&&e.ext){if(kzi.constant.image_exts.indexOf(e.ext)>-1){var t=kzi.get_cookie("sid"),n=e.pid;return kzi.config.wtbox()+"view/"+e.fid+"?pid="+n+"&token="+t+"&dt="+(e.dt||"")}return kzi.config.wtbox_url+e.icon}return kzi.config.default_box}}]).filter("getFileIcon",[function(){return function(e){if(_.isEmpty(e))return"";var t=e.substring(e.lastIndexOf(".")+1),n=kzi.constant.get_ext(t),i=kzi.config.wtbox_url+kzi.constant.get_file_icon({ext:n});return i}}]).filter("filterMembers",["$filter",function(){return function(e,t){if(_.isEmpty(t))return e;var n=t.toLowerCase().trim();return _.filter(e,function(e){return e.name.toLocaleString().indexOf(n)>-1||e.display_name.toLocaleString().indexOf(n)>-1})}}]).filter("fileSize",[function(){return function(e){if(!_.isUndefined(e)&&_.isNumber(parseInt(e,10))){var t="K",n=e/1024;return n>1024&&(t="M",n/=1024),n.toFixed(2)+t}return""}}]).filter("isFile",[function(){return function(e){return e===kzi.constant.file_type.file?!0:!1}}]).filter("isFolder",[function(){return function(e){return e===kzi.constant.file_type.folder?!0:!1}}]).filter("teamEdition",[function(){return function(e){switch(e){case kzi.constant.team.edition.business:return"åä¸";case kzi.constant.team.edition.free:return"åè´¹";case kzi.constant.team.edition.nonprofit:return"å¬ç";default:}}}]).filter("payType",[function(){return function(e){switch(e){case kzi.constant.payment.type.alipay:return"æ¯ä»å®?";case kzi.constant.payment.type.bank:return"ç½é¶";case kzi.constant.payment.type.credit:return"ä¿¡ç¨å?";case kzi.constant.payment.type.cash:return"ç°éæ¯ä»";case kzi.constant.payment.type.coupon:return"ä¼æ å?";default:}}}]).filter("payStatus",[function(){return function(e){switch(e){case kzi.constant.payment.status.unpaid:return"æªæ¯ä»?";case kzi.constant.payment.status.failed:return"æ¯ä»å¤±è´¥";case kzi.constant.payment.status.cancel:return"æ¯ä»åæ¶";case kzi.constant.payment.status.successed:return"æ¯ä»æå";default:}}}]).filter("payStatusIsSuccess",[function(){return function(e){return kzi.constant.payment.status.successed===e}}]).filter("memberStatus",[function(){return function(e){switch(e){case kzi.constant.status.pending:return"å·²éè¯?";case kzi.constant.status.ok:return"æ­£å¸¸";default:}}}]).filter("projectStatus",[function(){return function(e){switch(e){case kzi.constant.archived.yes:return"å·²å½æ¡?";case kzi.constant.archived.no:return"æ­£å¸¸";default:}}}]).filter("exportStatus",[function(){return function(e){switch(e){case 1:return"åå¤ä¸?";case 2:return"å°±ç»ª";case 3:return"å·²ä¸è½?";default:}}}]).filter("fileuploadErrorInfo",[function(){return function(e){switch(e){case"error":return"ä¸ä¼ å¤±è´¥";default:return e}}}]).filter("ifImgExtSetClass",[function(){return function(e){var t=e[0],n=e[1];return kzi.constant.image_exts.indexOf(t)>-1?n:""}}]).filter("getExtIcon",[function(){return function(e){var t={type:2,ext:kzi.constant.get_ext(e.substring(e.lastIndexOf(".")+1))};return kzi.config.wtbox_url+kzi.constant.get_file_icon(t)}}]).filter("GetClientName",[function(){return function(e){switch(e){case kzi.constant.client.android:return"Worktile Androidç?";case kzi.constant.client.iphone:return"Worktile iPhoneç?";default:return""}}}])}(),function(e){"use strict";void function(){var t=null,n=-1,i={show:1,error:1,close:1,click:1},a={isSupport:function(){return"Notification"in window||"webkitNotifications"in window},show:function(e,n,i){t=this.create(e,n,i),t.show()},showHTML:function(e){t=this.createHTML(e),t.show()},hide:function(e){t&&t.close(),e&&e()},destroy:function(){t=null,n=-1},checkPermission:function(){return n=webkitNotifications.checkPermission()},isPermitted:function(){return 0===this.checkPermission()},requestPermission:function(e){this.isPermitted()?e&&e():webkitNotifications.requestPermission(e)},create:function(e,t,n){return webkitNotifications.createNotification(e,t,n)},createHTML:function(e){return webkitNotifications.createHTMLNotification(e)},on:function(e,n){i[e]&&t&&t.addEventListener(e,n,!1)},un:function(e,n){i[e]&&t&&t.removeEventListener(e,n,!1)}};e||(e={}),e.DesktopNotify=a}(),e.DesktopNotify.wt_show=function(t,n,i,a){return this.isSupport()?(this.requestPermission(function(){e.DesktopNotify.show(t,n,i),"undefined"!==a&&"function"==typeof a&&(e.DesktopNotify.on("click",a),e.DesktopNotify.on("click",function(){e.DesktopNotify.hide()})),setTimeout(function(){e.DesktopNotify.hide()},1e4)}),void 0):(alert("ä½ çæµè§å¨ä¸æ¯ææ¡é¢éç¥ï¼?"),void 0)}}(window),function(){"use strict";angular.module("wt.header_controller",[]).controller("header_menu",["$rootScope","$scope","$popbox",function(e,t,n){t.js_pop_new_menu=function(e){n.popbox({target:e,templateUrl:"/ycjs/tpl/header/pop_new_menu.html",controller:["$scope","popbox",function(e,t){e.popbox=t,e.js_close=function(){t.close()}}]}).open()}}]).controller("search_ctrl",["$rootScope","$scope","$routeParams","$location","$element","$popbox","$timeout",function(e,t,n,i,a,s,o){var r=null,l=!1;t.$watch("keywords",function(t){return r&&_.isEmpty(t)?(r.close(),void 0):(null!==t&&(r?e.$broadcast("change_search_keywords",t):o(function(){l=!0,a.find(".icon-search").click()},50)),void 0)}),t.js_keydown_search=function(){_.isEmpty(t.keywords)||(i.path("/search").search({keywords:t.keywords}),t.keywords="")},t.js_up_down_enter=function(n,i){r||t.js_keydown_search(),e.$broadcast("search_key_up_down_enter",i)},t.js_show_pop_search_result=function(n){if(!_.isEmpty(t.keywords)){if(!l)return t.js_keydown_search(),void 0;l=!1,s.popbox({target:n,templateUrl:"/ycjs/tpl/header/pop_search.html",controller:["$scope","popbox","pop_data","$filter",function(t,n,a,s){r=n,t.keywords=a.scope.keywords,t.popbox=n,t.current_index=-1,t.js_close=function(){n.close()};var l=function(){t.filter_projects=_.isEmpty(t.keywords)?[]:s("filter")(e.projects,{name:t.keywords})};o(function(){l()}),t.filter_projects=[],e.$on("change_search_keywords",function(e,n){t.keywords=n,l()}),t.$on("search_key_up_down_enter",function(e,n){return 0>=t.filter_projects.length?(a.scope.js_keydown_search(),void 0):(n===kzi.constant.keyASCIIs.VK_UP?(t.current_index=t.current_index-1,-2>=t.current_index&&(t.current_index=t.filter_projects.length-1)):n===kzi.constant.keyASCIIs.VK_DOWN?(t.current_index=t.current_index+1,t.current_index>=t.filter_projects.length&&(t.current_index=-1)):n===kzi.constant.keyASCIIs.ENTER&&(t.current_index>-1&&t.filter_projects.length>t.current_index?(i.path("/project/"+t.filter_projects[t.current_index].pid).search({}),t.current_index=-1):a.scope.js_keydown_search()),void 0)}),t.js_to_search_result=function(){i.path("/search").search({keywords:t.keywords}),t.keywords="",a.scope.keywords=""}}],resolve:{pop_data:function(){return{scope:t}}}}).open().then(function(){r=null})}}}]).controller("new_feature_ctrl",["$rootScope","$scope","$routeParams","$location","$element","$popbox","$timeout",function(e,t,n,i,a,s){e.js_show_new_feature=function(e){s.popbox({target:e,templateUrl:"/ycjs/tpl/common/pop_new_feature.html",controller:["$scope","popbox",function(e,t){kzi.localData.set("wohoo_show_version",kzi.config.wohoo_show_version),e.popbox=t,e.js_close=function(){t.close()}}]}).open()}}])}(),function(){"use strict";angular.module("wt.index_controller",[]).controller("index_ctrl",["$rootScope",function(e){e.global.title="Worktile è®©å·¥ä½æ´ç®å?"
}]).controller("index_carousel_ctrl",["$rootScope","$scope",function(e,t){t.myInterval=5e3,t.slides=[{image:"/img/index/banner0.png"},{image:"/img/index/banner1.png"},{image:"/img/index/banner2.png"},{image:"/img/index/banner3.png"}]}]).controller("index_say_ctrl",["$rootScope","$scope",function(e,t){t.myInterval=5e3,t.slides=[{image:"/img/uservoice/maning.png",name:"é©¬å®",title:"OpenXLiveåå§äº?",text:["æ¸¸æå¼åéè¦é«æçæ²éåéåï¼å¨Worktileï¼ä¸åä»»å¡é½å¨æææ½æ½ä¸­æå®ï¼?","ä¸åéç¥åæéé½åæ¶éè¾¾ï¼æ²¡æå­¦ä¹ ææ¬ï¼åªæé«æåä½ã?","ç®åæ¹ä¾¿ï¼æ¯æä»¬éæ©Worktileæéè¦ççç±ã?"].join("")},{image:"/img/uservoice/ziyan.png",name:"å¾å­å²?",title:"å¾®è½¯MVP",text:["æä¸ç´å¨å¯»æ¾ä¸æ¬¾éåæä»¬å¢éä½¿ç¨çååå·¥å·ï¼ä½å ä¸ºåç§åå æåé½æ¾å¼äºï¼","ç´å°ç¨ä¸Worktileï¼ææè§æ¾å°äºæççç±ï¼","ææ¿ææå®æ¨èç»æä»¬èº«è¾¹æ¯ä¸ä½æå¢éååéæ±çæåã?"].join("")},{image:"/img/uservoice/liuyi.png",name:"åä½",title:"è®¾è®¡è¡ä¸",text:["åæ¶å¿«æ·çéç¥ï¼æ å¤ä¸å¨çå³æ³¨ï¼è¿æç®åæç¨çè¯é¢ï¼è®©å¢éæ²éçéæ é»ã?","ä¾å¦ï¼ä¸ä¸ªå°ç»èæ¯ï¼éè¿é®ä»¶ç´æ¥åå¤å³å¯åä¸è¯è®ºåè¯é¢ï¼ä¹å¯ä»¥éè¿é®ä»¶åå»ºä»»å¡ï¼?","è¿ç®ç´å¤ªç½äºãèµ¶ç´§ä¸çº¿ç§»å¨ç«¯å§ï¼ç­ä¸æ¥äºã?"].join("")},{image:"/img/uservoice/emma.png",name:"Emma",title:"ä¸ä¼ç¼ç çITäººå£«",text:["ä½ä¸ºä¸åProjectManagerï¼æç¨è¿åç§é¡¹ç®ç®¡çå·¥å·ï¼è¦ä¹å¤ªå¤æï¼è¦ä¹ä½éªå¤ªå·®ã?","Worktileè¶³å¤ç®åï¼å®å¨æ»¡è¶³æå¯¹äºé¡¹ç®ç®¡ççéæ±ï¼èä¸ä½éªä¹è¶çº§æ£ï¼?","æåæ¬¢Worktileä¸­çææ½æä½ï¼å¤ªé·äºã?"].join("")}]}])}(),function(){"use strict";var e=kzi.config.box_url;angular.module("wt.fileupload_controller",["blueimp.fileupload"]).controller("WtFileUploadController",["$scope","$http",function(t,n){t.loadingFiles=!0,t.options={url:e},n.get(e).then(function(e){t.loadingFiles=!1,t.queue=e.data.files},function(){t.loadingFiles=!1})}]).controller("FileDestroyController",["$scope","$http",function(e,t){var i,n=e.file;n.url&&(n.$state=function(){return i},n.$destroy=function(){return i="pending",t({url:kzi.config.box_url+n.delete_url,method:n.delete_type}).then(function(){i="resolved",e.clear(n)},function(){i="rejected"})})}])}(),function(){"use strict";wt.user=angular.module("wt.user_controller",[]).controller("user_login_ctrl",["$rootScope","$scope","$routeParams","$location","$window",function(e,t,n,i,a){e.global.title="ç»å½";var s=kzi.helper.get_query("name"),o=kzi.helper.get_query("return_url");t.status={message:"",code:0},t.is_login_ing=!1,o&&""!==o?t.return_path=o:null!==e.global.return_path&&(t.return_path=e.global.return_path,e.global.return_path=null);var r=function(){a.location.href=_.isEmpty(t.return_path)?"/dashboard":t.return_path};e.global.is_login&&r(),s&&(t.login_name=s),t.signin=function(n){t.is_login_ing=!0,t.status={message:"",code:0},e.login(t.login_name,t.login_password,null,function(e){e.data.session.twofactor_enabled?t.status.code=1:r()},function(e){2004===e.code?n.$errors.unshift("ç¨æ·åæå¯ç éè¯¯"):n.$errors.unshift("ä¼¼ä¹æå¡å¨åºå°å·®äºï¼è¯·éæ°æäº¤ç»å½?")},function(){t.is_login_ing=!1}),t.js_signin_twofactor=function(e){t.is_signfactoing=!0,wt.data.user.signin_twofactor(t.factor,t.login_name,t.login_password,function(){r()},function(){e.$errors.unshift("è¾å¥çå¨æéªè¯ç ä¸æ­£ç¡®ï¼è¯·éæ°è¾å¥ã?")},function(){t.is_signfactoing=!1})},t.js_signin_recovery=function(e){t.is_signrecoverying=!0,wt.data.user.signin_recovery(t.recovery_code,t.login_name,t.login_password,function(){r()},function(){e.$errors.unshift("è¾å¥çå®å¨ç ä¸æ­£ç¡®æèå·²ç»ä½¿ç¨ï¼è¯·éæ°è¾å¥ã?")},function(){t.is_signrecoverying=!1})}}}]).controller("user_signup_ctrl",["$rootScope","$scope","$routeParams","$location","$window",function(e,t,n,i,a){e.global.title="æ³¨å",t.show_signup=!0,e.global.is_login&&(a.location.href=_.isEmpty(t.return_path)?"/dashboard":t.return_path),t.js_submit=function(n){t.is_registering=!0;var i=t.signup_team_name,a=t.signup_name,s=t.signup_email,o=t.signup_password;wt.data.signup(a,s,o,i,function(n){t.team_id=n.data.team_id,e.login(t.signup_name,t.signup_password,null,function(){t.signup_success=!0,t.show_signup=!1},function(){},function(){t.is_registering=!1})},function(){n.$errors.unshift("æ³¨åéè¯¯ï¼è¯·éæ°åè¯"),t.is_registering=!1})},t.js_goto_team=function(){a.location.href="/teams/"+t.team_id}}]).controller("user_ctrl",["$rootScope","$scope","$routeParams","$http","$location","$popbox",function(e,t,n,i,a,s){t.js_pop_user_setting=function(n){s.popbox({target:n,templateUrl:"/ycjs/tpl/user/pop_user_setting.html",controller:["$scope","popbox","pop_data","$window",function(t,n){t.popbox=n,t.step=0,t.js_step=function(n){3===n&&e.load_teams(function(e){t.teams=e}),t.step=n},t.js_close=function(){n.close()},t.goto_shortcuts=function(){e.js_shortcut_key_dialog(),n.close()},t.js_user_logout=function(){e.logout(),n.close()}}],resolve:{pop_data:function(){return{scope:t}}}}).open()}}]).controller("user_forgot_ctrl",["$rootScope","$scope","$routeParams","$http","$location","$timeout",function(e,t){e.global.title="å¿è®°å¯ç ",t.send_success=!1,t.js_forget_password=function(e){t.is_sending=!1,wt.data.user.email_check(t.forget_email,function(n){return n.data===!1?(e.$errors.unshift("è¯¥é®ç®±å°åä¸å­å¨ï¼è¯·éæ°è¾å?"),$('input[name="forget_email"]').addClass("error"),void 0):(e.$invalid||(t.is_sending=!0,wt.data.user.forgot_pwd(t.forget_email,function(){t.send_success=!0},function(){t.send_fault=!0},function(){t.is_sending=!1})),void 0)})}}]).controller("user_password_reset_ctrl",["$rootScope","$scope","$routeParams","$http","$location","$window",function(e,t,n,i,a,s){t.send_success=!1;var o=s.location.search.substring(s.location.search.indexOf("token=")+6);_.isEmpty(o)&&(t.invalid_input=!0),t.js_reset_password=function(e){t.invalid_input||e.$invalid||(t.is_resetting=!0,wt.data.user.reset_pwd(o,t.reset_password,function(){t.reset_success=!0},function(){e.$errors.unshift("éç½®å¤±è´¥ï¼è¯·éæ°åè¯")},function(){t.is_resetting=!1}))},t.js_go_to_team=function(){t.reset_success&&e.login(t.signup_name,t.signup_password,null,function(e){a.path("/teams/"+e.data.team_id)},null)}}]).controller("user_email_reset_ctrl",["$rootScope","$scope","$routeParams","$http","$location","$window",function(e,t,n,i,a,s){var o=s.location.search.substring(s.location.search.indexOf("token=")+6);_.isEmpty(o)?t.invalid_input=!0:(t.is_resetting=!0,wt.data.user.reset_email(o,function(n){t.reset_success=!0,t.new_email=n.data,e.logout(!0)},function(){t.invalid_input=!0},function(){t.is_resetting=!1}))}])}(),function(){"use strict";angular.module("wt.team_controller",["ui.utils"]).controller("team_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,n,i,a,s){var o=n.team_id;t.current_menu=o,t.delete_member=function(n,i,a,s){wt.data.team.del_member(o,n.uid,function(a){t.members=_.reject(t.members,function(e){return e.uid===n.uid}),e.refresh_cache.user.remove(n.uid),_.isFunction(i)&&i(a)},a,s)},t.uninvite_member=function(n,i,a,s){wt.data.team.uninvite_member(o,n.uid,function(a){t.members=_.reject(t.members,function(e){return e.uid===n.uid}),e.refresh_cache.user.remove(n.uid),_.isFunction(i)&&i(a)},a,s)},t.js_show_member_menu=function(e,n){s.popbox({target:e,templateUrl:"/ycjs/tpl/team/pop_member_menu.html",controller:"team_member_pop_menu_ctrl",resolve:{pop_data:function(){return{$scope:t,parameters:n,team:t.current_team}}}}).open()},t.js_star_toggle=function(t,n){wt.bus.project.set_star_toggle(n,function(){var t=_.findWhere(e.projects,{pid:n.pid});t.is_star=n.is_star}),t.preventDefault(),t.stopPropagation()};var r=function(){e.load_team_from_cache(o,function(n){n&&(t.current_team=n),e.load_team(o,function(n){t.current_team=n.info,t.team_projects=n.projects,t.members=n.members,e.global.loading_done=!0,e.global.title=n.info.name},function(n){n.code===kzi.statuses.team_error.not_found.code?(e.global.title="å¢éæªæ¾å?",t.permission=kzi.constant.permission.team_not_found):n.code===kzi.statuses.error.permission_deny.code?(e.global.title="ä¸æ¯å½åå¢éæå",t.permission=kzi.constant.permission.team_not_found):wt.data.error(n)})})};r(),t.$on("socket_message_team_projects",function(e,t){t.team_id===o&&r()})}]).controller("team_member_invite_ctrl",["$rootScope","$scope","$routeParams","$location","$http",function(e,t,n,i){e.global.title="éè¯·å¢éæå?";var s=n.team_id;t.current_menu=s,t.invite_members=[],t.invite_member_roles=kzi.constant.get_member_roles();var o={role:kzi.constant.role.member,email:""};_.each([1,2,3],function(e){var n=angular.copy(o);n.input_name="member_email"+e,t.invite_members.push(n)}),t.js_add_invite_member=function(){var e=angular.copy(o);e.input_name="member_email"+(t.invite_members.length+1),t.invite_members.push(e)},t.js_delete_member=function(e,n){e.preventDefault(),t.invite_members=_.reject(t.invite_members,function(e){return e.index===n.index})},t.js_email_focus=function(e){e.$errors=[]},t.js_invite_members=function(n){if(_.findWhere(t.invite_members,{email:void 0}))return n.$errors.unshift("é®ç®±æ ¼å¼è¾å¥ä¸æ­£ç¡?"),void 0;var a=_.filter(t.invite_members,function(e){return e.email&&""!==e.email}),o="",r=0;if(_.each(a,function(e){var t=e.email.toLowerCase()+",";o.indexOf(t)>=0?(n.$errors.unshift("éè¯·é®ç®±å°åä¸è½éå¤"),r=1):o+=t}),!r){if(_.isEmpty(a))return n.$errors.unshift("è¯·è³å°è¾å¥ä¸ä¸ªéè¯·æå?"),void 0;var l=!1;if(_.each(a,function(e){return kzi.validator.isEmail(e.email)?void 0:(n.$errors.unshift("é®ç®±æ ¼å¼è¾å¥ä¸æ­£ç¡?"),l=!0,void 0)}),!l){if(t.current_team.member_count+a.length>t.current_team.sub.quota){var c="å½åå¢éçå¯ç¨éé¢åªæï¼"+(t.current_team.sub.quota-t.current_team.member_count)+"äº?";if(t.current_team.is_owner)if(t.current_team.edition===kzi.constant.team.edition.business){var d="/teams/"+t.current_team.team_id+"/admin/quota";c=c+', ç°å¨ <a href="'+d+'">ä¿®æ¹å¢ééé¢</a>'}else{var u="/teams/"+t.current_team.team_id+"/upgrade";c=c+', ç°å¨ <a href="'+u+'">åçº§æåä¸ç</a>'}else c=c+", è¯·èç³»å¢éè´è´£äºº "+t.current_team.owner.display_name;return n.$errors.unshift(c),void 0}t.is_sending=!0;var p=t.invite_message,f=[];wt.data.team.invite_member(s,a,p,f,function(){e.global.loading_done=!1,e.reload_team_members(s,function(){i.path("/teams/"+s)},null,function(){e.global.loading_done=!0})},function(){n.$errors.unshift("éè¯·å¤±è´¥ï¼è¯·éæ°åè¯?")},function(){t.is_sending=!1})}}},t.js_invite_enter=function(e,n){t.js_invite_members(n)},t.js_cancel_invite=function(){i.path("/teams/"+s)},e.load_team_from_cache(s,function(n){n&&(t.current_team=n),e.load_team(s,function(n){e.global.loading_done=!0,t.current_team=n.info},function(n){n.code===kzi.statuses.team_error.not_found.code?(e.global.title="å¢éæªæ¾å?",t.permission=kzi.constant.permission.team_not_found):n.code===kzi.statuses.error.permission_deny.code?(e.global.title="ä¸æ¯å½åå¢éæå",t.permission=kzi.constant.permission.team_not_found):wt.data.error(n)})})}]).controller("team_member_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$timeout","$popbox",function(e,t,n,i,a,s,o){e.global.title="å¢éæå";var r=n.team_id;t.selected_team_group=null,t.team_id=r,t.team_groups=[],t.team_group={};var l=function(e){_.each(angular.copy(e),function(e){e.is_selected=!1,e.is_all=!1})},c=function(n,i){o.popbox({target:n,templateUrl:"/ycjs/tpl/member/add_edit_team_group.html",controller:["$scope","popbox","pop_data",function(t,n,i){t.popbox=n,i.operation===kzi.constant.operation.update?(t.team_group=angular.copy(i.team_group),t.title="ä¿®æ¹åç»åç§°"):i.operation===kzi.constant.operation.add?(t.team_group={},t.title="æ°å»ºåç»"):(t.team_group=i.team_group,t.title="ç¡®è®¤å é¤åç»",t.is_remove_action=!0),t.js_close=function(){n.close()},t.js_input_group_keydown=function(){t.input_group_name_invalid()||t.js_save_team_group()},t.js_save_team_group=function(){i.operation===kzi.constant.operation.update?wt.data.team.update_group(r,t.team_group.group_id,t.team_group.name,function(){i.scope.team_group.name=t.team_group.name,t.js_close()},null,function(){t.group_saving=!1}):i.operation===kzi.constant.operation.add?wt.data.team.add_group(r,t.team_group.name,function(n){e.team.groups.push(n.data),t.js_close()},null,function(){t.group_saving=!1}):wt.data.team.del_group(r,t.team_group.group_id,function(){e.team.groups=_.reject(e.team.groups,function(e){return e.group_id==t.team_group.group_id}),t.js_close()},null,function(){t.group_saving=!1})}}],resolve:{pop_data:function(){return{team_group:t.team_group,team_groups:t.team_groups,operation:i,scope:t}}}}).open()};t.js_select_team_group=function(n){_.each(t.team_groups,function(e){e.is_selected=e.group_id===n.group_id?!0:!1}),t.selected_team_group=n,wt.utility.team.filter_members_by_selected_group(e.team.members,n)},t.js_add_group_pop=function(e){e.stopPropagation(),e.preventDefault(),t.js_open_group_action_menu(e,null,!0)},t.js_edit_group_pop=function(e,n){e.stopPropagation(),e.preventDefault(),t.team_group=n,c(e,kzi.constant.operation.update)},t.js_delete_group=function(e,n){e.stopPropagation(),e.preventDefault(),t.team_group=n,c(e,kzi.constant.operation.remove)},t.js_open_group_action_menu=function(n,i,a){o.popbox({target:n,templateUrl:"/ycjs/tpl/member/pop_operate_member_group.html",controller:["$scope","popbox","pop_data",function(t,n,i){t.popbox=n,t.js_close=function(){n.close()},t.step=0,t.js_step=function(e){t.step=e},t.js_to_add_group=function(){t.team_group={},t.is_add=!0,t.title="æ°å»ºåç»"},t.js_to_edit_group=function(){t.team_group=angular.copy(i.team_group),t.title="ä¿®æ¹åç»åç§°",t.is_add=!1},t.js_save_team_group=function(){1!=i.is_add?wt.data.team.update_group(r,t.team_group.group_id,t.team_group.name,function(){i.team_group.name=t.team_group.name;var a=_.findWhere(e.team.groups,{group_id:t.team_group.group_id});null!=a&&(a.name=t.team_group.name),t.js_close()},null,function(){t.group_saving=!1}):wt.data.team.add_group(r,t.team_group.name,function(n){e.team.groups.push(n.data),i.scope.team_groups.push(n.data),t.js_close()},null,function(){t.group_saving=!1})},t.js_delete_team_group=function(){wt.data.team.del_group(r,t.team_group.group_id,function(){e.team.groups=_.reject(e.team.groups,function(e){return e.group_id==t.team_group.group_id}),i.scope.team_groups=_.reject(i.scope.team_groups,function(e){return e.group_id==t.team_group.group_id}),t.js_close()})},t.js_input_group_enter=function(e,n){t.input_group_name_invalid(n)||(t.group_saving=!0,t.js_save_team_group())},t.input_group_name_invalid=function(e){return 1!=i.is_add?e.$invalid||t.team_group.name==i.team_group.name:e.$invalid},1==i.is_add?(t.js_to_add_group(),t.js_step(1)):t.js_to_edit_group()}],resolve:{pop_data:function(){return{scope:t,team_group:i,is_add:a}}}}).open(),n.preventDefault(),n.stopPropagation()},t.js_invite_member_pop=function(n){o.popbox({target:n,templateUrl:"/ycjs/tpl/member/pop_invite_team_member.html",controller:["$scope","popbox","pop_data",function(t,n,i){t.popbox=n,t.js_close=function(){n.close()},t.invite_members=[],t.invite_member_roles=kzi.constant.get_member_roles();var a={role:kzi.constant.role.member,email:""};_.each([1,2,3],function(e){var n=angular.copy(a);n.input_name="member_email"+e,t.invite_members.push(n)}),t.js_add_invite_member=function(){var e=angular.copy(a);e.input_name="member_email"+(t.invite_members.length+1),t.invite_members.push(e)},t.js_delete_member=function(e,n){e.preventDefault(),t.invite_members=_.reject(t.invite_members,function(e){return e.index===n.index})},t.js_email_focus=function(e){e.$errors=[]},t.js_invite_members=function(n){var a=_.filter(t.invite_members,function(e){return null!==e.email&&""!==e.email});if(_.isEmpty(a))return n.$errors.unshift("è¯·è³å°è¾å¥ä¸ä¸ªéè¯·æå?"),void 0;var s=!1;if(_.each(a,function(e){return kzi.validator.isEmail(e.email)?void 0:(n.$errors.unshift("é®ç®±æ ¼å¼è¾å¥ä¸æ­£ç¡?"),s=!0,void 0)}),!s){t.is_sending=!0;var o=t.invite_message;wt.data.team.invite_member(r,a,o,function(){t.js_close(),e.global.loading_done=!1,e.reload_team_members(r,function(){i.scope.reset_groups_members()},null,function(){e.global.loading_done=!0})},function(){n.$errors.unshift("éè¯·å¤±è´¥ï¼è¯·éæ°åè¯?")},function(){t.is_sending=!1})}},t.js_invite_enter=function(e,n){t.js_invite_members(n)}}],resolve:{pop_data:function(){return{scope:t}}}}).open()},t.add_ungrouped_members=function(e){var n=_.findWhere(t.team_groups,{group_id:"-1"});return null==e||0==e.length?(null!=n&&(t.team_groups=_.reject(t.team_groups,function(e){return e.group_id==n.group_id})),void 0):(null==n?t.team_groups.unshift({group_id:"-1",name:"æªåç»?",is_all:!1,is_selected:!1,hidden_in_group_menu:!0,members:e}):n.members=e,void 0)},t.reset_groups_members=function(){wt.utility.team.set_default_team_members(e.team.members),_.each(t.team_groups,function(t){t.members=_.where(e.team.members,{group_id:t.group_id})});var n=_.where(e.team.members,{group_id:"-1"});t.add_ungrouped_members(n)},t.member_draggable_options={helper:"clone",placeholder:"wt-placeholder",containment:".rightpanel",hoverClass:"t-member-state-on-draggable",zIndex:2e3,delay:300,start:function(e,t){t.helper.addClass("t-member-state-on-draggable")}},t.group_droppable_options={accept:".card-item",hoverClass:"group-state-member-over",drop:function(e,t){var n=$(e.target).attr("file-id"),i=t.helper.attr("file-id");_.isEmpty(n)||_.isEmpty(i)}},e.load_team(r,function(){e.load_team_members(r,function(n){e.global.loading_done=!0,null!=e.team.groups&&(null!=n.groups&&(t.team_groups=angular.copy(n.groups)),l(t.team_groups)),t.reset_groups_members(),t.team_groups.unshift({group_id:"all",name:"å¨é¨",is_all:!0,is_selected:!0})})},function(n){n.code==kzi.statuses.team_error.not_found.code?(e.global.title="å¢éæªæ¾å?",t.permission=kzi.constant.permission.team_not_found):wt.data.error(n)})}]).controller("team_member_pop_menu_ctrl",["$rootScope","$scope","$routeParams","$location","$timeout","popbox","pop_data",function(e,t,n,i,a,s,o){var r=n.team_id;t.current_team=o.team,t.popbox=s,t.selected_member=o.parameters,t.js_close=function(){s.close()},t.step=0,t.js_step=function(e){2===e&&(t.loading_unique_admin_prjs_done=!1,wt.data.project.get_unique_admin_prjs(r,t.selected_member.uid,function(e){t.unique_admin_prjs=e.data},null,function(){t.loading_unique_admin_prjs_done=!0})),t.step=e},t.js_set_group=function(n,i){n&&i&&(e.global.loading_done=!1,wt.data.team.set_group(r,n.uid,i.group_id,function(){n.group_id=i.group_id,wt.utility.team.filter_members_by_selected_group(e.team.members,o.$scope.selected_team_group),o.$scope.reset_groups_members(),t.js_close(),e.global.loading_done=!0},function(){e.global.loading_done=!0}))},t.js_delete_member=function(n){e.is_deleting_member=!0,o.$scope.delete_member(n,function(){t.js_close()},function(){kzi.msg.error("å é¤æååºéï¼è¯·éæ°åè¯ï¼?")},function(){e.is_deleting_member=!1})},t.js_cancel_invite=function(n){e.is_canceling_invite=!0,o.$scope.uninvite_member(n,function(){t.js_close()},function(){kzi.msg.error("åæ¶æåéè¯·åºéï¼è¯·éæ°åè¯ï¼")},function(){e.is_canceling_invite=!1})},t.js_view_member_auth=function(){e.global.loading_done=!1,wt.data.team.get_member_projects(r,t.selected_member.uid,function(n){t.member_projects_auth=n.data,e.global.loading_done=!0},function(){e.global.loading_done=!0})};var l=function(e){wt.data.team.set_role(r,t.selected_member.uid,e,function(){t.selected_member.role=e},function(){})};if(t.js_set_user_as_admin=function(){l(kzi.constant.role.admin)},t.js_set_user_as_member=function(){l(kzi.constant.role.member)},t.selected_member.status===kzi.constant.status.pending&&_.isEmpty(t.selected_member.invite_url)&&o.team.curr_role===kzi.constant.role.admin){var c=kzi.config.root_url+"/join?code=";wt.data.invite.get_invite_code(r,t.selected_member.uid,function(e){t.selected_member.invite_url=c+e.data.invite_id})}t.js_view_invite_code=function(){t.js_step(6)}}]).controller("team_add_ctrl",["$scope","$routeParams","$rootScope","$popbox","$location",function(e,t,n,i,a){n.global.loading_done=!0,n.global.title="æ°å»ºå¢é",e.js_add_team=function(t,i,s){e.is_saving_team!==!0&&(e.is_saving_team=!0,wt.data.team.add(i,s,function(e){n.teams.push(e.data),a.path("/teams/"+e.data.team_id)},null,function(){e.is_saving_team=!1}))},e.js_cancel=function(){window.history.go(-1)}}]).controller("team_setting_ctrl",["$scope","$routeParams","$rootScope","$popbox","$location",function(e,t,n,i,a){var s=t.team_id;e.js_set_current_menu=function(t){e.current_menu=t},n.load_team(s,function(t){var i=t.info;e.team=i,e.name=i.name,e.url=i.url,e.desc=i.desc,e.members=t.members,n.global.title=t.info.name,wt.data.project.get_unique_admin_prjs(s,n.global.me.uid,function(t){e.unique_admin_prjs=t.data},null,function(){n.global.loading_done=!0})},function(t){n.global.loading_done=!0,t.code==kzi.statuses.team_error.not_found.code?(n.global.title="å¢éæªæ¾å?",e.permission=kzi.constant.permission.team_not_found):t.code===kzi.statuses.error.permission_deny.code?(n.global.title="ä¸æ¯å½åå¢éæå",e.permission=kzi.constant.permission.team_not_found):wt.data.error(t)}),e.js_quit_team=function(t,i,s){e.is_quiting!==!0&&s===i&&(e.is_quiting=!0,wt.data.team.leave(e.team.team_id,function(){n.refresh_cache.team.leave(e.team.team_id),a.path("/dashboard")},null,function(){e.is_quiting=!1}))}}]).controller("free_apply_ctrl",["$scope","$routeParams","$rootScope","$popbox","$location",function(e,t,n){n.global.title="ç³è¯·å¬çç?",e.team_type=1,e.team_desc="",n.load_teams(function(t){e.owner_teams=_.filter(t,function(e){return e.is_owner}),n.global.loading_done=!0}),e.js_free_apply=function(){e.is_applying!==!0&&(e.apply_success=!0,e.is_applying=!0,wt.data.team.commonweal_apply(e.selected_team.team_id,e.team_type,e.team_desc,function(){e.apply_success=!0},null,function(){e.is_saving_team=!1}))}}])}(),function(){"use strict";angular.module("wt.team_admin_controller",["ui.utils"]).controller("team_admin_summary_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,n,i){e.global.title="å¢éè®¾ç½®";var o=n.team_id;t.team_id=o,t.current_menu="summary",e.global.loading_done=!0,wt.data.team.summary(o,function(e){t.team=e.data.info,t.name=t.team.name,t.desc=t.team.desc,t.sub=e.data.sub;var n=100*t.team.member_count/t.sub.quota,i=100*t.team.invite_count/t.sub.quota;t.member_stacked=[{value:n,type:"success"},{value:i,type:"warning"}];var a=100*t.team.active_count/t.team.project_count,s=100*t.team.archived_count/t.team.project_count;t.project_stacked=[{value:a,type:"success"},{value:s,type:"info"}],t.part_loading_done=!0},function(){i.path("/teams/"+o)})}]).controller("team_admin_basic_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,n,i,a,s){e.global.title="å¢éè®¾ç½®";var o=n.team_id;t.team_id=o,t.current_menu="basic",t.dismiss_step=1,t.transfer_step=1,e.global.loading_done=!0,wt.data.team.summary(o,function(e){t.team=e.data.info,t.name=t.team.name,t.desc=t.team.desc,t.sub=e.data.sub,t.part_loading_done=!0},function(){i.path("/teams/"+o)}),t.js_set_team=function(n,i,a,s){a||(a=""),s||(s=""),(t.team.name!==i||t.team.desc!==a||t.team.url!==s)&&(t.is_team_saveing=!0,wt.data.team.update(o,i,a,s,function(n){t.team.name=n.data.name,t.team.desc=n.data.desc,t.team.url=n.data.url;var r=_.findWhere(e.teams,{team_id:o});r&&(r.name=i,r.desc=a,r.url=s),kzi.msg.success("ä¿®æ¹å¢éåºæ¬ä¿¡æ¯æåï¼?")},function(){kzi.msg.error("ä¿®æ¹å¢éåºæ¬ä¿¡æ¯å¤±è´¥ï¼?")},function(){t.is_team_saveing=!1}))},t.js_transfer_pop=function(n){s.popbox({target:n,placement:"bottom",templateUrl:"/ycjs/tpl/team/pop_transfer_team.html",controller:["$scope","popbox","pop_data",function(t,n,i){t.popbox=n,t.step=0,t.js_step=function(e){t.step=e},t.members_loading_done=!1,t.team_members=null,e.load_team_members(o,function(n){t.team_members=_.reject(n.members,function(t){return t.uid===e.global.me.uid||t.status===kzi.constant.status.pending})},function(){t.members_loading_done=!0},function(){t.members_loading_done=!0}),t.js_to_transfer=function(){t.members_loading_done=!1,t.team_members=null,e.load_team_members(o,function(n){t.team_members=_.reject(n.members,function(t){return t.uid===e.global.me.uid||t.status===kzi.constant.status.pending})},function(){t.members_loading_done=!0},function(){t.members_loading_done=!0})},t.js_to_transfer_confirm=function(e){t.selected_member=e,i.scope.selected_member=e,i.scope.js_transfer_step(2),n.close()},t.js_close=function(){n.close()}}],resolve:{pop_data:function(){return{scope:t}}}}).open()},t.js_dismiss_step=function(e){t.dismiss_step=e},t.js_transfer_step=function(e){t.transfer_step=e},t.js_dismiss=function(n,a){t.is_dismissing!==!0&&a===n&&(t.is_dismissing=!0,wt.data.team.dismiss(o,function(){e.refresh_cache.team.dismiss(o),i.path("/dashboard")},null,function(){t.is_dismissing=!1}))},t.js_transfer=function(){t.is_transferring=!0,wt.data.team.transfer(o,t.selected_member.uid,function(){t.team.is_owner=0,t.team.owner=t.selected_member,i.path("/teams/"+o)},null,function(){t.is_transferring=!1})}}]).controller("team_admin_billing_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,n,i){e.global.title="å¢éè®¾ç½®",t.current_menu="billing";var o=n.team_id;t.team_id=o,wt.data.team.summary(o,function(n){t.team=n.data.info,t.sub=n.data.sub,e.global.loading_done=!0,wt.data.team.get_billings(o,1,function(e){t.billings=e.data.billings})},function(){i.path("/teams/"+o)})}]).controller("team_admin_payment_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,n,i){e.global.title="å¢éè®¾ç½®",t.current_menu="payment";var o=n.team_id;t.team_id=o;var r=function(e){t.payments=null,wt.data.team.get_payments(o,e,function(n){t.payments=n.data.payments,(1===e||"1"===e)&&(t.payments_pagination_opts={totalCount:n.data.total_count,opts:{callback:function(e){r(e+1)}}})})};wt.data.team.summary(o,function(n){t.team=n.data.info,t.sub=n.data.sub,e.global.loading_done=!0,r(1)},function(){i.path("/teams/"+o)}),t.js_cancel_payment=function(e){t.payments=_.reject(t.payments,function(t){return t.pay_id===e.pay_id}),wt.data.team.cancel_payment(o,e.pay_id,function(){})}}]).controller("team_admin_members_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,n,i,a,s){e.global.title="å¢éè®¾ç½®",t.current_menu="members";var o=n.team_id;t.team_id=o,e.global.loading_done=!0,wt.data.team.summary(o,function(e){t.team=e.data.info,t.sub=e.data.sub;var n=100*t.team.member_count/t.sub.quota,i=100*t.team.invite_count/t.sub.quota;t.stacked=[{value:n,type:"success"},{value:i,type:"warning"}],wt.data.team.get_account_members(o,function(e){t.account_members=e.data},null,function(){t.part_loading_done=!0})},function(){i.path("/teams/"+o)}),t.delete_member=function(n,i,a,s){wt.data.team.del_member(o,n.uid,function(a){t.account_members=_.reject(t.account_members,function(e){return e.uid===n.uid}),e.refresh_cache.user.remove(n.uid),_.isFunction(i)&&i(a)},a,s)},t.uninvite_member=function(n,i,a,s){wt.data.team.uninvite_member(o,n.uid,function(a){t.account_members=_.reject(t.account_members,function(e){return e.uid===n.uid}),e.refresh_cache.user.remove(n.uid),_.isFunction(i)&&i(a)},a,s)},t.js_show_member_menu=function(e,n,i){s.popbox({target:e,templateUrl:"/ycjs/tpl/team/pop_member_menu.html",controller:"team_member_pop_menu_ctrl",resolve:{pop_data:function(){return{$scope:t,parameters:n,team:i}}}}).open()}}]).controller("team_admin_change_quota_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,n,i){e.global.title="å¢éè®¾ç½®",t.current_menu="members";var o=n.team_id;t.team_id=o,e.global.loading_done=!0,wt.data.team.summary(o,function(e){t.team=e.data.info,t.sub=e.data.sub,t.team_quota=e.data.sub.quota,t.part_loading_done=!0},function(){i.path("/teams/"+o)}),t.js_change_team_quota=function(){return null==t.team_quota||isNaN(t.team_quota)?(t.change_quota_error="å¢éæåéé¢å¿é¡»ä¸ºæ°å­?",void 0):t.team.member_count+t.team.invite_count>t.team_quota?(t.change_quota_error="å¢éæåéé¢å¿é¡»å¤§äºæèç­äºå½åå¢éæåæ°",void 0):(t.is_changing=!0,wt.data.team.change_subscription(o,t.team_quota,function(e){e.data===kzi.constant.subscription.step.pay_online?i.path("/teams/"+o+"/pay"):i.path("/teams/"+o+"/admin/summary")},null,function(){t.is_changing=!1}),void 0)},t.js_team_quota_focus=function(){t.change_quota_error=null}}]).controller("team_admin_projects_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,n,i){e.global.title="å¢éè®¾ç½®",t.current_menu="projects";var o=n.team_id;t.team_id=o,e.global.loading_done=!0,wt.data.team.summary(o,function(e){t.team=e.data.info,t.sub=e.data.sub;var n=100*t.team.active_count/t.team.project_count,i=100*t.team.archived_count/t.team.project_count;t.stacked=[{value:n,type:"success"},{value:i,type:"info"}],wt.data.team.get_account_projects(o,function(e){t.account_projects=e.data},null,function(){t.part_loading_done=!0})},function(){i.path("/teams/"+o)})}]).controller("team_admin_security_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,n,i){e.global.title="å¢éè®¾ç½®",t.current_menu="security";var o=n.team_id;t.team_id=o,e.global.loading_done=!0;var r=function(e){_.isEmpty(e)||_.each(e,function(e){switch(e.template){case"team_member_add":e.verb_display="æ·»å å¢éæå ( "+e.member.display_name+" )";break;case"team_member_remove":e.verb_display="ç§»é¤å¢éæå ( "+e.member.display_name+" )";break;case"team_upgrade":e.verb_display="åçº§å¢éå°åä¸ç";break;case"team_degrade":e.verb_display="éçº§å¢éå°åè´¹ç";break;case"project_member_add":e.verb_display="æ·»å é¡¹ç®æå ( "+e.project.name+" | "+e.member.display_name+" )";break;case"project_member_remove":e.verb_display="ç§»é¤é¡¹ç®æå ( "+e.project.name+" | "+e.member.display_name+" )";break;case"project_add":e.verb_display="æ·»å é¡¹ç® ("+e.project.name+" )";break;case"project_delete":e.verb_display="å é¤é¡¹ç® ("+e.project.name+" )"}})},l=function(e){t.security_histories=null,t.loading_histories_done=!1,wt.data.team.get_security_histories(o,e,function(n){r(n.data.histories),t.histories=n.data.histories,(1===e||"1"===e)&&(t.totalCount=n.data.totalCount,t.security_pagination_opts={totalCount:n.data.total_count,opts:{callback:function(e){l(e+1)}}})},null,function(){t.loading_histories_done=!0,t.part_loading_done=!0})};wt.data.team.summary(o,function(e){t.team=e.data.info,t.sub=e.data.sub,l(1)},function(){i.path("/teams/"+o)})}]).controller("team_admin_export_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,n,i){e.global.title="å¢éè®¾ç½®",t.current_menu="export";var o=n.team_id;t.team_id=o,e.global.loading_done=!0;var r=function(e){t.bulkexports=null,t.part_loading_done=!1,wt.data.team.get_bulk_export(o,e,function(n){t.bulkexports=n.data.bulkexports,(1===e||"1"===e)&&(t.totalCount=n.data.totalCount,t.exports_pagination_opts={totalCount:n.data.total_count,opts:{callback:function(e){r(e+1)}}})},null,function(){t.part_loading_done=!0})};wt.data.team.summary(o,function(e){t.team=e.data.info,t.sub=e.data.sub,r(1)},function(){i.path("/teams/"+o)},function(){}),t.js_export_data=function(){t.bulk_exporting=!0,wt.data.team.bulk_export(o,function(){t.bulk_export_success=!0,r(1)},null,function(){t.bulk_exporting=!1})}}]).controller("team_admin_consultant_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,n,i){e.global.title="å¢éè®¾ç½®",t.current_menu="consultant";var o=n.team_id;t.team_id=o,e.global.loading_done=!0,wt.data.team.summary(o,function(e){t.team=e.data.info,t.sub=e.data.sub,t.part_loading_done=!0},function(){i.path("/teams/"+o)})}]).controller("team_admin_pay_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox","$timeout","$dialog",function(e,t,n,i,a,s,o,r){e.global.title="å¢éè®¾ç½®",t.current_menu="payment";var l=n.team_id;t.team_id=l,e.global.loading_done=!0,wt.data.team.summary(l,function(e){t.team=e.data.info,t.sub=e.data.sub,wt.data.team.payment(l,function(e){t.payment_no=e.data,t.part_loading_done=!0}),t.pay_amounts=[{amount:12*10*t.sub.quota,month_count:12,display_time:"ä¸å¹?",presentation:0},{amount:6*10*t.sub.quota,month_count:6,display_time:"åå¹´",presentation:0},{amount:3*10*t.sub.quota,month_count:3,display_time:"3ä¸ªæ",presentation:0},{amount:10*t.sub.quota,month_count:1,display_time:"1ä¸ªæ",presentation:0}]},function(){i.path("/teams/"+l)}),t.js_selected_amount=function(e,n){t.selected_amount=e,n.$errors=[]},t.js_pay=function(e){if(_.isEmpty(t.selected_amount))return e.$errors=["è¯·éæ©åå¼éé¢ï¼"],void 0;var n=r.dialog({backdrop:!0,keyboard:!0,backdropClick:!1,templateUrl:"/ycjs/tpl/common/pay_dialog.html",controller:["$scope",function(e){e.js_pay_complete=function(){n.close(),i.path("teams/"+l+"/admin/payment")},e.js_pay_exception=function(){n.close(),i.path("teams/"+l+"/admin/payment")}}]});n.open()}}]).controller("team_admin_pay_coupon_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox","$timeout","$dialog",function(e,t,n,i){e.global.title="å¢éè®¾ç½®",e.global.loading_done=!0,t.current_menu="payment";var l=n.team_id;t.team_id=l,wt.data.team.summary(l,function(e){t.team=e.data.info,t.sub=e.data.sub,t.part_loading_done=!0
},function(){i.path("/teams/"+l)}),t.js_redeem_coupon_focus=function(){t.redeem_coupon_error=null},t.js_redeem_coupon=function(){return _.isEmpty(t.coupon_code)?(t.redeem_coupon_error="è¯·è¾å¥ä»£éå¸åºåå?",void 0):(t.is_redeeming=!0,wt.data.team.redeem_coupon(l,t.coupon_code,function(){i.path("/teams/"+l+"/admin/payment")},function(){t.redeem_coupon_error="ä»£éå¸å·²ç»ä½¿ç¨æèä¸å­å¨ï¼è¯·éæ°è¾å¥ï¼?"},function(){t.is_redeeming=!1}),void 0)}}]).controller("team_admin_upgrade_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,n,i){e.global.title="å¢éè®¾ç½®",t.current_menu="summary";var o=n.team_id;t.team_id=o,e.global.loading_done=!0,wt.data.team.summary(o,function(e){t.team=e.data.info,t.sub=e.data.sub,t.part_loading_done=!0},function(){i.path("/teams/"+o)}),t.js_upgrade_team=function(){return null==t.team_quota||isNaN(t.team_quota)?(t.upgrade_error="å¢éæåéé¢å¿é¡»ä¸ºæ°å­?",void 0):t.team.member_count+t.team.invite_count>t.team_quota?(t.upgrade_error="å¢éæåéé¢å¿é¡»å¤§äºæèç­äºå½åå¢éæåæ°",void 0):(t.is_upgrading=!0,wt.data.team.upgrade(o,t.team_quota,function(e){e.data===kzi.constant.subscription.step.pay_online?i.path("/teams/"+o+"/pay"):i.path("/teams/"+o+"/admin/summary")},null,function(){t.is_upgrading=!1}),void 0)},t.js_team_quota_focus=function(){t.upgrade_error=null}}]).controller("team_admin_degrade_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t,n,i){e.global.title="å¢éè®¾ç½®",t.current_menu="summary",e.global.loading_done=!0;var o=n.team_id;t.team_id=o,wt.data.team.summary(o,function(e){t.team=e.data.info,t.sub=e.data.sub,t.team_quota=e.data.quota,t.team.member_count+t.team.invite_count>10&&(t.degrade_disabled=!0,t.degrade_error="æ¨å½åå¢éçæåäººæ°å·²ç»å¤§äºåè´¹ççæé«éé¢?10äººï¼å é¤æåååæè½éçº§æåè´¹ç"),t.part_loading_done=!0},function(){i.path("/teams/"+o)}),t.js_degrade_team=function(){t.is_degrading=!0,wt.data.team.degrade(o,function(){i.path("/teams/"+o+"/admin/summary")},function(){t.degrade_error="éçº§å¤±è´¥ï¼è¯·éæ°åè¯"},function(){t.is_degrading=!1})}}])}(),function(){"use strict";wt.project=angular.module("wt.project_controller",["ui.bootstrap","ui.utils","blueimp.fileupload","ui.calendar"]).controller("project_add_ctrl",["$scope","$routeParams","$rootScope","$popbox","$location",function(e,t,n){n.global.title="æ°å»ºé¡¹ç®";var s=t.team_id;e.current_menu=s?s:"all",e.is_add_team=!1,n.load_teams(function(t){e.owner_teams=_.where(t,{curr_role:1});var n=_.findWhere(e.owner_teams,{team_id:s});e.current_team=n?n:{team_id:"",name:"ç¹å»éæ©å¢é"}},null,function(){n.global.loading_done=!0}),e.js_add_prj=function(t,i,a){return _.isEmpty(e.current_team.team_id)?(t.$errors.unshift("è¯·éæ©ä¸ä¸ªå¢é?"),void 0):(a&&null!==a||(a=""),e.is_saving_project=!0,wt.data.project.create(e.current_team.team_id,i,a,function(t){t.data.curr_role=1,t.data.is_star=0;var i=_.findWhere(n.projects,{pid:t.data.pid});i||n.projects.push(t.data),e.js_cancel()},null,function(){e.is_saving_project=!1}),void 0)},e.js_open_add_team=function(){e.is_add_team=!0},e.js_cancel_add_team=function(){e.is_add_team=!1},e.js_add_team=function(t,i){e.is_saving_team=!0,wt.data.team.add(i,"",function(t){e.owner_teams.push(t.data);var i=_.findWhere(n.teams,{team_id:t.data.team_id});i||n.teams.push(t.data),e.current_team=t.data,e.is_add_team=!1},null,function(){e.is_saving_team=!1})},e.js_change_team=function(t,n){t.$errors=[],e.current_team=n},e.js_cancel=function(){window.history.go(-1)}}])}(),function(){"use strict";wt.project.controller("project_ctrl",["$scope","$routeParams","$rootScope","$popbox","$compile","$dialog","$location","socket","$timeout",function(e,t,n,i,a,s,o,r,l){function w(t){var n=null;return _.isEmpty(e.entries)?null:(_.each(e.entries,function(e){e.entry_id===t&&(n=e)}),n)}function k(e){if(0==e.length)return null;var t=e.attr("entry-id");return null==t||""==t?null:w(t)}function x(e,t,n,i){e.pos=i,t.entry_id!==n.entry_id&&(e.entry_id=n.entry_id,e.entry_name=n.name,_.isEmpty(n.tasks)?n.tasks=[e]:n.tasks.push(e),t.tasks=_.reject(t.tasks,function(t){return t.tid===e.tid}),t.tasks=_.sortBy(t.tasks,function(e){return e.pos})),n.tasks=_.sortBy(n.tasks,function(e){return e.pos})}function j(e,t,n,i,a,s){x(t,n,i,a),wt.data.task.move(e,t.tid,n.entry_id,i.entry_id,a,function(){_.isFunction(s)&&s()})}function B(){e.entries_sort_options={appendTo:$(".layout_content_main"),containment:".layout_content_main",placeholder:"wt-entry-placeholder",helper:"clone",revert:10,dropOnEmpty:!0,tolerance:"pointer",distance:"4",delay:"75",handle:".entry_header",disabled:!1,accept:".entry",over:function(e,t){t.placeholder.parents(".mCSB_container").not(".mCS_no_scrollbar")&&$.each(t.placeholder.parents(".mCustomScrollbar"),function(){if($(this).data("horizontalScroll")){var t=$(this).offset().left,n=$(this).width(),i=$(".wt-entry-placeholder").width(),a=$(".wt-entry-placeholder").position().left;t+i+50>e.pageX&&$(this).mCustomScrollbar("scrollTo",a-i-100),e.pageX+i/2>t+n&&$(this).mCustomScrollbar("scrollTo",a+i+50)}})},start:function(e,t){t.item.addClass("picked-up"),$(".wt-entry-placeholder").css({height:t.item.css("height"),width:t.item.outerWidth()})},stop:function(e,t){t.item.removeClass("picked-up");var n=k(t.item),i=t.item.attr("entry-id"),a=k(t.item.prev()),s=k(t.item.next()),o=0;o=null==a?s.pos/2+1:null==s?a.pos+kzi.config.default_pos+1:(s.pos+a.pos)/2+1,n.pos!==o&&(n.pos=o,wt.data.entry.change_pos(c,i,o,function(){v()}))}}}function V(){e.tasks_sort_options={appendTo:$(".layout_content_main"),helper:"clone",revert:10,containment:".layout_content_main",connectWith:".entry-tasks",placeholder:"wt-task-placeholder",tolerance:"pointer",dropOnEmpty:!0,delay:"75",over:function(e,t){t.placeholder.parents(".mCSB_container").not(".mCS_no_scrollbar")&&$.each(t.placeholder.parents(".mCustomScrollbar"),function(){var t=$(this).offset().top,n=$(this).offset().left,i=$(this).height(),a=$(this).width(),s=$(this).find(".wt-task-placeholder").position().top,o=$(this).find(".wt-task-placeholder").height(),r=$(this).find(".wt-task-placeholder").width();if($(this).data("horizontalScroll")){var l=$(".wt-task-placeholder").parents(".entry").position().left;n+r/2>e.pageX&&$(this).mCustomScrollbar("scrollTo",l-r),e.pageX+r/2>n+a&&$(this).mCustomScrollbar("scrollTo",l+r)}else o>e.pageY-t&&$(this).mCustomScrollbar("scrollTo",s-20),o>t+i-e.pageY&&$(this).mCustomScrollbar("scrollTo",s+20)})},start:function(e,t){$(".wt-task-placeholder").css({height:t.item.outerHeight()}),t.item.addClass("picked-up")},stop:function(e,t){t.item.removeClass("picked-up")},update:function(t,n){e.$apply(function(){var t=n.item.attr("task-id"),i=_.findWhere(e.project.tasks,{tid:t}),a=0,s=n.item.prev().attr("task-id"),o=n.item.next().attr("task-id");if(_.isEmpty(s)&&_.isEmpty(o))a=kzi.config.default_pos;else if(_.isEmpty(s)){var r=_.findWhere(e.project.tasks,{tid:o});a=parseInt(r.pos)/2+1}else if(_.isEmpty(o)){var l=_.findWhere(e.project.tasks,{tid:s});a=l.pos+kzi.config.default_pos+1}else{var r=_.findWhere(e.project.tasks,{tid:o}),l=_.findWhere(e.project.tasks,{tid:s});a=(r.pos+l.pos)/2+1}var d=n.item.parents(".entry").attr("entry-id"),u=_.findWhere(e.entries,{entry_id:d}),p=_.findWhere(e.entries,{entry_id:i.entry_id});(d!==p.entry_id||a!==i.pos)&&u&&(d!==p.entry_id&&n.item.remove(),j(c,i,p,u,a))})}}}function X(){e.member_drop_options={accept:".avatar",over:function(){},out:function(){},hoverClass:"task-state-member-over",drop:function(t,i){var a=t.pageX;if(!(a>$(".slide-content").offset().left||a>$(".layout_right_sidebar").offset().left)){var s=$(t.target).attr("task-id");e.$apply(function(){_.each(e.entries,function(e){_.each(e.tasks,function(e){if(e.tid==s){i.helper.context.title;var a=$(i.helper.context).attr("member-id");if(null==e.members)e.members=[];else{var o=_.findWhere(e.members,{uid:a});if(null!=o)return}n.load_project_members(c,function(t){var n=_.findWhere(t.members,{uid:a});e.members.unshift(n),wt.data.task.assign(c,e.tid,a,function(){})})}})})})}}}}var c=t.pid,d=t.tid,p=0,f=!1,h=null,m=null,g=!1;n.pid=c;var v=function(){_.isEmpty(e.entries)||(e.entries=_.sortBy(e.entries,function(e){return e.pos}),n.project.entries=e.entries)},b=function(e){l(function(){var t="#task_main_"+e;$(t).parents(".mCustomScrollbar").eq(0).mCustomScrollbar("scrollTo",t)})},y=function(e){l(function(){var t="#entry_main_"+e;$(t).parents(".mCustomScrollbar").last().mCustomScrollbar("scrollTo",t)})};e.filter_turn_on=!1;var C={texts:[],labels:[],members:[],date:""},S=function(e,t){var n=!0;if(t&&t.texts.length>0&&(n=!1,_.each(t.texts,function(t){t.length>0&&e.name.toLowerCase().indexOf(t.trim())>-1&&(n=!0)})),n&&t.labels.length>0&&(_.isEmpty(e.labels)?n=!1:(n=!1,_.each(t.labels,function(t){var i=_.any(e.labels,function(e){return e.name===t.name});i&&(n=!0)}))),n&&t.members.length>0&&(_.isEmpty(e.members)?n=!1:(n=!1,_.each(t.members,function(t){var i=_.any(e.members,function(e){return e.uid==t.uid});i&&(n=!0)}))),n){var i=moment(),a=moment(e.expire_date);if("today"===t.date){var s=a.isSame(i,"day");n=s?!0:!1}else if("tomorrow"===t.date){var o=a.isSame(i.add("days",1),"day");n=o?!0:!1}else if("week"===t.date){var r=moment().endOf("week").add("days",1),l=moment().startOf("week").add("days",1);n=a>=l&&r>=a?!0:!1}else if("nextweek"==t.date){var r=moment().endOf("week").add("days",8),l=moment().startOf("week").add("days",8);n=a>=l&&r>=a?!0:!1}else if("month"==t.date){var c=moment().endOf("month"),d=moment().startOf("month");n=a>=d&&c>=a?!0:!1}else if("due"==t.date){var s=a.isSame(i,"day");n=!s&&e.expire_date&&i>a&&a>0?!0:!1}}e.is_filter=n?!1:!0},D=function(){_.isEmpty(e.entries)||(e.filter_turn_on=C.texts.length>0||C.labels.length>0||C.members.length>0||C.date.length>0?!0:!1,_.each(e.entries,function(e){_.isEmpty(e.tasks)||_.each(e.tasks,function(e){S(e,C)})}))},E=function(t,n){if(_.isEmpty(e.filter_turn_on)){var i=!0;if("assign_me"===e.current_filter_type)i=_.any(t.members,function(e){return e.uid===n.uid});else if("my_watch"===e.current_filter_type)i=_.any(t.watchers,function(e){return e.uid===n.uid});else if("my_create"===e.current_filter_type)i=n.uid===t.uid;else if(C.texts.length>0||C.labels.length>0||C.members.length>0||C.date.length>0)return S(t,C),void 0;t.is_filter=i?!1:!0}},T=function(t){_.isEmpty(e.entries)||_.each(e.entries,function(e){_.isEmpty(e.tasks)||_.each(e.tasks,function(e){var n=!0;_.isEmpty(t)||(n=_.any(e.members,function(e){return e.uid==t.uid})),e.is_filter=n?!1:!0})})},z=function(t){_.isEmpty(e.entries)||_.each(e.entries,function(e){_.isEmpty(e.tasks)||_.each(e.tasks,function(e){var n=!0;_.isEmpty(t)||(n=_.any(e.watchers,function(e){return e.uid==t.uid})),e.is_filter=n?!1:!0})})},M=function(t){_.isEmpty(e.entries)||_.each(e.entries,function(e){_.isEmpty(e.tasks)||_.each(e.tasks,function(e){var n=!0;_.isEmpty(t)||(n=t.uid===e.uid),e.is_filter=n?!1:!0})})},P=function(){C.texts=[],C.labels=[],C.members=[],C.date="",D()},A=function(t){var i=null;_.each(t.tasks,function(e){e.is_filter=!1,e.selected=!1,d===e.tid&&(i=e)}),_.each(t.entries,function(e){var n=_.where(t.tasks,{entry_id:e.entry_id});n&&(e.tasks||(e.tasks=[]),e.tasks=n)}),e.entries=t.entries,_.each(e.entries,function(e){e.tasks=_.sortBy(e.tasks,function(e){return e.pos})}),n.global.loading_done=!0,i&&l(function(){n.locator.to_task(c,i.tid,!1)}),_.isEmpty(e.filter_turn_on)&&("assign_me"===e.current_filter_type?T(n.global.me):"my_watch"===e.current_filter_type?z(n.global.me):"my_create"===e.current_filter_type?M(n.global.me):(C.texts.length>0||C.labels.length>0||C.members.length>0||C.date.length>0)&&D())};e.$on("socket_message_entry_list",function(){A(n.project)}),e.$on("socket_message_task_move",function(){A(n.project)}),e.$on("socket_message_task_add",function(t,i){var a=_.findWhere(e.entries,{entry_id:i.task.entry_id});if(a){var s=_.findWhere(a.tasks,{tid:i.task.tid});s||(E(i.task,n.global.me),a.tasks.push(i.task),a.tasks=_.sortBy(a.tasks,function(e){return e.pos}))}}),e.$on("socket_message_task_delete",function(t,n){_.each(e.entries,function(e){var t=_.findWhere(e.tasks,{tid:n.tid});t&&(e.tasks=_.reject(e.tasks,function(e){return e.tid===n.tid}))})}),e.$on("socket_message_project_member_remove",function(t,n){_.each(e.entries,function(e){e.tasks&&e.tasks.length>0&&_.each(e.tasks,function(e){e.members&&e.members.length>0&&(e.members=_.reject(e.members,function(e){return e.uid==n.uid}))})})});var O=function(){if(!_.isEmpty(e.entries)){n.project.entryIndex=0;for(var t=0;e.entries.length>t;t++)if(!_.isEmpty(e.entries[t].tasks)){n.project.entryIndex=t,n.project.currentEntry=e.entries[t],n.project.currentTask=n.project.currentEntry.tasks[0],n.project.taskIndex=0,n.project.currentTask.selected=!0;break}}},I=function(){l(function(){$(".task-selected").parents(".mCustomScrollbar").eq(0).mCustomScrollbar("scrollTo",".task-selected")})},F=function(){l(function(){$(".entry-selected").parents(".mCustomScrollbar").last().mCustomScrollbar("scrollTo",".entry-selected")})},N=function(e){_.isEmpty(n.project.currentEntry)||(n.project.currentEntry.selected=!1),n.project.currentEntry=e,n.project.currentEntry.selected=!0},H=function(e){_.isEmpty(n.project.currentTask)||(n.project.currentTask.selected=!1),n.project.currentTask=e,n.project.currentTask.selected=!0},L=function(){_.isEmpty(n.project.currentEntry)||(n.project.currentEntry.selected=!1,n.project.entryIndex=0,n.project.currentEntry=null),_.isEmpty(n.project.currentTask)||(n.project.currentTask.selected=!1,n.project.taskIndex=0,n.project.currentTask=null)},R=function(t){if(e.entries.length>t+1){var i=e.entries[t+1];_.isEmpty(i.tasks)?R(t+1):(n.project.entryIndex=t+1,N(i),n.project.taskIndex=0,H(i.tasks[0]),F(),I())}},q=function(t,i){if(t>0){var a=e.entries[t-1];_.isEmpty(a.tasks)?q(t-1):(n.project.entryIndex=t-1,N(a),n.project.taskIndex=i===!0?a.tasks.length-1:0,H(a.tasks[n.project.taskIndex]),F(),I())}},W=function(t){var i=0;n.project.currentEntry&&n.project.currentEntry.entry_id===t.entry_id||_.each(e.entries,function(e){e.entry_id===t.entry_id&&(N(e),n.project.entryIndex=i),i++}),i=0,_.each(n.project.currentEntry.tasks,function(e){e.tid===t.tid&&(H(e),n.project.taskIndex=i),i++})};e.$on(kzi.constant.event_names.shortcut_key_to_task,function(t,i){if(e.permission===kzi.constant.permission.ok&&n.project.info.curr_role!==kzi.constant.role.guest){g=!0;var a=[kzi.constant.keyASCIIs.L,kzi.constant.keyASCIIs.D,kzi.constant.keyASCIIs.W,kzi.constant.keyASCIIs.M];if(!(f===!0&&0>$.inArray(i,a)))switch(i){case kzi.constant.keyASCIIs.VK_DOWN:case kzi.constant.keyASCIIs.J:_.isEmpty(n.project.currentTask)?O():n.project.currentEntry.tasks.length>n.project.taskIndex+1?(n.project.taskIndex++,H(n.project.currentEntry.tasks[n.project.taskIndex]),I()):_.isEmpty(n.project.currentEntry)?O():R(n.project.entryIndex);break;case kzi.constant.keyASCIIs.VK_UP:case kzi.constant.keyASCIIs.K:_.isEmpty(n.project.currentTask)?O():n.project.taskIndex>0?(n.project.taskIndex--,H(n.project.currentEntry.tasks[n.project.taskIndex]),I()):_.isEmpty(n.project.currentEntry)?O():q(n.project.entryIndex,!0);break;case kzi.constant.keyASCIIs.VK_LEFT:_.isEmpty(n.project.currentEntry)?O():q(n.project.entryIndex,!1);break;case kzi.constant.keyASCIIs.VK_RIGHT:_.isEmpty(n.project.currentEntry)?O():R(n.project.entryIndex);break;case kzi.constant.keyASCIIs.ENTER:_.isEmpty(n.project.currentTask)||(n.global.show_slide_menu&&(n.global.show_slide_menu=!1),n.locator.to_task(c,n.project.currentTask.tid,!1));break;case kzi.constant.keyASCIIs.I:$("#btn_new_task").click();break;case kzi.constant.keyASCIIs.N:$("#btn_new_entry").click();break;case kzi.constant.keyASCIIs.M:if(!_.isEmpty(n.project.currentTask)){var s="icon_action_task_"+n.project.currentTask.tid;p=1,$("#"+s).click()}break;case kzi.constant.keyASCIIs.L:if(!_.isEmpty(n.project.currentTask)){var s="icon_action_task_"+n.project.currentTask.tid;p=2,$("#"+s).click()}break;case kzi.constant.keyASCIIs.D:if(!_.isEmpty(n.project.currentTask)){var s="icon_action_task_"+n.project.currentTask.tid;p=3,$("#"+s).click()}break;case kzi.constant.keyASCIIs.W:if(!_.isEmpty(n.project.currentTask)){var s="icon_action_task_"+n.project.currentTask.tid;p=4,$("#"+s).click()}break;case kzi.constant.keyASCIIs.C:if(!_.isEmpty(n.project.currentTask)){var s="task_check_"+n.project.currentTask.tid;$("#"+s).click()}break;case kzi.constant.keyASCIIs.VK_SPACE:if(!_.isEmpty(n.project.currentTask)){var o=_.findWhere(n.project.currentTask.members,{uid:n.global.me.uid});o?(o.assigned=1,wt.bus.member.set_task_member_toggle(c,n.project.currentTask,o)):wt.bus.member.set_task_member_toggle(c,n.project.currentTask,n.global.me)}break;case kzi.constant.keyASCIIs.VK_LessThan:if(!_.isEmpty(n.project.currentEntry)&&!_.isEmpty(n.project.currentTask)&&n.project.entryIndex>0){var r=e.entries[n.project.entryIndex-1],l=kzi.config.default_pos;_.isEmpty(r.tasks)||(l=_.max(r.tasks,function(e){return e.pos}).pos+kzi.config.default_pos+1),delete n.project.currentTask.$$hashKey,j(c,n.project.currentTask,n.project.currentEntry,r,l,function(){n.project.entryIndex=n.project.entryIndex-1,N(r),n.project.taskIndex=r.tasks.length-1,F(),I()})}break;case kzi.constant.keyASCIIs.VK_GreaterThan:if(!_.isEmpty(n.project.currentEntry)&&!_.isEmpty(n.project.currentTask)&&e.entries.length>n.project.entryIndex+1){var r=e.entries[n.project.entryIndex+1],l=kzi.config.default_pos;_.isEmpty(r.tasks)||(l=_.max(r.tasks,function(e){return e.pos}).pos+kzi.config.default_pos+1),delete n.project.currentTask.$$hashKey,j(c,n.project.currentTask,n.project.currentEntry,r,l,function(){n.project.entryIndex=n.project.entryIndex+1,N(r),n.project.taskIndex=r.tasks.length-1,F(),I()})}break;default:}}}),e.js_mouseover_entries_panel=function(e){if(g!==!0&&!f){var t=$(e.target),i="";if(t.length>0&&(i=t.attr("task-id"),_.isEmpty(i)&&(t=t.parents(".task_style"),i=t.attr("task-id")),!_.isEmpty(i))){var a=_.findWhere(n.project.tasks,{tid:i});W(a)}}},e.js_mousemove_entries_panel=function(){g===!0&&(g=!1)},e.js_mouseleave_task=function(e,t){if(!_.isEmpty(n.project.currentTask)&&n.project.currentTask.tid===t.tid){if(f)return;L()}},e.new_task={members:[],expire_date:null,labels:[]};var Y=function(){e.new_task.temp_name="",e.new_task.members=[],e.new_task.labels=[],e.new_task.expire_date=null},U=function(t,i,a,s){if(!_.isUndefined(t)&&!_.isUndefined(t.temp_name)&&!_.isEmpty(t.temp_name)){e.is_task_adding=!0;var o=i.entry_id,r=wt.bus.task.calculate_task_pos(i,a),l=[],d=[];_.isEmpty(t.members)||(l=_.pluck(t.members,"uid")),_.isEmpty(t.labels)||(d=_.pluck(t.labels,"name")),wt.data.task.add_full(c,o,t.temp_name,r,l,d,t.expire_date,function(e){i.tasks||(i.tasks=[]),a?i.task_top_focus=!0:i.task_bottom_focus=!0,e.data.entry_name=i.name,a?i.tasks.unshift(e.data):i.tasks.push(e.data);var t=_.findWhere(n.project.tasks,{tid:e.data.tid});t||n.project.tasks.push(e.data)},null,function(){_.isFunction(s)&&s(),e.is_task_adding=!1}),Y()}};n.load_project_from_cache(c,function(t){e.project={info:t},n.global.title="ä»»å¡ | "+e.project.name,n.load_tasks(c,function(t){t.info.pid===c&&(n.global.title="ä»»å¡ | "+t.info.name,n.global.loading_done=!0,e.project=t,1==e.project.info.archived?e.permission=kzi.constant.permission.project_archived:2==e.project.info.team.status?e.permission=kzi.constant.permission.team_stop_service:(e.permission=kzi.constant.permission.ok,e.project.info.curr_role!==kzi.constant.role.guest&&(B(),V(),X())),A(t),L())},function(e){e.code===kzi.statuses.prj_error.not_found.code?o.path("/project/"+c+"/notfound"):wt.data.error(e)})}),e.js_add_task_pop=function(t){i.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_add_task.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.new_task={},e.entries=i.entries,_.isEmpty(e.entries)||(e.new_task.entry=e.entries[0]),e.js_to_add_entry_pop=function(){e.js_close(),$("#btn_new_entry").click()},e.js_add_task=function(t,i){if(e.is_save_ing!==!0&&!_.isEmpty(i.temp_name)){e.is_save_ing=!0;var a=wt.bus.task.calculate_task_pos(i.entry,!1);wt.data.task.add(c,i.entry.entry_id,i.temp_name,a,function(t){i.entry.tasks||(i.entry.tasks=[]),t.data.entry_name=i.entry.name,i.entry.tasks.push(t.data);var a=_.findWhere(n.project.tasks,{tid:t.data.tid});a||n.project.tasks.push(t.data),e.js_close(),b(t.data.tid),y(i.entry.entry_id)},null,function(){e.is_save_ing=!1})}},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e,entries:e.entries}}}}).open()},e.js_add_entry_pop=function(t){i.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_add_entry.html",controller:["$scope","popbox","pop_data",function(e,t,n){e.popbox=t,e.js_add_entry=function(i,a){if(e.is_save_ing!==!0){e.is_save_ing=!0;var s=wt.bus.entry.calculate_entry_pos(n.scope.entries,!0);wt.data.entry.add(c,a,s,function(e){e.data.tasks=[],n.entries.unshift(e.data),v(),t.close(),l(function(){y(e.data.entry_id)},100)},null,function(){e.is_save_ing=!1})}},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e,entries:e.entries}}}}).open()},e.js_add_entry=function(t){if(!_.isEmpty(t)&&e.is_adding_entry!==!0){e.is_adding_entry=!0;var n=wt.bus.entry.calculate_entry_pos(e.entries,!1);wt.data.entry.add(c,t,n,function(t){_.isEmpty(e.entries)&&(e.entries=[]),t.data.tasks=[],e.entries.push(t.data),v(),e.entry_name=""},null,function(){e.is_adding_entry=!1})}},e.js_add_task=function(e,t,n,i){U(t,n,i,function(){})},e.js_show_entry_menu=function(t,n,a,s){var o=n.entry_id;i.popbox({target:t,top:a,left:s,templateUrl:"/ycjs/tpl/project/task/pop_entry_menu.html",controller:["$rootScope","$scope","popbox","pop_data",function(e,t,i,a){t.popbox=i,t.entry_name=n.name,t.entry=n,t.step=0,t.js_step=function(e){t.step=e},t.js_close=function(){i.close()},t.js_change_name=function(e,n){t.is_save_ing=!0,wt.data.entry.update(c,o,n,function(){a.entry.name=n},null,function(){t.is_save_ing=!1,i.close()})},t.js_archive_entry=function(){a.scope.entries=_.reject(a.scope.entries,function(e){return e.entry_id===n.entry_id}),e.refresh_cache.entry.del(n.entry_id),wt.data.entry.archive(c,o,function(){}),i.close()},t.js_del_entry=function(){a.scope.entries=_.reject(a.scope.entries,function(e){return e.entry_id===n.entry_id}),e.refresh_cache.entry.del(n.entry_id),wt.data.entry.trash(c,o,function(){}),i.close()},t.js_archived_all=function(){a.entry.tasks=_.reject(a.entry.tasks,function(e){return 1==e.completed}),e.project.tasks=_.reject(e.project.tasks,function(e){return 1==e.completed&&e.entry_id==o}),wt.data.task.archived_all(c,o,function(){}),i.close()},t.js_top_open_add_task_composer=function(){n.task_top_enabled=!0,n.task_top_focus=!0;var t=$($(".popbox").scope().popbox._target).parents(".entry").children(".mCustomScrollbar");t.mCustomScrollbar("scrollTo",0),i.close()};var s=function(){e.load_project_members(c,function(e){var i=wt.bus.member.get_normal_members(e.members);_.each(i,function(e){var t=!1,i=!1;_.each(n.tasks,function(n){var a=_.pluck(n.members,"uid");_.contains(a,e.uid)?t=!0:i=!0}),e.assigned_all=t&&!i?1:0}),t.members=i})};t.js_to_move=function(){t.js_step(7),t.entries=_.reject(a.scope.entries,function(e){return e.entry_id===n.entry_id})},t.js_to_assign=function(){t.js_step(8),s()},t.js_to_set_label=function(){t.js_step(9),t.labels=_.filter(a.scope.project.info.labels,function(e){return""!==e.desc})},t.js_to_set_labels=function(){_.each(kzi.constant.labels,function(e){var n=_.findWhere(a.scope.project.info.labels,{name:e.name});n&&(t[e.name]=n.desc)}),t.step=9.1},t.js_move_to=function(e){wt.data.entry.batch_move(c,n.entry_id,e.entry_id,function(){var i=0;_.isEmpty(e.tasks)||(i=_.max(e.tasks,function(e){return e.pos})),_.each(n.tasks,function(t){i=i+kzi.config.default_pos+1,t.pos=i,t.entry_id=e.entry_id}),e.tasks=e.tasks.concat(n.tasks),n.tasks=[]},null,function(){}),i.close()},t.js_toggle_member=function(e){e.assigned_all||(wt.bus.entry.batch_assign_member(c,n,e),t.step=6)},t.js_toggle_label=function(e){wt.bus.entry.batch_set_label(c,n,e,null,null,function(){}),t.step=6},t.js_set_expire=function(e){var i=moment(e).endOf("day").valueOf();wt.data.entry.batch_set_expire(c,n.entry_id,i,function(){_.each(n.tasks,function(e){e.expire_date=i})}),t.step=6},t.js_set_expire_date=function(e){switch(e){case"today":t.expire_date=moment().format("YYYY-MM-DD");break;case"tomorrow":t.expire_date=moment().add("days",1).format("YYYY-MM-DD");break;case"week":t.expire_date=moment().endOf("week").add("days",1).format("YYYY-MM-DD");break;case"next_week":t.expire_date=moment().add("days",7).endOf("week").add("days",1).format("YYYY-MM-DD");break;case"month":t.expire_date=moment().endOf("month").format("YYYY-MM-DD")}t.js_set_expire(t.expire_date)},t.js_set_lables=function(e,n,i,s,o,r){t.is_save_ing=!0,wt.bus.project.label.set_labels(c,e,n,i,s,o,r,function(e){a.scope.project.info.labels=e,t.labels=_.filter(a.scope.project.info.labels,function(e){return""!==e.desc}),t.step=9},null,function(){t.is_save_ing=!1})},t.js_to_copy_entry=function(){t.new_entry={name:n.name,entry_id:n.entry_id,pos:n.pos},t.js_step(12)},t.js_copy_entry=function(n){if(!_.isEmpty(n.name)){var i=wt.bus.entry.calculate_copy_entry_pos(a.entries,n);t.is_copying=!0,wt.data.entry.copy_entry(c,n.entry_id,n.name,i,function(n){a.entries.push(n.data),v(),e.reload_entries(c),t.js_close()},null,function(){t.is_copying=!1})}}}],resolve:{pop_data:function(){return{scope:e,entries:e.entries,entry:n}}}}).open()},e.js_show_task_menu=function(t,a,s,o,r){return t.stopPropagation(),f&&s.tid===h?(m.close(),void 0):(s.tid&&W(s),m=i.popbox({target:t,top:o,left:r,templateUrl:"/ycjs/tpl/project/task/pop_task_menu.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,f=!0,h=s.tid,e.step=p,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()};var o=!1;_.isEmpty(s.tid)&&(o=!0),e.is_add_task=o,n.load_project_members(c,function(t){var n=[],i=[];_.each(t.members,function(e){if(1==e.status){if(e.role===kzi.constant.role.admin||e.role===kzi.constant.role.member){var t=_.findWhere(s.members,{uid:e.uid});e.assigned=t?1:0,n.push(e)}var a=_.findWhere(s.watchers,{uid:e.uid});e.is_watch=a?1:0,i.push(e)}}),e.members=n,e.watchers=i}),e.js_toggle_member=function(e){wt.bus.member.set_task_member_toggle(c,s,e)},e.js_toggle_watch=function(e){if(e.is_watch){var t=_.findWhere(s.watchers,{uid:e.uid});t&&(s.watchers=_.reject(s.watchers,function(t){return t.uid===e.uid})),e.is_watch=0,wt.data.unwatch(c,"tasks",s.tid,e.uid,function(){})}else{var t=_.findWhere(s.watchers,{uid:e.uid});t||(s.watchers.push(e),e.is_watch=1,wt.data.watch(c,"tasks",s.tid,e.uid,function(){}))}},e.js_watch_all=function(){if(s.watchers.length!==e.members){var n=_.pluck(e.members,"uid");wt.data.watch_batch(c,kzi.constant.xtype.task,s.tid,n,function(){s.watchers=e.members}),_.each(e.members,function(e){e.is_watch=1})}t.close()},e.labels=wt.bus.project.label.load(s,i.scope.project.info.labels),e.js_toggle_label=function(e){wt.bus.task.set_toggle_label(c,s,e)},e.js_goto_set_labels=function(){_.each(kzi.constant.labels,function(t){var n=_.findWhere(i.scope.project.info.labels,{name:t.name});n&&(e[t.name]=n.desc)}),e.step=21},e.js_set_lables=function(t,n,a,o,r,l){var d=[{name:"blue",desc:t},{name:"green",desc:n},{name:"orange",desc:a},{name:"purple",desc:o},{name:"red",desc:r},{name:"yellow",desc:l}];e.is_save_ing=!0,wt.data.project.set_labels(c,d,function(){i.scope.project.info.labels=d,e.labels=wt.bus.project.label.load(s,d),e.step=2},null,function(){e.is_save_ing=!1})},s.expire_date_temp=s.expire_date?moment(s.expire_date).format("YYYY-MM-DD"):moment().format("YYYY-MM-DD"),e.task=s,e.js_close=function(){t.close()},e.js_today=function(){s.expire_date=moment().format("YYYY-MM-DD"),e.set_expire(s.expire_date)},e.js_tomorrow=function(){s.expire_date=moment().add("days",1).format("YYYY-MM-DD"),e.set_expire(s.expire_date)},e.js_week=function(){s.expire_date=moment().endOf("week").add("days",1).format("YYYY-MM-DD"),e.set_expire(s.expire_date)},e.js_next_week=function(){s.expire_date=moment().add("days",7).endOf("week").add("days",1).format("YYYY-MM-DD"),e.set_expire(s.expire_date)},e.js_month=function(){s.expire_date=moment().endOf("month").format("YYYY-MM-DD"),e.set_expire(s.expire_date)},e.js_set_expire=function(t){e.set_expire(t)},e.js_cancel_expire=function(){o?(s.expire_date=null,s.expire_date_temp=null):(s.expire_date_temp=null,s.expire_date=0,s.badges.expire_date=0,wt.data.task.set_expire(c,s.tid,0,function(){})),t.close()},e.set_expire=function(n){var i=moment(n).endOf("day").valueOf();o?(s.expire_date=i,e.js_step(0)):(wt.data.task.set_expire(c,s.tid,i,function(){}),s.badges.expire_date=i,s.expire_date=i,0!==p?t.close():e.js_step(0))},e.entries=i.scope.entries,_.each(e.entries,function(e){e.move_selected=e.entry_id===s.entry_id?1:0}),e.js_move_to=function(n){if(_.each(e.entries,function(e){e.move_selected=0}),n.move_selected=1,n){var i=kzi.config.default_pos;_.isEmpty(n.tasks)||(i=_.max(n.tasks,function(e){return e.pos}).pos+kzi.config.default_pos+1),j(c,s,a,n,i),t.close()}},e.js_del_task=function(){a.tasks=_.reject(a.tasks,function(e){return e.tid==s.tid}),n.project.tasks=_.reject(n.project.tasks,function(e){return e.tid==s.tid}),wt.data.task.trash(c,s.tid,function(){}),t.close()},e.js_archive_task=function(){a.tasks=_.reject(a.tasks,function(e){return e.tid==s.tid}),n.project.tasks=_.reject(n.project.tasks,function(e){return e.tid==s.tid}),wt.data.task.archive(c,s.tid,function(){}),t.close()},e.js_to_copy_task=function(){e.new_task=wt.bus.task.get_copy_task(e.task),e.js_step(31)},e.js_copy_task=function(t,i){if(!_.isEmpty(i.name)){e.is_copying=!0;var a=w(i.entry_id),s=wt.bus.task.calculate_copy_task_pos(a,i);wt.data.task.copy_task(c,i.tid,i.name,s,i.keep_comments,i.keep_members,i.keep_labels,i.keep_attachments,i.keep_todos,i.keep_watchers,function(t){e.js_close(),n.refresh_cache.task.add(t.data),a.tasks.push(t.data),a.tasks=_.sortBy(a.tasks,function(e){return e.pos})},null,function(){e.is_copying=!1})}},e.prj_files_loading=!1,e.js_to_select_files=function(){e.js_step(41),e.prj_files_loading=!0,n.load_files(c,"",function(t){var n=_.where(t.files,{folder_id:""});e.files=n},null,function(){e.prj_files_loading=!1})},e.js_attach=function(t){if(1==t.type)e.step=42,e.prj_files_loading=!0,n.load_files(c,t.fid,function(n){e.prj_files_loading=!1;var i=_.where(n.files,{folder_id:t.fid});e.sub_files=i});else{if(e.file_attaching)return;if(s.files||(s.files=[]),_.contains(s.fids,t.fid))return;e.file_attaching=!0,s.files.length>0&&s.files.push(t),wt.data.file.attach(c,"tasks",s.tid,t.fid,function(){s.badges.file_count+=1},null,function(){e.file_attaching=!1})}},e.file_upload_option={url:[kzi.config.wtbox(),"?pid="+s.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"task",pid:s.pid,tid:s.tid},addCallback:function(){e.js_close()}},e.js_to_upload_files=function(e){$(e.target).next("input[type=file]").click()}}],resolve:{pop_data:function(){return{scope:e,entries:e.entries,entry:a}}}}),m.open().then(function(){p=0,f=!1,h=null}),void 0)},e.js_open_task_detail=function(e){n.locator.to_task(e.pid,e.tid,!1)},e.js_show_assign_me_tasks=function(){P(),"assign_me"==e.current_filter_type?(T(null),e.filter_turn_on=!1,e.current_filter_type=null):(e.current_filter_type="assign_me",e.filter_turn_on=!0,T(n.global.me))},e.js_show_my_watch_tasks=function(){P(),"my_watch"===e.current_filter_type?(z(null),e.filter_turn_on=!1,e.current_filter_type=null):(e.current_filter_type="my_watch",e.filter_turn_on=!0,z(n.global.me))},e.js_show_my_create_tasks=function(){P(),"my_create"===e.current_filter_type?(M(null),e.filter_turn_on=!1,e.current_filter_type=null):(e.current_filter_type="my_create",e.filter_turn_on=!0,M(n.global.me))},e.js_filter_pop=function(t){e.current_filter_type=null,i.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_task_filter.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,n.load_project_members(c,function(t){_.isEmpty(t.members)||(e.members=wt.bus.member.get_normal_members(t.members)),_.isEmpty(t.info.labels)||(e.labels=_.filter(t.info.labels,function(e){return""!==e.desc}))}),e.task_filters=C,C.texts.length>0&&(e.task_filter_text=C.texts.toString()),e.js_filter_label=function(e){-1===_.indexOf(C.labels,e)?C.labels.push(e):C.labels.splice(_.indexOf(C.labels,e),1),D()
},e.js_filter_member=function(e){-1===_.indexOf(C.members,e)?C.members.push(e):C.members.splice(_.indexOf(C.members,e),1),D()},e.js_filter_date=function(e){C.date=C.date===e?"":e,D()},e.$watch("task_filter_text",function(t,n){if(_.isEmpty(t))e.task_filters.texts=[];else{var i=t.toLowerCase().replace("ï¼?",",").replace("ã",",").replace(" ",",").replace("  ",",");e.task_filters.texts=i.split(",")}t!==n&&D()}),e.js_clear=function(){e.filter_texts=[],e.filter_labels=[],e.filter_members=[],e.filter_date="",e.task_filter_text="",P()},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_more_menu=function(t){i.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_entry_more_menu.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.email=c+kzi.constant.mail.domain,e.step=0,e.js_step=function(t){e.step=t,4===t&&_.each(kzi.constant.labels,function(t){var n=_.findWhere(i.scope.project.info.labels,{name:t.name});n&&(e[t.name]=n.desc)})},e.js_set_lables=function(n,a,s,o,r,l){var d=[{name:"blue",desc:n},{name:"green",desc:a},{name:"orange",desc:s},{name:"purple",desc:o},{name:"red",desc:r},{name:"yellow",desc:l}];e.is_save_ing=!0,wt.data.project.set_labels(c,d,function(){i.scope.project.info.labels=d,t.close()},null,function(){e.is_save_ing=!1})},e.js_close=function(){t.close()},e.js_prefs_auto_archived=function(){var t=1;t=1==n.project.info.auto_archived?0:1,n.project.info.auto_archived=t,wt.data.project.set_prefs(c,"auto_archived",t),e.step=0},e.js_archive_all_entry=function(){wt.data.entry.archive_all(c,function(t){e.entries=_.reject(e.entries,function(e){return _.contains(t.data,e.entry_id)})})},e.js_archived_all=function(){_.each(i.scope.entries,function(e){e.tasks=_.reject(e.tasks,function(e){return 1==e.completed})}),n.project.tasks=_.reject(n.project.tasks,function(e){return 1==e.completed}),wt.data.task.archived_all(c,"all",function(){}),t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_open_add_task_composer=function(e,t){this.entry.entry_id,this.task_name="",t.task_bottom_enabled=!0,t.task_bottom_focus=!0;var i=$(e.target).parents(".entry").eq(0).find(".mCustomScrollbar");setTimeout(function(){i.mCustomScrollbar("scrollTo","bottom")},200)},e.js_cancel=function(e,t){e.task_bottom_enabled=!1,e.task_top_enabled=!1,t&&Y()},e.js_complete_task=function(t,i,a){if(e.permission===kzi.constant.permission.ok&&n.project.info.curr_role!==kzi.constant.role.guest){t.stopPropagation();var s=a.tid;if(a.completed)a.completed=0,wt.data.task.uncomplete(c,s,function(){});else if(1==n.project.info.auto_archived){var o=0==$(t.target).children("i").length?$(t.target):$(t.target).children("i");o.removeClass("icon-check-empty").addClass("icon-check-sign");var r=$(t.target).parents(".task").eq(0);r.css("overflow","hidden"),r.animate({opacity:0,height:0,"min-height":0,"padding-top":0,"padding-bottom":0,border:0},600,function(){r.addClass("task-hidden"),r.attr("style",""),a.completed=1,i.tasks=_.reject(i.tasks,function(e){return e.tid==s}),n.project.tasks=_.reject(n.project.tasks,function(e){return e.tid==s}),wt.data.task.complete(c,s,function(){})})}else a.completed=1,wt.data.task.complete(c,s,function(){})}},e.js_show_member=function(t,a,s){e.permission==kzi.constant.permission.ok&&n.project.info.curr_role!==kzi.constant.role.guest&&(t.stopPropagation(),i.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_task_member.html",controller:["$scope","popbox",function(e,t){e.popbox=t,e.member=s,e.js_close=function(){t.close()},e.js_remove_member=function(){var e=_.findWhere(a.members,{uid:s.uid});e&&(a.members=_.reject(a.members,function(e){return e.uid===s.uid})),s.assigned=0,_.isEmpty(a.tid)||wt.data.task.unassign(c,a.tid,s.uid,function(){}),t.close()}}]}).open())},e.$on(kzi.constant.event_names.on_task_trash,function(t,n){if(n){var i=_.findWhere(e.entries,{entry_id:n.entry_id});i&&(i.tasks=_.reject(i.tasks,function(e){return e.tid==n.tid}))}}),e.$on(kzi.constant.event_names.on_task_move,function(t,n,i){if(n){var a=_.findWhere(e.entries,{entry_id:i});a&&(a.tasks=_.reject(a.tasks,function(e){return e.tid==n.tid}));var s=_.findWhere(e.entries,{entry_id:n.entry_id});s&&s.tasks.push(n)}}),e.$on(kzi.constant.event_names.on_right_menu,function(t,i){if(e.permission===kzi.constant.permission.ok&&n.project.info.curr_role!==kzi.constant.role.guest){var a=kzi.helper.mouse_position(i),s=null,o=null;if($(i.target).hasClass("task")?s=$(i.target).attr("task-id"):$(i.target).parents(".task").length>0?s=$(i.target).parents(".task").attr("task-id"):$(i.target).parents(".entry").length>0&&(o=$(i.target).parents(".entry").attr("entry-id")),s){var r=_.findWhere(e.project.tasks,{tid:s}),o=r.entry_id,l=_.findWhere(e.entries,{entry_id:o});e.js_show_task_menu(i,l,r,a.y,a.x)}else{var l=_.findWhere(e.entries,{entry_id:o});e.js_show_entry_menu(i,l,a.y,a.x)}}})}])}(),wt.project.controller("project_archive_ctrl",["$scope","$routeParams","$rootScope","$popbox","$compile","$location",function(e,t,n,i,a,s){"use strict";var o=t.pid,r=1;n.pid=o,e.archived_view="task";var l=function(){_.isEmpty(e.entries)&&(n.global.loading_done=!1,wt.data.entry.get_archived_list(o,function(t){e.entries=t.data,n.global.loading_done=!0}))},c=function(){n.loading_tasks=!0,wt.data.task.get_archived_list(o,r,kzi.config.default_count,function(t){e.last_date=wt.bus.task.set_is_show_data(t.data,e.last_date),_.isEmpty(t.data)?e.tasks=[]:(r+=1,e.tasks=_.isEmpty(e.tasks)?t.data:e.tasks.concat(t.data)),kzi.config.default_count>t.data.length&&(e.has_no_more=!0)},null,function(){n.loading_tasks=!1})},d=function(){"task"!==e.archived_view&&l()};e.js_archive_view_toggle=function(t){e.archived_view=t,d()},e.load_archived_tasks_more=function(){c()},e.js_unarchive_entry=function(t,i){wt.data.entry.unarchive(o,i,function(){e.entries=_.reject(e.entries,function(e){return e.entry_id===i}),n.project.entries=[],n.project.tasks=[]})},e.js_show_entry_menu=function(t,a){t.stopPropagation(),i.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_unarchive_task.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.js_close=function(){t.close()},n.load_tasks(o,function(t){e.entries=t.entries,_.each(e.entries,function(e){e.selected=0})}),e.js_unarchive_task=function(s){_.each(e.entries,function(e){e.selected=0}),s.selected=1,wt.data.task.unarchive(o,a.tid,s.entry_id,function(){n.project.entries=[],n.project.tasks=[],i.scope.tasks=_.reject(i.scope.tasks,function(e){return e.tid===a.tid}),a.is_show_date&&(i.scope.last_date=wt.bus.task.set_is_show_data(i.scope.tasks,e.last_date))}),t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},n.load_project(o,function(t){n.global.title="å½æ¡£ä»»å¡ | "+t.info.name,e.project=t,e.permission=1==e.project.info.archived?kzi.constant.permission.project_archived:2==e.project.info.team.status?kzi.constant.permission.team_stop_service:kzi.constant.permission.ok,n.global.loading_done=!0,c()},function(e){e.code===kzi.statuses.prj_error.not_found.code?s.path("/project/"+o+"/notfound"):wt.data.error(e)})}]),function(){"use strict";wt.project.controller("project_event_ctrl",["$scope","$routeParams","$rootScope","$popbox","$document","$timeout","$dialog","$location",function(e,t,n,i,a,s,o,r){function v(){var t=e.myCalendar.fullCalendar("getView");$("#calendar_title").html(t.title);var n=new Date(t.start).getTime(),i=new Date(t.end).getTime(),a=(new Date).getTime();n>a||a>i?$("#calendar_today").css("visibility","visible"):$("#calendar_today").css("visibility","hidden")}var l=t.pid;e.member_id="all",e.calendar_view="month",e.is_show_add=!1;var u,p,c="",d=null,f=function(){e.myCalendar.fullCalendar("refetchEvents")},h=function(){e.myCalendar.fullCalendar("removeEvents",[]),e.is_show_add=!1,c=""},m=function(e,t,n,i,a){d&&u===e&&p===t?(_.isFunction(n)&&n(d),_.isFunction(a)&&a()):wt.data.event.get_list(l,0,1,e,t,function(i){u=e,p=t,d=i.data,_.isFunction(n)&&n(i.data)},i,a)};n.load_project(l,function(t){n.global.title="æ¥å | "+t.info.name,e.project=t,e.permission=1==e.project.info.archived?kzi.constant.permission.project_archived:2==e.project.info.team.status?kzi.constant.permission.team_stop_service:kzi.constant.permission.ok},function(e){e.code==kzi.statuses.prj_error.not_found.code?r.path("/project/"+l+"/notfound"):wt.data.error(e)}),e.calendarEventSources=[{events:function(t,i,a){var t=Math.round(t.getTime()),i=Math.round(i.getTime());n.load_tasks(l,function(n){var s=_.filter(n.tasks,function(e){return e.expire_date=kzi.util.dateToTimestamp(e.expire_date),e.expire_date>=t&&i>=e.expire_date}),o=[],r=!1;_.each(s,function(t){if("all"!=e.member_id){var n=_.findWhere(t.members,{uid:e.member_id});r=n?!0:!1}else r=!0;if(r){var i={id:t.tid,title:t.name,allDay:!1,start:(t.expire_date+"").substring(0,10),url:"",editable:!0,textColor:"#333",extend:{expire_date:t.expire_date,badges:t.badges,pid:t.pid,xtype:kzi.constant.xtype.task}};1==t.completed?(i.className="cal_task_completed slide-trigger",1==e.project.info.show_completed&&o.push(i)):(i.className="cal_task_uncompleted slide-trigger",o.push(i))}}),m(t,i,function(t){o=o.concat(t),e.is_show_add&&e.project.info.curr_role!==kzi.constant.role.guest&&o.unshift({id:"-1",title:"  + æ°å»ºä»»å¡",allDay:!0,start:(c+"").substring(0,10),url:"",editable:!1,className:"cal_task_add",textColor:"#aaa"}),a(o)})})}}],e.calendarConfig={header:!1,height:kzi.util.heightNoHeader()-95,editiable:!0,droppable:!0,titleFormat:{month:"yyyyå¹´MMæ?",week:"yyyyå¹´MMædæ? {'&#8212;' [ yyyyå¹´][ MMæ]dæ¥}",day:"yyyyå¹´MMædæ? dddd"},firstDay:0,weekMode:"liquid",allDayText:"å¨å¤©",axisFormat:"HH:mm",timeFormat:"â?",monthNames:["ä¸æ?","äºæ","ä¸æ","åæ","äºæ","å­æ","ä¸æ","å«æ","ä¹æ","åæ","åä¸æ?","åäºæ?"],monthNamesShort:["ä¸æ?","äºæ","ä¸æ","åæ","äºæ","å­æ","ä¸æ","å«æ","ä¹æ","åæ","åä¸æ?","åäºæ?"],dayNames:["æææ?","ææä¸","ææäº?","ææä¸?","ææå?","ææäº?","ææå?"],dayNamesShort:["æææ?","ææä¸","ææäº?","ææä¸?","ææå?","ææäº?","ææå?"],buttonText:{today:"ä»å¤©",month:"æ?",agendaWeek:"å?",agendaDay:"æ?"},defaultView:e.calendar_view,dayClick:function(t,n,i,a){e.project.info.curr_role!==kzi.constant.role.guest&&e.onDayClick(t,n,i,a)},loading:function(e){v(),n.global.loading_done=e?!1:!0},eventClick:function(t,n,i){e.onEventClick(t,n,i)},eventDrop:function(e,t){if(0!==t){var c=e.extend.pid;if(e.extend.xtype===kzi.constant.xtype.task){var d=e.id,u=e.extend.expire_date,p=moment(u).add("days",t).endOf("day").valueOf();wt.data.task.set_expire(c,d,p,function(){if(e.extend.expire_date=p,e.extend.badges.expire_date=p,n.project.info&&n.project.info.pid==c){var i=_.findWhere(n.project.tasks,{tid:d});i&&(i.expire_date=p,i.badges.expire_date=p)}})}else{var f=moment(e.start),h=moment(e.extend.end).add("days",t);wt.data.event.update_date(c,e.id,f.format("YYYY-MM-DD"),f.format("HH:mm"),h.format("YYYY-MM-DD"),moment(h).format("HH:mm"))}}},windowResize:function(){$(this).fullCalendar("option","height",kzi.util.heightNoHeader()-95)}};var g=function(){s(function(){$("#calendar").fullCalendar("option","height",kzi.util.heightNoHeader()-95)},25)};g(),e.$watch("$root.global.right_isfold",function(){a.find(".prj_sidebar_panel").length>0&&g()}),e.onEventClick=function(t,i){if(i.preventDefault(),i.stopPropagation(),"-1"===t.id){var o=new Date(t.start).getTime();$(i.target).hasClass("fc-event-title")?$(i.target).addClass("js-popbox").attr("data-placement","right").attr("data-align","middle"):$(i.target).child(".fc-event-title").eq(0).addClass("js-popbox").attr("data-placement","right").attr("data-align","middle"),s(function(){e.js_show_task_pop(i,o)})}else t.extend.xtype===kzi.constant.xtype.task?n.locator.to_task(t.extend.pid,t.id,!1):t.extend.xtype===kzi.constant.xtype.event&&s(function(){n.locator.to_event(t.extend.pid,t.id,!1)})},e.onDayClick=function(){return!1},e.changeView=function(t){t!==e.calendar_view&&(e.myCalendar.fullCalendar("changeView",t),e.calendar_view=t,v(),h(),f())},e.prev=function(){e.myCalendar.fullCalendar("prev"),v()},e.next=function(){e.myCalendar.fullCalendar("next"),v()},e.today=function(){e.myCalendar.fullCalendar("today"),v()},e.$on(kzi.constant.event_names.on_task_update,function(e,t){h(),f(),n.locator.show_prj&&n.refresh_cache.task.update_full(t)}),e.$on(kzi.constant.event_names.on_task_trash,function(){h(),f()}),e.$on(kzi.constant.event_names.on_task_complete,function(){h(),f()}),e.$on(kzi.constant.event_names.shortcut_key_to_task,function(t,n){if(e.permission===kzi.constant.permission.ok)switch(n){case kzi.constant.keyASCIIs.I:case kzi.constant.keyASCIIs.N:$("#btn_new_event").click();break;default:}}),e.$on(kzi.constant.event_names.on_event_update,function(e,t){if(d){var n=_.findWhere(d,{id:t.event_id});n&&(n.title=t.name,n.start=moment(t.start.date).valueOf().toString().substring(0,10),n.end=moment(t.end.date).valueOf().toString().substring(0,10))}h(),f()}),e.$on(kzi.constant.event_names.on_event_trash,function(e,t){d&&(d=_.reject(d,function(e){return e.id===t.event_id})),h(),f()}),e.js_new_event_success=function(e){if(e.start.date>=u&&p>=e.start.date){var t=_.findWhere(n.projects,{pid:e.pid});if(t){var i=wt.bus.event.event_to_calEvent(e,t.bg);d&&(d.push(i),h(),f()),t.is_calendar||(t.is_calendar=1)}else d=null,h(),f()}},e.js_show_task_pop=function(t,a){i.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_add_task_entry.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.step=0,e.js_step=function(t){e.step=t},e.new_task={expire_date:moment().format("YYYY-MM-DD")},null!=a&&(e.new_task.expire_date=moment(a).format("YYYY-MM-DD")),e.loading_entries=!0,n.load_tasks(l,function(t){e.entries=t.entries,_.isEmpty(e.entries)||(e.new_task.entry=e.entries[0])},null,function(){e.loading_entries=!1}),e.js_set_expire_date=function(t){switch(t){case"today":e.new_task.expire_date=moment().format("YYYY-MM-DD");break;case"tomorrow":e.new_task.expire_date=moment().add("days",1).format("YYYY-MM-DD");break;case"week":e.new_task.expire_date=moment().endOf("week").add("days",1).format("YYYY-MM-DD");break;case"next_week":e.new_task.expire_date=moment().add("days",7).endOf("week").add("days",1).format("YYYY-MM-DD");break;case"month":e.new_task.expire_date=moment().endOf("month").format("YYYY-MM-DD")}e.js_step(0)},e.js_open_add_entry=function(t){e.is_from_task=t,e.step=1},e.js_add_task=function(t,i){if(e.is_saving_task!==!0&&!_.isEmpty(i.name)&&!_.isEmpty(i.entry)){e.is_saving_task=!0;var a=wt.bus.task.calculate_task_pos(i.entry,!1),s=moment(i.expire_date).endOf("day").valueOf();wt.data.task.add_full(l,i.entry.entry_id,i.name,a,[],[],s,function(t){i.entry.tasks||(i.entry.tasks=[]),i.entry.tasks.push(t.data),n.refresh_cache.task.add(t.data),e.js_close(),h(),f()},null,function(){e.is_saving_task=!1})}},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_more_menu=function(t){i.popbox({target:t,templateUrl:"/ycjs/tpl/project/event/pop_event_more_menu.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.step=0,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},e.member_id=i.scope.member_id,n.load_project_members(l,function(t){var i=[],a={};_.each(wt.bus.member.get_normal_members(t.members),function(e){e.uid!==n.global.me.uid?i.push(e):a=e}),e.members=i,e.self=a}),e.js_change_member=function(t){h(),i.scope.member_id=t,e.member_id=t,f()},e.js_prefs_show_completed=function(){var t=1;t=1==n.project.info.show_completed?0:1,n.project.info.show_completed=t,wt.data.project.set_prefs(l,"show_completed",t),e.step=0,h(),f()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()}}])}(),function(){"use strict";wt.project.controller("project_graph_ctrl",["$scope","$routeParams","$rootScope","$popbox","$document","$timeout","$dialog","$location",function(e,t,n,i,a,s,o,r){var l=t.pid,c=800,d=450,u=-10;e.step=1,e.js_step=function(t){e.step=t},moment.lang(kzi.config.lang);var p=function(e){var t={render:"members_task_graph",data:[{name:"å·²å®æ?",value:_.pluck(e,"completed"),color:kzi.config.colors.completed},{name:"æªå®æ?",value:_.pluck(e,"uncompleted"),color:kzi.config.colors.uncompleted}],labels:_.pluck(e,"display_name"),label:{textAlign:"right",textBaseline:"middle",rotate:-30},width:c,height:d,background_color:"#fbfbfb",border:0,bar_space:20,sub_option:{border:{width:0}},decimalsnum:0,legend:{enable:!0,row:1,column:"max",valign:"top",background_color:null,offsetx:u,offsety:-5,border:!1},coordinate:{background_color:0,axis:{color:"#e1e1e1"},scale:{scale_enable:!1,start_scale:0},width:"80%",height:"80%"}};new iChart.ColumnStacked2D(t).draw()},h=function(e){var t={render:"labels_task_graph",data:[{name:"å·²å®æ?",value:_.pluck(e,"completed"),color:kzi.config.colors.completed},{name:"æªå®æ?",value:_.pluck(e,"uncompleted"),color:kzi.config.colors.uncompleted}],labels:_.pluck(e,"label_desc"),label:{textAlign:"right",textBaseline:"middle",rotate:-30},width:c,height:d,background_color:"#fbfbfb",border:0,bar_space:20,sub_option:{border:{width:0}},decimalsnum:0,legend:{enable:!0,row:1,column:"max",valign:"top",background_color:null,offsetx:u,offsety:-5,border:!1},coordinate:{background_color:0,axis:{color:"#e1e1e1"},scale:{scale_enable:!1,start_scale:0},width:"80%",height:"80%"}};new iChart.ColumnStacked2D(t).draw()},m=function(e){var t={render:"entry_task_graph",data:[{name:"å·²å®æ?",value:_.pluck(e,"completed"),color:kzi.config.colors.completed},{name:"æªå®æ?",value:_.pluck(e,"uncompleted"),color:kzi.config.colors.uncompleted}],labels:_.pluck(e,"name"),label:{textAlign:"right",textBaseline:"middle",rotate:-30},width:c,height:d,background_color:"#fbfbfb",border:0,bar_space:20,sub_option:{border:{width:0}},decimalsnum:0,legend:{enable:!0,row:1,column:"max",valign:"top",background_color:null,offsetx:u,offsety:-5,border:!1},coordinate:{background_color:0,axis:{color:"#e1e1e1"},scale:{scale_enable:!1,start_scale:0},width:"80%",height:"80%"}};new iChart.ColumnStacked2D(t).draw()},g=function(e){var t={render:"pulse_member_graph",data:[{name:"å·²å®æ?",value:_.pluck(e,"completed"),color:kzi.config.colors.completed},{name:"å·²è¿æ?",value:_.pluck(e,"expired"),color:kzi.config.colors.expired}],labels:_.pluck(e,"display_name"),label:{textAlign:"right",textBaseline:"middle",rotate:-30},width:c,height:d,background_color:"#fbfbfb",border:0,bar_space:20,sub_option:{border:{width:0}},decimalsnum:0,legend:{enable:!0,row:1,column:"max",valign:"top",background_color:null,offsetx:u,offsety:-5,border:!1},coordinate:{background_color:0,axis:{color:"#e1e1e1"},scale:{scale_enable:!1,start_scale:0},width:"80%",height:"80%"}};new iChart.ColumnStacked2D(t).draw()},v=function(e){var t=[{name:"å®æ",value:_.pluck(e,"completed"),color:kzi.config.colors.completed,line_width:3},{name:"æ°å¢",value:_.pluck(e,"created"),color:kzi.config.colors.created,line_width:3}],n=new iChart.LineBasic2D({render:"pulse_weekly_graph",data:t,width:c,height:d,background_color:"#fbfbfb",border:0,bar_space:20,sub_option:{border:{width:0}},legend:{enable:!0,row:1,column:"max",valign:"top",background_color:null,offsetx:u,offsety:-5,border:!1},coordinate:{background_color:0,axis:{color:"#e1e1e1"},scale:[{scale_enable:!1,position:"left"},{position:"bottom",scale_enable:!1,labels:["å¨æ¥","å¨ä¸","å¨äº","å¨ä¸","å¨å","å¨äº","å¨å­"]}],width:"80%",height:"80%"}});n.draw()},b=function(e){for(var t=[],n=0;e.length>n;n++)t.push({name:e[n].display_name,value:e[n].completed,color:kzi.config.colors.completed});var i={render:"daily_task_graph",data:t,width:c,height:d,coordinate:{scale:{position:"left",scale_enable:!1,start_scale:0},background_color:0,axis:{color:"#e1e1e1"},width:"80%",height:"80%"},label:{textAlign:"right",textBaseline:"middle",rotate:-30},background_color:"#fbfbfb",border:0,bar_space:20,sub_option:{border:{width:0}},legend:{enable:!1}};new iChart.Column2D(i).draw()},y=function(){e.tab_index=1,e.part_loading_done=!1,wt.data.graph.overview(l,function(t){t.data.overview.percentage=parseInt(100*(t.data.overview.completed/(t.data.overview.completed+t.data.overview.uncompleted))),e.overview=t.data.overview,p(t.data.members),_.isEmpty(t.data.labels)?e.hide_overview_labels_task_graph=!0:(h(t.data.labels),e.hide_overview_labels_task_graph=!1),_.isEmpty(t.data.entries)?e.hide_overview_entry_task_graph=!0:(m(t.data.entries),e.hide_overview_entry_task_graph=!1)},null,function(){e.part_loading_done=!0})},w=function(){e.tab_index=4,e.disable_pulse_next=e.pulse_end>moment()?!0:!1,e.pulse_graph_date=e.pulse_start.format("YYYYå¹´MMæDDæ?")+" - "+e.pulse_end.format("MMæDDæ?"),e.part_loading_done=!1,wt.data.graph.get_pulse(l,e.pulse_start.valueOf(),e.pulse_end.valueOf(),function(t){e.weekly_overview=t.data.overview,g(t.data.members),v(t.data.weekly)},null,function(){e.part_loading_done=!0})},k=function(){e.tab_index=8,e.part_loading_done=!1;var t=e.daily_start,i=e.daily_end;e.disable_daily_next=i>moment()?!0:!1,wt.data.graph.get_daily(l,t.valueOf(),i.valueOf(),function(t){e.daily_overview=t.data.overview,b(t.data.members),e.daily_members=t.data.members,e.daily_completed_tasks=t.data.completed,e.daily_created_tasks=t.data.created},null,function(){n.global.loading_done=!0,e.part_loading_done=!0})};e.js_change_tab=function(t){e.tab_index=t},e.js_to_overview=function(){e.graph_type="overview",kzi.localData.set("prj_graph_view_type",e.graph_type),y()},e.js_to_pulse=function(){e.graph_type="pulse",kzi.localData.set("prj_graph_view_type",e.graph_type),e.pulse_start=moment().startOf("week").add("days"),e.pulse_end=moment().endOf("week").add("days"),w()},e.to_pulse_next_week=function(){e.pulse_end>moment()||e.part_loading_done&&(e.pulse_start=e.pulse_start.add("days",7),e.pulse_end=e.pulse_end.add("days",7),w())},e.to_pulse_prev_week=function(){e.part_loading_done&&(e.pulse_start=e.pulse_start.add("days",-7),e.pulse_end=e.pulse_end.add("days",-7),w())},e.js_to_daily=function(){e.graph_type="daily",kzi.localData.set("prj_graph_view_type",e.graph_type),e.daily_start=moment().startOf("day"),e.daily_end=moment().endOf("day"),k()},e.js_to_next_daily=function(){e.daily_end>moment()||e.part_loading_done&&(e.daily_start=e.daily_start.add("days",1),e.daily_end=e.daily_end.add("days",1),k())},e.js_to_prev_daily=function(){e.part_loading_done&&(e.daily_start=e.daily_start.add("days",-1),e.daily_end=e.daily_end.add("days",-1),k())};var x=function(){c=$(".centerpanel").width()-350;var t=kzi.localData.get("prj_graph_view_type");switch(_.isEmpty(t)&&(t="overview"),t){case"overview":e.js_to_overview();break;case"pulse":e.js_to_pulse();break;case"daily":e.js_to_daily();break;default:}};n.load_project(l,function(t){n.global.title="ç®æ? | "+t.info.name,n.global.loading_done=!0,e.project=t,x(),e.permission=1==e.project.info.archived?kzi.constant.permission.project_archived:2==e.project.info.team.status?kzi.constant.permission.team_stop_service:kzi.constant.permission.ok},function(e){e.code==kzi.statuses.prj_error.not_found.code?r.path("/project/"+l+"/notfound"):wt.data.error(e)});var j=function(t){var n=null;return _.isEmpty(e.daily_completed_tasks)||(n=_.findWhere(e.daily_completed_tasks,{tid:t})),n},C=function(t){var n=null;return _.isEmpty(e.daily_created_tasks)||(n=_.findWhere(e.daily_created_tasks,{tid:t})),n},D=function(){if(!_.isEmpty(e.daily_members)&&(_.each(e.daily_members,function(e){e.completed=0}),!_.isEmpty(e.daily_completed_tasks))){var t=[];_.each(e.daily_completed_tasks,function(e){var n=_.pluck(e.members,"uid");t=t.concat(n)}),_.each(e.daily_members,function(e){_.each(t,function(t){t===e.uid&&(e.completed=e.completed+1)})}),b(e.daily_members)}},E=function(t,n){if("completed"===t){if(!_.isEmpty(n.members)){var i=_.pluck(n.members,"uid");_.each(e.daily_members,function(e){_.contains(i,e.uid)&&(e.completed=e.completed+1)})}}else if("uncompleted"===t&&!_.isEmpty(n.members)){var i=_.pluck(n.members,"uid");_.each(e.daily_members,function(e){_.contains(i,e.uid)&&(e.completed=e.completed-1)})}b(e.daily_members)};e.$on(kzi.constant.event_names.on_task_update,function(e,t){if(t){var i=j(t.tid),a=C(t.tid);_.isEmpty(i)||(i.name=t.name,i.desc=t.desc,i.pos=t.pos,i.completed=t.completed,i.expire_date=t.expire_date,i.badges=t.badges,i.labels=t.labels,i.members.length!=t.members.length&&(i.members=t.members,D()),i.watchers=t.watchers,i.todos=t.todos),_.isEmpty(a)||(a.name=t.name,a.desc=t.desc,a.pos=t.pos,a.completed=t.completed,a.expire_date=t.expire_date,a.badges=t.badges,a.labels=t.labels,a.members=t.members,a.watchers=t.watchers,a.todos=t.todos),n.locator.show_prj&&n.refresh_cache.task.update_full(t)}}),e.$on(kzi.constant.event_names.on_task_trash,function(t,n){if(n&&!n.archived){var i=j(n.tid);_.isEmpty(i)||E("uncompleted",n),e.daily_completed_tasks=_.reject(e.daily_completed_tasks,function(e){return e.tid==n.tid}),e.daily_created_tasks=_.reject(e.daily_created_tasks,function(e){return e.tid==n.tid})}}),e.$on(kzi.constant.event_names.on_task_complete,function(t,n){if(n){var i=j(n.tid),a=C(n.tid);n.completed||(_.isEmpty(i)||(i.completed=n.completed,e.daily_completed_tasks=_.reject(e.daily_completed_tasks,function(e){return e.tid==n.tid}),E("uncompleted",n)),_.isEmpty(a)||(a.completed=n.completed)),n.completed&&(_.isEmpty(a)&&(a=n),a.completed=n.completed,e.daily_completed_tasks.push(n),E("completed",n))}})}])}(),function(){"use strict";wt.project.controller("project_file_list_ctrl",["$scope","$routeParams","$rootScope","$location","$dialog","$popbox",function(e,t,n,i,a,s){var o=t.pid,r=t.folder_id||"";n.pid=o,e.current_tab=null,_.isEmpty(r)&&(n.folder={folder_id:r}),e.token=kzi.get_cookie("sid");var l=[];e.filter_type=0,e.filter_type_text="å¨é¨",e.upload_enabled=!0;var c=function(t,i){n.global.loading_done=!1,wt.data.file.move(o,t.fid,t.folder_id,i.fid,function(){t.folder_id=i.fid,e.files=_.reject(e.files,function(e){return e.fid===t.fid}),e.switching_file_view_data(),n.global.loading_done=!0})},d=function(t){e.files=_.reject(e.files,function(e){return e.fid===t.fid||e.folder_id===t.fid}),n.refresh_cache.file.del(t.fid),e.switching_file_view_data()};e.switching_file_view_data=function(){"grid"===e.view_type?(e.files_grid=e.files,e.files_list=[]):(e.files_grid=[],e.files_list=e.files)},e.set_view_type=function(t){e.view_type=t,e.switching_file_view_data(),kzi.localData.set("file_list_view_type",t)},e.js_change_tab=function(t){if(e.current_tab!==t)switch(e.current_tab=t,t){case 0:_.each(e.files,function(e){e.is_hide=!1});break;case 1:_.each(e.files,function(e){e.is_hide=e.owner.uid===n.global.me.uid?!1:!0});break;case 2:_.each(e.files,function(e){e.is_hide=_.findWhere(e.watchers,{uid:n.global.me.uid})?!1:!0});break;default:}},n.load_files(o,r,function(t){n.global.title="æä»¶ | "+t.info.name,n.global.loading_done=!0,e.project=t,e.permission=1===e.project.info.archived?kzi.constant.permission.project_archived:2==e.project.info.team.status?kzi.constant.permission.team_stop_service:kzi.constant.permission.ok;var i=[];if(r){i=_.where(t.files,{folder_id:r}),e.is_folder=!0;var a=_.findWhere(t.files,{fid:r});e.folder_name=a?_.findWhere(t.files,{fid:r}).name:n.folder.name}else i=_.where(t.files,{folder_id:""}),e.is_folder=!1,e.folder_name="æä»¶";e.files=i,e.js_change_tab(0);var s=kzi.localData.get("file_list_view_type");_.isUndefined(s)||_.isNull(s)?e.set_view_type("grid"):e.set_view_type(s),l=i},function(e){e.code===kzi.statuses.prj_error.not_found.code?i.path("/project/"+o+"/notfound"):wt.data.error(e)}),e.js_filter_file=function(t){switch(e.filter_type=t,t){case 0:e.files=l,e.filter_type_text="å¨é¨";break;case 1:e.files=_.filter(l,function(e){return 1===e.is_watch}),e.filter_type_text="å³æ³¨";break;case 2:e.files=_.filter(l,function(e){return e.ext===kzi.constant.exts.jpeg||e.ext===kzi.constant.exts.jpg||e.ext==kzi.constant.exts.gif||e.ext==kzi.constant.exts.png}),e.filter_type_text="å¾ç";break;case 3:e.files=_.filter(l,function(e){return e.ext===kzi.constant.exts.doc||e.ext===kzi.constant.exts.xls||e.ext==kzi.constant.exts.ppt||e.ext==kzi.constant.exts.pdf||e.ext==kzi.constant.exts.docx||e.ext==kzi.constant.exts.xlsx||e.ext==kzi.constant.exts.pptx}),e.filter_type_text="ææ¡£";break;case 4:e.files=_.filter(l,function(e){return e.ext===kzi.constant.exts.zip||e.ext===kzi.constant.exts.rar}),e.filter_type_text="åç¼©";break;default:e.files=l}e.set_view_type(e.view_type)},e.js_show_more_menu=function(t){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_file_more_menu.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.email=o+kzi.constant.mail.domain,e.step=0,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_upload_file_pop=function(){a.dialog({backdrop:!1,templateUrl:"/ycjs/tpl/project/file/pop_upload.html",controller:function(e,t,i){e.title="ä¸ä¼ æä»¶",e.js_close=function(e){t.close(e)},e.js_ok=function(){var a=[];_.each(e.queue,function(e){if(!e.error){var t={};t.name=e.fname,t.ext=kzi.constant.get_ext(e.ext),t.size=e.size,t.path=e.url,t.icon=kzi.helper.build_file_icon(t),t.folder_id=r,a.push(t)}}),wt.data.file.upload(o,a,function(e){_.each(e.data,function(e){e.icon=kzi.helper.build_file_icon(e),_.isEmpty(i.scope.files)&&(i.scope.files=[]),i.scope.files.push(e),n.refresh_cache.file.add(e),i.scope.switching_file_view_data()})}),t.close()}},resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_trigger_upload=function(e){$(e.target).parents(".btn-group").eq(0).find("input[type=file]").click()},e.file_upload_option={previewMaxWidth:100,previewMaxHeight:110,url:[kzi.config.wtbox(),"?pid="+o,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"project",pid:o,folder_id:r}},e.$on(kzi.constant.event_names.on_file_add,function(t,n){n&&"project"===n.type&&(e.files.push(n.file),e.set_view_type(e.view_type))}),e.global_fileupload_queue=function(){return n.upload_queue.get_project(o,r)},e.js_add_folder_pop=function(t){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_add_folder.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.js_close=function(){t.close()},e.js_add_folder=function(a,s){_.isEmpty(s)||(e.is_save_ing=!0,wt.data.file.add_folder(o,s,function(e){e.data.icon=kzi.helper.build_file_icon(e.data),i.scope.files.push(e.data),n.project.files.push(e.data),t.close()},function(){},function(){e.is_save_ing=!1}))},e.js_keydown_folder_input=function(t){13==t.keyCode&&e.js_add_folder(e.name)}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_menu=function(t,i,a,r){t.stopPropagation(),1===i.type?s.popbox({target:t,top:a,left:r,templateUrl:"/ycjs/tpl/project/file/pop_folder_menu.html",controller:["$scope","popbox","pop_data",function(e,t,n){e.popbox=t,e.folder=i,e.folder_name=i.name,e.folder_icons=kzi.constant.get_folder_icons,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},e.js_change_name=function(n,a){wt.data.file.update(o,i.fid,a,"",function(){},null,function(){e.is_save_ing=!1}),i.name=a,t.close()},e.js_set_folder_icon=function(t){wt.data.file.update_ext(o,i.fid,t.ext,function(){}),e.folder.ext=t.ext,e.folder.icon=t.path},e.js_del_folder=function(){n.remove_file_and_refresh(i),wt.data.file.trash(o,i.fid,function(){}),t.close()}}],resolve:{pop_data:function(){return{scope:e,remove_file_and_refresh:d}}}}).open():s.popbox({target:t,top:a,left:r,templateUrl:"/ycjs/tpl/project/file/pop_file_menu.html",controller:["$scope","popbox","pop_data",function(e,t,a){e.popbox=t,e.file=i,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()};var s=_.where(n.project.files,{type:1});e.folders=s,i.folder_id&&(e.folders.unshift({fid:"",name:"æ ¹ç®å½?"}),e.folders=_.reject(e.folders,function(e){return e.fid===i.folder_id})),e.js_del_file=function(){a.remove_file_and_refresh(i),wt.data.file.trash(o,i.fid,function(){}),t.close()},n.load_project_members(o,function(t){var n=[];_.each(t.members,function(e){if(1==e.status){var t=_.findWhere(i.watchers,{uid:e.uid});e.is_watch=t?1:0,n.push(e)}}),e.members=n}),e.js_toggle_watch=function(e){if(e.is_watch){var t=_.findWhere(i.watchers,{uid:e.uid});t&&(i.watchers=_.reject(i.watchers,function(t){return t.uid===e.uid})),e.is_watch=0,wt.data.unwatch(o,kzi.constant.xtype.file,i.fid,e.uid,function(){})}else{var t=_.findWhere(i.watchers,{uid:e.uid});
t||(i.watchers.push(e),e.is_watch=1,wt.data.watch(o,kzi.constant.xtype.file,i.fid,e.uid,function(){}))}},e.js_watch_all=function(){if(i.watchers.length!==e.members){var n=_.pluck(e.members,"uid");wt.data.watch_batch(o,kzi.constant.xtype.file,i.fid,n,function(){i.watchers=e.members}),_.each(e.members,function(e){e.is_watch=1})}t.close()},e.js_move_to=function(e){e&&c(i,e),t.close()}}],resolve:{pop_data:function(){return{scope:e,remove_file_and_refresh:d}}}}).open()},e.js_navigate_detail=function(e,t){e.stopPropagation(),e.preventDefault(),0===t.type?n.locator.to_file(t.pid,t.fid,!1):(n.folder={folder_id:t.fid,name:t.name},i.path("/project/"+o+"/folder/"+t.fid))},e.js_navigate=function(t,a){0===a.type?"list"===e.view_type&&e.js_navigate_detail(t,a):(n.folder={folder_id:a.fid,name:a.name},i.path("/project/"+o+"/folder/"+a.fid))},e.file_draggable_options={helper:"clone",placeholder:"wt-placeholder",containment:".centerpanel",hoverClass:"file-state-on-draggable",zIndex:2e3,delay:300,start:function(e,t){t.helper.addClass("file-state-on-draggable")},stop:function(){},drag:function(){}},e.folder_droppable_options={accept:".file-item",over:function(){},out:function(){},hoverClass:"folder-state-file-over",drop:function(t,n){var i=$(t.target).attr("file-id"),a=n.helper.attr("file-id");_.isEmpty(i)||_.isEmpty(a)||e.$apply(function(){var t=_.findWhere(e.files,{fid:a}),n=_.findWhere(e.files,{fid:i});c(t,n)})}},e.dragfile_option={upload_option:e.file_upload_option},e.$on(kzi.constant.event_names.on_file_trash,function(t,n){n&&(e.files=_.reject(e.files,function(e){return e.fid==n.fid}),e.set_view_type(e.view_type))}),e.$on(kzi.constant.event_names.on_file_move,function(t,n){n&&(e.files=_.reject(e.files,function(e){return e.fid==n.fid}),e.set_view_type(e.view_type))}),e.$on(kzi.constant.event_names.on_right_menu,function(t,n){var i=kzi.helper.mouse_position(n),a=null,s="file-item-mark";if($(n.target).hasClass(s))a=$(n.target).attr("file-id");else{if(!($(n.target).parents("."+s).length>0))return;a=$(n.target).parents("."+s).attr("file-id")}if(a){var o=_.findWhere(e.files,{fid:a});o&&e.js_show_menu(n,o,i.y,i.x)}})}])}(),function(){"use strict";wt.project.controller("project_page_ctrl",["$scope","$routeParams","$rootScope","$popbox","$location",function(e,t,n,i,a){var s=t.pid;e.pid=s,e.current_tab=1,e.js_show_menu=function(t,a,o,r){t.stopPropagation(),i.popbox({target:t,top:o,left:r,templateUrl:"/ycjs/tpl/project/page/pop_page_action.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.step=0,e.js_step=function(t){e.step=t},e.page=a,""===a.parent_id&&(e.show_sub_menu=!0),n.load_project_members(s,function(t){_.isEmpty(e.members)&&(e.members=wt.bus.watch.get_scope_watcher_members(t.members,a.watchers))}),e.js_delete_page=function(t){e.is_deleting=!0,wt.data.page.trash(s,t.page_id,function(){e.is_deleting=!1,e.js_close(),i.scope.pages=_.reject(i.scope.pages,function(e){return e.page_id===t.page_id})})},e.js_toggle_member=function(e){wt.bus.page.toggle_watcher_member(e,a,s)},e.js_watch_all=function(t){wt.bus.page.watch_all_members(e.members,t,s,function(){},null,function(){})},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_add_subpage_pop=function(t){t.stopPropagation(),i.popbox({target:t,templateUrl:"/ycjs/tpl/project/page/pop_parents_page.html",controller:["$scope","popbox","pop_data",function(e,t,n){e.popbox=t,e.pages=_.where(n.scope.cached_pages,{parent_id:""}),e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()};var o=function(){"grid"===e.view_type?(e.pages=_.where(e.cached_pages,{parent_id:""}),_.each(e.pages,function(t){var n=[],i=_.where(e.cached_pages,{parent_id:t.page_id});_.each(i,function(e){n.push(e)}),t.sub_pages=_.sortBy(n,function(e){return e.create_date})})):e.pages=e.cached_pages};e.set_view_type=function(t){kzi.localData.set("page_list_view_type",t),e.view_type=t,o()},e.js_change_tab=function(t){if(e.current_tab!==t)switch(e.current_tab=t,t){case 1:_.each(e.cached_pages,function(e){e.is_hide=!1});break;case 2:_.each(e.cached_pages,function(e){e.is_hide=e.owner.uid===n.global.me.uid?!1:!0});break;case 3:_.each(e.cached_pages,function(e){var t=_.findWhere(e.watchers,{uid:n.global.me.uid});e.is_hide=t?!1:!0})}},n.load_project(s,function(t){n.global.title="ææ¡£ | "+t.info.name,e.project=t,e.permission=1==e.project.info.archived?kzi.constant.permission.project_archived:2==e.project.info.team.status?kzi.constant.permission.team_stop_service:kzi.constant.permission.ok,wt.data.page.get_all(s,function(t){e.cached_pages=t.data,n.global.loading_done=!0;var i=kzi.localData.get("page_list_view_type");_.isUndefined(i)||_.isNull(i)?(e.view_type="grid",kzi.localData.set("page_list_view_type",e.view_type)):e.view_type=i,o()})},function(e){e.code===kzi.statuses.prj_error.not_found.code?a.path("/project/"+s+"/notfound"):wt.data.error(e)}),e.js_show_more_menu=function(t){i.popbox({target:t,templateUrl:"/ycjs/tpl/project/page/pop_pages_more_menu.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.email=s+kzi.constant.mail.domain,e.step=0,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.$on(kzi.constant.event_names.on_right_menu,function(t,n){var i=kzi.helper.mouse_position(n),a=null,s="page-item-mark";if($(n.target).hasClass(s))a=$(n.target).attr("page-id");else{if(!($(n.target).parents("."+s).length>0))return;a=$(n.target).parents("."+s).attr("page-id")}if(a){var o=_.findWhere(e.pages,{page_id:a});o&&e.js_show_menu(n,o,i.y,i.x)}})}]),wt.project.controller("project_page_add_edit_ctrl",["$rootScope","$scope","$location","$routeParams","$popbox",function(e,t,n,i,a){var s=i.pid,o=i.page_id,r=i.parent_page_id;t.pid=s,e.global.loading_done=!1;var l=null;_.isEmpty(o)?(t.page={name:"",content:"",message:"",placeholder:"æ°å»ºææ¡£çç®ç­è¯´æï¼å¯éï¼"},_.isEmpty(r)?r="":t.page.message="",t.is_add=!0,l=angular.copy(t.page)):(wt.data.page.get(s,o,function(i){t.page=i.data,t.page.placeholder="æ­¤æ¬¡ä¿®æ¹çç®ç­è¯´æï¼å¯éï¼",t.page.message="",l=angular.copy(t.page),e.global.loading_done=!0,e.global.title="ç¼è¾ææ¡£ | "+t.page.name,wt.data.page.locked(s,o),t.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){var t="/project/"+s+"/page";n.path(t)})}),t.is_add=!1),t.$on("$locationChangeStart",function(e){if(t.save_success!==!0){_.isEmpty(t.page.name)&&(t.page.name=""),_.isEmpty(t.page.content)&&(t.page.content=""),_.isEmpty(t.page.message)&&(t.page.message="");var a=!1;(l.name!==t.page.name||l.content!==t.page.content||l.message!==t.page.message)&&(a=!0),a&&(window.confirm("å½åææ¡£è¿æ²¡æä¿å­?,ç¡®å®è¦éåºç¼è¾é¡µé¢ä¹ï¼?")||e.preventDefault()),wt.data.page.unlocked(s,o)}}),t.js_save_page=function(i,a){if(!_.isEmpty(t.page)&&!i.$invalid)if(t.is_saving=!0,t.is_add)wt.data.page.add(s,t.page.name,t.page.content,t.page.message,r,function(i){a?(kzi.msg.success("æ·»å ææ¡£æå!"),t.is_add=!1,t.page=i.data,t.page.placeholder="æ­¤æ¬¡ä¿®æ¹çç®ç­è¯´æï¼å¯éï¼",t.page.message="",l=angular.copy(t.page),e.global.title="ç¼è¾ææ¡£ | "+t.page.name):(t.save_success=!0,n.path("/project/"+s+"/page"))},null,function(){t.is_saving=!1,t.is_saving_continue=!1});else{_.isUndefined(t.page.is_notify)&&(t.page.is_notify=!1);var o=1;a&&(o=0),wt.data.page.update(s,t.page.page_id,t.page.name,t.page.content,t.page.message,t.page.is_notify,o,function(){a?(kzi.msg.success("æ´æ°ææ¡£æå!"),t.page.message="",l=angular.copy(t.page),e.global.title="ç¼è¾ææ¡£ | "+t.page.name):(t.save_success=!0,n.path("/project/"+s+"/page"))},null,function(){t.is_saving=!1,t.is_saving_continue=!1})}},t.js_cancel_edit=function(){t.is_add?history.go(-1):n.path("/project/"+s+"/page")},t.js_pop_delete=function(e){a.popbox({target:e,templateUrl:"/ycjs/tpl/common/pop_delete_confirm.html",controller:["$rootScope","$scope","popbox",function(e,t,i){t.popbox=i,t.js_close=function(){i.close()},t.delete_message="ç¡®è®¤è¦å é¤æ­¤ææ¡£åï¼<br/>æå é¤åä¼æ¾å¨åæ¶ç«ï¼å¯ä»¥å¨åæ¶ç«éæ©æ¢å¤æèå½»åºå é¤ã?",t.delete_title="ç¡®è®¤å é¤",t.js_sure_delete=function(){t.is_deleting=!0,wt.data.page.trash(s,o,function(){n.path("/project/"+s+"/page")},null,function(){t.is_deleting=!1})}}]}).open()},e.load_project(s,function(n){t.is_add&&(e.global.loading_done=!0,e.global.title="æ·»å ææ¡£ | "+n.info.name),t.project=n,t.permission=1===t.project.info.archived?kzi.constant.permission.project_archived:2===t.project.info.team.status?kzi.constant.permission.team_stop_service:kzi.constant.permission.ok},function(e){e.code===kzi.statuses.prj_error.not_found.code?n.path("/project/"+s+"/notfound"):wt.data.error(e)})}]),wt.project.controller("project_page_versions_ctrl",["$scope","$routeParams","$rootScope","$popbox","$location",function(e,t,n){var s=t.pid,o=t.page_id;e.pid=s,n.global.loading_done=!1,n.load_project(s,function(t){e.project=t,e.permission=e.project.info.archived===kzi.constant.archived.yes?kzi.constant.permission.project_archived:kzi.constant.permission.ok,wt.data.page.get(s,o,function(t){e.page=t.data,n.global.title="ææ¡£åå²çæ¬ | "+e.page.name,t.data.is_deleted===kzi.constant.trash.yes&&(e.permission=kzi.constant.permission.entity_deleted),wt.data.page.get_versions(s,o,function(t){n.global.loading_done=!0,e.page_versions=t.data})},function(t){n.global.loading_done=!0,t.code===kzi.statuses.page_error.not_found.code?e.permission=kzi.constant.permission.entity_not_found:wt.data.error(t)})},null)}])}(),function(){"use strict";wt.project.controller("project_post_ctrl",["$rootScope","$scope","$routeParams","$popbox","$timeout","$location",function(e,t,n,i,a,s){var o=n.pid,r=0,l="last_reply_date";t.current_tab=0;var d=e.global.me;d.watched=!0,e.global.loading_done=!0,t.edit_post={name:"",content:"",watchers:[d]};var u=function(e){t.part_loading_done=!1,wt.data.post.get_list(o,r,kzi.config.default_count,l,1,t.current_tab,function(n){n.data.length>0&&(r=n.data[n.data.length-1][l]),t.posts=_.isEmpty(t.posts)?n.data:t.posts.concat(n.data),t.has_more=n.data.length===kzi.config.default_count?!0:!1,angular.isFunction(e)&&e(n.data),t.part_loading_done=!0})};t.js_show_add_post=function(){t.show_add_post=!t.show_add_post},t.js_cancel_edit_post=function(){t.show_add_post=!1,t.edit_post.name="",t.edit_post.content="",t.edit_post.watchers=[d]},t.js_change_tab=function(e){if(t.current_tab!==e)switch(t.current_tab=e,r=0,t.posts=[],u(),e){case 0:break;case 1:break;case 2:break;default:}},t.js_toggle_member=function(e){wt.bus.post.toggle_watcher_member(e,t.edit_post,o)},t.js_save_post=function(){t.is_saving=!0;var i=_.pluck(t.edit_post.watchers,"uid");wt.data.post.add(o,t.edit_post.name,t.edit_post.content,i,function(n){t.is_saving=!1,2===t.current_tab?i.indexOf(e.global.me.uid)>=0&&t.posts.unshift(n.data):t.posts.unshift(n.data)},null,function(){t.js_cancel_edit_post()})},t.js_show_post_menu=function(n,a,s,r){n.stopPropagation(),i.popbox({target:n,top:s,left:r,templateUrl:"/ycjs/tpl/project/post/pop_post_action.html",controller:["$scope","popbox","pop_data",function(t,n,i){t.popbox=n,t.step=0,t.js_step=function(e){t.step=e},t.edit_post=a,e.load_project_members(o,function(e){wt.bus.post.set_scope_watcher_members(t,e.members,a.watchers)}),t.js_delete_post=function(e){t.is_deleting=!0,wt.data.post.trash(o,e.post_id,function(){t.is_deleting=!1,t.js_close(),i.scope.posts=_.reject(i.scope.posts,function(t){return t.post_id===e.post_id})})},t.js_toggle_member=function(e){wt.bus.post.toggle_watcher_member(e,a,o)},t.js_watch_all=function(e){wt.bus.post.watch_all_members(t.members,e,o,function(){},null,function(){t.js_close()})},t.js_close=function(){n.close()}}],resolve:{pop_data:function(){return{scope:t}}}}).open()},t.js_add_post_watchers_pop=function(n,a){i.popbox({target:n,templateUrl:"/ycjs/tpl/project/post/pop_edit_post_watchers.html",controller:["$scope","popbox","pop_data",function(t,n){t.popbox=n,t.edit_post=a,e.load_project_members(o,function(e){wt.bus.post.set_scope_watcher_members(t,e.members,a.watchers)}),t.js_toggle_member=function(e){wt.bus.post.toggle_watcher_member(e,a,o)},t.js_watch_all=function(e){wt.bus.post.watch_all_members(t.members,e,o,function(){},null,function(){})},t.js_close=function(){n.close()}}],resolve:{pop_data:function(){return{scope:t}}}}).open()},t.js_show_more_menu=function(n){i.popbox({target:n,templateUrl:"/ycjs/tpl/project/post/pop_posts_more_menu.html",controller:["$scope","popbox","pop_data",function(t,n){t.popbox=n,t.email=o+kzi.constant.mail.domain,t.step=0,t.js_step=function(e){t.step=e},t.js_close=function(){n.close()},t.selected_filter=null,t.filter_items=[{name:"æåå¤æ¶é?",value:"last_reply_date",is_selected:!1},{name:"æåå¸æ¶é?",value:"create_date",is_selected:!1}],"last_reply_date"===l?(t.filter_items[0].is_selected=!0,t.selected_filter=t.filter_items[0]):(t.filter_items[1].is_selected=!0,t.selected_filter=t.filter_items[1]),t.js_select_filter=function(n){t.selected_filter.is_selected=!1,n.is_selected=!0,t.selected_filter=n,t.js_close(),e.$broadcast(kzi.constant.event_names.filter_posts_by_sort,n.value)}}],resolve:{pop_data:function(){return{scope:t}}}}).open()},t.js_slide_change=function(e){e?t.show_add_post_empty=!!e:a(function(){t.show_add_post_empty=!!e},400)},e.load_project(o,function(n){e.global.title="è¯é¢ | "+n.info.name,t.project=n,t.permission=1==t.project.info.archived?kzi.constant.permission.project_archived:2==t.project.info.team.status?kzi.constant.permission.team_stop_service:kzi.constant.permission.ok,u()},function(e){e.code===kzi.statuses.prj_error.not_found.code?s.path("/project/"+o+"/notfound"):wt.data.error(e)}),t.js_load_more=function(){u()},t.$on(kzi.constant.event_names.filter_posts_by_sort,function(e,n){_.isEmpty(n)||(l=n),r=0,t.posts=null,u()}),t.$on(kzi.constant.event_names.on_post_comment,function(e,n){if(!_.isEmpty(n)){var i=_.findWhere(t.posts,{post_id:n.post_id});i&&i.comment_count++}}),t.$on(kzi.constant.event_names.on_post_trash,function(e,n){_.isEmpty(n)||(t.posts=_.reject(t.posts,function(e){return e.post_id===n.post_id}))}),t.$on(kzi.constant.event_names.on_post_update,function(e,n){if(!_.isEmpty(n)){var i=_.findWhere(t.posts,{post_id:n.post_id});i&&(i.name=n.name,i.summary=kzi.helper.substr(n.content,60))}}),t.$on(kzi.constant.event_names.on_right_menu,function(e,n){var i=kzi.helper.mouse_position(n),a=null,s="post-item";if($(n.target).hasClass(s))a=$(n.target).attr("post-id");else{if(!($(n.target).parents("."+s).length>0))return;a=$(n.target).parents("."+s).attr("post-id")}if(a){var o=_.findWhere(t.posts,{post_id:a});o&&t.js_show_post_menu(n,o,i.y,i.x)}})}]).controller("post_filter_ctrl",["$scope","$routeParams","$rootScope",function(e){var i=null;e.filter_items=[{name:"æåå¸æ¶é?",value:"create_date",is_selected:!0},{name:"æåå¤æ¶é?",value:"last_reply_date",is_selected:!1}],i=e.filter_items[0],e.js_select_filter=function(t){i.is_selected=!1,t.is_selected=!0,i=t,e.$emit(kzi.constant.event_names.filter_posts_by_sort,t.value)}}])}(),function(){"use strict";wt.project.controller("project_chats_ctrl",["$rootScope","$scope","$routeParams","$popbox","$timeout","$location",function(e,t,n,i,a,s){var o=n.pid,r=function(e){t.chat=null,t.loading_chat_done=!1,wt.data.project.get_chat_list(o,e,kzi.config.default_count,function(n){t.chat=n.data,wt.bus.chat.set_is_show_data(t.chat.messages),wt.bus.chat.set_messages_for_file(t.chat.messages,o),(1===e||"1"===e)&&(t.chats_pagination_opts={totalCount:n.data.total_count,opts:{callback:function(e){r(e+1)}}})},null,function(){t.loading_chat_done=!0})};e.load_project(o,function(n){e.global.title="èå¤© | "+n.info.name,e.global.loading_done=!0,t.project=n,t.permission=1==t.project.info.archived?kzi.constant.permission.project_archived:2==t.project.info.team.status?kzi.constant.permission.team_stop_service:kzi.constant.permission.ok,r(1)},function(e){e.code===kzi.statuses.prj_error.not_found.code?s.path("/project/"+o+"/notfound"):wt.data.error(e)})}])}(),function(){"use strict";angular.module("wt.calendar_controller",["ui.calendar"]).controller("calendar_ctrl",["$rootScope","$scope","$timeout",function(e,t,n){function m(){var e=t.myCalendar.fullCalendar("getView");$("#calendar_title").html(e.title);var n=new Date(e.start).getTime(),i=new Date(e.end).getTime(),a=(new Date).getTime();n>a||a>i?$("#calendar_today").css("visibility","visible"):$("#calendar_today").css("visibility","hidden")}e.global.title="æ¥å",t.project_ids=[],t.filter_type="all",t.calendar_view="month",t.show_task_uid=e.global.me.uid,t.show_task_team_id=null,t.show_my_task=!0,t.show_all_events=1,t.current_team={},t.show_completed_tasks=1;var s,o,i=null,a=null,r=function(){t.show_completed_tasks=0==kzi.localData.get("cale_show_completed_tasks")?0:1,t.show_all_events=0==kzi.localData.get("cale_show_all_events")?0:1;var e=kzi.localData.get("calendar_checked_project_ids");t.project_ids=null!=e?"none"===e?[]:e.split(","):null,kzi.localData.get("calendar_view")?t.calendar_view=kzi.localData.get("calendar_view"):kzi.localData.set("calendar_view",t.calendar_view)},l=function(){t.calendar_teams=[],_.isEmpty(e.teams)?e.load_teams(function(e){_.each(e,function(e){t.calendar_teams.push({name:e.name,team_id:e.team_id})})}):_.each(e.teams,function(e){t.calendar_teams.push({name:e.name,team_id:e.team_id})})};l();var c=function(){var e=_.filter(t.projects,function(e){return e.is_checked}),n=_.pluck(e,"pid");t.project_ids=n,_.isEmpty(n)?kzi.localData.set("calendar_checked_project_ids","none"):kzi.localData.set("calendar_checked_project_ids",t.project_ids)};r();var d=function(){t.myCalendar.fullCalendar("refetchEvents")},u=function(){t.myCalendar.fullCalendar("removeEvents",[])},p=function(n){return t.calendar_projects?(n(),void 0):(e.load_projects(function(e){_.each(e,function(e){e.is_checked=null==t.project_ids?!0:0===t.project_ids.length?!1:_.contains(t.project_ids,e.pid)?!0:!1}),c(),t.projects=e,t.calendar_projects=_.filter(t.projects,function(e){return 1===e.is_calendar})},null,function(){n()}),void 0)},f=function(e,n,a,r,l){if(i&&s===e&&o===n){if(_.isFunction(a))if(t.show_all_events)a(i);else{var c=[];_.each(i,function(e){e.extend.i_attended&&c.push(e)}),a(c)}_.isFunction(l)&&l()}else{var d=_.pluck(t.projects,"pid");wt.data.event.get_list(d,1,1,e,n,function(e){if(i=e.data,_.isFunction(a))if(t.show_all_events)a(i);else{var n=[];_.each(i,function(e){e.extend.i_attended&&n.push(e)}),a(n)}},r,l)}},h=function(n,i,r,l,c){a&&s===n&&o===i?(_.isFunction(r)&&r(a),_.isFunction(c)&&c()):t.show_task_uid===e.global.me.uid&&null===t.show_task_team_id?wt.data.calendar.get_my_tasks("",1,"",n,i,function(e){a=e.data,_.isFunction(r)&&r(e.data)},l,c):wt.data.calendar.get_my_tasks(t.show_task_team_id,1,t.show_task_uid,n,i,function(e){a=e.data,_.isFunction(r)&&r(e.data)},l,c)};t.calendarEventSources=[{events:function(n,i,a){var n=Math.round(n.getTime()),i=Math.round(i.getTime());p(function(){"event"===e.global.calendar_sidebar_view?f(n,i,function(e){var r=_.filter(t.calendar_projects,function(e){return e.is_checked}),l=_.pluck(r,"pid"),c=_.filter(e,function(e){return _.contains(l,e.extend.pid)});a(c),s=n,o=i}):"task"===e.global.calendar_sidebar_view&&h(n,i,function(e){if(t.show_completed_tasks)a(e);else{var r=[];_.each(e,function(e){e.extend.completed||r.push(e)}),a(r)}s=n,o=i})})}}],t.calendarConfig={header:!1,height:kzi.util.heightNoHeader()-95,editiable:!0,droppable:!0,titleFormat:{month:"yyyyå¹´MMæ?",week:"yyyyå¹´MMædæ? {&#8212; [ yyyyå¹´][ MMæ]dæ¥}",day:"yyyyå¹´MMædæ? dddd"},firstDay:0,weekMode:"liquid",allDayText:"å¨å¤©",axisFormat:"HH:mm",timeFormat:"â?",monthNames:["ä¸æ?","äºæ","ä¸æ","åæ","äºæ","å­æ","ä¸æ","å«æ","ä¹æ","åæ","åä¸æ?","åäºæ?"],monthNamesShort:["ä¸æ?","äºæ","ä¸æ","åæ","äºæ","å­æ","ä¸æ","å«æ","ä¹æ","åæ","åä¸æ?","åäºæ?"],dayNames:["æææ?","ææä¸","ææäº?","ææä¸?","ææå?","ææäº?","ææå?"],dayNamesShort:["æææ?","ææä¸","ææäº?","ææä¸?","ææå?","ææäº?","ææå?"],buttonText:{today:"ä»å¤©",month:"æ?",agendaWeek:"å?",agendaDay:"æ?"},defaultView:t.calendar_view,dayClick:t.onDayClick,loading:function(t){m(),e.global.loading_done=t?!1:!0},eventClick:function(e,n,i){t.onEventClick(e,n,i)},eventDrop:function(t,n){if(0!==n){var c=t.extend.pid;if(t.extend.xtype===kzi.constant.xtype.task){var d=t.id,u=t.extend.expire_date,p=moment(u).add("days",n).endOf("day").valueOf();wt.data.task.set_expire(c,d,p,function(){if(t.extend.expire_date=p,t.extend.badges.expire_date=p,e.project.info&&e.project.info.pid==c){var i=_.findWhere(e.project.tasks,{tid:d});i&&(i.expire_date=p,i.badges.expire_date=p)}})}else if(t.extend.xtype===kzi.constant.xtype.event){var f=moment(t.start),h=moment(t.extend.end).add("days",n);wt.data.event.update_date(c,t.id,f.format("YYYY-MM-DD"),f.format("HH:mm"),h.format("YYYY-MM-DD"),moment(h).format("HH:mm"))}}},windowResize:function(){$(this).fullCalendar("option","height",kzi.util.heightNoHeader()-95)}},t.onEventClick=function(t,n){n.preventDefault(),n.stopPropagation(),t.extend&&t.extend.xtype===kzi.constant.xtype.event?e.locator.to_event(t.extend.pid,t.id,!0):e.locator.to_task(t.extend.pid,t.id,!0)},t.onDayClick=function(){return!1},t.changeView=function(e){t.myCalendar.fullCalendar("changeView",e),t.calendar_view=e,kzi.localData.set("calendar_view",e),m()},t.prev=function(){t.myCalendar.fullCalendar("prev"),m()},t.next=function(){t.myCalendar.fullCalendar("next"),m()},t.today=function(){t.myCalendar.fullCalendar("today"),m()},t.js_new_event_success=function(n){var a=_.findWhere(e.projects,{pid:n.pid});if(a){var s=wt.bus.event.event_to_calEvent(n,a.bg);a.is_calendar||(a.is_calendar=1,_.defaults(a,{is_checked:!0}),t.calendar_projects.push(a),t.calendar_projects=_.sortBy(t.calendar_projects,function(e){return e.pos})),i&&(i.push(s),u(),d())}else i=null,u(),d()},t.js_filter_calendar_toggle=function(e){e.is_checked=e.is_checked?!1:!0,c(),u(),d()},t.js_toggle_showall=function(){t.show_all_events=1==t.show_all_events?0:1,kzi.localData.set("cale_show_all_events",t.show_all_events),u(),d()},t.js_team_members_toggle=function(e){t.current_team.team_id===e.team_id?t.current_team.expand=!t.current_team.expand:(t.current_team.expand=!1,t.current_team=e,t.current_team.expand=!0,_.isEmpty(e.members)&&(t.members_loading_done=!1,wt.data.team.get_team_members(e.team_id,function(t){e.members=wt.bus.member.get_normal_members(t.data.members),_.each(e.members,function(t){t.team_id=e.team_id})},null,function(){t.members_loading_done=!0})))},t.js_view_member_tasks=function(e,n){t.show_task_uid=e.uid,t.show_task_team_id=n.team_id,t.show_my_task=!1,a=null,u(),d()},t.js_view_my_tasks=function(){t.show_task_uid=e.global.me.uid,t.show_my_task=!0,t.show_task_team_id=null,a=null,u(),d()},t.js_show_completed_tasks=function(){t.show_completed_tasks=t.show_completed_tasks?0:1,kzi.localData.set("cale_show_completed_tasks",t.show_completed_tasks),u(),d()},t.js_toggle_right=function(){e.global.calendar_fold=!e.global.calendar_fold,n(function(){$("#calendar").fullCalendar("render")},220)},n(function(){$("#calendar").fullCalendar("render")},420),t.js_change_calendar_siderview=function(t){e.global.calendar_sidebar_view!==t&&(e.global.calendar_sidebar_view=t,u(),d())},t.$on(kzi.constant.event_names.on_task_update,function(e,t){var n=_.findWhere(a,{id:t.tid});n&&(n.title=t.name,n.start=t.expire_date.toString().substring(0,10)),u(),d()}),t.$on(kzi.constant.event_names.on_task_trash,function(e,t){var n=_.findWhere(a,{id:t.tid});n&&(a=_.reject(a,function(e){return e.id===t.tid})),u(),d()}),t.$on(kzi.constant.event_names.on_task_complete,function(e,t){var n=_.findWhere(a,{id:t.tid});n&&(t.completed?(n.className="cal_task_completed slide-trigger",n.extend.completed=1):(n.className="cal_task_uncompleted slide-trigger",n.extend.completed=0)),u(),d()}),t.$on(kzi.constant.event_names.on_event_update,function(t,n){if(i){var a=_.findWhere(i,{id:n.event_id});a&&(a.title=n.name,a.start=moment(n.start.date).valueOf().toString().substring(0,10),a.end=moment(n.end.date).valueOf().toString().substring(0,10),a.extend.i_attended=_.findWhere(n.attendees,{uid:e.global.me.uid})?1:0,u(),d())}}),t.$on(kzi.constant.event_names.on_event_trash,function(e,n){i&&(i=_.reject(i,function(e){return e.id===n.event_id})),t.calendar_projects=_.filter(t.projects,function(e){return 1===e.is_calendar}),u(),d()})}])}(),function(){"use strict";angular.module("wt.activity_controller",[]).controller("feed_all_ctrl",["$rootScope","$scope","$routeParams","$timeout",function(e,t){e.global.title="å¨é¨å¨æ?",e.global.loading_done=!0,t.current_tab=0;var a=1,s=function(){e.part_loading_done=!1,wt.data.activity.get_feeds("all",t.current_tab,a,function(e){_.isEmpty(e.data)?t.feeds=[]:(a+=1,t.feeds=_.isEmpty(t.feeds)?e.data:t.feeds.concat(e.data)),t.has_more=kzi.config.default_count>e.data.length?!1:!0},null,function(){e.part_loading_done=!0})};s(),t.load_feeds_more=function(){s()},t.js_change_tab=function(e){t.current_tab=e,a=1,t.feeds=[],s()}}]).controller("activity_ctrl",["$rootScope","$scope","$routeParams",function(e,t,n){e.global.title="æ´»å¨";var i=n.team_id,a=null,s={pid:"all",name:"å¨é¨é¡¹ç®",selected:!0};e.load_team(i,function(n){e.global.loading_done=!0,t.projects=[],t.projects.push(s),_.each(n.projects,function(e){e.selected=!1,t.projects.push(e)}),a=t.projects[0]},function(e){e.code==kzi.statuses.team_error.not_found.code?t.permission=kzi.constant.permission.team_not_found:wt.data.error(e)}),t.js_select_prj=function(e){a.pid!==e.pid&&(a.selected=!1,e.selected=!0,a=e,t.$broadcast(kzi.constant.event_names.filter_activity_by_prj,{pid:a.pid}))}}]).controller("team_activity_ctrl",["$rootScope","$scope","$routeParams",function(e,t,n){t.tpl_prefix="user_";var i=0,a="all",s="all",o=n.team_id,r=function(t){e.global.loading_done=!1,wt.data.activity.get_for_teams(o,a,s,i,kzi.config.default_count,function(n){n.data.length>0&&(i=n.data[n.data.length-1].published),angular.isFunction(t)&&t(n.data),e.global.loading_done=!0})};t.js_load_more=function(e){t.eventTarget=e.target,wt.utility.activity.load_activities(r,t,function(){$(t.eventTarget).button("reset")})},t.$on(kzi.constant.event_names.filter_activity_by_prj,function(e,n){_.isEmpty(n.pid)||(a=n.pid),i=0,t.activities=null,wt.utility.activity.load_activities(r,t)}),t.$on(kzi.constant.event_names.filter_activity_by_type,function(e,n){s=n.data,i=0,t.activities=null,wt.utility.activity.load_activities(r,t)}),wt.utility.activity.load_activities(r,t)}]).controller("item_activity_ctrl",["$rootScope","$scope",function(e,t){var n=null,i=null;t.tpl_prefix="item_";var a=0,s=function(e){t.loading_activity=!0,wt.data.activity.get_for_item(i,n,a,kzi.config.default_count,function(t){t.data.length>0&&(a=t.data[t.data.length-1].published),angular.isFunction(e)&&e(t.data)},null,function(){t.loading_activity=!1})};t.js_load_more=function(){wt.utility.activity.load_activities(s,t)},t.$on(kzi.constant.event_names.reload_item_activities,function(e,o){a=0,i=o.xtype,n=o.xid,t.activities=null,wt.utility.activity.load_activities(s,t)})}]).controller("project_activity_ctrl",["$scope","$routeParams","$rootScope","$dialog","$location",function(e,t,n,i,a){var s=t.pid;n.pid=s,e.tpl_prefix="project_";var o=0,r="all",l=function(t){e.loading_activity=!0,wt.data.activity.get_for_project(s,r,o,kzi.config.default_count,function(n){n.data.length>0&&(o=n.data[n.data.length-1].published),angular.isFunction(t)&&t(n.data),e.loading_activity=!1})};e.js_to_graph=function(e){kzi.localData.set("prj_graph_view_type",e),a.path("/project/"+s+"/graph")},n.load_project(s,function(t){n.global.title="æ´»å¨ | "+t.info.name,e.project=t,e.permission=1==e.project.info.archived?kzi.constant.permission.project_archived:2==e.project.info.team.status?kzi.constant.permission.team_stop_service:kzi.constant.permission.ok,n.global.loading_done=!0,wt.utility.activity.load_activities(l,e)},function(e){e.code==kzi.statuses.prj_error.not_found.code?a.path("/project/"+s+"/notfound"):wt.data.error(e)}),e.js_load_more=function(t){e.eventTarget=t.target,wt.utility.activity.load_activities(l,e,function(){$(e.eventTarget).button("reset")})},e.$on(kzi.constant.event_names.filter_activity_by_type,function(t,n){r=n.data,o=0,e.activities=null,wt.utility.activity.load_activities(l,e)})}]).controller("my_activity_ctrl",["$rootScope","$scope","$routeParams",function(e,t,n){var i=n.team_id;t.tpl_prefix="user_";var a=0,s="all",o=function(t){e.global.loading_done=!1,wt.data.activity.forme(i,s,a,kzi.config.default_count,function(n){n.data.length>0&&(a=n.data[n.data.length-1].published),angular.isFunction(t)&&t(n.data),e.global.loading_done=!0})};t.js_load_more=function(){t.eventTarget=event.target,wt.utility.activity.load_activities(o,t,function(){$(t.eventTarget).button("reset")})},t.$on(kzi.constant.event_names.filter_activity_by_type,function(e,n){s=n.data,a=0,t.activities=null,wt.utility.activity.load_activities(o,t)}),wt.utility.activity.load_activities(o,t)}]).controller("filter_activity_ctrl",["$rootScope","$scope",function(e,t){t.filter_items=[{type:"all",display_name:"å¨é¨",selected:!0},{type:"task",display_name:"ä»»å¡"},{type:"post",display_name:"è¯é¢"},{type:"file",display_name:"æä»¶"},{type:"page",display_name:"ææ¡£"}],t.selected_item=t.filter_items[0],t.js_select_filter_item=function(e){e.type!==t.selected_item.type&&(t.selected_item.selected=!1,e.selected=!0,t.selected_item=e,t.$emit(kzi.constant.event_names.emit_filter_activity_by_type,t.selected_item.type))}}])}(),function(){"use strict";wt.project.controller("project_trash_ctrl",["$scope","$routeParams","$rootScope","$popbox","$compile","$location",function(e,t,n,i,a,s){var o=t.pid;n.pid=o;var r=[];e.filter_type=0,e.filter_type_text="å¨é¨",n.load_project(o,function(t){n.global.title="åæ¶ç«? | "+t.info.name,e.project=t,e.permission=1==e.project.info.archived?kzi.constant.permission.project_archived:2==e.project.info.team.status?kzi.constant.permission.team_stop_service:kzi.constant.permission.ok,wt.data.project.get_trash(o,function(t){n.global.loading_done=!0,e.wtobjs=t.data,r=t.data})},function(e){e.code==kzi.statuses.prj_error.not_found.code?s.path("/project/"+o+"/notfound"):wt.data.error(e)}),e.js_filter=function(t){0==t?(e.wtobjs=r,e.filter_type=0,e.filter_type_text="å¨é¨"):1==t?(e.wtobjs=_.filter(r,function(e){return"task"==e.entity.etype||"entry"==e.entity.etype}),e.filter_type=1,e.filter_type_text="ä»»å¡"):2==t?(e.wtobjs=_.filter(r,function(e){return"post"==e.entity.etype}),e.filter_type=2,e.filter_type_text="è¯é¢"):3==t?(e.wtobjs=_.filter(r,function(e){return"file"==e.entity.etype}),e.filter_type=3,e.filter_type_text="æä»¶"):4==t&&(e.wtobjs=_.filter(r,function(e){return"page"==e.entity.etype}),e.filter_type=4,e.filter_type_text="ææ¡£")},e.js_show_trash_menu=function(t,a){i.popbox({target:t,placement:"bottom",templateUrl:"/ycjs/tpl/project/trash/pop_trash_menu.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.entity=a.entity,e.project=i.scope.project,e.permission=i.scope.permission,e.step=0,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},n.load_tasks(o,function(t){e.entries=t.entries,_.each(e.entries,function(e){e.selected=0})}),e.js_restore=function(){if("entry"==a.entity.etype){var e=a.entity.eid;wt.data.entry.untrash(o,e,function(){n.project.entries=[],n.project.tasks=[],i.scope.wtobjs=_.reject(i.scope.wtobjs,function(t){return t.entity.eid===e})})}else if("folder"===a.entity.etype||"file"==a.entity.etype){var s=a.entity.eid;wt.data.file.untrash(o,s,function(){n.project.files=[],i.scope.wtobjs=_.reject(i.scope.wtobjs,function(e){return e.entity.eid===s})})}else if("post"===a.entity.etype){var r=a.entity.eid;wt.data.post.untrash(o,r,function(){n.project.files=[],i.scope.wtobjs=_.reject(i.scope.wtobjs,function(e){return e.entity.eid===r})})}else if("page"===a.entity.etype){var l=a.entity.eid;wt.data.page.untrash(o,l,function(){n.project.files=[],i.scope.wtobjs=_.reject(i.scope.wtobjs,function(e){return e.entity.eid===l})})}else if("event"===a.entity.etype){var c=a.entity.eid;wt.data.event.untrash(o,c,function(){i.scope.wtobjs=_.reject(i.scope.wtobjs,function(e){return e.entity.eid===c})})}t.close()},e.js_restore_task=function(s){if(_.each(e.entries,function(e){e.selected=0}),s.selected=1,s){var r=a.entity.eid;wt.data.task.untrash(o,s.entry_id,r,function(){n.project.entries=[],n.project.tasks=[],i.scope.wtobjs=_.reject(i.scope.wtobjs,function(e){return e.entity.eid==r
})}),t.close()}},e.js_destory=function(){if("task"==a.entity.etype){var e=a.entity.eid;wt.data.task.del(o,e,function(){i.scope.wtobjs=_.reject(i.scope.wtobjs,function(t){return t.entity.eid==e})})}else if("entry"==a.entity.etype){var n=a.entity.eid;wt.data.entry.del(o,n,function(){i.scope.wtobjs=_.reject(i.scope.wtobjs,function(e){return e.entity.eid==n})})}else if("folder"==a.entity.etype||"file"==a.entity.etype){var s=a.entity.eid;wt.data.file.del(o,s,function(){i.scope.wtobjs=_.reject(i.scope.wtobjs,function(e){return e.entity.eid==s})})}else if("post"===a.entity.etype){var r=a.entity.eid;wt.data.post.del(o,r,function(){i.scope.wtobjs=_.reject(i.scope.wtobjs,function(e){return e.entity.eid===r})})}else if("page"===a.entity.etype){var l=a.entity.eid;wt.data.page.del(o,l,function(){i.scope.wtobjs=_.reject(i.scope.wtobjs,function(e){return e.entity.eid===l})})}else if("event"===a.entity.etype){var c=a.entity.eid;wt.data.event.del(o,c,function(){i.scope.wtobjs=_.reject(i.scope.wtobjs,function(e){return e.entity.eid===c})})}t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_clear_trash=function(t){i.popbox({target:t,templateUrl:"/ycjs/tpl/project/trash/pop_empty_trash.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.js_close=function(){t.close()},e.js_empty_trash=function(){n.global.loading_done=!1,wt.data.project.clear_trash(o,function(){n.global.loading_done=!0,i.scope.wtobjs=[]}),t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()}}])}(),function(){"use strict";wt.project.controller("project_setting_ctrl",["$scope","$routeParams","$rootScope","$popbox","$location",function(e,t,n,i,a){var s=t.pid;n.pid=s,e.js_step=function(t){2==t&&(e.project.new_name=e.project.info.name,e.project.new_desc=e.project.info.desc),e.step=t},n.load_project(s,function(t){n.global.loading_done=!0,n.global.title="é¡¹ç®è®¾ç½® | "+t.info.name,e.project=t,1==e.project.info.archived?e.project.info.curr_role===kzi.constant.role.admin?(e.permission=kzi.constant.permission.project_archived,e.step=7):(e.permission=kzi.constant.permission.project_archived,e.step=4):2==e.project.info.team.status?(e.permission=kzi.constant.permission.team_stop_service,e.project.info.curr_role===kzi.constant.role.admin?e.js_step(2):e.js_step(1)):(e.permission=kzi.constant.permission.ok,e.project.info.curr_role===kzi.constant.role.admin?e.js_step(2):e.js_step(1)),e.prj_colors=kzi.constant.prj_colors,e.prj_icons=kzi.constant.prj_icons,e.project.old_bg=e.project.info.bg,e.project.old_pic=e.project.info.pic,e.project.admins=_.where(e.project.members,{role:1})},function(e){e.code==kzi.statuses.prj_error.not_found.code?a.path("/project/"+s+"/notfound"):wt.data.error(e)}),e.js_prj_unnotify=function(){e.project.info.is_notify=0,wt.data.project.set_prefs(s,"is_notify",0,function(){},function(){e.project.info.is_notify=1})},e.js_prj_notify=function(){e.project.info.is_notify=1,wt.data.project.set_prefs(s,"is_notify",1,function(){},function(){e.project.info.is_notify=0})},e.js_prj_update=function(){(e.project.new_name!=e.project.name||e.project.new_desc!=e.project.desc)&&(e.is_prj_saveing=!0,e.project.name=e.project.new_name,e.project.desc=e.project.new_desc,_.isEmpty(e.project.desc)&&(e.project.desc=""),wt.data.project.update(s,e.project.name,e.project.desc,function(){n.refresh_cache.project.update(s,e.project.name,e.project.desc),kzi.msg.success("ä¿®æ¹é¡¹ç®åºæ¬ä¿¡æ¯æå")},function(){kzi.msg.error("ä¿®æ¹é¡¹ç®åºæ¬ä¿¡æ¯å¤±è´¥")},function(){e.is_prj_saveing=!1}))},e.js_prj_archive=function(){e.is_archiving=!0,wt.data.project.archive(s,function(){e.project.info.archived=1,n.projects=_.reject(n.projects,function(e){return e.pid==s}),n.project&&n.project.info.pid==s&&n.project.info&&(n.project.info.archived=1),kzi.msg.success("å½æ¡£é¡¹ç®æå"),e.step=7},null,function(){e.is_archiving=!1})},e.js_prj_unarchive=function(){e.is_unarchiving=!0,wt.data.project.unarchive(s,function(){e.project.info.archived=0,n.project&&n.project.info.pid==s&&n.project.info&&(n.project.info.archived=0),kzi.msg.success("æ¿æ´»é¡¹ç®æå?"),e.step=5,n.reload_projects()},null,function(){e.is_unarchiving=!1})},e.js_prj_quit=function(t){t==e.project.info.name?(e.is_quiting=!0,wt.data.project.member_leave(s,function(){n.projects=_.reject(n.projects,function(e){return e.pid==s}),a.path("/dashboard")},null,function(){e.is_quiting=!1})):kzi.msg.warn("è¾å¥é¡¹ç®åå­éè¯¯ï¼è¯·ç¡®è®¤ä½ è¦éåºçé¡¹ç®ï¼?")},e.js_prj_del=function(t){t==e.project.info.name?(e.is_deleting=!0,wt.data.project.del(s,function(){n.projects=_.reject(n.projects,function(e){return e.pid==s}),a.path("/dashboard")},null,function(){e.is_deleting=!1})):kzi.msg.warn("è¾å¥é¡¹ç®åå­éè¯¯ï¼è¯·ç¡®è®¤ä½ è¦å é¤çé¡¹ç®ï¼")},e.js_color_select=function(t){e.project.info.bg=t},e.js_icon_select=function(t){e.project.info.pic=t},e.js_prj_set_logo=function(){(e.project.info.bg!=e.project.old_bg||e.project.info.pic!=e.project.old_pic)&&(e.is_logo_saving=!0,wt.data.project.set_logo(s,e.project.info.bg,e.project.info.pic,function(){kzi.msg.success("è®¾ç½®é¡¹ç®æ è¯æå"),n.refresh_cache.project.set_logo(s,e.project.info.bg,e.project.info.pic)},function(){kzi.msg.success("è®¾ç½®é¡¹ç®æ è¯å¤±è´¥")},function(){e.is_logo_saving=!1}))}}]).controller("project_notfound_ctrl",["$rootScope",function(e){e.global.title="é¡¹ç®ä¸å­å?"}])}(),function(){"use strict";angular.module("wt.invite_controller",[]).controller("join_ctrl",["$rootScope","$scope","$routeParams","$timeout","$location","$window",function(e,t,n,i,a,s){var o=kzi.helper.get_query("code");t.loading_done=!1,t.get_invite_info=function(){return _.isEmpty(o)?(t.invalid_invite=!0,void 0):(wt.data.invite.get(o,function(n){return n.data?(t.invite=n.data,t.invite.has_signup?(t.user_name=t.invite.to.name,t.email=t.invite.to.email,_.isEmpty(e.global.me)?s.location.href="/signin?name="+t.email+"&return_url="+s.location.pathname+s.location.search:e.global.me.uid===n.data.to.uid?wt.data.invite.accept(o,function(){t.join_success=!0,t.show_join=!1,t.loading_done=!0},function(){t.show_join=!0,t.loading_done=!0}):(t.invalid_user=!0,t.loading_done=!0)):(t.loading_done=!0,t.show_join=!0),void 0):(t.invalid_invite=!0,t.loading_done=!0,void 0)}),void 0)},t.js_exit_signin=function(){e.logout(!0,function(){s.location.href="/signin?name="+t.email+"&return_url="+s.location.pathname+s.location.search})},t.js_join=function(n){t.is_joining=!0,wt.data.invite.join(o,t.user_name,t.display_name,t.password,function(){e.login(t.user_name,t.password,null,function(){t.join_success=!0,t.show_join=!1},null,function(){t.is_joining=!1})},function(){n.$errors.unshift("å å¥å¤±è´¥,è¯·éæ°è¾å?")},function(){t.is_joining=!1})},t.js_enter_team=function(e){a.path("/teams/"+e).search({})},t.js_refuse_invite=function(){wt.data.invite.refuse(o,function(){})},t.get_invite_info()}])}(),function(){"use strict";wt.project.controller("prj_member_ctrl",["$scope","$routeParams","$rootScope","$popbox","$compile","$element","$location",function(e,t,n,i,a,s,o){var r=t.pid;n.pid=r,e.js_prj_member_pop=function(t,a){i.popbox({target:t,templateUrl:"/ycjs/tpl/project/member/pop_user_menu.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.step=0,e.selected_member=a;var s=0;_.each(e.project.members,function(e){e.role==kzi.constant.role.admin&&s++}),e.can_change=a.role==kzi.constant.role.admin&&1==s?!1:!0,e.permission=1==e.project.info.archived?kzi.constant.permission.project_archived:kzi.constant.permission.ok,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},e.js_delete_prj_member=function(t){n.refresh_cache.user.remove(t.uid),t.uid==n.global.me.uid&&(n.refresh_cache.project.remove(r),o.path("/dashboard")),wt.data.project.del_member(r,t.uid),e.js_close()};var l=function(t,n){wt.data.project.set_member_role(r,e.selected_member.uid,t,function(i){e.selected_member.role=t,_.isFunction(n)&&n(i)})};e.js_set_user_as_admin=function(){l(kzi.constant.role.admin,function(){n.refresh_cache.project.add_admin(r,e.selected_member)})},e.js_set_user_as_member=function(){var t=e.selected_member.role;l(kzi.constant.role.member,function(){t&&n.refresh_cache.project.remove_admin(r,e.selected_member)})},e.js_add_user_as_guest=function(){var t=e.selected_member.role;l(kzi.constant.role.guest,function(){t&&n.refresh_cache.project.remove_admin(r,e.selected_member)})}}],resolve:{pop_data:function(){return{$scope:e}}}}).open()},e.draggable_options={appendTo:$("#main"),helper:"clone",zIndex:2e3,delay:300,start:function(e,t){t.helper.find("span.avatar-name").remove(),t.helper.find("span.status").remove(),t.helper.addClass("member-state-on-drag")},stop:function(){},drag:function(){}}}]).controller("prj_info_ctrl",["$scope","$routeParams","$rootScope","$popbox","$compile","$element",function(e,t,n,i){e.js_view_prj_info=function(t){i.popbox({target:t,templateUrl:"/ycjs/tpl/project/pop_project_info.html",controller:["$rootScope","$scope","popbox","pop_data",function(e,t,n){t.js_close=function(){n.close()}}],resolve:{pop_data:function(){return{$scope:e}}}}).open()}}]).controller("prj_sidebar_ctrl",["$scope","$routeParams","$rootScope","$location","$timeout","$popbox",function(e,t,n,i,a,s){var o=t.pid,r=kzi.localData.get("right_sidebar_is_fold");n.global.right_sidebar_is_fold=0==r?!1:!0,e.js_right_sidebar_toggle=function(){n.global.right_sidebar_is_fold=!n.global.right_sidebar_is_fold,n.global.right_sidebar_is_fold?kzi.localData.set("right_sidebar_is_fold",1):kzi.localData.set("right_sidebar_is_fold",0)},e.js_change_prj_sidebar_view=function(t){n.global.project_sidebar_view=t,"chat"===t&&e.$broadcast("init_project_chat_list",{})},e.js_add_prj_member_pop=function(t){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/member/pop_add_prj_member.html",controller:["$rootScope","$scope","popbox","pop_data",function(e,t,n){t.popbox=n,t.js_close=function(){n.close()},t.step=0,t.js_step=function(e){t.step=e};var a=function(){return _.isEmpty(t.show_members)?(t.group_members=[],void 0):(t.group_members=_.groupBy(t.show_members,function(e){return e.group_name}),void 0)};t.members_loading_done=!1,e.load_team_members(e.project.info.team_id,function(n){t.unassigned_team_members=[],e.load_project(o,function(e){_.each(n.members,function(i){if("-1"==i.group_id)i.group_name="æªåç»?";else{var a=_.findWhere(n.groups,{group_id:i.group_id});i.group_name=null!=a?a.name:"æªåç»?"}null==_.findWhere(e.members,{uid:i.uid})&&t.unassigned_team_members.push(i)}),t.show_members=t.unassigned_team_members,t.members_loading_done=!0})}),t.js_add_user_as_admin=function(){t.js_add_prj_member(t.selected_member,kzi.constant.role.admin),t.js_step(0)},t.js_add_user_as_member=function(){t.js_add_prj_member(t.selected_member),t.js_step(0)},t.js_add_user_as_guest=function(){t.js_add_prj_member(t.selected_member,kzi.constant.role.guest),t.js_step(0)},t.js_add_prj_member=function(n,i){n.assigned||(null==i&&(i=kzi.constant.role.member),wt.data.project.add_member(o,n.uid,i,function(i){e.project.members.push(i.data),t.unassigned_team_members=_.reject(t.unassigned_team_members,function(e){return e.uid==n.uid}),t.show_members=_.reject(t.show_members,function(e){return e.uid==n.uid}),a()}))},t.js_go_to_set_role=function(e,n){e.stopPropagation(),e.preventDefault(),t.selected_member=n,t.js_step(1)},t.js_search_user=function(e){!_.isEmpty(e)&&e.trim().length>0?(e=e.trim().toLowerCase(),t.show_members=_.filter(t.unassigned_team_members,function(t){return t.name.toLowerCase().indexOf(e)>-1||t.display_name.toLowerCase().indexOf(e)>-1})):t.show_members=t.unassigned_team_members,a()}}],resolve:{pop_data:function(){return{$scope:e}}}}).open()},e.js_view_all_activity=function(){n.global.right_isfold=!0,i.path("/project/"+o+"/activity")}}]).controller("prj_chat_ctrl",["$rootScope","$scope","$routeParams","socket","$timeout","$element",function(e,t,n,i,a,s){var o=n.pid;t.input_message="",t.js_insert_emoji=function(e){t.input_message=t.input_message+e},t.messages=[];var r=function(e){var t=null,n=moment();_.each(e,function(e){n.isSame(moment(e.create_date),"day")||(e.show_date=!0),t?moment(e.create_date)>moment(t).add("minute",5)&&(e.show_time=!0,t=e.create_date):(t=e.create_date,e.show_time=!0)})};t.$on("socket_chat",function(e,n){t.messages.push(n),r(t.messages),a(function(){$(".prj-chat-panel").children().mCustomScrollbar("scrollTo","bottom")},500)}),t.js_send_message=function(){_.isEmpty(t.input_message)||(i.emit("chat",{from:e.global.me.uid,to:o,type:1,body:{type:1,content:t.input_message}},function(){}),t.input_message="")},t.js_navigate_detail=function(t,n){t.stopPropagation(),t.preventDefault(),e.locator.to_file(n.pid,n.fid,!1)};var l=function(){t.loading_chat_done=!1,e.load_project_init_chat(o,function(n){_.each(n.messages,function(t){t.is_me=t.from.uid===e.global.me.uid?!0:!1}),wt.bus.chat.set_messages_for_file(n.messages,o),t.messages=_.sortBy(n.messages,function(e){return e.create_date}),r(t.messages),n.total_count>5&&(t.has_more_chat=!0),a(function(){$(".prj-chat-panel").children().mCustomScrollbar("scrollTo","bottom")},500)},null,function(){t.loading_chat_done=!0,a(function(){$(".prj-chat-panel").children().mCustomScrollbar("scrollTo","bottom")},200)}),e.load_project_members(o,function(n){var i=_.filter(n.members,function(t){return t.uid!==e.global.me.uid&&1===t.status});t.atwho_members=i,a(function(){$("#atwho-container").bind("mousedown",function(e){e.stopPropagation(),e.preventDefault()})})})};t.$on("init_project_chat_list",function(){l()}),t.js_change_message=function(){var e=200;t.input_message.length>e?(t.limit_error=!0,t.input_message=t.input_message.substr(0,e),a(function(){$(".prj-chat-panel").children().mCustomScrollbar("scrollTo","bottom")})):t.limit_error=!1},e.global.right_sidebar_is_fold||"chat"!==e.global.project_sidebar_view||l(),t.file_upload_option={previewMaxWidth:77,previewMaxHeight:77,url:[kzi.config.wtbox(),"?pid="+o,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"chat",pid:o},addCallback:function(){a(function(){$(".chat-messages-list").mCustomScrollbar("update"),s.children(".mCustomScrollbar").mCustomScrollbar("scrollTo","bottom")},150)},successCallback:function(t){t.data&&i.emit("chat",{from:e.global.me.uid,to:o,type:1,body:{type:3,content:{fid:t.data.fid,name:t.data.name,ext:t.data.ext,size:t.data.size,path:t.data.path}}},function(){})}},t.js_chat_upload_files=function(e){$(e.target).next("input[type=file]").click()},t.global_fileupload_queue=function(){return e.upload_queue.get_chat(o)}}])}(),function(){"use strict";angular.module("wt.home_controller",[]).controller("home_guide_ctrl",["$rootScope","$scope","$routeParams","$location","$timeout","$anchorScroll",function(e,t,n,i){t.js_search=function(){_.isEmpty(t.keywords)?(t.template="home",i.path("/guide")):wt.data.guide.search_guides(t.keywords,function(e){t.template="column",t.current_column={title:"æç´¢ç»æ"},t.current_column.guides=e.data})}}]).controller("home_feedback_ctrl",["$rootScope","$scope","$sce",function(e,t,n){e.global.title="å¨çº¿åé¦",t.status={message:"",code:0},t.token=kzi.get_cookie("sid"),t.action_url=e.global.config.box_url()+"?pid=feedback&token="+t.token,n.trustAsUrl(t.action_url),_.isEmpty(e.global.me)||(t.name=e.global.me.display_name,t.email=e.global.me.email),t.category=0,t.isSubmit=!1,t.on_upload=!1,t.upload_message="éæ©è¦ä¸ä¼ çéä»¶ã?",t.file_path="",t.js_feedback_submit=function(){var e=t.feedback_desc;return kzi.validator.isEmail(t.email)?_.isEmpty(t.name)?(t.status={message:"å§åä¸è½ä¸ºç©º",code:2},void 0):_.isEmpty(e)?(t.status={message:"ä¸è¯´ç¹ä»ä¹è®©æ»åç®æä½ä»¥å ?",code:2},void 0):t.on_upload?(t.status={message:"éä»¶è¿å¨ä¸ä¼ ä¸­ï¼è¯·èå¿ç­å¾ä¸å°ä¼å¿ããã?",code:2},void 0):(t.isSubmit=!0,t.status={message:"",code:0},wt.data.feedback.add(t.name,t.email,t.category,e,t.file_path,function(){t.status={message:"æè°¢ä½ çåé¦ï¼æä»¬ä¼å°½å¿«å¤ç",code:1},t.isSubmit=!1},function(){t.status={message:"ä¼¼ä¹æå¡å¨åºå°å·®äºï¼è¯·éæ°æäº?",code:2}},function(){t.isSubmit=!1}),void 0):(t.status={message:"é®ç®±å°åæ ¼å¼ä¸æ­£ç¡?",code:2},void 0)},t.file_upload_option={processstart:function(){t.upload_enabled=!1,t.upload_message="éä»¶ä¸ä¼ ä¸­ï¼è¯·ç¨ç­ã?",t.on_upload=!0},process:function(e,t){var n=0;_.isEmpty(t.files)||(n=t.files[0].size),$('form[name="feedback_form"]').fileupload({formData:{size:n,target:"all"}})},processfail:function(e,n){!_.isEmpty(n.files)&&n.files.error&&_.each(n.files,function(e){e.error&&kzi.msg.error(e.error)}),t.upload_enabled=!0},done:function(e,n){_.isEmpty(n.result.files)||_.each(n.result.files,function(e){e&&!e.error?(t.file_path=kzi.config.wtall_url+e.url,t.file_name=e.fname,t.upload_message=e.fname):alert(e.error)}),t.upload_enabled=!0,t.on_upload=!1}}}]).controller("home_contactus_ctrl",["$rootScope","$timeout",function(){}]).controller("home_share_ctrl",["$rootScope","$scope",function(e,t){e.global.title="æ¨èç»å¥½å?",t.show_send_email=!1,t.share_link=_.isEmpty(e.global.me.name)?kzi.config.root_url:kzi.config.root_url+"?by="+e.global.me.name,t.share_desc="Worktileæ¯ä¸æ¬¾ç®åå¥½ç¨çå¢éååãé¡¹ç®ç®¡çå·¥å·ï¼ä¸ºå¢éååèæé ï¼ä½¿ç¨å®å¯ä»¥æ¹ä¾¿çè¿è¡é¡¹ç®ç®¡çï¼æé«å¢éå·¥ä½æçï¼å¢éæåä¹é´æ ç¼æ²éï¼æ´ææä»¶å±äº«åå¨çº¿ææ¡£åä½ã?",t.js_show_send_email=function(){t.show_send_email=!t.show_send_email},t.js_cancel_send_email=function(){t.show_send_email=!1},t.js_send_share_email=function(){t.is_sending=!0,wt.data.share.recommand(t.share_email,t.share_desc,function(){t.share_email="",t.share_desc="Worktileæ¯ä¸æ¬¾ç®åå¥½ç¨çå¢éååãé¡¹ç®ç®¡çå·¥å·ï¼ä¸ºå¢éååèæé ï¼ä½¿ç¨å®å¯ä»¥æ¹ä¾¿çè¿è¡é¡¹ç®ç®¡çï¼æé«å¢éå·¥ä½æçï¼å¢éæåä¹é´æ ç¼æ²éï¼æ´ææä»¶å±äº«åå¨çº¿ææ¡£åä½ã?"},null,function(){t.is_sending=!1})}}]).controller("home_help_ctrl",["$rootScope","$scope",function(e){e.global.title="å¸®å©ä¸­å¿"}])}(),function(){"use strict";angular.module("wt.comment_controller",["ui.utils"]).controller("comment_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n,i,a,s){e.comments=[],e.is_add_comment=!1,e.comments_loading_done=!1,e.comment={};var o,r,l;e.$on(kzi.constant.event_names.load_comments,function(t,i){if(!_.isEmpty(i.pid)&&!_.isEmpty(i.xid)){var a=c();0>=a.find(".comment_edit_wrap").length&&a.append(d()),_.isEmpty(e.comment.temp_message)||r===i.xtype&&l===i.xid||(e.comment.temp_message=""),o=i.pid,r=i.xtype,l=i.xid,e.comments_loading_done=!1,e.comments=[],wt.data.comment.get_list(o,r,l,function(t){e.comments=t.data,e.comments_loading_done=!0},function(){e.comments_loading_done=!0}),n.load_project_members(o,function(t){var i=_.filter(t.members,function(e){return e.uid!==n.global.me.uid&&1===e.status});e.atwho_members=i,s(function(){$("#atwho-container").bind("mousedown",function(e){e.stopPropagation(),e.preventDefault()})})})}}),e.$on(kzi.constant.event_names.on_task_complete,function(t,i){i&&i.tid===l&&(0===i.completed?e.comments=_.reject(e.comments,function(e){return 3===e.type}):1===i.completed&&e.comments.push({cid:"-1",message:"å®æäºä»»å?",create_date:(new Date).getTime(),type:3,format:1,owner:_.pick(n.global.me,"uid","name","display_name","avatar")}))}),e.js_save_comment=function(t){if(_.isEmpty(t.cid)){if(_.isEmpty(t.temp_message))return e.is_add_comment=!1,void 0;t.is_saving=!0,wt.data.comment.publish(o,r,l,t.temp_message,function(t){var i=t.data;i.owner=n.global.me,i.type=1,e.comments.push(i),"tasks"===r?n.$broadcast(kzi.constant.event_names.on_task_comment,{tid:l}):"posts"===r&&n.$broadcast(kzi.constant.event_names.on_post_comment,{post_id:l})},null,function(){t.is_saving=!1,e.is_add_comment=!1}),t.temp_message=""}else e.js_update_comment(t)};var c=function(){return $("#"+r+"_tab_module .new-comment-edit")},d=function(){return $("#"+r+"_tab_module .comment_edit_wrap")};e.js_show_comment_menu=function(t,i){a.popbox({target:t,templateUrl:"/ycjs/tpl/common/pop_comment_menu.html",controller:["$scope","popbox","pop_data",function(e,t,a){e.popbox=t,e.js_edit_comment=function(){i.is_edit=!0,0>=$("#div_comment_"+i.cid).find(".comment_edit_wrap").length&&$("#div_comment_"+i.cid).append(d()),a.scope.comment=i,_.isEmpty(a.scope.comment.temp_message)&&(a.scope.comment.temp_message=i.raw_message),t.close()},e.js_del_comment=function(){var e=c();0>=e.find(".comment_edit_wrap").length&&e.append(d()),a.scope.comments=_.reject(a.scope.comments,function(e){return e.cid===i.cid}),wt.data.comment.del(o,i.cid,r,l,function(){if("tasks"===r){var t=_.findWhere(n.project.tasks,{tid:l});t&&(t.badges.comment_count-=1)}}),t.close()},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_add_comment_editor=function(){e.is_add_comment=!0,_.isEmpty(e.comment.cid)||(e.comment={});var t=c();0>=t.find(".comment_edit_wrap").length&&t.append(d())},e.js_hidden_comment_editor=function(t){_.isEmpty(t.cid)?(e.is_add_comment=!1,e.comment.temp_message=""):(t.is_edit=!1,t.temp_message=t.raw_message)},e.js_update_comment=function(e){_.isEmpty(e.temp_message)||(e.is_saving=!0,wt.data.comment.update(o,e.cid,r,l,e.temp_message,function(t){e.raw_message=e.temp_message,e.message=t.data,e.is_saving=!1,e.is_edit=!1},null,function(){}))},e.js_cancel_edit=function(e){e.is_edit=!1,e.temp_message=e.message},e.js_pop_showuser=function(){}}])}(),function(){"use strict";angular.module("wt.account_controller",["ui.utils"]).controller("account_settings_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$sce",function(e,t,n,i,a,s){e.global.title="åºæ¬è®¾ç½®",t.current_menu="settings",t.current_tab="basic",t.email_step=1,t.upload_enabled=!0,t.token=kzi.get_cookie("sid"),t.part_loading_done=!1,t.action_url=e.global.config.box_url()+"?pid=avatar&token="+t.token,s.trustAsUrl(t.action_url),t.change_tab=function(e){t.current_tab!==e&&(t.current_tab=e,t.send_success=!1,t.update_user_success=!1,t.change_pwd_success=!1)},t.js_user_update=function(n,i,a){(i!==e.global.me.display_name||a!=e.global.me.desc)&&(t.is_updating=!0,(void 0===a||null===a)&&(a="",t.desc=""),wt.data.user.update(i,a,function(){t.update_user_success=!0,t.name=i,t.desc=a,kzi.msg.success("ä¿®æ¹ä¸ªäººèµææåï¼?")},function(){kzi.msg.error("ä¿®æ¹ä¸ªäººèµæå¤±è´¥ï¼?")},function(){t.is_updating=!1}),e.refresh_cache.user.update(e.global.me.uid,i,a))},t.js_user_change_pwd=function(e,n,i){t.is_changing_pwd=!0,wt.data.user.change_pwd(n,i,function(){t.change_pwd_success=!0},function(){e.$errors.unshift("åå¯ç è¾å¥éè¯?")},function(){t.is_changing_pwd=!1})},t.js_user_change_email=function(n,i){return i===e.global.me.email?(t.$errors.unshift("æ°é®ç®±å°åååæ¥çé®ç®±å°åä¸æ ?"),void 0):(t.is_sending_email=!0,wt.data.user.email_change_apply(i,function(){t.send_success=!0},function(e){e.code===kzi.statuses.user_error.email_has_exist.code&&n.$errors.unshift("è¯¥é®ç®±å°åå·²ç»å­å¨ï¼è¯·éæ°è¾å¥")},function(){t.is_sending_email=!1}),void 0)},t.js_change_email_step=function(e){t.email_step=e},t.avatar_upload_option={processstart:function(){t.upload_enabled=!1},process:function(e,t){var n=0;_.isEmpty(t.files)||(n=t.files[0].size),$("[name=file_upload]").fileupload({formData:{size:n,target:"avatar"}})},processfail:function(e,n){!_.isEmpty(n.files)&&n.files.error&&_.each(n.files,function(e){e.error&&kzi.msg.error(e.error)}),t.upload_enabled=!0},done:function(n,i){if(200!=i.result.code){var a="ä¸ä¼ å¤´åå¤±è´¥ï¼è¯·éæ°åè¯ï¼?";return i.result.code==kzi.statuses.file_error.generate_thumbnail_error.code&&(a="çæç¼©ç¥å¾å¤±è´¥ï¼è¯·éæ°åè¯ï¼"),kzi.msg.error(a),t.upload_enabled=!0,void 0}if(!_.isEmpty(i.result.files)){var s=i.result.files[0];s&&!s.error&&(e.global.me.avatar=s.url,e.refresh_cache.user.avatar(e.global.me.uid,s.url),wt.data.user.set_avatar(s.url,function(){}))}t.upload_enabled=!0},acceptFileTypes:/(\.|\/)(jpe?g|png)$/i,maxNumberOfFiles:100,imageMaxWidth:180,imageMaxHeight:180,imageCrop:!0},t.name="",t.desc="",wt.data.account.get_basic(function(n){e.global.me.desc=n.data.desc,t.name=e.global.me.display_name,t.desc=e.global.me.desc},null,function(){t.part_loading_done=!0}),e.global.loading_done=!0}]).controller("account_twofactor_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$sce",function(e,t){e.global.title="ä¸¤æ­¥éªè¯",t.current_menu="twofactor",t.part_loading_done=!1,e.global.loading_done=!0,t.from_index=1,t.two_step=0,t.input={};var r=function(){t.recovery_codes=null,wt.data.account.get_recovery_codes(function(e){t.recovery_codes=e.data})};t.js_two_step=function(e){t.two_step!==e&&(t.two_step=e,3===e&&(t.twofactor_secret||(t.twofactor_secret=null,t.qrcode_html=null,t.loading_twofactor_secret_done=!1,wt.data.account.get_twofactor_secret(function(e){t.twofactor_secret=e.data},null,function(){t.loading_twofactor_secret_done=!0}))))},t.js_user_change_pwd=function(e,n,i){t.is_changing_pwd=!0,wt.data.user.change_pwd(n,i,function(){t.change_pwd_success=!0},function(){e.$errors.unshift("åå¯ç è¾å¥éè¯?")},function(){t.is_changing_pwd=!1})},t.js_enable_twofactor=function(){return _.isEmpty(t.input.factor)?(t.input.enable_twofactor_errors="å¨æéªè¯ç ä¸è½ä¸ºç©º",void 0):(t.is_enable_twofactoring=!0,wt.data.account.enable_twofactor(t.input.factor,function(){t.account_basic.twofactor_enabled=1,r(),t.js_two_step(0),t.twofactor_secret=null,t.input.enable_twofactor_errors=""},function(e){t.input.enable_twofactor_errors=e.code===kzi.statuses.user_error.twofactor_match_error.code?"è¾å¥å¨æéªè¯ç ä¸æ­£ç¡?,è¯·éæ°åè¯ï¼":"å¼å¯éªè¯å¤±è´?,è¯·éæ°åè¯ï¼"},function(){t.is_enable_twofactoring=!1}),void 0)},t.js_twofactor_focus=function(){t.input.enable_twofactor_errors=""},t.js_disable_twofactor=function(){t.is_disable_twofactoring=!0,wt.data.account.disable_twofactor(function(){t.account_basic.twofactor_enabled=0},function(){t.input.enable_twofactor_errors="å³é­ä¸¤æ­¥éªè¯å¤±è´¥,è¯·éæ°åè¯ï¼"},function(){t.is_disable_twofactoring=!1})},wt.data.account.get_basic(function(e){t.account_basic=e.data,t.account_basic.twofactor_enabled&&r()},null,function(){t.part_loading_done=!0})}]).controller("account_message_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t){e.global.title="æ¶æ¯è®¾ç½®",t.current_menu="message",t.part_loading_done=!1,e.global.loading_done=!0,t.js_desk_notice=function(e){t.desk_notice!==e&&(t.desk_notice=e,kzi.localData.set(kzi.config.desk_notify_key,e),kzi.msg.success("æ´æ¹è®¾ç½®æå")),1===t.desk_notice?window.DesktopNotify.wt_show("/img/wt-logo.png","æé","ä½ æå¼äºæ¡é¢æéåè?",function(){}):window.DesktopNotify.wt_show("/img/wt-logo.png","æé","ä½ å³é­äºæ¡é¢æéåè½",function(){})},t.js_email_notice=function(n){t.notice_by_email!==n&&wt.data.user.set_user_prefs(e.global.me.uid,"notice_by_email",n,function(){kzi.msg.success("æ´æ¹è®¾ç½®æå")})},t.js_smart_notice=function(n){t.notice_for_smart!==n&&wt.data.user.set_user_prefs(e.global.me.uid,"notice_for_smart",n,function(){kzi.msg.success("æ´æ¹è®¾ç½®æå")})},wt.data.account.get_basic(function(e){t.notice_by_email=_.find(e.data.prefs,function(e){return"notice_by_email"===e.key}).value,t.notice_for_smart=_.find(e.data.prefs,function(e){return"notice_for_smart"===e.key}).value},null,function(){t.part_loading_done=!0}),t.desk_notice=kzi.localData.get(kzi.config.desk_notify_key),_.isEmpty(t.desk_notice)&&(t.desk_notice=1,kzi.localData.set(kzi.config.desk_notify_key,1))}]).controller("account_projects_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t){e.global.title="é¡¹ç®ç®¡ç",t.current_menu="projects",wt.data.account.get_projects(function(n){t.account_projects=n.data,e.global.loading_done=!0},null,function(){e.global.loading_done=!0})}]).controller("account_teams_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox",function(e,t){e.global.title="å¢éç®¡ç",t.current_menu="teams",t.part_loading_done=!1,e.global.loading_done=!0,wt.data.account.get_teams(function(e){t.account_teams=e.data},null,function(){t.part_loading_done=!0})}]).controller("account_security_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox","$sce",function(e,t){e.global.title="å®å¨æ¥å¿",t.part_loading_done=!1,e.global.loading_done=!0,t.current_menu="security",t.from_index=1,t.two_step=0,t.input={};var r=function(e){t.account_histories=[],t.part_loading_done=!1,wt.data.account.get_security(e,function(n){t.account_histories=n.data.histories,t.from_index=(e-1)*kzi.config.default_count+1,(1===e||"1"===e)&&(t.totalCount=n.data.totalCount,t.security_pagination_opts={totalCount:n.data.total_count,opts:{callback:function(e){r(e+1)}}})},null,function(){t.part_loading_done=!0})};t.js_two_step=function(e){t.two_step!==e&&(t.two_step=e,3===e&&(t.twofactor_secret||(t.twofactor_secret=null,t.qrcode_html=null,t.loading_twofactor_secret_done=!1,wt.data.account.get_twofactor_secret(function(e){t.twofactor_secret=e.data},null,function(){t.loading_twofactor_secret_done=!0}))))},t.js_user_change_pwd=function(e,n,i){t.is_changing_pwd=!0,wt.data.user.change_pwd(n,i,function(){t.change_pwd_success=!0},function(){e.$errors.unshift("åå¯ç è¾å¥éè¯?")},function(){t.is_changing_pwd=!1})},t.js_enable_twofactor=function(){return _.isEmpty(t.input.factor)?(t.input.enable_twofactor_errors="å¨æéªè¯ç ä¸è½ä¸ºç©º",void 0):(t.is_enable_twofactoring=!0,wt.data.account.enable_twofactor(t.input.factor,function(){t.account_basic.twofactor_enabled=1,load_recovery_codes(),t.js_two_step(0),t.twofactor_secret=null,t.input.enable_twofactor_errors=""},function(e){t.input.enable_twofactor_errors=e.code===kzi.statuses.user_error.twofactor_match_error.code?"è¾å¥å¨æéªè¯ç ä¸æ­£ç¡?,è¯·éæ°åè¯ï¼":"å¼å¯éªè¯å¤±è´?,è¯·éæ°åè¯ï¼"},function(){t.is_enable_twofactoring=!1}),void 0)},t.js_twofactor_focus=function(){t.input.enable_twofactor_errors=""},t.js_disable_twofactor=function(){t.is_disable_twofactoring=!0,wt.data.account.disable_twofactor(function(){t.account_basic.twofactor_enabled=0},function(){t.input.enable_twofactor_errors="å³é­ä¸¤æ­¥éªè¯å¤±è´¥,è¯·éæ°åè¯ï¼"},function(){t.is_disable_twofactoring=!1})},r(1)}]).controller("account_apps_ctrl",["$rootScope","$scope","$routeParams","$location","$http","$popbox","$sce",function(e,t,n,i,a,s){e.global.title="åºç¨ä¸­å¿",t.current_menu="apps",t.part_loading_done=!1,e.global.loading_done=!0,wt.data.account.get_apps(function(e){t.account_apps=e.data},null,function(){t.part_loading_done=!0});var r=function(e){t.account_apps=_.reject(t.account_apps,function(t){return t.app_id===e.app_id})};t.js_pop_decommissioning=function(e){s.popbox({target:event,templateUrl:"/ycjs/tpl/account/pop_decommissioning_confirm.html",controller:["$rootScope","$scope","popbox",function(t,n,i){n.popbox=i,n.js_close=function(){i.close()},n.js_decommissioning=function(){n.is_decommissioning=!0,wt.data.account.decommissioning_app(e.app_id,function(){r(e),i.close()},null,function(){n.is_decommissioning=!1})}}]}).open()}}])}(),function(){"use strict";var e=angular.module("wt.dashboard_controller",["ui.utils"]);e.controller("dashboard_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n){function l(e,t){if(e.expire_date>0&&t.expire_date>0){var n=(new Date).getTime();return e.expire_date===t.expire_date?0:e.expire_date>n&&n>t.expire_date?-1:n>e.expire_date&&t.expire_date>n?1:e.expire_date>n&&t.expire_date>n?e.expire_date>t.expire_date?1:-1:e.expire_date>t.expire_date?-1:1}return e.expire_date>0&&0===t.expire_date?-1:0===e.expire_date&&t.expire_date>0?1:e.create_date>t.create_date?-1:1}n.global.title="å·¥ä½å?",e.current_tab="feeds",e.feeds=[],n.global.loading_done=!0;var o=function(){e.part_loading_done=!1,wt.data.activity.get_feeds("all",0,1,function(t){e.feeds=t.data},null,function(){e.part_loading_done=!0})},r=function(){e.part_loading_done=!1,wt.data.task.get_for_uncompleted(function(t){n.global.loading_done=!0,e.uncompeleted_tasks=t.data.sort(l),e.uncompeleted_tasks=e.uncompeleted_tasks.slice(0,20)},null,function(){e.part_loading_done=!0})},c=function(){wt.data.event.get_today_events(function(t){e.today_events=t.data})},d=function(){wt.data.task.get_for_user_overview(function(t){e.overview=t.data},null,function(){})};e.js_change_tab=function(t){e.current_tab!==t&&(e.current_tab=t,kzi.localData.set("dashboard_tab",e.current_tab),"my_tasks"===t?r():o())};var u=function(){e.current_tab=kzi.localData.get("dashboard_tab"),e.current_tab||(e.current_tab="feeds")},p=function(){var t=new Date;e.show_date="ä»å¤©æ? "+kzi.util.getWeekday(t)+"ï¼?"+t.format("yyyyå¹´MMæddæ?");var n=t.getHours();6>n?e.hi_greetings="å¤æ·±äºï¼æ³¨æä¼æ¯":9>n?e.hi_greetings="æ©ä¸å¥½ï¼åæ¯è¶å§ï¼?":11>n?e.hi_greetings="ä¸åå¥½ï¼":12>n?e.hi_greetings="åè¿åé¥­äºä¹ï¼?":14>n?e.hi_greetings="ä¸åå¥½ï¼åå¤å·¥ä½äºï¼":17>n?e.hi_greetings="ä¸åå¥½ï¼èµ·æ¥è¿å¨ä¸ä¸?":19>n?e.hi_greetings="åæå¥½ï¼":22>n?e.hi_greetings="è¿æ²¡ä¸ç­ï¼è¾è¦äº":24>n&&(e.hi_greetings="å¤æ·±äºï¼æ³¨æä¼æ¯"),"my_tasks"===e.current_tab?r():o(),d(),c()};u(),p(),e.$on(kzi.constant.event_names.on_task_update,function(t,i){if(i){if(!_.isEmpty(e.uncompeleted_tasks)){var a=_.findWhere(e.uncompeleted_tasks,{tid:i.tid});_.isEmpty(a)||(a.name=i.name,a.desc=i.desc,a.pos=i.pos,a.completed=i.completed,a.expire_date=i.expire_date,a.badges=i.badges,a.labels=i.labels,a.members=i.members,a.watchers=i.watchers,a.todos=i.todos)
}n.refresh_cache.task.update_full(i)}}),e.$on(kzi.constant.event_names.on_task_trash,function(t,n){n&&(_.isEmpty(e.uncompeleted_tasks)||(e.uncompeleted_tasks=_.reject(e.uncompeleted_tasks,function(e){return e.tid===n.tid})))}),e.$on(kzi.constant.event_names.on_task_complete,function(t,n){if(n&&!_.isEmpty(e.uncompeleted_tasks)){var i=_.findWhere(e.uncompeleted_tasks,{tid:n.tid});i&&(i.completed=n.completed)}}),e.$on(kzi.constant.event_names.on_event_update,function(t,n){if(e.today_events){var i=_.findWhere(e.today_events,{event_id:n.event_id});i&&(i.name=n.name,i.start.date=n.start.date,i.end.date=n.end.date)}}),e.$on(kzi.constant.event_names.on_event_trash,function(t,n){e.today_events&&(e.today_events=_.reject(e.today_events,function(e){return e.event_id===n.event_id}))})}]),e.controller("projects_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n,i){n.global.title="é¡¹ç®",e.current_menu="all",e.view_type="grid";var o=kzi.localData.get("project_list_type");e.view_type=o?o:"grid",e.js_view_toggle=function(t){e.view_type=t,kzi.localData.set("project_list_type",t)},e.js_star_toggle=function(e,t){wt.bus.project.set_star_toggle(t,function(){var e=_.findWhere(n.projects,{pid:t.pid});e.is_star=t.is_star}),e.preventDefault(),e.stopPropagation()};var r=function(){e.projects=_.sortBy(e.projects,function(e){return e.pos}),n.sort_projects()},l=function(e,t){_.each(e,function(e){e.projects=_.where(t,{team_id:e.team_id})})};e.set_project_sort_options=function(){e.project_sort_options={containment:".projects-panel",placeholder:"project-placeholder",helper:"clone",revert:10,dropOnEmpty:!0,tolerance:"pointer",distance:"4",delay:"75",disabled:!1,accept:".project-item",start:function(e,t){t.item.addClass("project-picked-up"),$(".project-placeholder").css({height:t.item.css("height"),width:t.item.css("width")})},stop:function(t,n){n.item.removeClass("project-picked-up");var i=n.item.attr("project-id"),a=n.item.prev().attr("project-id"),s=n.item.next().attr("project-id"),o=null,l=null;if(_.isEmpty(s)||(o=_.findWhere(e.projects,{pid:s})),_.isEmpty(a)||(l=_.findWhere(e.projects,{pid:a})),o||l){var c=wt.bus.project.calculate_prj_pos(l,o),d=_.findWhere(e.projects,{pid:i});d.pos=c,wt.data.project.prj_position(i,c,function(){r()})}}}};var c=function(){n.load_common_data_in(function(t){e.teams=t.teams,e.projects=t.projects,l(e.teams,e.projects),e.set_project_sort_options()},null,function(){n.global.loading_done=!0})};c(),e.js_goto_project=function(e,t){i.path("/project/"+t.pid)},e.$on("socket_message_project_list",function(){c()})}]),e.controller("search_result_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n,i){n.global.title="æç´¢ç»æ",e.keywords=t.keywords,e.js_filter_result=function(t){e.current_type=t,"all"==e.current_type?e.show_empty=_.isEmpty(e.tasks)&&_.isEmpty(e.files)&&_.isEmpty(e.posts)&&_.isEmpty(e.pages)?!0:!1:"task"==e.current_type?e.show_empty=_.isEmpty(e.tasks)?!0:!1:"file"==e.current_type?e.show_empty=_.isEmpty(e.files)?!0:!1:"post"==e.current_type?e.show_empty=_.isEmpty(e.posts)?!0:!1:"page"==e.current_type&&(e.show_empty=_.isEmpty(e.pages)?!0:!1)};var o=function(){return _.isEmpty(e.keywords)?(e.js_filter_result(e.current_type),void 0):(e.loading_result=!0,wt.data.search_all("all",encodeURI(e.keywords),function(t){e.tasks=t.data.tasks,e.files=t.data.files,n.load_projects(function(){_.each(e.files,function(e){if(e.type===kzi.constant.file_type.folder){var t=_.findWhere(n.projects,{pid:e.pid});t&&(e.project_name=t.name)}})}),e.posts=t.data.posts,e.pages=t.data.pages,e.js_filter_result(e.current_type)},null,function(){e.loading_result=!1}),void 0)};e.js_search=function(){e.keywords.length>0&&o()},e.js_show_file=function(e){e.type===kzi.constant.file_type.file?n.locator.to_file(e.pid,e.fid,!0):i.path("/project/"+e.pid+"/folder/"+e.fid).search({})};var r=function(){n.global.loading_done=!0,e.current_type="all",o()};r()}]),e.controller("projects_archive_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n,i){n.global.title="å½æ¡£é¡¹ç®",e.js_goto_project=function(e,t){i.path("/project/"+t.pid)},n.load_common_data_in(function(t){e.teams=t.teams,wt.data.project.get_all("archive",function(t){e.archived_projects=t.data},null,function(){n.global.loading_done=!0})},function(){n.global.loading_done=!0},function(){})}]),e.controller("left_center_panel_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n,i,a){e.star_team={team_id:-1,expand:!1},e.current_pid="";var o=kzi.localData.get("left_panel_is_fold");e.left_panel_is_fold="true"==o?!0:!1,e.js_goto_path=function(e){i.path("/teams/"+e)},e.js_left_menu_toggle=function(){e.left_panel_is_fold=!e.left_panel_is_fold,kzi.localData.set("left_panel_is_fold",e.left_panel_is_fold)};var r=function(e){a.popbox({target:e,templateUrl:"/ycjs/tpl/common/pop_star_projects.html",controller:["$scope","popbox",function(e,t){e.popbox=t,e.js_close=function(){t.close()},e.js_to_project=function(e){i.path("/project/"+e.pid),t.close()}}]}).open()};e.js_set_current_prj=function(t){e.current_pid=t.pid},e.js_section_expand_toggle=function(t,n){return e.left_panel_is_fold===!0?(-1===t.team_id&&r(n),void 0):(-1!=t.team_id&&n&&!$(n.target).hasClass("icon-angle")&&i.path("/teams/"+t.team_id),e.current_team.team_id===t.team_id?(e.current_team.expand=!e.current_team.expand,void 0):(e.current_team.expand=!1,e.current_team=t,t.expand=!0,void 0))},e.$on(kzi.constant.event_names.shortcut_key_left_menu_toggle,function(){e.js_left_menu_toggle()});var l=function(){if("team"===n.global.header_menu){var i=t.team_id,a=_.findWhere(n.teams,{team_id:i});if(!a)return;e.current_team?(e.current_team.team_id!==i||e.current_team.team_id===i&&!e.current_team.expand)&&e.js_section_expand_toggle(a):(a.expand=!0,e.current_team=a)}else e.star_team.expand=!0,e.current_team=e.star_team};e.$on(kzi.constant.event_names.load_teams_projects_sucess,function(){l()}),n.$on("$routeChangeSuccess",function(){if("team"===n.global.header_menu)l();else if("project"===n.global.header_menu){if("project"===n.global.header_menu){var o=t.pid;_.isEmpty(o)||(e.current_pid=o)}}else e.current_pid=""})}]),e.controller("global_file_ctrl",["$rootScope","$scope","$popbox",function(e,t,n){t.options={pasteZone:null,dropZone:null,url:kzi.config.wtbox(),done:function(n,i){i.scope().$apply(function(){if(200===i.response().result.code){var n=i.response().result.files[0],a={};switch(a.target=n.formData.target,a.type=n.formData.type||"project",a.file={pid:n.formData.pid,name:n.fname,ext:kzi.constant.get_ext(n.ext),size:n.size,path:n.url},n.formData.type){case"task":a.ext={tid:n.formData.tid};break;case"post":a.ext={post_id:n.formData.post_id};break;case"file":a.ext={fid:n.formData.fid};break;case"event":a.ext={event_id:n.formData.event_id};break;default:a.ext={folder_id:n.formData.folder_id}}wt.data.file.new_upload(n.formData.pid,a,function(s){a.file=_.extend(a.file,n,s.data),a.file.icon=kzi.helper.build_file_icon(a.file),e.refresh_cache.file.add(a.file),e.$broadcast(kzi.constant.event_names.on_file_add,a),_.isFunction(i.files[0].formData.successCallback)&&i.files[0].formData.successCallback(s),t.queue=_.reject(t.queue,function(e){try{return"pending"===e.$state()?!1:e.$response().result.files[0]===i.response().result.files[0]}catch(t){return!1}})},null,function(){})}else i.files[0].error="ä¸ä¼ åºé"})}},t.js_pop_global_fileupload=function(e){n.popbox({target:e,templateUrl:"/ycjs/tpl/header/pop_global_fileupload.html",controller:["$scope","popbox","pop_data",function(e,t,n){e.popbox=t,e.js_close=function(){t.close()},e.pop_data=n,e.$watch("pop_data.scope.",function(e){0===e&&t.close()})}],resolve:{pop_data:function(){return{scope:t}}}}).open()}}])}(),function(){"use strict";var e=angular.module("wt.browse_controller",["ui.utils"]);e.controller("browse_task_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n){n.global.title="åç°ä»»å¡",n.global.loading_done=!0,e.current_tab=0;var o=1,r=function(){e.part_loading_done=!1,wt.data.task.get_all_list(e.current_tab,o,function(t){var n=e.last_date;_.each(t.data,function(e){var t=moment(e.create_date).format("YYYY-MM-DD");t===n?e.is_show_date=!1:(e.is_show_date=!0,n=t)}),e.last_date=n,_.isEmpty(t.data)?e.tasks=[]:(o+=1,e.tasks=_.isEmpty(e.tasks)?t.data:e.tasks.concat(t.data)),e.has_more=kzi.config.default_count>t.data.length?!1:!0},null,function(){e.part_loading_done=!0})};r(),e.load_tasks_more=function(){r()},e.js_change_tab=function(t){e.current_tab=t,o=1,e.tasks=[],e.last_date=0,r()}}]),e.controller("browse_file_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n){n.global.title="åç°æä»¶",n.global.loading_done=!0,e.current_tab=0;var o=1,r=function(){n.part_loading_done=!1,wt.data.file.get_all_list(e.current_tab,o,function(t){_.each(t.data,function(e){e.icon=kzi.helper.build_file_icon(e)}),_.isEmpty(t.data)?e.files=[]:(o+=1,e.files=_.isEmpty(e.files)?t.data:e.files.concat(t.data)),e.has_more=kzi.config.default_count>t.data.length?!1:!0},null,function(){n.part_loading_done=!0})};r(),e.load_files_more=function(){r()},e.js_change_tab=function(t){e.current_tab=t,o=1,e.files=[],r()}}]),e.controller("browse_post_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n){n.global.title="åç°è¯é¢",n.global.loading_done=!0,e.current_tab=0;var o=1;e.posts=[];var r=function(){n.part_loading_done=!1,wt.data.post.get_all_list(e.current_tab,o,function(t){_.isEmpty(t.data)?e.posts=[]:(o+=1,e.posts=_.isEmpty(e.posts)?t.data:e.posts.concat(t.data)),e.has_more=kzi.config.default_count>t.data.length?!1:!0},null,function(){n.part_loading_done=!0})};r(),e.load_posts_more=function(){r()},e.js_change_tab=function(t){e.current_tab=t,o=1,e.posts=[],r()}}]),e.controller("browse_page_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n){n.global.title="åç°ææ¡£",n.global.loading_done=!0,e.current_tab=0;var o=1;e.pages=[];var r=function(){n.part_loading_done=!1,wt.data.page.get_all_list(e.current_tab,o,function(t){_.isEmpty(t.data)?e.pages=[]:(o+=1,e.pages=_.isEmpty(e.pages)?t.data:e.pages.concat(t.data)),e.has_more=kzi.config.default_count>t.data.length?!1:!0},null,function(){n.part_loading_done=!0})};r(),e.load_pages_more=function(){r()},e.js_change_tab=function(t){e.current_tab=t,o=1,e.pages=[],r()}}])}(),function(){"use strict";var e=angular.module("wt.dashboard_controller");e.controller("tasks_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n){n.global.title="æçä»»å¡",n.global.loading_done=!0,e.show_completed=0,e.my_task_view="date",e.team_id="all",e.current_type="tasks",kzi.localData.get("my_task_view")?e.my_task_view=kzi.localData.get("my_task_view"):(e.my_task_view="date",kzi.localData.set("my_task_view",e.my_task_view));var o=function(){var t=[];t="all"==e.team_id?e.my_tasks_ori:_.where(e.my_tasks_ori,{team_id:e.team_id}),e.my_tasks="date"==e.my_task_view?r(t):l(t)},r=function(e){var t={today:[],tomorrow:[],week:[],nextweek:[],month:[],due:[],other:[]},n=moment(),i=moment().add("days",1),a=moment().endOf("week").add("days",1),s=moment().add("days",7).endOf("week").add("days",1),o=moment().endOf("month");_.each(e,function(e){var r=moment(e.expire_date);r.isSame(n,"day")?t.today.push(e):r.isSame(i,"day")?t.tomorrow.push(e):r>n&&a>r?t.week.push(e):r>n&&s>r?t.nextweek.push(e):r>n&&o>r?t.month.push(e):n>r&&r>0?t.due.push(e):t.other.push(e)});var r=[];return _.isEmpty(t.today)||r.push({phase:"ä»å¤©",tasks:t.today}),_.isEmpty(t.tomorrow)||r.push({phase:"æå¤©",tasks:t.tomorrow}),_.isEmpty(t.week)||r.push({phase:"æ¬å¨",tasks:t.week}),_.isEmpty(t.nextweek)||r.push({phase:"ä¸å¨",tasks:t.nextweek}),_.isEmpty(t.month)||r.push({phase:"æ¬æ",tasks:t.month}),_.isEmpty(t.due)||r.push({phase:"å·²è¿æ?",tasks:t.due}),_.isEmpty(t.other)||r.push({phase:"å¶å®",tasks:t.other}),r},l=function(e){for(var t=_.uniq(_.pluck(e,"pid")),n=[],i=0;t.length>i;i++){var a={tasks:_.where(e,{pid:t[i]})};_.isEmpty(a.tasks)||(a.project=a.tasks[0].project,n.push(a))}return n},c=function(t){e.part_loading_done=!1,wt.data.task.get_for_uncompleted(function(i){n.global.loading_done=!0,e.my_tasks_ori=i.data,o(),angular.isFunction(t)&&t(i.data)},null,function(){e.part_loading_done=!0})};n.load_teams(function(t){e.teams=t,c()},null,function(){}),e.js_task_view_toggle=function(t){e.my_task_view=t,o(),kzi.localData.set("my_task_view",t)},e.js_show_completed_toggle=function(t){e.show_completed=t,wt.utility.load_data_by_page(c,e)},e.js_filter_task=function(t){e.team_id=t,o()},e.js_complete_task=function(e,t){e.stopPropagation(),t.completed?wt.data.task.uncomplete(t.pid,t.tid,function(){}):wt.data.task.complete(t.pid,t.tid,function(){}),t.completed=0==t.completed?1:0,n.refresh_cache.task.complete(t.tid,t.completed),n.$broadcast(kzi.constant.event_names.on_task_complete,t)},e.$on(kzi.constant.event_names.on_task_update,function(t,i){i&&(_.isEmpty(e.my_tasks)||_.each(e.my_tasks,function(e){if(!_.isEmpty(e.tasks)){var t=_.findWhere(e.tasks,{tid:i.tid});_.isEmpty(t)||(t.name=i.name,t.desc=i.desc,t.pos=i.pos,t.completed=i.completed,t.expire_date=i.expire_date,t.badges=i.badges,t.labels=i.labels,t.members=i.members,t.watchers=i.watchers,t.todos=i.todos)}}),n.locator.show_prj&&n.refresh_cache.task.update_full(i))}),e.$on(kzi.constant.event_names.on_task_trash,function(t,n){n&&(_.isEmpty(e.my_tasks)||_.each(e.my_tasks,function(e){_.isEmpty(e.tasks)||(e.tasks=_.reject(e.tasks,function(e){return e.tid==n.tid}))}))}),e.$on(kzi.constant.event_names.on_task_complete,function(t,n){n&&(_.isEmpty(e.my_tasks)||_.each(e.my_tasks,function(e){if(!_.isEmpty(e.tasks)){var t=_.findWhere(e.tasks,{tid:n.tid});t&&(t.completed=n.completed)}}))})}]),e.controller("tasks_graph_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n){n.global.title="ä»»å¡ç®æ?",e.current_type="graph",e.start=moment().startOf("week"),e.end=moment().endOf("week");var o=400,r=400,l=-10,c=function(e){o=$(".layout_content_main").width()/2-90;var t=[{name:"å®æ",value:_.pluck(e,"completed"),color:kzi.config.colors.completed,line_width:3}],n=new iChart.LineBasic2D({render:"week_tasks_graph",data:t,width:o,height:r,background_color:"#fbfbfb",border:0,bar_space:20,sub_option:{border:{width:0}},legend:{enable:!0,row:1,column:"max",valign:"top",background_color:null,offsetx:l,offsety:-5,border:!1},coordinate:{background_color:0,axis:{color:"#e1e1e1"},scale:[{scale_enable:!1,position:"left"},{position:"bottom",scale_enable:!1,labels:["å¨æ¥","å¨ä¸","å¨äº","å¨ä¸","å¨å","å¨äº","å¨å­"]}],width:"80%",height:"80%"}});n.draw()},d=function(){e.part_loading_done=!1,e.disable_week_next=e.start>moment()?!0:!1,e.graph_week_date=e.start.year===e.end.year?e.start.format("YYYYå¹´MMæDDæ?")+" - "+e.end.format("MMæDDæ?"):e.start.format("YYYYå¹´MMæDDæ?")+" - "+e.end.format("YYYYå¹´MMæDDæ?"),wt.data.task.get_for_graph(e.start,e.end,function(t){e.user_graph=t.data,c(e.user_graph.weekly)},null,function(){n.global.loading_done=!0,e.part_loading_done=!0})};d(),e.to_next_week=function(){e.end>moment()||!e.part_loading_done||(e.start=e.start.add("days",7),e.end=e.end.add("days",7),d())},e.to_prev_week=function(){e.part_loading_done&&(e.start=e.start.add("days",-7),e.end=e.end.add("days",-7),d())}}]),e.controller("tasks_completed_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n){n.global.title="å·²å®æä»»å?",e.current_type="completed";var o=1;n.global.loading_done=!0;var r=function(){n.loading_tasks=!0,wt.data.task.get_for_completed(o,function(t){var n=e.last_date;_.each(t.data,function(e){var t=moment(e.completed_date).format("YYYY-MM-DD");t===n?e.is_show_date=!1:(e.is_show_date=!0,n=t)}),e.last_date=n,_.isEmpty(t.data)?e.tasks=[]:(o+=1,e.tasks=_.isEmpty(e.tasks)?t.data:e.tasks.concat(t.data)),kzi.config.default_count>t.data.length&&(e.has_no_more=!0)},null,function(){n.loading_tasks=!1})};r(),e.load_tasks_more=function(){r()}}]),e.controller("tasks_expired_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n){n.global.title="æçä»»å¡",n.global.loading_done=!0;var o=function(t){e.part_loading_done=!1,wt.data.task.get_for_expired(function(n){e.expired_tasks=n.data,angular.isFunction(t)&&t(n.data)},null,function(){e.part_loading_done=!0})};o(),e.js_complete_task=function(e,t,i){e.stopPropagation(),i.completed?wt.data.task.uncomplete(i.pid,i.tid,function(){}):wt.data.task.complete(i.pid,i.tid,function(){}),i.completed=0==i.completed?1:0,n.refresh_cache.task.complete(i.tid,i.completed),n.$broadcast(kzi.constant.event_names.on_task_complete,i)},e.$on(kzi.constant.event_names.on_task_update,function(t,i){if(i){if(!_.isEmpty(e.expired_tasks)){var a=_.findWhere(e.expired_tasks,{tid:i.tid});_.isEmpty(a)||(a.name=i.name,a.desc=i.desc,a.pos=i.pos,a.completed=i.completed,a.expire_date=i.expire_date,a.badges=i.badges,a.labels=i.labels,a.members=i.members,a.watchers=i.watchers,a.todos=i.todos)}n.refresh_cache.task.update_full(i)}}),e.$on(kzi.constant.event_names.on_task_trash,function(t,n){n&&(_.isEmpty(e.expired_tasks)||(e.expired_tasks=_.reject(e.expired_tasks,function(e){return e.tid===n.tid})))}),e.$on(kzi.constant.event_names.on_task_complete,function(t,n){if(n&&!_.isEmpty(e.expired_tasks)){var i=_.findWhere(e.expired_tasks,{tid:n.tid});i&&(i.completed=n.completed)}})}])}(),function(){"use strict";var e=angular.module("wt.dashboard_controller");e.controller("inbox_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n,i,a,s){n.global.title="æ¶æ¯ä¸­å¿",e.is_show_read=!1,e.read_notices=[],e.unread_notices=[];var o=0,r=function(){e.loading_read_notice=!0,wt.data.notice.get_list(e.current_type,o,kzi.config.default_count,1,function(t){_.isEmpty(t.data)||(o=t.data[t.data.length-1].published,e.read_notices=_.isEmpty(e.read_notices)?t.data:e.read_notices.concat(t.data)),kzi.config.default_count>t.data.length&&(e.has_no_more=!0)},null,function(){e.loading_read_notice=!1})},l=function(){e.loading_unread_notice=!0,wt.data.notice.get_list(e.current_type,0,"all",0,function(t){e.unread_notices=t.data,e.show_unread_notices=t.data,n.notice_count!==e.unread_notices.length&&(n.notice_count=e.unread_notices.length)},null,function(){e.loading_unread_notice=!1})},c=function(){e.show_unread_notices=e.current_type===kzi.constant.notice_types.all?e.unread_notices:_.filter(e.unread_notices,function(t){return e.current_type===t.verb})};e.js_load_more_notice=function(){r()},e.js_show_read_notices=function(){e.is_show_read||(e.is_show_read=!0,0===o&&r())},e.js_show_unread_notices=function(){e.is_show_read&&(e.is_show_read=!1,_.isEmpty(e.unread_notices)||(e.unread_notices=_.reject(e.unread_notices,function(e){return 1===e.is_read})),c())};var d=function(){e.filter_types=kzi.constant.get_notice_types(),e.current_type=kzi.constant.notice_types.all,l(),n.global.loading_done=!0};d(),e.js_filter_notices=function(t){e.current_type!==t.type&&(e.current_type=t.type,o=0,e.has_no_more=!1,e.read_notices=[],e.is_show_read?r():(_.isEmpty(e.unread_notices)||(e.unread_notices=_.reject(e.unread_notices,function(e){return 1===e.is_read})),c()))},n.$on(kzi.constant.event_names.notice_new,function(t,n){e.unread_notices.unshift(n),c()}),e.js_show_slide_detail=function(t,a,o){return e.js_set_notice_read(null,a),"project"===t?(i.path("/project/"+a.filter.prj),void 0):(null!==t&&(n.locator.type=t,n.locator.show_slide=!0,s(function(){"task"===t?n.locator.to_task(a.filter.prj,o.eid,!0):"post"===t?n.locator.to_post(a.filter.prj,o.eid,!0):"page"===t?n.locator.to_page(a.filter.prj,o.eid,!0):"file"===t?n.locator.to_file(a.filter.prj,o.eid,!0):"event"===t&&n.locator.to_event(a.filter.prj,o.eid,!0)})),void 0)},e.js_set_notice_read=function(t,i){_.isEmpty(t)||t.stopPropagation(),0===i.is_read&&(i.is_read=1,wt.data.notice.set_read(i.nid,function(){_.isEmpty(e.read_notices)||_.findWhere(e.read_notices,{nid:i.nid})||e.read_notices.unshift(i),i.is_read=1,n.notice_count>=1&&n.notice_count--},function(){i.is_read=0,kzi.msg.error("æ è®°æ¶æ¯ä¸ºå·²è¯»å¤±è´?!")}))},e.js_set_all_notice_read=function(){e.setting_all_notice_read!==!0&&e.loading_unread_notice!==!0&&(e.setting_all_notice_read=!0,wt.data.notice.set_allread(e.current_type,function(){if(!_.isEmpty(e.show_unread_notices)){var t=0;_.each(e.show_unread_notices,function(n){1!==n.is_read&&(n.is_read=1,t++,_.isEmpty(e.read_notices)||_.findWhere(e.read_notices,{nid:n.nid})||e.read_notices.unshift(n))}),e.show_unread_notices=[],n.notice_count=n.notice_count>=t?n.notice_count-t:0}e.setting_all_notice_read=!1},function(){e.setting_all_notice_read=!1}))}}])}(),function(){"use strict";var e=angular.module("wt.task_controller",["ui.utils"]);e.controller("entity_task_ctrl",["$scope","$element","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n,i,a,s,o){var r,l;e.token=kzi.get_cookie("sid");var c,d=function(e,t,n){var a=t.temp_name,s=kzi.config.default_pos;if(!_.isEmpty(e.todos)){var o=_.max(e.todos,function(e){return e.pos});s=o.pos+kzi.config.default_pos}t.temp_name="",wt.data.task.add_todo(r,l,a,s,function(t){e.todos.push(t.data),e=u(e),i.$broadcast(kzi.constant.event_names.on_task_update,e)},null,function(){_.isFunction(n)&&n()})},u=function(e){var t=_.size(e.todos),n=_.size(_.where(e.todos,{checked:1}));return t>0?(e.percentage=parseInt(100*(n/t)),e.status=n+"/"+t):e.percentage=0,e.badges.todo_checked_count=n,e.badges.todo_count=t,e},p=function(){_.isEmpty(e.task.todos)||(e.task.todos=_.sortBy(e.task.todos,function(e){return e.pos}))},f=function(){e.member_droppable_options={accept:".avatar",hoverClass:"entity-members-drop-hover",drop:function(t,n){var a=$(n.helper.context).attr("member-id");e.$apply(function(){var t=_.findWhere(e.task.members,{uid:a});_.isEmpty(t)&&i.load_project_members(r,function(t){var n=_.findWhere(t.members,{uid:a});e.task.members.push(n),wt.data.task.assign(r,e.task.tid,a,function(){}),i.$broadcast(kzi.constant.event_names.on_task_update,e.task)})})}}},h=function(){e.watcher_droppable_options={accept:".avatar",hoverClass:"entity-members-drop-hover",drop:function(t,n){var a=$(n.helper.context).attr("member-id");e.$apply(function(){var t=_.findWhere(e.task.watchers,{uid:a});_.isEmpty(t)&&i.load_project_members(r,function(t){var n=_.findWhere(t.members,{uid:a});e.task.watchers.push(n),wt.data.watch(r,"tasks",e.task.tid,a,function(){})})})}}},m=function(){e.todo_sort_options={containment:".task-todos",placeholder:"todo-placeholder",helper:"clone",revert:10,dropOnEmpty:!0,tolerance:"pointer",distance:"4",delay:"75",disabled:!1,start:function(e,t){$(".todo-placeholder").css({height:t.item.outerHeight()+10,width:t.item.css("width")})},stop:function(t,n){var i=n.item.attr("todo-id"),a=_.findWhere(e.task.todos,{todo_id:i}),s=n.item.prev().attr("todo-id"),o=n.item.next().attr("todo-id"),l=0;if(_.isEmpty(s)){var c=_.findWhere(e.task.todos,{todo_id:o});l=c.pos/2+1}else if(_.isEmpty(o)){var d=_.findWhere(e.task.todos,{todo_id:s});l=d.pos+kzi.config.default_pos+1}else{var c=_.findWhere(e.task.todos,{todo_id:o}),d=_.findWhere(e.task.todos,{todo_id:s});l=(c.pos+d.pos)/2+1}a.pos!==l&&(a.pos=l,wt.data.task.update_todo_pos(r,e.task.tid,a.todo_id,l,function(){p()}))}}};e.task={},e.$on(kzi.constant.event_names.on_slide_hide,function(){var i={tid:e.task.tid};_.isEmpty(e.task.temp_name)||(i.temp_name=e.task.temp_name),_.isEmpty(e.task.temp_desc)||(i.temp_desc=e.task.temp_desc),e.task=i}),e.$on(kzi.constant.event_names.load_entity_task,function(t,n){_.isEmpty(n.pid)||_.isEmpty(n.tid)||(r=n.pid,l=n.tid,e.select_tab_comment(),e.section_loading_done=!1,e.is_show_more=!1,i.load_task(r,l,function(t,n){e.project=t,e.task&&e.task.tid===n.tid&&(_.isEmpty(e.task.temp_name)||(n.temp_name=e.task.temp_name),_.isEmpty(e.task.temp_desc)||(n.temp_desc=e.task.temp_desc)),e.task=n,1==e.project.info.archived?e.permission=kzi.constant.permission.project_archived:1==n.archived?e.permission=kzi.constant.permission.entity_archived:1==n.is_deleted?e.permission=kzi.constant.permission.entity_deleted:(e.permission=kzi.constant.permission.ok,e.project.info.curr_role!==kzi.constant.role.guest&&(f(),h(),m())),o(function(){e.task=u(n),p()}),!e.$$phase,_.isEmpty(n.files)?wt.data.file.get_attach_list(r,"tasks",l,function(e){e.data&&e.data.length>0&&(_.each(e.data,function(e){e.icon=kzi.helper.build_file_icon(e)}),n.files=e.data)},null,function(){e.section_loading_done=!0}):(_.each(n.files,function(e){e.icon=kzi.helper.build_file_icon(e)}),e.section_loading_done=!0),e.$broadcast(kzi.constant.event_names.load_comments,{pid:r,xid:l,xtype:"tasks"})},function(t){t.code==kzi.statuses.task_error.not_found.code?e.permission=kzi.constant.permission.entity_not_found:wt.data.error(t)}))}),e.js_show_more=function(){e.is_show_more=!0},e.js_move=function(t,n){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_move_task.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.js_close=function(){t.close()},i.load_tasks(r,function(t){_.isEmpty(t.entries)||(e.entries=t.entries,e.tasks=t.tasks,_.each(e.entries,function(e){e.move_selected=e.entry_id===n.entry_id?1:0}))}),e.js_move_to=function(a){if(_.each(e.entries,function(e){e.move_selected=0}),a.move_selected=1,a){var s=kzi.config.default_pos,o=_.where(e.tasks,{entry_id:a.entry_id});null!==o&&o.length>0&&(s=_.max(o,function(e){return e.pos}).pos+kzi.config.default_pos+1);var c=n.entry_id;wt.data.task.move(r,l,n.entry_id,a.entry_id,s,function(){}),i.locator.show_prj&&i.refresh_cache.task.move(l,n.entry_id,a.entry_id,s),n.entry_id=a.entry_id,n.entry_name=a.name,i.$broadcast(kzi.constant.event_names.on_task_move,n,c)}t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_copy=function(t,n){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_copy_task.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.new_task=wt.bus.task.get_copy_task(n),e.js_copy_task=function(t){_.isEmpty(t.name)||(e.is_copying=!0,wt.data.task.copy_task(r,t.tid,t.name,0,t.keep_comments,t.keep_members,t.keep_labels,t.keep_attachments,t.keep_todos,t.keep_watchers,function(n){e.js_close();var a=_.findWhere(i.project.tasks,{tid:t.tid});a||i.project.tasks.push(t),i.$broadcast("socket_message_task_add",{task:n.data})},null,function(){e.is_copying=!1}))},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_trash=function(t,n){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_delete_task.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.js_close=function(){t.close()},e.js_delete_task=function(){i.project.tasks=_.reject(i.project.tasks,function(e){return e.tid==l}),wt.data.task.trash(r,l,function(){i.locator.hide_slide()}),n.is_deleted=1,t.close(),i.$broadcast(kzi.constant.event_names.on_task_trash,n),i.locator.hide_slide()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_archive=function(){i.project.tasks=_.reject(i.project.tasks,function(e){return e.tid==l}),wt.data.task.archive(r,l,function(){i.locator.hide_slide()}),e.task.archived=1,i.$broadcast(kzi.constant.event_names.on_task_trash,e.task),i.locator.hide_slide()},e.js_complete_task=function(t){e.permission===kzi.constant.permission.ok&&i.project.info.curr_role!==kzi.constant.role.guest&&(t.completed?(t.completed=0,wt.data.task.uncomplete(r,l,function(){i.$broadcast(kzi.constant.event_names.on_task_complete,t)})):(t.completed=1,wt.data.task.complete(r,l,function(){i.$broadcast(kzi.constant.event_names.on_task_complete,t)})))},e.$on(kzi.constant.event_names.on_task_complete,function(t,n){_.isEmpty(n)||n.tid===e.task.tid&&(e.task.completed=n.completed)}),e.$on(kzi.constant.event_names.on_task_comment,function(t,n){_.isEmpty(n)||n.tid!==e.task.tid||(e.task.badges.comment_count+=1,i.$broadcast(kzi.constant.event_names.on_task_update,e.task))}),e.$on(kzi.constant.event_names.on_task_badges_file,function(t,n){n&&"task"===n.type&&e.task.tid===n.file.formData.tid&&(_.isArray(e.task.files)?e.task.files.push(n.file):e.task.files=[n.file],_.isArray(e.task.files)&&(e.task.badges.file_count=e.task.files.length))}),e.$on(kzi.constant.event_names.shortcut_key_to_edit,function(){i.locator.type!==kzi.constant.entity_type.task||_.isEmpty(e.task)||e.js_show_editor(e.task)}),e.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){i.locator.type===kzi.constant.entity_type.task&&(_.isEmpty(e.task)||e.task.is_edit!==!0?i.locator.show_slide===!0&&i.locator.hide_slide():e.js_cancel_editor(e.task))}),e.js_show_editor=function(t){e.permission===kzi.constant.permission.ok&&i.project.info.curr_role!==kzi.constant.role.guest&&(t.is_edit=!0,_.isEmpty(t.temp_name)&&(t.temp_name=t.name),_.isEmpty(t.temp_desc)&&(t.temp_desc=t.desc))},e.js_cancel_editor=function(e){e.is_edit=!1,e.temp_desc="",e.temp_name=""},e.js_set_update=function(e,t){if(t.is_saving!==!0){if(_.isEmpty(t.temp_name))return t.temp_name=t.name,void 0;t.is_saving=!0,wt.data.task.update(r,l,t.temp_name,t.temp_desc,function(){t.is_edit=!1,t.name=t.temp_name,t.desc=t.temp_desc,t.temp_name=null,t.temp_desc=null,i.$broadcast(kzi.constant.event_names.on_task_update,t)},null,function(){t.is_saving=!1})}},e.js_show_datepicker=function(t,n){s.popbox({target:t,templateUrl:"/ycjs/tpl/common/pop_datepicker.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,n.expire_date_temp=n.expire_date?moment(n.expire_date).format("YYYY-MM-DD"):moment().format("YYYY-MM-DD"),e.task=n,e.js_close=function(){t.close()},e.js_today=function(){var t=moment().format("YYYY-MM-DD");e.set_expire(t)},e.js_tomorrow=function(){var t=moment().add("days",1).format("YYYY-MM-DD");e.set_expire(t)},e.js_week=function(){var t=moment().endOf("week").add("days",1).format("YYYY-MM-DD");e.set_expire(t)},e.js_next_week=function(){var t=moment().add("days",7).endOf("week").add("days",1).format("YYYY-MM-DD");e.set_expire(t)},e.js_month=function(){var t=moment().endOf("month").format("YYYY-MM-DD");e.set_expire(t)},e.js_set_expire=function(t){e.set_expire(t)},e.js_cancel_expire=function(){n.expire_date=0,n.badges.expire_date=0,wt.data.task.set_expire(r,l,0,function(){}),i.$broadcast(kzi.constant.event_names.on_task_update,n),t.close()},e.set_expire=function(e){var a=moment(e).endOf("day").valueOf();wt.data.task.set_expire(r,l,a,function(){n.expire_date=a,i.$broadcast(kzi.constant.event_names.on_task_update,n),t.close()})}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_todo=function(e){e.is_todo_edit=!0,e.is_add_todo_edit=!0},e.js_cancel_todo_editor=function(e){e.is_todo_edit=!1},e.js_show_todo_editor=function(t){e.permission===kzi.constant.permission.ok&&i.project.info.curr_role!==kzi.constant.role.guest&&(t.is_todo_edit=!0,c=t.name)},e.js_show_add_todo_editor=function(e){e.is_add_todo_edit=!0},e.js_cancel_add_todo_editor=function(e){e.is_add_todo_edit=!1},e.js_add_todo=function(e,t){return _.isUndefined(t)||_.isUndefined(t.temp_name)||_.isEmpty(t.temp_name)?(e.is_add_todo_edit=!1,void 0):(t.is_saving=!0,d(e,t,function(){t.is_saving=!1}),void 0)},e.js_keyup_add_todo=function(t,n){var a=t.which;return 13===a?(t.stopPropagation(),t.preventDefault(),setTimeout(function(){$(t.target).parents(".new-todo-control").find("button[data-loading-text]").click()},50),void 0):27===a?(e.js_cancel_add_todo_editor(n),void 0):void 0},e.js_save_todo=function(e,t){return _.isEmpty(t.name)?(t.is_todo_edit=!1,t.name=c,void 0):(t.is_saving=!0,wt.data.task.update_todo(r,l,t.todo_id,t.name,t.pos,function(){},null,function(){t.is_saving=!1,t.is_todo_edit=!1}),c=t.name,void 0)},e.js_keyup_todo=function(t,n,i){var a=event.which||event.keyCode;return 13===a?(e.js_save_todo(null,i),void 0):(27===a&&e.js_cancel_todo_editor(i),void 0)},e.js_remove_label=function(t){e.task.labels=_.reject(e.task.labels,function(e){return e.name===t.name}),wt.data.task.del_labels(r,l,t.name,function(){})},e.js_del_todo=function(e,t){e.todos=_.reject(e.todos,function(e){return e.todo_id===t.todo_id}),wt.data.task.del_todo(r,l,t.todo_id,function(){}),e=u(e),t.is_todo_edit=!1,i.$broadcast(kzi.constant.event_names.on_task_update,e)
},e.js_complete_todo=function(t,n){if(e.permission===kzi.constant.permission.ok&&i.project.info.curr_role!==kzi.constant.role.guest){var a=n.todo_id;n.checked?(n.checked=0,wt.data.task.uncomplete_todo(r,l,a,function(){})):(n.checked=1,wt.data.task.complete_todo(r,l,a,function(){})),t=u(t),i.$broadcast(kzi.constant.event_names.on_task_update,t)}},e.js_assign_member=function(t,n){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_assign_member.html",controller:["$scope","popbox","pop_data",function(e,t,a){e.popbox=t,i.load_project_members(r,function(t){var i=[];_.each(t.members,function(e){if(1==e.status&&e.role!==kzi.constant.role.guest){var t=_.findWhere(n.members,{uid:e.uid});e.assigned=t?1:0,i.push(e)}}),e.members=i}),e.js_toggle_member=function(e){e.setting_toggle_member!==!0&&(e.setting_toggle_member=!0,wt.bus.member.set_task_member_toggle(r,a.scope.task,e,function(){e.setting_toggle_member=!1,i.$broadcast(kzi.constant.event_names.on_task_update,n)}))},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e,members:e.members}}}}).open()},e.js_watch_task=function(t,n){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_watch_task.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.task=n,i.load_project_members(r,function(t){var i=[];_.each(t.members,function(e){if(1==e.status){var t=_.findWhere(n.watchers,{uid:e.uid});e.is_watch=t?1:0,i.push(e)}}),e.members=i}),e.js_toggle_watch=function(e){if(e.is_watch){var t=_.findWhere(n.watchers,{uid:e.uid});t&&(n.watchers=_.reject(n.watchers,function(t){return t.uid===e.uid})),e.is_watch=0,wt.data.unwatch(r,kzi.constant.xtype.task,n.tid,e.uid,function(){})}else{var t=_.findWhere(n.watchers,{uid:e.uid});t||(n.watchers.push(e),e.is_watch=1,wt.data.watch(r,kzi.constant.xtype.task,n.tid,e.uid,function(){}))}},e.js_watch_all=function(){if(n.watchers.length!==e.members){var i=_.pluck(e.members,"uid");wt.data.watch_batch(r,kzi.constant.xtype.task,n.tid,i,function(){n.watchers=e.members}),_.each(e.members,function(e){e.is_watch=1})}t.close()},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e,members:e.members}}}}).open()},e.js_assign_label=function(t,n){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_assign_label.html",controller:["$scope","popbox","pop_data",function(e,t,a){e.popbox=t,e.step=0,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},e.labels=wt.bus.project.label.load(n,a.scope.project.info.labels),e.js_toggle_label=function(e){if(e.assigned){var t=_.findWhere(a.scope.task.labels,{name:e.name});t&&(a.scope.task.labels=_.reject(a.scope.task.labels,function(t){return t.name==e.name})),e.assigned=0,wt.data.task.del_labels(r,l,e.name,function(){})}else{var t=_.findWhere(a.scope.task.labels,{name:e.name});t||(a.scope.task.labels.push(e),e.assigned=1,wt.data.task.set_labels(r,l,e.name,function(){}))}i.$broadcast(kzi.constant.event_names.on_task_update,a.scope.task)},e.js_goto_set_labels=function(){_.each(kzi.constant.labels,function(t){var n=_.findWhere(a.scope.project.info.labels,{name:t.name});n&&(e[t.name]=n.desc)}),e.step=1},e.js_set_lables=function(t,i,s,o,l,c){var d=[{name:"blue",desc:t},{name:"green",desc:i},{name:"orange",desc:s},{name:"purple",desc:o},{name:"red",desc:l},{name:"yellow",desc:c}];e.is_save_ing=!0,wt.data.project.set_labels(r,d,function(){a.scope.project.info.labels=d,e.labels=wt.bus.project.label.load(n,d),e.step=0},null,function(){e.is_save_ing=!1})}}],resolve:{pop_data:function(){return{scope:e,labels:e.project.info.labels}}}}).open()},e.js_show_member=function(t,n){e.permission===kzi.constant.permission.ok&&i.project.info.curr_role!==kzi.constant.role.guest&&s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_task_member.html",controller:["$scope","popbox","pop_data",function(e,t,a){e.popbox=t,e.member=n,e.js_close=function(){t.close()},e.js_remove_member=function(){e.removing_member!==!0&&(e.removing_member=!0,n.assigned=!0,wt.bus.member.set_task_member_toggle(r,a.scope.task,n,function(){n.setting_toggle_member=!1,e.removing_member=!1,i.$broadcast(kzi.constant.event_names.on_task_update,a.scope.task),n.assigned=!1}),t.close())}}],resolve:{pop_data:function(){return{scope:e,members:e.members}}}}).open()},e.js_show_watcher=function(t,n){e.permission===kzi.constant.permission.ok&&s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_task_watcher.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.member=n,e.js_close=function(){t.close()},e.js_unwatch_member=function(){var e=_.findWhere(i.scope.task.watchers,{uid:n.uid});e&&(i.scope.task.watchers=_.reject(i.scope.task.watchers,function(e){return e.uid==n.uid})),n.is_watch=0,wt.data.unwatch(r,"tasks",i.scope.task.tid,n.uid,function(){}),t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_attach=function(t,n){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_attach.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},e.task=n,e.prj_files_loaded=!1,i.load_files(r,"",function(t){e.prj_files_loaded=!0;var n=_.where(t.files,{folder_id:""});e.files=n}),e.js_attach=function(t){if(1==t.type)e.step=1,e.prj_files_loaded=!1,e.sub_files=[],i.load_files(r,t.fid,function(n){e.prj_files_loaded=!0;var i=_.where(n.files,{folder_id:t.fid});e.sub_files=i});else{_.isEmpty(n.files)&&(n.files=[]);var a=_.findWhere(n.files,{fid:t.fid});a||(n.files.push(t),wt.data.file.attach(r,"tasks",l,t.fid,function(){n.badges.file_count+=1,i.$broadcast(kzi.constant.event_names.on_task_update,n)}))}}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_trigger_upload=function(e){$(e.target).parents(".btn-group").eq(0).find("input[type=file]").click()},e.$watch("task",function(t){t&&!_.isEmpty(t)&&(e.file_upload_option={url:[kzi.config.wtbox(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"task",pid:t.pid,tid:t.tid}},e.dragfile_option={upload_option:e.file_upload_option},e.global_fileupload_queue=function(){return i.upload_queue.get_task(t.pid,t.tid)})}),e.js_goto_file=function(e,t){var a=n.pid;_.isEmpty(a)?i.locator.to_file(e,t,!0):i.locator.to_file(e,t,!1)},e.js_del_attachment=function(t,n){e.task.badges.file_count--;var a=_.findWhere(e.task.files,{fid:n.fid});a&&(e.task.files=_.reject(e.task.files,function(e){return e.fid==n.fid})),wt.data.file.detach(r,"tasks",l,n.fid),i.$broadcast(kzi.constant.event_names.on_task_update,e.task)},e.select_tab_comment=function(){e.tab_active.tab_activity_active=!1,e.tab_active.tab_comment_active=!0},e.select_tab_activity=function(){e.tab_active.tab_activity_active=!0,e.tab_active.tab_comment_active=!1,e.$broadcast(kzi.constant.event_names.reload_item_activities,{xtype:"task",xid:e.task.tid})},e.js_close=function(){i.locator.show_slide=!1},e.tab_active={},e.select_tab_comment()}])}(),function(){"use strict";var e=angular.module("wt.event_controller",["ui.utils"]);e.controller("entity_event_ctrl",["$scope","$element","$routeParams","$rootScope","$location","$popbox","$timeout",function(e,t,n,i,a,s){var r,l;e.token=kzi.get_cookie("sid"),e.event={},e.temp_event={};var c=function(){e.attendees_droppable_options={accept:".avatar",hoverClass:"entity-members-drop-hover",drop:function(t,n){var a=$(n.helper.context).attr("member-id");e.$apply(function(){var t=_.findWhere(e.event.attendees,{uid:a});_.isEmpty(t)&&i.load_project_members(r,function(t){var n=_.findWhere(t.members,{uid:a});e.event.attendees.push(n),wt.data.event.attendee_add(r,e.event.event_id,a,function(){})})})}}},d=function(){e.temp_event={event_id:e.event.event_id,name:e.event.name,summary:e.event.summary,location:e.event.location,start_date:moment(e.event.start.date).format("YYYY-MM-DD"),end_date:moment(e.event.end.date).format("YYYY-MM-DD"),start_hour:moment(e.event.start.date).format("HH"),start_minute:moment(e.event.start.date).format("mm"),end_hour:moment(e.event.end.date).format("HH"),end_minute:moment(e.event.end.date).format("mm")}},u=function(){e.temp_event={}},p=function(){e.event.show_start_date=kzi.util.datetimeToDTW(e.event.start.date),e.event.show_end_date=kzi.util.datetimeToDTW(e.event.end.date)};e.$on(kzi.constant.event_names.on_slide_hide,function(){e.event=e.event.is_edit?{is_edit:e.event.is_edit,event_id:e.event.event_id}:{}}),e.$on(kzi.constant.event_names.load_entity_event,function(t,n){_.isEmpty(n.pid)||_.isEmpty(n.event_id)||(r=n.pid,l=n.event_id,e.temp_event.event_id!==n.event_id&&(e.temp_event.name=""),e.select_tab_comment(),e.section_loading_done=!1,i.load_project(r,function(t){e.project=t,e.permission=e.project.info.archived===kzi.constant.archived.yes?kzi.constant.permission.project_archived:kzi.constant.permission.ok,wt.data.event.get(r,l,function(t){e.event&&e.event.is_edit&&e.event&&e.event.event_id===t.data.event_id&&(t.data.is_edit=e.event.is_edit),e.event=t.data,e.section_loading_done=!0,t.data.is_deleted===kzi.constant.trash.yes?e.permission=kzi.constant.permission.entity_deleted:e.project.info.curr_role!==kzi.constant.role.guest&&c(),p(),e.$broadcast(kzi.constant.event_names.load_comments,{pid:r,xid:l,xtype:kzi.constant.xtype.event})},function(t){i.global.loading_done=!0,t.code===kzi.statuses.page_error.not_found.code?e.permission=kzi.constant.permission.entity_not_found:wt.data.error(t)})},null))}),e.$on(kzi.constant.event_names.shortcut_key_to_edit,function(){i.locator.type!==kzi.constant.entity_type.event||_.isEmpty(e.event)||(e.event.is_edit?e.js_cancel_editor(e.event):e.js_show_editor(e.event))}),e.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){i.locator.type===kzi.constant.entity_type.task&&(_.isEmpty(e.task)||e.task.is_edit!==!0?i.locator.show_slide===!0&&i.locator.hide_slide():e.js_cancel_editor(e.task))}),e.js_show_trash=function(t,n){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/event/pop_delete_event.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.js_close=function(){t.close()},e.js_delete_event=function(){e.is_deleting=!0,wt.data.event.trash(r,n.event_id,function(e){if(i.locator.hide_slide(),n.is_deleted=1,null!=e.data.is_calendar){var a=_.findWhere(i.projects,{pid:n.pid});a&&(a.is_calendar=e.data.is_calendar)}i.$broadcast(kzi.constant.event_names.on_event_trash,n),t.close()},null,function(){e.is_deleting=!1})}}],resolve:{pop_data:function(){return{scope:e}}}}).open()};var f=function(){var t=e.temp_event.start_date,n=e.temp_event.start_minute,i=e.temp_event.start_hour;t>=e.temp_event.end_date?(e.temp_event.end_date=e.temp_event.start_date,e.temp_event.start_hour>=e.temp_event.end_hour?(e.temp_event.end_hour=e.temp_event.start_hour,e.temp_event.start_minute>=e.temp_event.end_minute&&(e.temp_event.end_minute=e.temp_event.start_minute),e.end_minute_sections=_.filter(kzi.constant.all_minute_sections,function(e){return e>=n}),e.end_hour_sections=_.filter(kzi.constant.all_hour_sections,function(e){return e>=i})):(e.end_hour_sections=_.filter(kzi.constant.all_hour_sections,function(e){return e>=i}),e.end_minute_sections=kzi.constant.all_minute_sections)):(e.end_hour_sections=kzi.constant.all_hour_sections,e.end_minute_sections=kzi.constant.all_minute_sections)};e.start_date_options={default_date:moment(e.temp_event.start_date).format("YYYY-MM-DD"),set_date:function(t){e.temp_event.start_date=moment(t).format("YYYY-MM-DD"),e.start_date_options.default_date=e.temp_event.start_date,e.end_date_options.min_date=moment(e.temp_event.start_date).format("YYYY-MM-DD")}},e.end_date_options={default_date:moment(e.temp_event.end_date).format("YYYY-MM-DD"),min_date:moment(e.temp_event.start_date).format("YYYY-MM-DD"),set_date:function(t){e.temp_event.end_date=moment(t).format("YYYY-MM-DD"),e.end_date_options.default_date=e.temp_event.end_date,f()}},e.start_hour_sections=kzi.constant.all_hour_sections,e.start_minute_sections=kzi.constant.all_minute_sections,e.$watch("[temp_event.start_date,temp_event.start_hour,temp_event.start_minute]",function(){f(),e.start_date_options.default_date=moment(e.temp_event.start_date).format("YYYY-MM-DD"),e.end_date_options.default_date=moment(e.temp_event.end_date).format("YYYY-MM-DD"),e.end_date_options.min_date=moment(e.temp_event.start_date).format("YYYY-MM-DD")},!0),e.$watch("temp_event.end_hour",function(){f()},!0),e.js_show_editor=function(t){e.permission===kzi.constant.permission.ok&&i.project.info.curr_role!==kzi.constant.role.guest&&(t.is_edit=!0,_.isEmpty(e.temp_event.name)&&d())},e.js_cancel_editor=function(e){e.is_edit=!1,u()},e.js_set_update=function(e,t,n){if(t.is_saving!==!0){if(_.isEmpty(n.name))return n.name=t.name,void 0;t.is_saving=!0,wt.data.event.update(r,t.event_id,n.name,n.summary,n.location,n.start_date,n.start_hour+":"+n.start_minute,n.end_date,n.end_hour+":"+n.end_minute,function(){t.is_edit=!1,t.name=n.name,t.summary=n.summary,t.location=n.location,t.start.date=n.start_date+" "+n.start_hour+":"+n.start_minute,t.end.date=n.end_date+" "+n.end_hour+":"+n.end_minute,u(),i.$broadcast(kzi.constant.event_names.on_event_update,t),p()},null,function(){t.is_saving=!1})}},e.js_show_datepicker=function(t,n){s.popbox({target:t,templateUrl:"/ycjs/tpl/common/pop_datepicker.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,n.expire_date_temp=n.expire_date?moment(n.expire_date).format("YYYY-MM-DD"):moment().format("YYYY-MM-DD"),e.task=n,e.js_close=function(){t.close()},e.js_today=function(){var t=moment().format("YYYY-MM-DD");e.set_expire(t)},e.js_tomorrow=function(){var t=moment().add("days",1).format("YYYY-MM-DD");e.set_expire(t)},e.js_week=function(){var t=moment().endOf("week").add("days",1).format("YYYY-MM-DD");e.set_expire(t)},e.js_next_week=function(){var t=moment().add("days",7).endOf("week").add("days",1).format("YYYY-MM-DD");e.set_expire(t)},e.js_month=function(){var t=moment().endOf("month").format("YYYY-MM-DD");e.set_expire(t)},e.js_set_expire=function(t){e.set_expire(t)},e.js_cancel_expire=function(){n.expire_date=0,n.badges.expire_date=0,wt.data.task.set_expire(r,tid,0,function(){}),i.$broadcast(kzi.constant.event_names.on_task_update,n),t.close()},e.set_expire=function(e){var a=moment(e).endOf("day").valueOf();wt.data.task.set_expire(r,tid,a,function(){n.expire_date=a,i.$broadcast(kzi.constant.event_names.on_task_update,n),t.close()})}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_assign_attendees=function(t,n){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_assign_member.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.title="åä¸äº?",i.load_project_members(r,function(t){var i=[];_.each(t.members,function(e){if(1===e.status&&e.role!==kzi.constant.role.guest){var t=_.findWhere(n.attendees,{uid:e.uid});e.assigned=t?1:0,i.push(e)}}),e.members=i}),e.js_toggle_member=function(e){e.setting_toggle_member!==!0&&(e.setting_toggle_member=!0,wt.bus.member.set_event_attendees_toggle(r,n,e,function(){i.$broadcast(kzi.constant.event_names.on_event_update,n)},null,function(){e.setting_toggle_member=!1}))},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e,members:e.members}}}}).open()},e.js_watch_task=function(t,n){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_watch_task.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.task=n,i.load_project_members(r,function(t){var i=[];_.each(t.members,function(e){if(1==e.status){var t=_.findWhere(n.watchers,{uid:e.uid});e.is_watch=t?1:0,i.push(e)}}),e.members=i}),e.js_toggle_watch=function(e){if(e.is_watch){var t=_.findWhere(n.watchers,{uid:e.uid});t&&(n.watchers=_.reject(n.watchers,function(t){return t.uid===e.uid})),e.is_watch=0,wt.data.unwatch(r,kzi.constant.xtype.task,n.tid,e.uid,function(){})}else{var t=_.findWhere(n.watchers,{uid:e.uid});t||(n.watchers.push(e),e.is_watch=1,wt.data.watch(r,kzi.constant.xtype.task,n.tid,e.uid,function(){}))}},e.js_watch_all=function(){if(n.watchers.length!==e.members){var i=_.pluck(e.members,"uid");wt.data.watch_batch(r,kzi.constant.xtype.task,n.tid,i,function(){n.watchers=e.members}),_.each(e.members,function(e){e.is_watch=1})}t.close()},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e,members:e.members}}}}).open()},e.js_show_attendee=function(t,n){e.permission===kzi.constant.permission.ok&&i.project.info.curr_role!==kzi.constant.role.guest&&s.popbox({target:t,templateUrl:"/ycjs/tpl/project/event/pop_event_member.html",controller:["$scope","popbox","pop_data",function(e,t,a){e.popbox=t,e.member=n,e.js_close=function(){t.close()},e.js_remove_attendee=function(){e.removing_attendee!==!0&&(n.assigned=!0,e.removing_attendee=!0,wt.bus.member.set_event_attendees_toggle(r,a.scope.event,n,function(){n.assigned=!1,i.$broadcast(kzi.constant.event_names.on_event_update,a.scope.event),t.close()},null,function(){e.removing_attendee=!1,n.setting_toggle_member=!1}))}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_watcher=function(t,n){e.permission===kzi.constant.permission.ok&&s.popbox({target:t,templateUrl:"/ycjs/tpl/project/task/pop_task_watcher.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.member=n,e.js_close=function(){t.close()},e.js_unwatch_member=function(){var e=_.findWhere(i.scope.task.watchers,{uid:n.uid});e&&(i.scope.task.watchers=_.reject(i.scope.task.watchers,function(e){return e.uid==n.uid})),n.is_watch=0,wt.data.unwatch(r,"tasks",i.scope.task.tid,n.uid,function(){}),t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_attach=function(t,n){s.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_attach.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},e.event=n,e.prj_files_loaded=!1,i.load_files(r,"",function(t){e.prj_files_loaded=!0;var n=_.where(t.files,{folder_id:""});e.files=n}),e.js_attach=function(t){if(1==t.type)e.step=1,e.prj_files_loaded=!1,e.sub_files=[],i.load_files(r,t.fid,function(n){e.prj_files_loaded=!0;var i=_.where(n.files,{folder_id:t.fid});e.sub_files=i});else{_.isEmpty(n.files)&&(n.files=[]);var a=_.findWhere(n.files,{fid:t.fid});a||(n.files.push(t),wt.data.file.attach(r,kzi.constant.xtype.event,n.event_id,t.fid,function(){}))}}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_trigger_upload=function(e){$(e.target).parents(".btn-group").eq(0).find("input[type=file]").click()},e.$watch("event",function(t){t&&!_.isEmpty(t)&&(e.file_upload_option={url:[kzi.config.wtbox(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"event",pid:t.pid,event_id:t.event_id}},e.dragfile_option={upload_option:e.file_upload_option},e.global_fileupload_queue=function(){return i.upload_queue.get_event(t.pid,t.event_id)})}),e.$on(kzi.constant.event_names.on_file_add,function(t,n){n&&"event"===n.type&&e.event.event_id===n.file.formData.event_id&&(_.isArray(e.event.files)?e.event.files.push(n.file):e.event.files=[n.file])}),e.js_goto_file=function(e,t){var a=n.pid;_.isEmpty(a)?i.locator.to_file(e,t,!0):i.locator.to_file(e,t,!1)},e.js_del_attachment=function(t,n){var i=_.findWhere(e.event.files,{fid:n.fid});i&&(e.event.files=_.reject(e.event.files,function(e){return e.fid===n.fid})),wt.data.file.detach(r,kzi.constant.xtype.event,e.event.event_id,n.fid)},e.select_tab_comment=function(){e.tab_active.tab_activity_active=!1,e.tab_active.tab_comment_active=!0},e.select_tab_activity=function(){e.tab_active.tab_activity_active=!0,e.tab_active.tab_comment_active=!1,e.$broadcast(kzi.constant.event_names.reload_item_activities,{xtype:"event",xid:e.event.event_id})},e.js_close=function(){i.locator.show_slide=!1},e.tab_active={},e.select_tab_comment()}])}(),function(){"use strict";var e=angular.module("wt.post_controller",["ui.utils"]);e.controller("entity_post_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox",function(e,t,n,i,a){var s,o;e.token=kzi.get_cookie("sid"),e.post={},e.$on(kzi.constant.event_names.load_entity_post,function(t,i){if(e.upload_enabled=!0,!_.isEmpty(i.pid)&&!_.isEmpty(i.post_id)){s=i.pid,o=i.post_id,e.select_tab_comment(),e.section_loading_done=!1;var a=null;e.post&&e.post.post_id&&(a={post_id:e.post.post_id,is_edit:e.post.is_edit},_.isEmpty(e.post.temp_name)||(a.temp_name=e.post.temp_name),_.isEmpty(e.post.temp_content)||(a.temp_content=e.post.temp_content)),e.post={},n.load_project(s,function(t){e.project=t,1==e.project.info.archived?e.permission=kzi.constant.permission.project_archived:(e.permission=kzi.constant.permission.ok,e.project.info.curr_role!=kzi.constant.role.guest&&r()),wt.data.post.get(s,o,function(t){e.section_loading_done=!0,a&&a.post_id===t.data.post_id&&(t.data.temp_name=a.temp_name,t.data.temp_content=a.temp_content,t.data.is_edit=a.is_edit),e.post=t.data,e.$broadcast(kzi.constant.event_names.load_comments,{pid:s,xid:o,xtype:"posts"}),1==t.data.is_deleted&&(e.permission=kzi.constant.permission.entity_deleted)},function(t){t.code==kzi.statuses.post_error.not_found.code?e.permission=kzi.constant.permission.entity_not_found:wt.data.error(t)})},null)}}),e.$on(kzi.constant.event_names.shortcut_key_to_edit,function(){n.locator.type!==kzi.constant.entity_type.post||_.isEmpty(e.post)||e.js_show_editor(e.post)}),e.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){n.locator.type===kzi.constant.entity_type.post&&(_.isEmpty(e.post)||e.post.is_edit!==!0?n.locator.show_slide===!0&&n.locator.hide_slide():e.js_cancel_editor())}),e.js_show_editor=function(e){e.owner.uid===n.global.me.uid&&(e.is_edit=!0,_.isEmpty(e.temp_name)&&(e.temp_name=e.name),_.isEmpty(e.temp_content)&&(e.temp_content=e.content))},e.js_cancel_editor=function(e){e.is_edit=!1,e.temp_name=null,e.temp_content=null},e.$on(kzi.constant.event_names.on_post_comment,function(t,n){_.isEmpty(n)||n.post_id===e.post.post_id&&e.post.comment_count++}),e.js_update_post=function(t){e.is_setting_content=!0,_.isEmpty(t.temp_name)&&(t.temp_name=t.name),wt.data.post.update(s,t.post_id,t.temp_name,t.temp_content,function(){t.name=t.temp_name,t.content=t.temp_content,t.is_edit=!1},null,function(){e.is_setting_content=!1,n.$broadcast(kzi.constant.event_names.on_post_update,t)})},e.js_trash=function(t,i){a.popbox({target:t,templateUrl:"/ycjs/tpl/project/post/pop_delete_post.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.post=i,e.js_close=function(){t.close()},e.js_del_post=function(){wt.data.post.trash(s,i.post_id,function(){e.js_close(),n.locator.hide_slide(),n.$broadcast(kzi.constant.event_names.on_post_trash,{post_id:i.post_id})})}}],resolve:{pop_data:function(){return{scope:e}}}}).open()};var r=function(){e.watcher_droppable_options={accept:".avatar",hoverClass:"entity-members-drop-hover",drop:function(t,i){var a=$(i.helper.context).attr("member-id");e.$apply(function(){var t=_.findWhere(e.post.watchers,{uid:a});_.isEmpty(t)&&n.load_project_members(s,function(t){var n=_.findWhere(t.members,{uid:a});e.post.watchers.push(n),wt.data.watch(s,"posts",e.post.post_id,a,function(){})})})}}};e.js_show_post_watch_pop=function(t,i){a.popbox({target:t,templateUrl:"/ycjs/tpl/project/post/pop_edit_post_watchers.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.edit_post=i,n.load_project_members(s,function(t){wt.bus.post.set_scope_watcher_members(e,t.members,i.watchers)}),e.js_toggle_member=function(e){wt.bus.post.toggle_watcher_member(e,i,s)},e.js_watch_all=function(){wt.bus.post.watch_all_members(e.members,i,s,function(){},null,function(){e.js_close()})},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_watcher=function(t,n,i){e.permission===kzi.constant.permission.ok&&a.popbox({target:t,templateUrl:"/ycjs/tpl/project/post/pop_watch_member.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.post=i,e.member=n,e.js_unwatch_member=function(t,n){e.is_cancel_ing=!0,wt.data.unwatch(s,kzi.constant.xtype.post,n.post_id,t.uid,function(){n.watchers=_.reject(n.watchers,function(e){return e.uid===t.uid}),e.js_close()},null,function(){e.is_cancel_ing=!1})},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_attach=function(t,i){a.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_attach.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.js_step=function(t){e.step=t},e.js_close=function(){t.close()},e.post=i,e.prj_files_loaded=!1,n.load_files(s,"",function(t){e.prj_files_loaded=!0;var n=_.where(t.files,{folder_id:""});e.files=n}),e.js_attach=function(t){if(1==t.type)e.step=1,e.prj_files_loaded=!1,n.load_files(s,t.fid,function(n){e.prj_files_loaded=!0;var i=_.where(n.files,{folder_id:t.fid});e.sub_files=i});else{_.isEmpty(i.files)&&(i.files=[]);var a=_.findWhere(i.files,{fid:t.fid});a||(i.files.push(t),wt.data.file.attach(s,"posts",o,t.fid,function(){}))}}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_trigger_upload=function(e){$(e.target).parents(".btn-group").eq(0).find("input[type=file]").click()},e.$watch("post",function(t){t&&(e.file_upload_option={url:[kzi.config.wtbox(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"post",pid:t.pid,post_id:t.post_id}},e.dragfile_option={upload_option:e.file_upload_option},e.global_fileupload_queue=function(){return n.upload_queue.get_post(t.pid,t.post_id)})}),e.$on(kzi.constant.event_names.on_file_add,function(t,n){n&&"post"===n.type&&e.post.post_id===n.file.formData.post_id&&(_.isArray(e.post.files)?e.post.files.push(n.file):e.post.files=[n.file])}),e.js_goto_file=function(e,i){var a=t.pid;_.isEmpty(a)?n.locator.to_file(e,i,!0):n.locator.to_file(e,i,!1)},e.js_del_attachment=function(t,n){var i=_.findWhere(e.post.files,{fid:n.fid});i&&(e.post.files=_.reject(e.post.files,function(e){return e.fid==n.fid})),wt.data.file.detach(s,"posts",o,n.fid)},e.select_tab_comment=function(){e.tab_activity_active=!1,e.tab_comment_active=!0},e.select_tab_activity=function(){e.tab_activity_active=!0,e.tab_comment_active=!1,e.$broadcast(kzi.constant.event_names.reload_item_activities,{xtype:"post",xid:e.post.post_id})},e.js_close=function(){n.locator.show_slide=!1}}])}(),function(){"use strict";var e=angular.module("wt.file_controller",["ui.utils"]);e.controller("entity_file_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox",function(e,t,n,i,a){var s,o;e.token=kzi.get_cookie("sid"),e.version_loading_done=!0,e.file={},e.$on(kzi.constant.event_names.load_entity_file,function(t,i){_.isEmpty(i.pid)||_.isEmpty(i.fid)||(e.file={},s=i.pid,o=i.fid,e.select_tab_comment(),e.section_loading_done=!1,e.is_show_version=!1,n.load_file(s,o,function(t,n){e.project=t,e.file=n,n.is_img=-1==kzi.constant.get_file_icon(n)?!0:!1,1===e.project.info.archived?e.permission=kzi.constant.permission.project_archived:1===n.is_deleted?e.permission=kzi.constant.permission.entity_deleted:(e.permission=kzi.constant.permission.ok,e.project.info.curr_role!==kzi.constant.role.guest&&r()),e.$broadcast(kzi.constant.event_names.load_comments,{pid:s,xid:o,xtype:"files"}),wt.data.file.get_target(s,o,function(t){e.file.link_count=0,_.isEmpty(t.data.tasks)||(e.file.link_count=t.data.tasks.length),_.isEmpty(t.data.posts)||(e.file.link_count+=t.data.posts.length),e.file.tasks=t.data.tasks,e.file.posts=t.data.posts},null,function(){e.section_loading_done=!0}),wt.data.file.get_versions(s,o,function(t){_.each(t.data,function(e){e.icon=kzi.helper.build_file_icon(e),e.fid=o,e.pid=s}),t.data.reverse(),e.versions=t.data})},function(t){e.section_loading_done=!0,t.code===kzi.statuses.file_error.not_found.code?e.permission=kzi.constant.permission.entity_not_found:wt.data.error(t)}))}),e.$watch("file",function(t){t&&(e.file_upload_new_option={previewMaxWidth:540,previewMaxHeight:400,url:[kzi.config.wtbox(),"?pid="+t.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"file",pid:t.pid,fid:t.fid}},e.dragfile_option={upload_option:e.file_upload_new_option},e.global_fileupload_queue=function(){return n.upload_queue.get_file(t.pid,t.fid)})}),e.$on(kzi.constant.event_names.on_file_add,function(t,n){n&&"file"===n.type&&e.file.fid===n.file.formData.fid&&(e.file.icon=n.file.icon,e.file.path=n.file.path,e.file.size=n.file.size,e.file.update_date=n.file.update_date,e.file.update_user=n.file.update_user,e.file.dt=(new Date).getTime())}),e.js_watch_file=function(t,i){a.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_watch_file.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.file=i,n.load_project_members(s,function(t){var n=[];_.each(t.members,function(e){if(1===e.status){var t=_.findWhere(i.watchers,{uid:e.uid});e.is_watch=t?1:0,n.push(e)}}),e.members=n}),e.js_toggle_watch=function(e){if(e.is_watch){var t=_.findWhere(i.watchers,{uid:e.uid});t&&(i.watchers=_.reject(i.watchers,function(t){return t.uid===e.uid})),e.is_watch=0,wt.data.unwatch(s,kzi.constant.xtype.file,i.fid,e.uid,function(){})}else{var t=_.findWhere(i.watchers,{uid:e.uid});t||(i.watchers.push(e),e.is_watch=1,wt.data.watch(s,kzi.constant.xtype.file,i.fid,e.uid,function(){}))}},e.js_watch_all=function(){if(i.watchers.length!==e.members){var n=_.pluck(e.members,"uid");wt.data.watch_batch(s,kzi.constant.xtype.file,i.fid,n,function(){i.watchers=e.members}),_.each(e.members,function(e){e.is_watch=1})}t.close()},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_watcher=function(t,n){e.permission===kzi.constant.permission.ok&&a.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_file_watcher.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.member=n,e.js_close=function(){t.close()},e.js_unwatch_member=function(){var e=_.findWhere(i.scope.file.watchers,{uid:n.uid});e&&(i.scope.file.watchers=_.reject(i.scope.file.watchers,function(e){return e.uid===n.uid})),n.is_watch=0,wt.data.unwatch(s,"files",i.scope.file.fid,n.uid,function(){}),t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()};var r=function(){e.watcher_droppable_options={accept:".avatar",hoverClass:"entity-members-drop-hover",drop:function(t,i){var a=$(i.helper.context).attr("member-id");e.$apply(function(){var t=_.findWhere(e.file.watchers,{uid:a});_.isEmpty(t)&&n.load_project_members(s,function(t){var n=_.findWhere(t.members,{uid:a});e.file.watchers.push(n),wt.data.watch(s,"files",e.file.fid,a,function(){})})})}}};e.js_move=function(t,i){a.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_move_file.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.file=i,e.js_close=function(){t.close()},n.load_files(s,"",function(){var t=_.where(n.project.files,{type:1});e.folders=t,i.folder_id&&(e.folders.unshift({fid:"",name:"æ ¹ç®å½?"}),e.folders=_.reject(e.folders,function(e){return e.fid===i.folder_id})),e.folders_loading_done=!0}),e.js_move_to=function(a){_.each(e.folders,function(e){e.selected=0}),a&&wt.data.file.move(s,o,i.folder_id,a.fid,function(){a.selected=1,i.folder_id=a.fid,i.folder_name=a.name,t.close(),n.$broadcast(kzi.constant.event_names.on_file_move,i)})}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_trash=function(t,i){a.popbox({target:t,templateUrl:"/ycjs/tpl/project/file/pop_delete_file.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.file=i,e.js_close=function(){t.close()},e.js_del_file=function(){e.is_deleting||(e.is_deleting=!0,wt.data.file.trash(s,o,function(){n.refresh_cache.file.del(o),t.close(),n.locator.hide_slide(),n.$broadcast(kzi.constant.event_names.on_file_trash,{fid:o})},null,function(){e.is_deleting=!1}))}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.$on(kzi.constant.event_names.shortcut_key_to_edit,function(){n.locator.type!==kzi.constant.entity_type.file||_.isEmpty(e.file)||e.js_show_editor(e.file)}),e.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){n.locator.type===kzi.constant.entity_type.file&&(_.isEmpty(e.file)||e.file.is_edit!==!0?n.locator.show_slide===!0&&n.locator.hide_slide():e.js_cancel_editor(e.file))
}),e.js_show_editor=function(t){e.permission===kzi.constant.permission.ok&&n.project.info.curr_role!==kzi.constant.role.guest&&(t.is_edit=!0,_.isEmpty(t.temp_name)&&(t.temp_name=t.name),_.isEmpty(t.temp_desc)&&(t.temp_desc=t.desc))},e.js_cancel_editor=function(e){e.is_edit=!1,e.temp_name=null,e.temp_desc=null},e.js_set_update=function(e,t){return t.is_edit=!1,_.isEmpty(t.temp_name)?(t.temp_name=t.name,void 0):(n.global.title=t.name,wt.data.file.update(s,o,t.temp_name,t.temp_desc,function(){t.name=t.temp_name,t.desc=t.temp_desc,t.temp_name=null,t.temp_desc=null,$(e.target).button("reset")}),void 0)},e.js_goto_task=function(e,i){var a=t.pid;_.isEmpty(a)?n.locator.to_task(e,i,!0):n.locator.to_task(e,i,!1)},e.js_goto_post=function(e,i){var a=t.pid;_.isEmpty(a)?n.locator.to_post(e,i,!0):n.locator.to_post(e,i,!1)},e.select_tab_comment=function(){e.tab_activity_active=!1,e.tab_comment_active=!0},e.select_tab_activity=function(){e.tab_activity_active=!0,e.tab_comment_active=!1,e.$broadcast(kzi.constant.event_names.reload_item_activities,{xtype:"file",xid:e.file.fid})},e.js_close=function(){n.locator.show_slide=!1}}])}(),function(){"use strict";var e=angular.module("wt.page_controller",["ui.utils"]);e.controller("entity_page_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox",function(e,t,n,i,a){var s,o;e.token=kzi.get_cookie("sid"),e.$on(kzi.constant.event_names.on_slide_hide,function(){e.page={}}),e.page={},e.$on(kzi.constant.event_names.load_entity_page,function(t,i){_.isEmpty(i.pid)||_.isEmpty(i.page_id)||(s=i.pid,o=i.page_id,e.select_tab_comment(),e.section_loading_done=!1,n.load_project(s,function(t){e.project=t,e.permission=e.project.info.archived===kzi.constant.archived.yes?kzi.constant.permission.project_archived:kzi.constant.permission.ok,wt.data.page.get(s,o,function(t){e.page=t.data,e.section_loading_done=!0,t.data.is_deleted===kzi.constant.trash.yes?e.permission=kzi.constant.permission.entity_deleted:e.project.info.curr_role!=kzi.constant.role.guest&&e.set_watcher_droppable_options(),e.$broadcast(kzi.constant.event_names.load_comments,{pid:s,xid:o,xtype:"pages"})},function(t){n.global.loading_done=!0,t.code===kzi.statuses.page_error.not_found.code?e.permission=kzi.constant.permission.entity_not_found:wt.data.error(t)})},null))}),e.js_show_watcher=function(t,n){if(e.permission===kzi.constant.permission.ok){var i=e.page;a.popbox({target:t,templateUrl:"/ycjs/tpl/project/common/pop_watch_member.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.page=i,e.member=n,e.js_unwatch_member=function(t){e.is_cancel_ing=!0,wt.data.unwatch(s,kzi.constant.xtype.page,i.page_id,t.uid,function(){e.page.watchers=_.reject(i.watchers,function(e){return e.uid===t.uid}),e.js_close()},null,function(){e.is_cancel_ing=!1})},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()}},e.js_show_page_watch_pop=function(t){var i=e.page;a.popbox({target:t,templateUrl:"/ycjs/tpl/project/common/pop_edit_watchers.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.xEntity=i,n.load_project_members(s,function(t){_.isEmpty(e.members)&&(e.members=wt.bus.watch.get_scope_watcher_members(t.members,i.watchers))}),e.js_toggle_member=function(e){wt.bus.page.toggle_watcher_member(e,i,s)},e.js_watch_all=function(){wt.bus.page.watch_all_members(e.members,i,s,function(){},null,function(){e.js_close()})},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.set_watcher_droppable_options=function(){e.watcher_droppable_options={accept:".avatar",hoverClass:"entity-members-drop-hover",drop:function(t,i){var a=$(i.helper.context).attr("member-id");e.$apply(function(){var t=_.findWhere(e.page.watchers,{uid:a});_.isEmpty(t)&&n.load_project_members(s,function(t){var n=_.findWhere(t.members,{uid:a});e.page.watchers.push(n),wt.data.watch(s,kzi.constant.xtype.page,e.page.page_id,a,function(){})})})}}},e.js_show_trash=function(t){var n=e.page;a.popbox({target:t,templateUrl:"/ycjs/tpl/project/page/pop_delete_page.html",controller:["$scope","popbox","pop_data",function(e,t){e.popbox=t,e.js_close=function(){t.close()},e.js_delete=function(){wt.data.page.trash(s,n.page_id,function(){e.js_close()}),i.path("/project/"+s+"/page")}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.$on(kzi.constant.event_names.shortcut_key_to_edit,function(){if(e.permission===kzi.constant.permission.ok&&n.project.info.curr_role!==kzi.constant.role.guest&&n.locator.type===kzi.constant.entity_type.page){var a="/project/"+s+"/page/"+o+"/edit";i.path(a)}}),e.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){n.locator.show_slide===!0&&n.locator.hide_slide()}),e.js_goto_page=function(e,i){var a=t.pid;_.isEmpty(a)?n.locator.to_page(e,i,!0):n.locator.to_page(e,i,!1)},e.select_tab_comment=function(){e.tab_activity_active=!1,e.tab_comment_active=!0},e.select_tab_activity=function(){e.tab_activity_active=!0,e.tab_comment_active=!1,e.$broadcast(kzi.constant.event_names.reload_item_activities,{xtype:"page",xid:e.page.page_id})},e.js_close=function(){n.locator.show_slide=!1}}])}(),function(){"use strict";var e=angular.module("wt.blog_controller",["ui.utils"]);e.controller("blog_admin_ctrl",["$scope","$routeParams","$rootScope","$location","$popbox","$timeout","$window",function(e,t,n,i,a,s,o){var r=function(t){e.articles=[],wt.data.blog.get_articles(t,function(n){_.isEmpty(n.data.articles)||_.each(n.data.articles,function(t){var n=_.findWhere(e.categories,{category_id:t.category_id});t.category_permalink=n.permalink}),e.articles=n.data.articles,(1===t||"1"===t)&&(e.totalCount=n.data.total_count,e.article_pagination_opts={totalCount:n.data.total_count,opts:{callback:function(e){r(e+1)}}})})};wt.data.blog.get_categories(function(t){e.categories=t.data,r(1)},function(e){e.code===kzi.statuses.error.permission_deny.code&&(o.location.href="/")});var l=function(t,n){a.popbox({target:t,templateUrl:"/ycjs/tpl/blog/pop_add_edit_category.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.category=_.isEmpty(n.category_id)?n:angular.copy(n),e.js_save_category=function(){e.is_saving_category!==!0&&(e.is_saving_category=!0,_.isEmpty(e.category.category_id)?wt.data.blog.add_category(e.category.name,e.category.pos,e.category.permalink,function(e){i.scope.categories.push(e.data),t.close()},null,function(){e.is_saving_category=!1}):wt.data.blog.update_category(e.category.category_id,e.category.name,e.category.pos,e.category.permalink,function(){n.name=e.category.name,n.pos=e.category.pos,n.permalink=e.category.permalink,t.close()},null,function(){e.is_saving_category=!1}))},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()};e.js_pop_edit_category=function(e,t){l(e,t)},e.js_pop_add_category=function(e){l(e,{})},e.js_pop_delete_category=function(t,n){a.popbox({target:t,templateUrl:"/ycjs/tpl/blog/pop_delete_category.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.category=n,e.js_delete_category=function(){e.is_deleting_category!==!0&&(e.is_deleting_category=!0,wt.data.blog.delete_category(e.category.category_id,function(){i.scope.categories=_.reject(i.scope.categories,function(t){return t.category_id==e.category.category_id}),t.close()},null,function(){e.is_deleting_category=!1}))},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()},e.js_show_add_article=function(){e.article={},e.show_article=!0},e.js_cancel_edit_article=function(){e.show_article=!1},e.js_show_edit_article=function(t){wt.data.blog.get_article(t.article_id,function(t){e.article=t.data,e.article.is_edit=!0,e.show_article=!0})},e.js_save_article=function(){var n=e.article;e.is_saving_article=!0,n.is_edit?wt.data.blog.update_article(n.article_id,n.title,n.summary,n.content,n.permalink,n.category_id,function(){var i=_.findWhere(e.articles,{article_id:n.article_id});i&&(i.title=n.title),e.show_article=!1},null,function(){e.is_saving_article=!1}):wt.data.blog.add_article(n.title,n.summary,n.content,n.permalink,n.category_id,function(t){e.articles.push(t.data),e.show_article=!1},null,function(){e.is_saving_article=!1})},e.js_pop_delete_article=function(t,n){a.popbox({target:t,templateUrl:"/ycjs/tpl/blog/pop_delete_article.html",controller:["$scope","popbox","pop_data",function(e,t,i){e.popbox=t,e.article=n,e.js_delete_article=function(){e.is_deleting_article!==!0&&(e.is_deleting_article=!0,wt.data.blog.delete_article(e.article.article_id,function(){i.scope.articles=_.reject(i.scope.articles,function(t){return t.article_id==e.article.article_id}),t.close()},null,function(){e.is_deleting_article=!1}))},e.js_close=function(){t.close()}}],resolve:{pop_data:function(){return{scope:e}}}}).open()}}])}();var initInnerApp=function(){"use strict";var e=window.wt||{};e.version="2.0";var t=["ngRoute","ngSanitize","wt.directive.tpls","wt.header_controller","wt.index_controller","wt.user_controller","wt.activity_controller","wt.project_controller","wt.team_controller","wt.team_admin_controller","wt.calendar_controller","wt.comment_controller","wt.fileupload_controller","wt.dashboard_controller","wt.browse_controller","wt.account_controller","wt.home_controller","wt.task_controller","wt.event_controller","wt.post_controller","wt.file_controller","wt.page_controller","wt.service","wt.bus","wt.directive","wt.directive.avatar","wt.directive.task","wt.directive.badges","wt.directive.markdown","wt.directive.notice","wt.directive.feed","wt.directive.uploadfile","wt.directive.activity","wt.directive.dragfile","wt.directive.event","wt.filter","ui.bootstrap.popbox","wt.analytics"];e.ng=angular.module("wt",t).config(["$routeProvider","$locationProvider",function(e,t){e.when("/guide",{templateUrl:"/ycjs/tpl/home/support/guide.html",controller:"home_guide_ctrl",header_menu:"help",need_load:!1,is_outter:!0}).when("/guide/:column",{templateUrl:"/ycjs/tpl/home/support/guide.html",controller:"home_guide_ctrl",header_menu:"help",need_load:!1,is_outter:!0}).when("/guide/:column/:permalink",{templateUrl:"/ycjs/tpl/home/support/guide.html",controller:"home_guide_ctrl",header_menu:"help",need_load:!1,is_outter:!0}).when("/nonprofit/apply",{templateUrl:"/ycjs/tpl/team/free_apply.html",controller:"free_apply_ctrl",header_menu:"",need_load:!0}).when("/share",{templateUrl:"/ycjs/tpl/user/share.html",controller:"home_share_ctrl",header_menu:"",need_load:!1}).when("/help",{templateUrl:"/ycjs/tpl/user/help.html",controller:"home_help_ctrl",header_menu:"",need_load:!1}).when("/project/add",{templateUrl:"/ycjs/tpl/project/project_add.html",controller:"project_add_ctrl",header_menu:"dashboard",need_load:!0}).when("/project/:pid",{templateUrl:"/ycjs/tpl/project/task/project_tasks.html",controller:"project_ctrl",header_menu:"project",project_iconmenu:"task",need_load:!0}).when("/project/:pid/notfound",{templateUrl:"/ycjs/tpl/project/prj_not_found.html",controller:"project_notfound_ctrl",header_menu:"dashboard",need_load:!1}).when("/project/:pid/task",{templateUrl:"/ycjs/tpl/project/task/project_tasks.html",controller:"project_ctrl",header_menu:"project",project_iconmenu:"task",need_load:!0}).when("/project/:pid/post",{templateUrl:"/ycjs/tpl/project/post/project_posts.html",controller:"project_post_ctrl",header_menu:"project",project_iconmenu:"post",need_load:!0}).when("/project/:pid/chat",{templateUrl:"/ycjs/tpl/project/chat/project_chats.html",controller:"project_chats_ctrl",header_menu:"project",project_iconmenu:"chat",need_load:!0}).when("/project/:pid/file",{templateUrl:"/ycjs/tpl/project/file/project_files.html",controller:"project_file_list_ctrl",header_menu:"project",project_iconmenu:"file",need_load:!0}).when("/project/:pid/folder/:folder_id",{templateUrl:"/ycjs/tpl/project/file/project_files.html",controller:"project_file_list_ctrl",header_menu:"project",project_iconmenu:"file",need_load:!0}).when("/project/:pid/page",{templateUrl:"/ycjs/tpl/project/page/project_pages.html",controller:"project_page_ctrl",header_menu:"project",project_iconmenu:"page",need_load:!0}).when("/project/:pid/page/add",{templateUrl:"/ycjs/tpl/project/page/add_or_edit_page.html",controller:"project_page_add_edit_ctrl",header_menu:"project",project_iconmenu:"page",need_load:!0}).when("/project/:pid/page/add/:parent_page_id",{templateUrl:"/ycjs/tpl/project/page/add_or_edit_page.html",controller:"project_page_add_edit_ctrl",header_menu:"project",project_iconmenu:"page",need_load:!0}).when("/project/:pid/page/:page_id/edit",{templateUrl:"/ycjs/tpl/project/page/add_or_edit_page.html",controller:"project_page_add_edit_ctrl",header_menu:"project",project_iconmenu:"page",need_load:!0}).when("/project/:pid/event",{templateUrl:"/ycjs/tpl/project/event/project_events.html",controller:"project_event_ctrl",header_menu:"project",project_iconmenu:"event",need_load:!0}).when("/project/:pid/graph",{templateUrl:"/ycjs/tpl/project/graph/project_graphs.html",controller:"project_graph_ctrl",header_menu:"project",project_iconmenu:"graph",need_load:!0}).when("/project/:pid/activity",{templateUrl:"/ycjs/tpl/activity/project_activities.html",controller:"project_activity_ctrl",header_menu:"project",project_iconmenu:"activity",need_load:!0}).when("/project/:pid/trash",{templateUrl:"/ycjs/tpl/project/trash/project_trash.html",controller:"project_trash_ctrl",header_menu:"project",project_iconmenu:"trash",need_load:!0}).when("/project/:pid/setting",{templateUrl:"/ycjs/tpl/project/setting/project_setting.html",controller:"project_setting_ctrl",header_menu:"project",project_iconmenu:"setting",need_load:!0}).when("/project/:pid/archive",{templateUrl:"/ycjs/tpl/project/task/project_archive_tasks.html",controller:"project_archive_ctrl",header_menu:"project",project_iconmenu:"task",need_load:!0}).when("/projects/archive",{templateUrl:"/ycjs/tpl/dashboard/projects_archive.html",controller:"projects_archive_ctrl",header_menu:"project",project_iconmenu:"task",need_load:!0}).when("/projects",{templateUrl:"/ycjs/tpl/dashboard/projects.html",controller:"projects_ctrl",header_menu:"projects",need_load:!0}).when("/dashboard",{templateUrl:"/ycjs/tpl/dashboard/dashboard.html",controller:"dashboard_ctrl",header_menu:"dashboard",need_load:!0}).when("/feed",{templateUrl:"/ycjs/tpl/dashboard/feed.html",controller:"feed_all_ctrl",need_load:!0}).when("/calendar",{templateUrl:"/ycjs/tpl/dashboard/calendar.html",controller:"calendar_ctrl",header_menu:"calendar",need_load:!0}).when("/browse",{templateUrl:"/ycjs/tpl/browse/browse_tasks.html",controller:"browse_task_ctrl",header_menu:"browse",need_load:!0}).when("/browse/files",{templateUrl:"/ycjs/tpl/browse/browse_files.html",controller:"browse_file_ctrl",header_menu:"browse",need_load:!0}).when("/browse/posts",{templateUrl:"/ycjs/tpl/browse/browse_posts.html",controller:"browse_post_ctrl",header_menu:"browse",need_load:!0}).when("/browse/pages",{templateUrl:"/ycjs/tpl/browse/browse_pages.html",controller:"browse_page_ctrl",header_menu:"browse",need_load:!0}).when("/tasks",{templateUrl:"/ycjs/tpl/dashboard/tasks.html",controller:"tasks_ctrl",header_menu:"task",need_load:!0}).when("/tasks/expired",{templateUrl:"/ycjs/tpl/dashboard/tasks_expired.html",controller:"tasks_expired_ctrl",header_menu:"task",need_load:!0}).when("/tasks/completed",{templateUrl:"/ycjs/tpl/dashboard/tasks_completed.html",controller:"tasks_completed_ctrl",header_menu:"task",need_load:!0}).when("/inbox",{templateUrl:"/ycjs/tpl/dashboard/inbox.html",controller:"inbox_ctrl",header_menu:"inbox",need_load:!0}).when("/search",{templateUrl:"/ycjs/tpl/dashboard/search_result.html",controller:"search_result_ctrl",header_menu:"result",need_load:!0}).when("/teams/add",{templateUrl:"/ycjs/tpl/team/team_add.html",controller:"team_add_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id",{templateUrl:"/ycjs/tpl/team/team.html",controller:"team_ctrl",header_menu:"team",need_load:!0}).when("/teams/:team_id/invite",{templateUrl:"/ycjs/tpl/team/team_member_invite.html",controller:"team_member_invite_ctrl",header_menu:"dashboard",need_load:!0}).when("/teams/:team_id/setting",{templateUrl:"/ycjs/tpl/team/team_setting.html",controller:"team_setting_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin",{templateUrl:"/ycjs/tpl/team/team_admin_summary.html",controller:"team_admin_summary_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin/basic",{templateUrl:"/ycjs/tpl/team/team_admin_basic.html",controller:"team_admin_basic_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin/summary",{templateUrl:"/ycjs/tpl/team/team_admin_summary.html",controller:"team_admin_summary_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin/members",{templateUrl:"/ycjs/tpl/team/team_admin_members.html",controller:"team_admin_members_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin/quota",{templateUrl:"/ycjs/tpl/team/team_admin_change_quota.html",controller:"team_admin_change_quota_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin/projects",{templateUrl:"/ycjs/tpl/team/team_admin_projects.html",controller:"team_admin_projects_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin/security",{templateUrl:"/ycjs/tpl/team/team_admin_security.html",controller:"team_admin_security_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin/export",{templateUrl:"/ycjs/tpl/team/team_admin_export.html",controller:"team_admin_export_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/admin/consultant",{templateUrl:"/ycjs/tpl/team/team_admin_consultant.html",controller:"team_admin_consultant_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/upgrade",{templateUrl:"/ycjs/tpl/team/team_admin_upgrade.html",controller:"team_admin_upgrade_ctrl",header_menu:"",need_load:!0}).when("/teams/:team_id/degrade",{templateUrl:"/ycjs/tpl/team/team_admin_degrade.html",controller:"team_admin_degrade_ctrl",header_menu:"",need_load:!0}).when("/account/settings",{templateUrl:"/ycjs/tpl/account/account_settings.html",controller:"account_settings_ctrl",header_menu:"",need_load:!0}).when("/account/twofactor",{templateUrl:"/ycjs/tpl/account/account_twofactor.html",controller:"account_twofactor_ctrl",header_menu:"",need_load:!0}).when("/account/message",{templateUrl:"/ycjs/tpl/account/account_message.html",controller:"account_message_ctrl",header_menu:"",need_load:!0}).when("/account/projects",{templateUrl:"/ycjs/tpl/account/account_projects.html",controller:"account_projects_ctrl",header_menu:"",need_load:!0}).when("/account/teams",{templateUrl:"/ycjs/tpl/account/account_teams.html",controller:"account_teams_ctrl",header_menu:"",need_load:!0}).when("/account/security",{templateUrl:"/ycjs/tpl/account/account_security.html",controller:"account_security_ctrl",header_menu:"",need_load:!0}).when("/account/apps",{templateUrl:"/ycjs/tpl/account/account_apps.html",controller:"account_apps_ctrl",header_menu:"",need_load:!0}).when("/not_found",{templateUrl:"/ycjs/tpl/404.html",need_load:!1,header_menu:"index",controller:["$rootScope",function(e){e.global.title="404"}],is_outter:!0}).otherwise({redirectTo:"/dashboard"}),t.html5Mode(!0)}]).config(["$httpProvider","fileUploadProvider","$sceDelegateProvider",function(e,t,n){delete e.defaults.headers.common["X-Requested-With"],angular.extend(t.defaults,{pasteZone:null,drapZone:null,disableImageResize:!0,minFileSize:0,maxFileSize:1e8,acceptFileTypes:/(\.|\/)(gif|jpe?g|png|bmp|wmv|doc|docx|pdf|xlsx|xls|ppt|pptx|txt|zip|rar|xml|html|7zip|key|pages|numbers|ipa|apk|xap|cs|java|rb|py|css|js|cpp|c|h|php|cc|hh|vb|mp3|avi|chm|vsd|rp|psd|cvs|ai|json|7z|tar|swf|wim|bat|sh|wab|vba|ost|msi|log|svg|less|md|bin|obj|edx|mmap|thmx|dump|one|pst|vcf|ini|csv|wps|et|dps|pfx)$/i,maxNumberOfFiles:100,autoUpload:!0,messages:{maxNumberOfFiles:"è¶è¿æä»¶æå¤§æ°",acceptFileTypes:"æä»¶æ ¼å¼ä¸æ¯æ?",maxFileSize:"æä»¶å¤ªå¤§",minFileSize:"æä»¶å¤ªå°"}}),n.resourceUrlWhitelist([kzi.config.box_url_regex(),kzi.config.wtbox_url,"self"])}]).run(["$rootScope","$rootElement","$location","$route","rest","data","bus","utility","socket","$routeParams","$dialog","$window","$timeout",function(t,n,i,a,s,o,r,l,c,d,u,p,f){e.rest=s,e.data=o,e.bus=r,e.utility=l;var h=!1,m=null;t.global={config:kzi.config,title:"",me:e.me,is_login:!_.isUndefined(e.me)&&!_.isEmpty(e.me.uid),loading_init:!0,loading_done:!1,header_menu:"index",right_isfold:!0,is_outter:!1,show_msg:!1,project_iconmenu:"task",project_sidebar_view:"member",project_sidebar_foldview:"module",calendar_sidebar_view:"event",calendar_fold:!0,loaded_notice_count:!1,wohoo_show:!1},t.pid="",t.notice_count=0,t.teams=[],t.projects=[],t.project={info:{},members:[],entries:[],tasks:[],files:[],posts:[],pages:[],events:[],feeds:[],currentEntry:null,currentTask:null,entryIndex:0,taskIndex:0},t.locator={hide_slide:function(){t.locator.show_slide=!1,t.locator.show_detail_task_id=null,t.locator.show_detail_post_id=null,t.locator.show_detail_event_id=null,t.locator.show_detail_file_id=null,t.locator.show_detail_page_id=null,t.$broadcast(kzi.constant.event_names.on_slide_hide)},to_project:function(e){t.locator.hide_slide(),i.path("/project/"+e+"/task")},to_task:function(e,n,i){t.locator.show_detail_task_id=n,t.locator.type="task",t.locator.show_slide=!0,t.locator.show_prj=i,t.$broadcast(kzi.constant.event_names.load_entity_task,{pid:e,tid:n})},to_event:function(e,n,i){t.locator.type="event",t.locator.show_slide=!0,t.locator.show_detail_event_id=n,t.locator.show_prj=i,t.$broadcast(kzi.constant.event_names.load_entity_event,{pid:e,event_id:n})},to_file:function(e,n,i){t.locator.type="file",t.locator.show_slide=!0,t.locator.show_detail_file_id=n,t.locator.show_prj=i,t.$broadcast(kzi.constant.event_names.load_entity_file,{pid:e,fid:n})},to_post:function(e,n,i){t.locator.type="post",t.locator.show_detail_post_id=n,t.locator.show_slide=!0,t.locator.show_prj=i,t.$broadcast(kzi.constant.event_names.load_entity_post,{pid:e,post_id:n})},to_page:function(e,n,i){t.locator.type="page",t.locator.show_slide=!0,t.locator.show_detail_page_id=n,t.locator.show_prj=i,t.$broadcast(kzi.constant.event_names.load_entity_page,{pid:e,page_id:n})},to_entity:function(e,n,i){switch(n.etype){case kzi.constant.entity_type.task:t.locator.to_task(e,n.eid,i);break;case kzi.constant.entity_type.file:t.locator.to_file(e,n.eid,i);break;case kzi.constant.entity_type.post:t.locator.to_post(e,n.eid,i);break;case kzi.constant.entity_type.page:t.locator.to_page(e,n.eid,i);break;case kzi.constant.entity_type.event:t.locator.to_event(e,n.eid,i);break;default:}}},t.upload_queue={get_queue:function(){if("object"==typeof $("#global_file_upload").scope().queue){var e=$("#global_file_upload").scope().queue;return e.length}},_get_queue:function(e,t,n){var i=[];try{if("object"==typeof $("#global_file_upload").scope().queue){var a=$("#global_file_upload").scope().queue;i=_.filter(a,function(i){var a=!0;if(_.isUndefined(i.formData))return a=!1;if(!_.isEmpty(i.ext))return a=!1;if(i.formData.type!==t)a=!1;else if(i.formData.pid!==e)a=!1;else switch(t){case"task":i.formData.tid!==n.tid&&(a=!1);break;case"post":i.formData.post_id!==n.post_id&&(a=!1);break;case"file":i.formData.fid!==n.fid&&(a=!1);break;case"project":i.formData.folder_id!==n.folder_id&&(a=!1)}return a})}return i}catch(s){return i}},get_chat:function(e){return this._get_queue(e,"chat")},get_task:function(e,t){return this._get_queue(e,"task",{tid:t})},get_event:function(e,t){return this._get_queue(e,"event",{event_id:t})},get_post:function(e,t){return this._get_queue(e,"post",{post_id:t})},get_file:function(e,t){var n=this._get_queue(e,"file",{fid:t});return n.length>0&&(n=[n[n.length-1]]),n},get_project:function(e,t){return this._get_queue(e,"project",{folder_id:t})}},t.returnToSignin=function(){t.global.is_login=!1,t.locator.hide_slide(),p.location.href="/signin"},t.login=function(n,a,s,o,r,l){e.data.signin(n,a,function(n){t.global.me=n.data.session,t.global.is_login=!0,e.socket.emit("online"),t.clear_project(),t.teams=[],t.projects=[],t.global.loaded_notice_count=!1,null!==s&&i.path(s),angular.isFunction(o)&&o(n)},r,l)},t.logout=function(n){delete t.global.me,t.global.is_login=!1,e.data.signout(function(){e.socket.emit("offline"),n||(p.location.href="/")})},t.auth=function(n,i){e.data.auth(function(e){200===e.code?(t.global.me=e.data.session,t.global.me.role="1",t.global.is_login=!0,null!==n&&"function"==typeof n&&n()):(delete t.global.me,t.global.is_login=!1,null!==i&&"function"==typeof i&&i())})},t.load_teams=function(n,i,a){var s=t.teams;s&&s.length>0?(angular.isFunction(n)&&n(s),angular.isFunction(a)&&a()):e.data.team.get_list(function(e){t.teams=e.data,angular.isFunction(n)&&n(e.data)},i,a)},t.load_team=function(t,n,i){e.data.team.get(t,function(e){angular.isFunction(n)&&n(e.data)},i)},t.load_team_from_cache=function(e,n){var i=null;t.teams&&t.teams.length>0&&(i=_.findWhere(t.teams,{team_id:e})),angular.isFunction(n)&&n(i)},t.load_projects=function(n,i,a){var s=t.projects;_.isEmpty(s)?e.data.project.get_all("active",function(e){t.projects=e.data,t.sort_projects(),angular.isFunction(n)&&n(t.projects),t.$broadcast(kzi.constant.event_names.load_teams_projects_sucess),t.global.loading_init=!1},i,a):(angular.isFunction(n)&&n(s),angular.isFunction(a)&&a())},t.reload_projects=function(n,i,a){e.data.project.get_all("active",function(e){t.projects=e.data,t.sort_projects(),angular.isFunction(n)&&n(t.projects)},i,a)},t.sort_projects=function(){t.projects=_.sortBy(t.projects,function(e){return e.pos})},t.load_project=function(n,i,a,s){var o=t.project;o&&o.info&&o.info.pid==n&&o.members&&o.members.length>0?(i(o),_.isFunction(s)&&s()):(t.project.members=[],t.project.entries=[],t.project.tasks=[],t.project.files=[],t.project.posts=[],t.project.pages=[],t.project.events=[],t.project.feeds=[],t.project.init_chat=null,t.project.currentEntry=null,t.project.currentTask=null,t.project.entryIndex=0,t.project.taskIndex=0,e.data.project.get(n,function(e){t.project.info=e.data.info,t.project.members=e.data.members,i(t.project)},a,s))},t.load_project_from_cache=function(e,n){var i=null;t.projects&&t.projects.length>0&&(i=_.findWhere(t.projects,{pid:e})),angular.isFunction(n)&&n(i)},t.load_tasks=function(n,i,a,s){t.load_project(n,function(o){o.entries&&o.entries.length>0?(i(o),_.isFunction(s)&&s()):e.data.entry.get_list(n,function(e){var n=_.sortBy(e.data.entries,function(e){return e.pos}),a=e.data.tasks;t.project.entries=n,t.project.tasks=a,i(o)},a,s)},function(e){_.isFunction(a)&&a(e),_.isFunction(s)&&s(e)})},t.load_task=function(n,i,a,s){t.load_project(n,function(t){if(t.tasks&&t.tasks.length>0){var o=_.findWhere(t.tasks,{tid:i});o?a(t,o):e.data.task.get(n,i,function(e){a(t,e.data)},s)}else e.data.task.get(n,i,function(e){a(t,e.data)},s)},s)},t.reload_entries=function(n){e.data.entry.get_list(n,function(e){var n=_.sortBy(e.data.entries,function(e){return e.pos}),i=e.data.tasks;t.project.entries=n,t.project.tasks=i,t.$broadcast("socket_message_entry_list",null)})},t.sort_entries=function(){var e=t.project.entries;null!=e&&(e=_.sortBy(e,function(e){return e.pos}),t.project.entries=e)},t.load_file_db=function(n,i,a,s,o){e.data.file.get_list(n,i,function(e){t.folder={folder_id:e.data.folder.folder_id,name:e.data.folder.name},_.each(e.data.files,function(e){e.icon=kzi.helper.build_file_icon(e);var n=_.findWhere(t.project.files,{fid:e.fid});n||t.project.files.push(e)}),a(t.project)},s,o)},t.load_files=function(e,n,i,a,s){t.load_project(e,function(o){if(o.files.length>0){var r=_.findWhere(o.files,{folder_id:n});r?(i(o),_.isFunction(s)&&s()):t.load_file_db(e,n,i,a,s)}else t.project.files=[],t.load_file_db(e,n,i,a,s)},a)},t.load_file=function(n,i,a,s){t.load_project(n,function(o){if(o.files&&o.files.length>0){var r=_.findWhere(t.project.files,{fid:i});r?a(o,r):e.data.file.get(n,i,function(e){var t=e.data;t.icon=kzi.helper.build_file_icon(t),a(o,t)},s)}else e.data.file.get(n,i,function(e){var t=e.data;t.icon=kzi.helper.build_file_icon(t),a(o,t)},s)},s)},t.load_project_feeds=function(n,i,a,s){_.isEmpty(t.project.info)||(t.project.info.pid!==n||_.isEmpty(t.project.feeds)?e.data.activity.get_prj_feed(n,function(e){t.project.feeds=e.data,_.isFunction(i)&&i(t.project.feeds)},a,s):(_.isFunction(i)&&i(t.project.feeds),_.isFunction(s)&&s()))},t.load_project_init_chat=function(n,i,a,s){_.isEmpty(t.project)||(t.project.info&&t.project.info.pid===n&&!_.isEmpty(t.project.init_chat)?(_.isFunction(i)&&i(t.project.init_chat),_.isFunction(s)&&s()):e.data.project.get_chat_list(n,1,5,function(e){t.project.init_chat=e.data,_.isFunction(i)&&i(t.project.init_chat)},a,s))},t.clear_project_init_chat=function(){t.project.init_chat=null},t.clear_project_feeds=function(){t.project.feeds=[]},t.clear_project=function(){t.project.info={},t.project.members=[],t.project.entries=[],t.project.tasks=[],t.project.files=[],t.project.posts=[],t.project.pages=[],t.project.events=[],t.project.feeds=[],t.project.init_chat=null,t.project.currentEntry=null,t.project.currentTask=null,t.project.entryIndex=0,t.project.taskIndex=0},t.load_project_members=function(n,i,a){t.load_project(n,function(a){_.isEmpty(a.members)?(t.project.members=[],e.data.project.get_members(n,function(e){t.project.members=e.data,angular.isFunction(i)&&i(t.project)})):angular.isFunction(i)&&i(a)},a)},t.load_team_members=function(t,n,i,a){e.data.team.get_team_members(t,function(e){angular.isFunction(n)&&n(e.data)},i,a)},t.reload_team_members=function(t,n,i,a){e.data.team.get_team_members(t,function(e){angular.isFunction(n)&&n(e.data)},i,a)},t.load_unread_notices=function(n){t.global.loaded_notice_count!==!0&&(t.global.loaded_notice_count=!0,e.data.notice.unread(function(e){t.notice_count=0,_.each(e.data,function(e){t.notice_count+=e.count}),angular.isFunction(n)&&n(t.notice_count)},function(){t.global.loaded_notice_count=!1}))};var g=function(e){var t=_.size(e.todos),n=_.size(_.where(e.todos,{checked:1}));t>0?(e.percentage=parseInt(100*(n/t)),e.status=n+"/"+t):e.percentage=0,e.badges.todo_checked_count=n,e.badges.todo_count=t},v=function(e,t){_.each(e,function(e){e.projects=_.where(t,{team_id:e.team_id})})};t.refresh_cache={team:{dismiss:function(e){t.teams=_.reject(t.teams,function(t){return t.team_id===e}),t.projects=_.reject(t.projects,function(t){return t.team_id===e})},leave:function(e){t.teams=_.reject(t.teams,function(t){return t.team_id===e}),t.projects=_.reject(t.projects,function(t){return t.team_id===e})}},project:{add:function(e){var n=_.findWhere(t.projects,{pid:e.pid});n||t.projects.push(e)},update:function(e,n,i){e==t.project.info.pid&&(t.project.info.name=n,t.project.info.desc=i);var a=_.findWhere(t.projects,{pid:e});a&&(a.name=n,a.desc=i)},set_logo:function(e,n,i){e==t.project.info.pid&&(t.project.info.bg=n,t.project.info.pic=i);var a=_.findWhere(t.projects,{pid:e});a&&(a.bg=n,a.pic=i)},remove:function(e){t.projects&&t.projects.length>0&&(t.projects=_.reject(t.projects,function(t){return t.pid==e}))},add_admin:function(e,n){if(t.projects&&t.projects.length>0){var i=_.findWhere(t.projects,{pid:e});if(i){var a=_.findWhere(i.admins,{uid:n.uid});a||i.admins.push(n)}}},remove_admin:function(e,n){if(t.projects&&t.projects.length>0){var i=_.findWhere(t.projects,{pid:e});i&&(i.admins=_.reject(i.admins,function(e){return e.uid==n.uid}))}}},task:{add:function(e){var n=_.findWhere(t.project.tasks,{tid:e.tid});n||t.project.tasks.push(e)},update_full:function(e){var n=_.findWhere(t.project.tasks,{tid:e.tid});n&&(n.name=e.name,n.desc=e.desc,n.pos=e.pos,n.completed=e.completed,n.is_expire=e.is_expire,n.expire_date=e.expire_date,n.badges=e.badges,n.labels=e.labels,n.members=e.members,n.watchers=e.watchers,n.todos=e.todos)},update:function(e,n,i){var a=_.findWhere(t.project.tasks,{tid:e});a&&(a.name=n,a.desc=i)},trash:function(e){t.project.tasks=_.reject(t.project.tasks,function(t){return t.tid==e})},move:function(e,n,i,a){var s=_.findWhere(t.project.tasks,{tid:e});if(s){s.pos=a,s.entry_id=i;var o=_.findWhere(t.project.entries,{entry_id:i});if(o){_.isEmpty(o.tasks)?(o.tasks=[],o.tasks.push(s)):o.tasks.push(s);var r=_.findWhere(t.project.entries,{entry_id:n});
r&&(r.tasks=_.reject(r.tasks,function(t){return t.tid==e}),r.tasks=_.sortBy(r.tasks,function(e){return e.pos}),o.tasks=_.sortBy(o.tasks,function(e){return e.pos}))}}},complete:function(e,n){var i=_.findWhere(t.project.tasks,{tid:e});i&&(i.completed=n)},set_expire:function(e,n){var i=_.findWhere(t.project.tasks,{tid:e});i&&(i.expire_date=n,i.badges.expire_date=n)},assign:function(e,n){var i=_.findWhere(t.project.tasks,{tid:e});if(i){var a=_.findWhere(i.members,{uid:n.uid});a||(i.members.push(n),n.assigned=1)}},unassign:function(e,n){var i=_.findWhere(t.project.tasks,{tid:e});if(i){var a=_.findWhere(i.members,{uid:n.uid});a&&(i.members=_.reject(i.members,function(e){return e.uid==n.uid})),n.assigned=0}},set_labels:function(e,n){var i=_.findWhere(t.project.tasks,{tid:e});if(i){var a=_.findWhere(i.labels,{name:n.name});a||(i.labels.push(n),n.assigned=1)}},del_labels:function(e,n){var i=_.findWhere(t.project.tasks,{tid:e});if(i){var a=_.findWhere(i.labels,{name:n.name});a&&(i.labels=_.reject(i.labels,function(e){return e.name==n.name})),n.assigned=0}},watch:function(e,n){var i=_.findWhere(t.project.tasks,{tid:e});if(i){var a=_.findWhere(i.watchers,{uid:n.uid});a||(i.watchers.push(n),n.is_watch=1)}},unwatch:function(e,n){var i=_.findWhere(t.project.tasks,{tid:e});if(i){var a=_.findWhere(i.watchers,{uid:n.uid});a&&(i.watchers=_.reject(i.watchers,function(e){return e.uid==n.uid})),n.is_watch=0}},add_todo:function(e,n){var i=_.findWhere(t.project.tasks,{tid:e});if(i){var a=_.findWhere(i.todos,{todo_id:n.todo_id});a||(i.todos.push(n),g(i))}},update_todo:function(e,n,i){var a=_.findWhere(t.project.tasks,{tid:e});if(a){var s=_.findWhere(a.todos,{todo_id:n});s&&(s.name=i)}},del_todo:function(e,n){var i=_.findWhere(t.project.tasks,{tid:e});i&&(i.todos=_.reject(i.todos,function(e){return e.todo_id===n}),g(i))},change_todo_pos:function(e,n,i){var a=_.findWhere(t.project.tasks,{tid:e});if(a){var s=_.findWhere(a.todos,{todo_id:n});s&&(s.pos=i)}},complete_todo:function(e,n,i){var a=_.findWhere(t.project.tasks,{tid:e});if(a){var s=_.findWhere(a.todos,{todo_id:n});s&&(s.checked=i,g(a))}}},entry:{add:function(e){var n=_.findWhere(t.project.entries,{entry_id:e.entry_id});n||t.project.entries.push(e)},move:function(e,n,i,a){var s=_.findWhere(t.project.entries,{entry_id:a});if(s){var o=_.findWhere(t.project.tasks,{tid:e});o.pos=n,i!=a&&(o.entry_id=a)}},del:function(e){var n=_.findWhere(t.project.entries,{entry_id:e});n&&(t.project.entries=_.reject(t.project.entries,function(t){return t.entry_id===e}),t.project.tasks=_.reject(t.project.tasks,function(t){return t.entry_id===e}))}},file:{add:function(e){if(_.isEmpty(t.project.files))t.load_files(e.pid,"",function(){var i=_.findWhere(t.project.files,{fid:e.fid});i||t.project.files.push(e)});else{var n=_.findWhere(t.project.files,{fid:e.fid});n||t.project.files.push(e)}},del:function(e){t.project.files=_.reject(t.project.files,function(t){return t.fid===e})}},user:{avatar:function(e,n){if(t.projects&&t.projects.length>0&&_.each(t.projects,function(t){if(t.admins&&t.admins.length>0){var i=_.findWhere(t.admins,{uid:e});i&&(i.avatar=n)}}),t.project&&t.project.members&&t.project.members.length>0){var i=_.findWhere(t.project.members,{uid:e});i&&(i.avatar=n),t.project.tasks&&t.project.tasks.length>0&&_.each(t.project.tasks,function(t){if(t.members&&t.members.length>0){var i=_.findWhere(t.members,{uid:e});i&&(i.avatar=n)}})}t.global.me.avatar=n},update:function(e,n,i){if(t.project&&t.project.members&&t.project.members.length>0){var a=_.findWhere(t.project.members,{uid:e});a&&(a.display_name=n,a.desc=i),t.project.tasks&&t.project.tasks.length>0&&_.each(t.project.tasks,function(t){if(t.members&&t.members.length>0){var a=_.findWhere(t.members,{uid:e});a&&(a.display_name=n,a.desc=i)}})}t.global.me.display_name=n,t.global.me.desc=i},remove:function(e){t.project&&t.project.members&&t.project.members.length>0&&(t.project.members=_.reject(t.project.members,function(t){return t.uid==e}),t.project.tasks&&t.project.tasks.length>0&&(_.each(t.project.tasks,function(n){n.members&&n.members.length>0&&(t.project.members=_.reject(t.project.members,function(t){return t.uid==e}))}),t.$broadcast("socket_message_project_member_remove",{uid:e})))}}},t.load_common_data_in=function(e,n,i){t.load_teams(function(a){t.load_projects(function(t){v(a,t),_.isFunction(e)&&e({teams:a,projects:t})},n,i)},function(){_.isFunction(n)&&n(),_.isFunction(i)&&i()}),t.load_unread_notices(function(){t.global.loaded_notice_count=!0})},t.reload_common_data_in=function(e,n,i){t.teams=[],t.projects=[],t.global.loaded_notice_count=!1,t.load_common_data_in(e,n,i)},t.$on(kzi.constant.event_names.emit_filter_activity_by_type,function(e,n){t.$broadcast(kzi.constant.event_names.filter_activity_by_type,{data:n})}),t.$on(kzi.constant.event_names.emit_filter_watch_by_type,function(e,n){t.$broadcast(kzi.constant.event_names.filter_watch_by_type,{data:n})}),t.$on(kzi.constant.event_names.on_file_add,function(e,n){if(n&&"task"===n.type){var i=_.findWhere(t.project.tasks,{tid:n.file.formData.tid});i?(_.isArray(i.files)?i.files.push(n.file):i.files=[n.file],_.isArray(i.files)&&(i.badges.file_count=i.files.length)):t.$broadcast(kzi.constant.event_names.on_task_badges_file,n)}}),t.$on("$routeChangeStart",function(e,n){t.global.loading_done=null==n.need_load||1==n.need_load?!1:!0,n.is_outter?t.global.is_outter=!0:(t.global.is_outter=!1,n&&n.$$route&&"projects_ctrl"==n.$$route.controller||t.load_common_data_in()),kzi.console.group("RouteChangeï¼?"+i.$$absUrl),kzi.console.time("$routeChange"),kzi.console.log("$routeChangeStart"),n.$$route&&(t.global.header_menu=n.$$route.header_menu,t.global.project_iconmenu=n.$$route.project_iconmenu?n.$$route.project_iconmenu:"task"),t.global.is_login||n.is_outter===!0?n.is_outter===!0:/^\/signin/g.test(i.$$path)||(p.location.href="/signin?return_url="+i.$$path)}),t.$on("$routeChangeSuccess",function(){t.global.is_outter!==!0&&t.locator.show_slide===!0&&t.locator.hide_slide(),kzi.console.timeEnd("$routeChange"),kzi.console.log("$routeChangeSuccess"),kzi.console.groupEnd("RouteChangeï¼?"+i.$$absUrl)}),t.$on("$routeChangeError",function(){kzi.console.timeEnd("$routeChange"),kzi.console.log("$routeChangeError"),kzi.console.groupEnd("RouteChangeï¼?"+i.$$absUrl)}),t.$on("$routeUpdate",function(){kzi.console.timeEnd("$routeChange"),kzi.console.log("$routeUpdate"),kzi.console.groupEnd("RouteChangeï¼?"+i.$$absUrl)}),t.$on("$locationChangeSuccess",function(){t.actualLocation=i.path()}),c.on("message:notice_new",function(e){t.notice_count++,t.$broadcast(kzi.constant.event_names.notice_new,e.notice);var n=kzi.localData.get(kzi.config.desk_notify_key);if(1==n&&e&&e.notice){var i=e.notice;if("task_assign"==i.template)window.DesktopNotify.wt_show("/img/wt-logo.png","æ°ä»»å?",i.sender.display_name+" ç»ä½ åéäºæ°çä»»å? "+i.data.entity.name,function(){t.locator.to_task(i.filter.prj,i.data.entity.eid,!1)});else if("task_complete"==i.template)window.DesktopNotify.wt_show("/img/wt-logo.png","ä»»å¡å®æ",i.sender.display_name+" å®æäºä»»å? "+i.data.entity.name,function(){t.locator.to_task(i.filter.prj,i.data.entity.eid,!1)});else if("metion_at_comment"==i.template){var a="";"task"==i.data.target.etype?(a="ä»»å¡",window.DesktopNotify.wt_show("/img/wt-logo.png","æå°ä½?",i.sender.display_name+" å?"+a+i.data.target.name+" æå°ä½? "+i.data.entity.name,function(){t.locator.to_task(i.filter.prj,i.data.target.eid,!1)})):"file"==i.data.target.etype?(a="æä»¶",window.DesktopNotify.wt_show("/img/wt-logo.png","æå°ä½?",i.sender.display_name+" å?"+a+i.data.target.name+" æå°ä½? "+i.data.entity.name,function(){t.locator.to_file(i.filter.prj,i.data.target.eid,!1)})):"post"==i.data.target.etype?(a="è¯é¢",window.DesktopNotify.wt_show("/img/wt-logo.png","æå°ä½?",i.sender.display_name+" å?"+a+i.data.target.name+" æå°ä½? "+i.data.entity.name,function(){t.locator.to_post(i.filter.prj,i.data.target.eid,!1)})):"page"==i.data.target.etype?(a="ææ¡£",window.DesktopNotify.wt_show("/img/wt-logo.png","æå°ä½?",i.sender.display_name+" å?"+a+i.data.target.name+" æå°ä½? "+i.data.entity.name,function(){t.locator.to_page(i.filter.prj,i.data.target.eid,!1)})):"event"==i.data.target.etype&&(a="äºä»¶")}}});var b=function(e,n){if(n&&!e){var i=_.findWhere(t.projects,{pid:n});i&&(e=i.team_id)}e&&t.$broadcast("socket_message_team_projects",{team_id:e,pid:n})};c.on("message:project_list",function(n){n.uid!=t.global.me.uid&&(b(n.team_id,n.pid),e.data.project.get_all("active",function(e){t.projects=e.data,t.sort_projects(),t.$broadcast("socket_message_project_list",null)}))}),c.on("message:project_single",function(n){var i=_.findWhere(t.projects,{pid:n.pid});(i||t.project&&n.pid===t.project.info.pid)&&n.uid!==t.global.me.uid&&e.data.project.get(n.pid,function(e){t.project&&n.pid===t.project.info.pid&&(t.project.info=e.data.info,b(t.project.info.team_id,n.pid)),i&&(i.name=e.data.info.name,i.desc=e.data.info.desc,i.archived=e.data.info.archived,i.pic=e.data.info.pic,i.bg=e.data.info.bg,i.curr_role=e.data.info.curr_role,b(n.team_id,n.pid))})}),c.on("message:project_members",function(n){t.project&&n.pid==t.project.info.pid&&n.uid!=t.global.me.uid&&(t.project.members=null,e.data.project.get_members(n.pid,function(e){var n=e.data;t.project.members=n}))}),c.on("message:member_single",function(e){if(e){var n=_.findWhere(t.project.members,{uid:e.uid});n&&(n.online=e.state)}}),c.on("message:entry_list",function(e){t.project&&e.pid==t.project.info.pid&&e.uid!=t.global.me.uid&&t.reload_entries(e.pid)}),c.on("message:task_single",function(n){if(t.project&&n.pid==t.project.info.pid&&n.uid!=t.global.me.uid){var i=_.findWhere(t.project.tasks,{tid:n.tid});i?e.data.task.get(n.pid,n.tid,function(e){if(i.name=e.data.name,i.desc=e.data.desc,i.pos=e.data.pos,i.completed=e.data.completed,i.expire_date=e.data.expire_date,i.badges=e.data.badges,i.labels=e.data.labels,i.members=e.data.members,i.watchers=e.data.watchers,i.todos=e.data.todos,n.moved){var a=i.entry_id;i.entry_id=e.data.entry_id,t.$broadcast("socket_message_task_move",{from_entry_id:a,task:e.data})}}):e.data.task.get(n.pid,n.tid,function(e){var i=e.data,a=_.findWhere(t.project.tasks,{tid:n.tid});a||t.project.tasks.push(i),t.$broadcast("socket_message_task_add",{task:i})})}}),c.on("message:task_delete",function(e){t.project&&e.pid==t.project.info.pid&&e.uid!=t.global.me.uid&&(t.project.tasks=_.reject(t.project.tasks,function(t){return t.tid==e.tid}),t.$broadcast("socket_message_task_delete",{tid:e.tid}))}),c.on("chat",function(n){t.project&&t.project.info&&t.project.init_chat&&t.project.info.pid==n.to&&(n.from===t.global.me.uid?(n.from=t.global.me,n.is_me=!0):t.load_project_members(n.to,function(e){n.from=_.findWhere(e.members,{uid:n.from}),n.is_me=!1}),e.bus.chat.set_message_for_file(n,n.to),t.project.init_chat.messages.push(n),t.$broadcast("socket_chat",n))}),function(t){e.socket=t.connect(kzi.config.socket_url());var n=null;p.onblur=function(){n=setTimeout(function(){e.socket.emit("leave")},9e5)},p.onfocus=function(){e.socket.socket.connecting,e.socket.emit("online"),clearTimeout(n)}}(io),Heyoffline!==void 0&&new Heyoffline({text:{title:"æçº¿äº??",content:"è¯·ç¡®è®¤ç½ç»æ¯å¦è¿é?,å¦åä¼é æå½åå·¥ä½ä¸¢å¤±.",button:"å¥½ç,æç¥éäº."}}),p.onbeforeunload=function(){return $("#global_file_upload").scope().queue.length>0?"æ¨çä¸ä¼ éåä¸­è¿ææä»¶ï¼éåºè¯¥é¡µé¢å°ä¸¢å¤±ä¸ä¼ è¿åº¦ã?":void 0};var y=function(){return h===!0?(m.close(),void 0):(h=!0,m=u.dialog({backdrop:!0,keyboard:!0,backdropClick:!0,templateUrl:"/ycjs/tpl/common/shortcutkey_dialog.html",controller:["$scope",function(e){var t=d.pid;e.pid=_.isEmpty(t)?"all":t}]}),m.open().then(function(){h=!1}),void 0)};t.js_shortcut_key_dialog=function(){y()},t.js_shift_cutover=function(e){var n=d.pid;_.isEmpty(n)||t.global.is_outter===!0||h!==!0&&(e===kzi.constant.keyASCIIs.T?i.path("project/"+n+"/task"):e===kzi.constant.keyASCIIs.C?i.path("project/"+n+"/post"):e===kzi.constant.keyASCIIs.F?i.path("project/"+n+"/file"):e===kzi.constant.keyASCIIs.D?i.path("project/"+n+"/page"):e===kzi.constant.keyASCIIs.A?i.path("project/"+n+"/activity"):e===kzi.constant.keyASCIIs.E?i.path("project/"+n+"/event"):e===kzi.constant.keyASCIIs.R?i.path("project/"+n+"/trash"):e===kzi.constant.keyASCIIs.G&&i.path("project/"+n+"/graph"))},t.js_shortcut_key=function(e){t.global.is_outter!==!0&&((e===kzi.constant.keyASCIIs.QuestionMark||e===kzi.constant.keyASCIIs.Slash)&&y(),h!==!0&&(e===kzi.constant.keyASCIIs.E?t.$broadcast(kzi.constant.event_names.shortcut_key_to_edit):e===kzi.constant.keyASCIIs.ESC?(t.global.show_slide_menu===!0&&(t.global.show_slide_menu=!1),t.$broadcast(kzi.constant.event_names.shortcut_key_to_cancel)):e===kzi.constant.keyASCIIs.Key96&&t.$broadcast(kzi.constant.event_names.shortcut_key_left_menu_toggle,null),$.inArray(e,kzi.constant.entry_shortcut_keys)>-1&&t.$broadcast(kzi.constant.event_names.shortcut_key_to_task,e)))},$("body").bind("drop dragover",function(e){e.preventDefault()}),$(p).bind("blur.dragfile",function(){$(".dragfile-hover").removeClass("dragfile-hover")}),kzi.localData.remove("wooho_show_version"),kzi.config.wohoo_show_version>kzi.localData.get("wohoo_show_version")?(t.global.wohoo_show=!0,f(function(){$(".wohoo-inner").addClass("in")},2e3)):t.global.wohoo_show=!1;var w=["right_click_trigger","entry_header"];document.oncontextmenu=function(e){e=e||window.event;var n=!0;return _.each(w,function(i){($(e.target).hasClass(i)||$(e.target).parents("."+i).length>0)&&(t.$broadcast(kzi.constant.event_names.on_right_menu,e),n=!1)}),n},$(document).bind("selectstart",function(e){var t=!0;return _.each(w,function(n){($(e.target).hasClass(n)||$(e.target).parents("."+n).length>0)&&(t=!1)}),t})}])},initOuterApp=function(){"use strict";var e=window.wt||{};e.version="2.0";var t=["ngRoute","ngSanitize","wt.directive.tpls","wt.header_controller","wt.invite_controller","wt.index_controller","wt.user_controller","wt.home_controller","wt.fileupload_controller","wt.blog_controller","wt.service","wt.bus","wt.directive","wt.directive.avatar","wt.directive.task","wt.directive.badges","wt.directive.markdown","wt.directive.notice","wt.directive.feed","wt.directive.uploadfile","wt.directive.activity","wt.filter","ui.bootstrap","ui.bootstrap.popbox","wt.analytics"];e.ng=angular.module("wt",t).config(["$httpProvider","fileUploadProvider","$sceDelegateProvider",function(e,t,n){delete e.defaults.headers.common["X-Requested-With"],angular.extend(t.defaults,{pasteZone:null,disableImageResize:!0,minFileSize:0,maxFileSize:5e7,acceptFileTypes:/(\.|\/)(gif|jpe?g|png|bmp|wmv|doc|docx|pdf|xlsx|xls|ppt|pptx|txt|zip|rar|xml|html|7zip|key|pages|numbers|ipa|apk|xap|cs|java|rb|py|css|js|cpp|c|h|php|cc|hh|vb|mp3|avi|chm|vsd|rp|psd|cvs|ai|json|7z|tar|swf|wim|bat|sh|wab|vba|ost|msi|log|svg|less|md|bin|obj)$/i,maxNumberOfFiles:100,autoUpload:!0,messages:{maxNumberOfFiles:"è¶è¿æä»¶æå¤§æ°",acceptFileTypes:"æä»¶æ ¼å¼ä¸æ¯æ?",maxFileSize:"æä»¶å¤ªå¤§",minFileSize:"æä»¶å¤ªå°"}}),n.resourceUrlWhitelist([kzi.config.box_url_regex(),kzi.config.wtbox_url,"self"])}]).run(["$rootScope","$location","$route","rest","data","bus","utility","$routeParams","$window",function(t,n,i,a,s,o,r,l,c){e.rest=a,e.data=s,e.bus=o,e.utility=r,t.global={config:kzi.config,title:"",me:e.me,is_login:!_.isUndefined(e.me)&&!_.isEmpty(e.me.uid),loading_done:!1,header_menu:"index",right_isfold:!0,is_outter:!1,show_msg:!1,project_iconmenu:"task",project_sidebar_view:"member",loaded_notice_count:!1},t.returnToSignin=function(){t.global.is_login=!1,/^\/signin/g.test(n.$$path)||(c.location.href="/signin")},t.returnToDashboard=function(){c.location.href="/dashboard"},t.login=function(t,n,i,a,s,o){e.data.signin(t,n,function(e){null!==i&&(c.location.href=i),angular.isFunction(a)&&a(e)},s,o)},t.logout=function(n,i){n||(c.location.href="/"),t.global.is_login&&(delete t.global.me,t.global.is_login=!1,e.data.signout(i))}}])};(function(){function e(){var e=this,n=null,i=null,a=null;e.build_status=function(t){for(var n in t)e[n]=t[n],e[n].type="statusType"},e.getMsgByCode=function(t){var n=e.getStatusByCode(t);return null!=n&&null!=n.msg?n.msg:"æªç¥éè¯¯ï¼éè¯¯ç ï¼["+t+"]ï¼è¯·èç³»ç®¡çåã?"},e.getStatusByCode=function(t){if(null==n){n={};for(var i=e.getStatuses(),a=0;i.length>a;a++){var s=i[a];if(null!=n[s.code])throw new Error("æéå¤çCode("+s.code+").");n[s.code]=s}}return n[t]},e.getStatuses=function(){if(null==a){a=[],i=e.getStatusTypes();for(var n=0;i.length>n;n++){var s=i[n];for(var o in s){var r=s[o];r.hasOwnProperty("code")&&"object"==typeof r&&null!=r.code&&a.push(new t(r.code,r.msg))}}}return a},e.getStatusTypes=function(){if(null==i){i=[];for(var e in this){var t=this[e];this.hasOwnProperty(e)&&e.length>0&&"_"!=e[0]&&"object"==typeof t&&"statusType"===t.type&&i.push(t)}}return i}}function t(e,t){this.code=e,this.msg=t,this.toString=function(){return this.code}}kzi.statuses=new e,kzi.statuses.ok=200,kzi.statuses.invalid_input=401,kzi.statuses.not_found=404,kzi.statuses.build_status({error:{sig:{code:1001,msg:"éè¯¯çç­¾å?"},ver:{code:1002,msg:"éè¯¯çæ¥å£çæ¬å·"},err_client_ver:{code:1003,msg:"éè¯¯çæ¥å£çæ¬å·"},invalid_token:{code:1004,msg:"æ æçè®¿é®ä»¤ç?"},permission_deny:{code:1005,msg:"æ æéè®¿é?"},server_error:{code:500,msg:"æå¡ç«¯éè¯?"},unknown:{code:404,msg:"æ¾ä¸å°èµæº?"}},user_error:{not_found:{code:2001,msg:"ç¨æ·ä¸å­å?"},invalid_user:{code:2002,msg:"éè¯¯çç¨æ?"},login_err:{code:2003,msg:"ç¨æ·ç»å½çæ¶ååºç°å¼å¸?"},invalid_userinfo:{code:2004,msg:"ç¨æ·ç»å½å¤±è´¥ï¼ç¨æ·åæå¯ç é"},not_login:{code:2005,msg:"æ²¡æç»é,æ æéè®¿é?"},signup_error:{code:2006,msg:"ç»å½éè¯¯"},get_user_error:{code:2007,msg:"è·åç¨æ·éè¯¯"},search_user_error:{code:2008,msg:"æç´¢ç¨æ·éè¯¯"},update_user_error:{code:2009,msg:"æ´æ°ç¨æ·éè¯¯"},update_avatar_error:{code:2010,msg:"æ´æ°å¤´åéè¯¯"},change_pwd_error:{code:2011,msg:"ä¿®æ¹å¯ç éè¯¯"},check_email_error:{code:2012,msg:"æ£æ¥é®ç®±éè¯?"},check_name_error:{code:2013,msg:"æ£æ¥ç¨æ·åéè¯¯"},invalid_pwd_error:{code:2014,msg:"éªè¯å¯ç éè¯¯"},email_not_exist:{code:2015,msg:"é®ä»¶ä¸å­å?"},forgot_apply_error:{code:2016,msg:"ä¿®æ¹å¿è®°å¯ç éè¯¯"},invalid_token_error:{code:2017,msg:"æ æçèº«ä»?"},prefs_get_error:{code:2018,msg:"è·åä¸ªæ§åè®¾ç½®éè¯¯"},prefs_set_error:{code:2019,msg:"è®¾ç½®ä¸ªæ§åè®¾ç½®éè¯¯"},invalid_name_error:{code:2020,msg:"ç¨æ·åæ æ?"},email_has_exist:{code:2021,msg:"é®ç®±å°åå·²ç»å­å¨"},name_has_exist:{code:2022,msg:"ç¨æ·åå·²ç»å­å?"},change_email_error:{code:2023,msg:"ä¿®æ¹é®ç®±å°åå¤±è´¥"},email_match_error:{code:2024,msg:"é®ç®±å°åå¹éå¤±è´¥"},get_secret_error:{code:2025,msg:"è·åéªè¯å¯é¥å¤±è´¥"},enable_twofactor_error:{code:2026,msg:"å¯å¨éªè¯å¤±è´¥"},disable_twofactor_error:{code:2027,msg:"ç¦ç¨éªè¯å¤±è´¥"},twofactor_match_error:{code:2028,msg:"éªè¯å¹ééè¯¯"},recovery_match_error:{code:2029,msg:"éªè¯å¹ééè¯¯"}},team_error:{not_found:{code:4001,msg:"å¢éä¸å­å?"},invalid_team:{code:4002,msg:"éè¯¯çç¨æ?"},user_team_error:{code:4003,msg:"ç¨æ·å¢ééè¯¯"},create_team_error:{code:4004,msg:"åå»ºå¢ééè¯¯"},update_team_error:{code:4005,msg:"å¢éæ´æ°éè¯¯"},del_team_error:{code:4006,msg:"å é¤å¢ééè¯¯"},member_add_error:{code:4007,msg:"æ·»å ä¼åéè¯¯"},member_get_error:{code:4008,msg:"è·åä¼åéè¯¯"},member_remove_error:{code:4009,msg:"ç§»é¤ä¼åéè¯¯"},member_role_error:{code:4010,msg:"ä¼åè§è²éè¯¯"},member_group_error:{code:4011,msg:"ä¼ååç»éè¯¯"},group_add_error:{code:4012,msg:"æ·»å å¢éæååç»éè¯¯"},group_remove_error:{code:4013,msg:"ç§»é¤å¢éæååç»éè¯¯"},group_update_error:{code:4014,msg:"æ´æ°å¢éæååç»éè¯¯"},group_get_error:{code:4015,msg:"è·åå¢éæååç»éè¯¯"},trans_team_error:{code:4016,msg:"è½¬æ¢å¢ééè¯¯"},get_team_error:{code:4017,msg:"è·åå¢ééè¯¯"},update_logo_error:{code:4018,msg:"æ´æ°å¢élogoéè¯¯"},set_current_error:{code:4019,msg:"è®¾ç½®å½åå¢éæ­£ç¡®"},member_invite_error:{code:4020,msg:"éè¯·æåéè¯?"},member_uninvite_error:{code:4021,msg:"åæ¶éè¯·æåéè¯?"},member_projects_error:{code:4022,msg:"è·åæåé¡¹ç®éè¯¯"}},prj_error:{not_found:{code:5001,msg:"é¡¹ç®ä¸å­å?"},invalid_prj:{code:5002,msg:"éè¯¯çé¡¹ç?"},user_prj_error:{code:5003,msg:"ç¨æ·é¡¹ç®éè¯¯"},create_prj_error:{code:5004,msg:"åå»ºé¡¹ç®éè¯¯"},prj_name_exist:{code:5005,msg:"åä¸å¢éä¸çé¡¹ç®åéå¤?"},prj_activity_error:{code:5006,msg:"è·åé¡¹ç®æ´»å¨éè¯¯"},update_prj_error:{code:5007,msg:"é¡¹ç®æ´æ°éè¯¯"},update_prj_pic_error:{code:5008,msg:"é¡¹ç®å°é¢æ´æ°éè¯¯"},remove_only_admin_error:{code:5009,msg:"åªæä¸ä¸ªç®¡çåç¨æ·ï¼ä¸åè®¸ä»é¡¹ç®ç§»é¤æåã?"},add_member_error:{code:5010,msg:"æ·»å é¡¹ç®æåéè¯¯"},remove_member_error:{code:5011,msg:"ç§»é¤é¡¹ç®æåéè¯¯"},close_prj_error:{code:5012,msg:"å³é­é¡¹ç®å¤±è´¥"}},entry_error:{not_found:{code:6001,msg:"åè¡¨ä¸å­å?"},invalid_entry:{code:6002,msg:"éè¯¯çåè¡?"},create_entry_error:{code:6003,msg:"åå»ºåè¡¨éè¯¯"},update_entry_error:{code:6004,msg:"åè¡¨æ´æ°éè¯¯"},get_entry_error:{code:6005,msg:"è·ååè¡¨éè¯¯"},trash_entry_error:{code:6006,msg:"åæ¶åè¡¨éè¯¯"},del_entry_error:{code:6007,msg:"å é¤åè¡¨éè¯¯"},archive_entry_error:{code:6008,msg:"åè¡¨å­æ¡£éè¯¯"},pos_entry_error:{code:6009,msg:"è¿ååè¡¨éè¯¯"}},task_error:{not_found:{code:7001,msg:"ä»»å¡ä¸å­å?"},invalid_task:{code:7002,msg:"éè¯¯çä»»å?"},create_task_error:{code:7003,msg:"åå»ºä»»å¡éè¯¯"},update_task_error:{code:7004,msg:"ä»»å¡æ´æ°éè¯¯"},task_activity_error:{code:7005,msg:"è·åä»»å¡æ´»å¨éè¯¯"},task_add_user_error:{code:7006,msg:"æ·»å ä»»å¡æåéè¯¯"},get_task_list_error:{code:7007,msg:"è·åä»»å¡éè¯¯"},get_task_items_error:{code:7008,msg:"å è½½ä»»å¡æ¡ç®åè¡¨å¤±è´¥"},get_task_attachments_error:{code:7009,msg:"å è½½ä»»å¡æ¡ç®éä»¶å¤±è´¥"},task_del_user_error:{code:7010,msg:"ç§»é¤ä»»å¡æåå¤±è´¥"},add_task_item_error:{code:7011,msg:"æ·»å ä»»å¡æ¡ç®å¤±è´¥"},change_task_item_status_error:{code:7012,msg:"ä¿®æ¹ä»»å¡æ¡ç®ç¶æå¤±è´?"},del_task_item_error:{code:7013,msg:"ç§»é¤ä»»å¡æ¡ç®å¤±è´¥"},update_task_item_error:{code:7014,msg:"æ´æ°ä»»å¡æ¡ç®å¤±è´¥"},del_comment_error:{code:7015,msg:"å é¤è¯è®ºå¤±è´¥"},update_task_tag_error:{code:7016,msg:"å®ä¹ä»»å¡æ ç­¾å¤±è´¥"},todo_update_error:{code:7017,msg:"æ´æ°TODOéè¯¯"},todo_checked_error:{code:7018,msg:"å®ææ£æ¥é¡¹éè¯¯"},todo_unchecked_error:{code:7019,msg:"è®¾ç½®æ£æ¥é¡¹éè¯¯"},todo_position_error:{code:7020,msg:"todo_position_error"},watcher_add_error:{code:7021,msg:"watcher_add_error"},watcher_remove_error:{code:7022,msg:"watcher_remove_error"},get_tasks_forme_error:{code:7033,msg:"è·åæçä»»å¡éè¯¯"}},file_error:{not_found:{code:8001,msg:"æ¾ä¸å°æä»?"},invalid_file:{code:8002,msg:"æä»¶æ æ"},create_file_error:{code:8003,msg:"åå»ºæä»¶éè¯¯"},update_file_error:{code:8004,msg:"ä¸æ¬¡æä»¶éè¯¯"},trash_file_error:{code:8005,msg:"åæ¶æä»¶éè¯¯"},del_file_error:{code:8006,msg:"å é¤æä»¶éè¯¯"},get_file_error:{code:8007,msg:"è·åæä»¶éè¯¯"},get_list_error:{code:8008,msg:"è·åæä»¶åè¡¨éè¯¯"},version_new_error:{code:8009,msg:"ä¸æ¬¡æ°çæ¬éè¯?"},version_get_error:{code:8010,msg:"è·åæ°çæ¬éè¯?"},get_attach_error:{code:8011,msg:"è·åéä»¶éè¯¯"},attach_file_error:{code:8012,msg:"å³èéä»¶éè¯¯"},detach_file_error:{code:8013,msg:"åæ¶éä»¶å³èéè¯¯"},get_targets_error:{code:8014,msg:"è·åæ ç­¾éè¯¯"},generate_thumbnail_error:{code:8308,msg:"è·åæ ç­¾éè¯¯"}},comment_error:{not_found:{code:20001,msg:"æ¾ä¸å°è¯è®?"},add_error:{code:20002,msg:"æ·»å è¯è®ºéè¯¯"},update_error:{code:20003,msg:"æ´æ°è¯è®ºéè¯¯"},delete_error:{code:20004,msg:"å é¤è¯è®ºéè¯¯"},get_error:{code:20005,msg:"è·åè¯è®ºéè¯¯"}},watch_error:{not_found:{code:21001,msg:"æ¾ä¸å°å³æ³?"},add_error:{code:21002,msg:"æ·»å å³æ³¨éè¯¯"},remove_error:{code:21003,msg:"ç§»é¤å³æ³¨éè¯¯"},get_watcher_error:{code:21004,msg:"è·åå³æ³¨éè¯¯"},get_watch_forme_error:{code:21005,msg:"ç§»é¤å³æ³¨éè¯¯"}},post_error:{not_found:{code:9001,msg:"è¯é¢ä¸å­å?"}},page_error:{not_found:{code:10001,msg:"ææ¡£ä¸å­å?"}},upload_error:{upload_error:{code:22001,msg:"ä¸ä¼ éè¯¯"}},notice_error:{get_unread_error:{code:23001,msg:"è·åæªè¯»éç¥éè¯¯"},get_list_error:{code:23002,msg:"è·åéç¥åè¡¨éè¯¯"},set_all_read_error:{code:23003,msg:"è®¾ç½®éç¥å·²è¯»éè¯¯"}},activity_error:{get_list_error:{code:24001,msg:"è·åæ´»å¨åè¡¨éè¯¯"}},invite_error:{invalid_invite_code:{code:25001,msg:"éè¯·éè¯?"},accept_invite_code:{code:25002,msg:"æ¥åéè¯·éè¯?"},join_invite_code:{code:25003,msg:"è¡¥åèµæå¹¶æ¥åéè¯·éè¯?"},refuse_invite_code:{code:25004,msg:"æç»éè¯·éè¯?"},get_invite_code:{code:25005,msg:"è·åéè¯·ç éè¯¯"},get_new_invite_code:{code:25006,msg:"è·åææ°éè¯·ç éè¯¯"}},others:{invalid_input:{code:401,msg:"è¾å¥æ ¼å¼ä¸æ­£ç¡?"}}})})(),function(){"use strict";kzi.constant=kzi.constant||{},kzi.constant.operation={add:1,update:2,remove:3},kzi.constant.get_role_name=function(e){switch(e){case kzi.constant.role.admin:return"ç®¡çå?";case kzi.constant.role.member:return"æ®éæå?";case kzi.constant.role.visitor:return"è®¿é®è?";default:return"æ²¡æè¯¥è§è?"}},kzi.constant.get_member_roles=function(){return[{role:kzi.constant.role.admin,name:"ç®¡çå?"},{role:kzi.constant.role.member,name:"æå"}]},kzi.constant.event_names={emit_filter_activity_by_type:"emit_filter_activities_by_type",filter_activity_by_type:"filter_activities_by_type",filter_activity_by_prj:"filter_activities_by_prj",reload_item_activities:"reload_item_activities",emit_filter_watch_by_type:"emit_filter_watch_by_type",filter_watch_by_type:"filter_watch_by_type",filter_posts_by_sort:"filter_posts_by_sort",post_comment_add:"post_comment_add",shortcut_key_to_edit:"shortcut_key_to_edit",shortcut_key_to_cancel:"shortcut_key_to_cancel",shortcut_key_to_task:"shortcut_key_to_task",shortcut_key_left_menu_toggle:"shortcut_key_left_menu_toggle",load_entity_task:"load_entity_task",load_entity_event:"load_entity_event",load_entity_post:"load_entity_post",load_entity_file:"load_entity_file",load_entity_page:"load_entity_page",load_comments:"load_comments",load_teams_projects_sucess:"load_teams_projects_sucess",notice_new:"notice_new",load_prj_feed:"load_prj_feed",on_task_trash:"on_task_trash",on_task_complete:"on_task_complete",on_task_move:"on_task_move",on_task_update:"on_task_update",on_task_comment:"on_task_comment",on_task_badges_file:"on_task_badges_file",on_event_update:"on_event_update",on_event_trash:"on_event_trash",on_file_add:"on_file_add",on_file_trash:"on_file_trash",on_file_move:"on_file_move",on_file_update:"on_file_update",on_post_trash:"on_post_trash",on_post_comment:"on_post_comment",on_post_update:"on_post_update",on_slide_hide:"on_slide_hide",on_right_menu:"on_right_menu"},kzi.constant.shift_cutover_keys=[84,67,70,68,65,69,82,71],kzi.constant.global_shortcut_keys=[63,69,27,47,96],kzi.constant.entry_shortcut_keys=[37,38,39,40,13,67,27,68,76,77,32,87,60,62,74,75,73,78],kzi.constant.keyASCIIs={T:84,C:67,F:70,D:68,A:65,E:69,G:71,R:82,L:76,M:77,W:87,At:64,ESC:27,Slash:47,I:73,J:74,K:75,N:78,Key96:96,QuestionMark:63,VK_LEFT:37,VK_UP:38,VK_RIGHT:39,VK_DOWN:40,VK_RETURN:13,VK_SPACE:32,VK_LessThan:60,VK_GreaterThan:62,ENTER:13},kzi.constant.all_hour_sections=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],kzi.constant.all_minute_sections=["00","10","20","30","40","50"],kzi.constant.mail={domain:"@mail.worktile.com"},kzi.constant.role={admin:1,member:2,guest:3},kzi.constant.status={ok:1,pending:2},kzi.constant.trash={no:0,yes:1},kzi.constant.archived={yes:1,no:0},kzi.constant.star={yes:1,no:0},kzi.constant.completed={yes:1,no:0},kzi.constant.checked={yes:1,no:0},kzi.constant.notify={yes:1,no:0},kzi.constant.entity_type={task:"task",file:"file",post:"post",page:"page",event:"event"},kzi.constant.notice_type_icon={task:{name:"task",icon:"icon-check"},file:{name:"file",icon:"icon-file"},post:{name:"post",icon:"icon-list-alt"},page:{name:"page",icon:"icon-file-text-alt"},event:{name:"event",icon:"icon-calendar"},project:{name:"project",icon:"icon-inbox"},comment:{name:null,icon:"icon-comment-alt"}},kzi.constant.feed_type_icon={task:{name:"task",icon:"icon-check"},event:{name:"event",icon:"icon-calendar"},file:{name:"file",icon:"icon-file"},post:{name:"post",icon:"icon-list-alt"},page:{name:"page",icon:"icon-file-text-alt"},completed:{name:"task",icon:"icon-check"},comment:{name:null,icon:"icon-comment-alt"}},kzi.constant.notice_types={all:"all",assign:"assign",complete:"complete",metion:"metion",watch:"watch",comment:"comment",other:"other"},kzi.constant.get_notice_types=function(){return[{type:kzi.constant.notice_types.all,name:"å¨é¨æ¶æ¯",icon_class:"icon-bell"},{type:kzi.constant.notice_types.assign,name:"åéä»»å¡",icon_class:"icon-user"},{type:kzi.constant.notice_types.complete,name:"å®æä»»å¡",icon_class:"icon-check-sign"},{type:kzi.constant.notice_types.metion,name:"æå°æç",icon_class:"icon-quote-left"},{type:kzi.constant.notice_types.watch,name:"æéå³æ³¨",icon_class:"icon-eye-open"},{type:kzi.constant.notice_types.comment,name:"è¯è®º",icon_class:"icon-comment-alt"},{type:kzi.constant.notice_types.other,name:"æ´å¤",icon_class:"icon-ellipsis-horizontal"}]},kzi.constant.xtype={task:"tasks",file:"files",post:"posts",page:"pages",event:"events"},kzi.constant.exts={none:0,txt:1,png:2,jpeg:3,jpg:4,gif:5,doc:6,xls:7,ppt:8,pdf:9,zip:10,rar:11,xml:12,html:13,docx:14,xlsx:15,pptx:16,mail:17,pages:18,key:19,numbers:20,ipa:21,apk:22,xap:23,cs:24,java:25,rb:26,py:27,css:28,js:29,cpp:30,c:31,h:32,php:33,cc:34,hh:35,vb:36,mp3:37,avi:38,chm:39,vsd:40,rp:41,wmv:42,bmp:43,psd:44,cvs:45,ai:46,json:47,"7z":48,tar:49,swf:50,wim:51,bat:52,sh:53,wab:54,vba:55,ost:56,msi:57,log:58,svg:59,less:60,md:61,bin:62,obj:63,edx:64,mmap:65,thmx:66,dump:67,one:68,pst:69,vcf:70,ini:71,csv:72,wps:73,et:74,dps:75,pfx:76},kzi.constant.permission={holder:0,ok:1,project_archived:4,entity_not_found:8,entity_deleted:16,entity_archived:32,team_not_found:64,team_stop_service:128},kzi.constant.get_ext=function(e){return kzi.constant.exts[e.toLowerCase()]?kzi.constant.exts[e.toLowerCase()]:0},kzi.constant.image_exts=[2,3,4,5,43],kzi.constant.get_file_icon=function(e){if(1===e.type)switch(e.ext){case 1:return"res/icon/icon-folder-green.png";case 2:return"res/icon/icon-folder-orange.png";case 3:return"res/icon/icon-folder-purple.png";case 4:return"res/icon/icon-folder-red.png";case 8:return"res/icon/icon-folder-blue.png";default:return"res/icon/icon-folder-yellow.png"}else switch(e.ext){case 1:return"res/icon/icon-txt.png";case 2:return"-1";case 3:return"-1";case 4:return"-1";case 5:return"-1";case 6:return"res/icon/icon-word.png";case 7:return"res/icon/icon-excel.png";case 8:return"res/icon/icon-ppt.png";case 9:return"res/icon/icon-pdf.png";case 10:return"res/icon/icon-zip.png";case 11:return"res/icon/icon-rar.png";case 12:return"res/icon/icon-xml.png";case 13:return"res/icon/icon-html.png";case 14:return"res/icon/icon-word.png";case 15:return"res/icon/icon-excel.png";case 16:return"res/icon/icon-ppt.png";case 17:return"res/icon/icon-mail.png";case 18:return"res/icon/icon-pages.png";case 19:return"res/icon/icon-keynote.png";case 20:return"res/icon/icon-numbers.png";case 21:return"res/icon/icon-ipa.png";case 22:return"res/icon/icon-apk.png";case 23:return"res/icon/icon-xap.png";case 24:return"res/icon/icon-csharp.png";case 25:return"res/icon/icon-java.png";case 26:return"res/icon/icon-ruby.png";case 27:return"res/icon/icon-python.png";case 28:return"res/icon/icon-css.png";case 29:return"res/icon/icon-js.png";case 30:return"res/icon/icon-cpp.png";case 31:return"res/icon/icon-c.png";case 32:return"res/icon/icon-h.png";case 33:return"res/icon/icon-php.png";case 34:return"res/icon/icon-c.png";case 35:return"res/icon/icon-h.png";case 36:return"res/icon/icon-vb.png";case 37:return"res/icon/icon-mp3.png";case 38:return"res/icon/icon-avi.png";case 39:return"res/icon/icon-chm.png";case 40:return"res/icon/icon-visio.png";case 41:return"res/icon/icon-rp.png";case 42:return"res/icon/icon-wmv.png";case 43:return"-1";case 44:return"res/icon/icon-psd.png";case 45:return"res/icon/icon-cvs.png";case 46:return"res/icon/icon-ai.png";case 47:return"res/icon/icon-json.png";case 48:return"res/icon/icon-7z.png";case 49:return"res/icon/icon-tar.png";case 50:return"res/icon/icon-swf.png";case 51:return"res/icon/icon-wim.png";case 52:return"res/icon/icon-bat.png";case 53:return"res/icon/icon-sh.png";case 54:return"res/icon/icon-wab.png";case 55:return"res/icon/icon-vba.png";case 56:return"res/icon/icon-ost.png";case 57:return"res/icon/icon-msi.png";case 58:return"res/icon/icon-log.png";case 59:return"res/icon/icon-svg.png";case 60:return"res/icon/icon-less.png";case 61:return"res/icon/icon-md.png";case 62:return"res/icon/icon-bin.png";case 63:return"res/icon/icon-obj.png";case 64:return"res/icon/icon-edx.png";case 65:return"res/icon/icon-mmap.png";case 66:return"res/icon/icon-thmx.png";case 67:return"res/icon/icon-dump.png";case 68:return"res/icon/icon-one.png";case 69:return"res/icon/icon-pst.png";case 70:return"res/icon/icon-vcf.png";case 71:return"res/icon/icon-ini.png";case 72:return"res/icon/icon-csv.png";case 73:return"res/icon/icon-wps.png";case 74:return"res/icon/icon-et.png";case 75:return"res/icon/icon-dps.png";case 76:return"res/icon/icon-pfx.png";default:return"res/icon/icon-file-default.png"}},kzi.constant.get_folder_icons=[{ext:1,path:"res/icon/icon-folder-green.png"},{ext:2,path:"res/icon/icon-folder-orange.png"},{ext:3,path:"res/icon/icon-folder-purple.png"},{ext:4,path:"res/icon/icon-folder-red.png"},{ext:8,path:"res/icon/icon-folder-blue.png"},{ext:0,path:"res/icon/icon-folder-yellow.png"}],kzi.constant.labels=[{name:"green",desc:""},{name:"yellow",desc:""},{name:"orange",desc:""},{name:"red",desc:""},{name:"purple",desc:""},{name:"blue",desc:""}],kzi.constant.verbs={create:"create",update:"update",add:"add",remove:"remove"},kzi.constant.atypes={project:"project",entry:"entry",task:"task",post:"post",page:"page",file:"file",folder:"folder",todo:"todo",vote:"vote"},kzi.constant.file_type={file:0,folder:1},kzi.constant.folder_ext={normal:0,image:1,mail:2},kzi.constant.prj_colors=["#92e1c0","#9fe1e7","#9fc6e7","#4986e7","#9a9cff","#b99aff","#ac725e","#d06b64","#f83a22","#fa573c","#ff7537","#ffad46","#c2c2c2","#cabdbf","#cca6ac","#f691b2","#cd74e6","#a47ae2","#42d692","#16a765","#7bd148","#b3dc6c","#fbe983","#fad165"],kzi.constant.prj_icons=["icon-apple","icon-android","icon-html5","icon-desktop","icon-mobile-phone","icon-tablet","icon-github","icon-dribbble","icon-linux","icon-windows","icon-qrcode","icon-bug","icon-suitcase","icon-beaker","icon-plane","icon-truck","icon-money","icon-book","icon-music","icon-facetime-video","icon-picture","icon-cloud","icon-gift","icon-coffee","icon-heart","icon-flag","icon-bar-chart","icon-lock","icon-gears","icon-fire"],kzi.constant.team={edition:{free:1,business:2,nonprofit:3},status:{normal:1,trial:2,expired:3},quota_free:10,quota_nonprofit:50},kzi.constant.subscription={status:{normal:1,arrears:2,trial:3,expired:4},step:{pay_online:1,already_fee:2,next_fee:3,already_fee_and_next_new:4},price:10,dividing_day:15},kzi.constant.payment={status:{unpaid:1,successed:2,failed:3,cancel:4},method:{unknown:0,online:1,manual:2,remit:3,transfer:4,recharge:5},type:{unknown:0,alipay:1,bank:2,paypal:3,credit:4,cash:5,coupon:6},direction:{payment:1,refund:2},scheme:{one_month:1,one_quarter:3,half_year:6,one_year:12,two_year:24}},kzi.constant.client={unknown:0,web:1,mail:2,iphone:3,ipad:4,android:5,androidHD:6,winphone:7,win8:8,wap:9,weinxin:10}
}();